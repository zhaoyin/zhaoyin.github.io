{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/robots.txt","path":"robots.txt","modified":0,"renderable":0},{"_id":"source/uploads/qrcode.jpg","path":"uploads/qrcode.jpg","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"b48c4f7d61a5928be717d4bd654481ff1eab36ee","modified":1496506896000},{"_id":"source/404.html","hash":"572831ce6ed6bd19488813690e373184428e12da","modified":1497599814000},{"_id":"source/CNAME","hash":"06a42eea9e238a47801d6b7dbcc46e30a78607c1","modified":1496506450000},{"_id":"source/robots.txt","hash":"b776d63476ff69278fc17b05846a5f9158d1aa55","modified":1496506450000},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1496506450000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1496506450000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1496506450000},{"_id":"themes/next/.gitignore","hash":"32ea93f21d8693d5d8fa4eef1c51a21ad0670047","modified":1496506450000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1496506450000},{"_id":"themes/next/.javascript_ignore","hash":"f9ea3c5395f8feb225a24e2c32baa79afda30c16","modified":1496506450000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1496506450000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1496506450000},{"_id":"themes/next/.travis.yml","hash":"c42d9608c8c7fe90de7b1581a8dc3886e90c179e","modified":1496506450000},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1496506450000},{"_id":"themes/next/README.en.md","hash":"4ece25ee5f64447cd522e54cb0fffd9a375f0bd4","modified":1496506450000},{"_id":"themes/next/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1496506450000},{"_id":"themes/next/_config.yml","hash":"b4f45d65cdbc3b263e0cc5d92c9dc92d77f6f43f","modified":1496506450000},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1496506450000},{"_id":"themes/next/bower.json","hash":"be0a430362cb73a7e3cf9ecf51a67edf8214b637","modified":1496506450000},{"_id":"themes/next/package.json","hash":"7e87b2621104b39a30488654c2a8a0c6a563574b","modified":1496506450000},{"_id":"source/categories/index.md","hash":"9a69493300b46a7e341147d7adf28b8251cd4a8c","modified":1496506450000},{"_id":"source/tags/index.md","hash":"032a23fd9beba07605aaf5e49db25bd1a04e1892","modified":1496506450000},{"_id":"source/uploads/404.css","hash":"7c8c03bb643ba2b64b750cfab75c476a9907f191","modified":1497594515000},{"_id":"source/uploads/qrcode.jpg","hash":"6a9098971f5348ac59f45c9b19526b7c1c5ad930","modified":1496506450000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1496506450000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"fdd63b77472612337309eb93ec415a059b90756b","modified":1496506450000},{"_id":"themes/next/languages/de.yml","hash":"306db8c865630f32c6b6260ade9d3209fbec8011","modified":1496506450000},{"_id":"themes/next/languages/default.yml","hash":"4cc6aeb1ac09a58330e494c8771773758ab354af","modified":1496506450000},{"_id":"themes/next/languages/en.yml","hash":"e7def07a709ef55684490b700a06998c67f35f39","modified":1496506450000},{"_id":"themes/next/languages/fr-FR.yml","hash":"24180322c83587a153cea110e74e96eacc3355ad","modified":1496506450000},{"_id":"themes/next/languages/ja.yml","hash":"1c3a05ab80a6f8be63268b66da6f19da7aa2c638","modified":1496506450000},{"_id":"themes/next/languages/id.yml","hash":"2835ea80dadf093fcf47edd957680973f1fb6b85","modified":1496506450000},{"_id":"themes/next/languages/ko.yml","hash":"be150543379150f78329815af427bf152c0e9431","modified":1496506450000},{"_id":"themes/next/languages/pt-BR.yml","hash":"958e49571818a34fdf4af3232a07a024050f8f4e","modified":1496506450000},{"_id":"themes/next/languages/pt.yml","hash":"36c8f60dacbe5d27d84d0e0d6974d7679f928da0","modified":1496506450000},{"_id":"themes/next/languages/ru.yml","hash":"1549a7c2fe23caa7cbedcd0aa2b77c46e57caf27","modified":1496506450000},{"_id":"themes/next/languages/zh-Hans.yml","hash":"3c0c7dfd0256457ee24df9e9879226c58cb084b5","modified":1496506450000},{"_id":"themes/next/languages/zh-hk.yml","hash":"1c917997413bf566cb79e0975789f3c9c9128ccd","modified":1496506450000},{"_id":"themes/next/languages/zh-tw.yml","hash":"0b2c18aa76570364003c8d1cd429fa158ae89022","modified":1496506450000},{"_id":"themes/next/layout/_layout.swig","hash":"b5ea806e283dcc15e9a97b294965a0daa6b09bb5","modified":1496506450000},{"_id":"themes/next/layout/archive.swig","hash":"5de4dca06b05d99e4f6bad617a4b8f4f3592fb01","modified":1496506450000},{"_id":"themes/next/layout/category.swig","hash":"82e7bc278559b4335ad974659104eaaf04863032","modified":1496506450000},{"_id":"themes/next/layout/index.swig","hash":"03e8a2cda03bad42ac0cb827025eb81f95d496a2","modified":1496506450000},{"_id":"themes/next/layout/page.swig","hash":"2c6a78999133b991d9221f484aee2eacae894251","modified":1496506450000},{"_id":"themes/next/layout/post.swig","hash":"2d5f8d7f0a96b611e2d5a5e4d111fc17726a990f","modified":1496506450000},{"_id":"themes/next/layout/schedule.swig","hash":"f93c53f6fd5c712584f6efba6f770c30fa8a3e80","modified":1496506450000},{"_id":"themes/next/layout/tag.swig","hash":"2e73ee478e981092ea9a5d10dd472a9461db395b","modified":1496506450000},{"_id":"themes/next/scripts/merge-configs.js","hash":"13c8b3a2d9fce06c2488820d9248d190c8100e0a","modified":1496506450000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1496506450000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1496506450000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1496506450000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1496506450000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"source/_posts/Spider/Scrapy-Install.md","hash":"5867535ef82f37950466833140a018bf95acd2b6","modified":1496506450000},{"_id":"source/_posts/_secret/_IntelliJ IDEA激活方法.md","hash":"dc710570b8ca90f03bbf5a59ad3377dfaaff83aa","modified":1496506450000},{"_id":"source/_posts/architecture/[转]够了，不要一上来就把微服务说的神乎其神.md","hash":"81815b1ea06532a2045dd4c5f8c615d036f6798d","modified":1496843245000},{"_id":"source/_posts/architecture/系统架构演进.md","hash":"24d4fb69b384849d6c43d0201617f1b878441647","modified":1496506450000},{"_id":"source/_posts/build/CentOS7安装git.md","hash":"6cea035882a9e49cd4d96f79ee05f037482747a0","modified":1496506450000},{"_id":"source/_posts/build/General-SSL-Problem.md","hash":"aee899ec3b459c3547205cc5397e3dbf8746cb0f","modified":1496506450000},{"_id":"source/_posts/build/firewalld防火墙配置.md","hash":"1769e3f6ef4d32726e31dbb95d4aa26ed513c770","modified":1497102360000},{"_id":"source/_posts/build/hexo+travis.md","hash":"685ea1cd9624d9b750a16453a6f32b3b8f5fb1d2","modified":1496506450000},{"_id":"source/_posts/build/jackson反序列化失败.md","hash":"d23aebc62287468a4ee6edeed0d9a2bc434e238e","modified":1496541231000},{"_id":"source/_posts/build/logstash-forwarder安装与配置.md","hash":"0061054fbc49c9f61e4bb57eb44ff06f57fc5b97","modified":1497549594000},{"_id":"source/_posts/build/jetty-maven-plugin-config.md","hash":"70d8741d1eae7bf9669a07c77e9ba009c26f4b2d","modified":1496506450000},{"_id":"source/_posts/build/next主题前端资源CDN加速.md","hash":"5c6403c4dc1559db71e19295321d55eb0dd8bb63","modified":1496506450000},{"_id":"source/_posts/build/全站HTTPS之路.md","hash":"e5d4dbb48775a601f332849b55d864d35eeb9768","modified":1497585183000},{"_id":"source/_posts/build/安装升级Node.js.md","hash":"9aa4319e5c141e7579ee13c2f115517a5bb0f887","modified":1497549994000},{"_id":"source/_posts/language/Java8 Stream操作总结.md","hash":"6db695517fbe006d432455c044a3de5c575edc90","modified":1497369661000},{"_id":"source/_posts/language/JAVA keytool证书工具.md","hash":"c3a101bf8bc7af4c731d4b9f0ac9c8478b8f388f","modified":1496506450000},{"_id":"source/_posts/language/Memcached总结.md","hash":"d1961d4bbbc0b911e78abc0842de9adccce6081b","modified":1497589029000},{"_id":"source/_posts/language/YAML使用.md","hash":"d96eb4a5396071f202f7690b27e63fd6e6d29d82","modified":1497102304000},{"_id":"source/_posts/language/mysql查询事务死锁相关命令.md","hash":"7249cf8b7532c05b1884c3161ca9199278d5c3a4","modified":1497370094000},{"_id":"source/_posts/life/2B和2C站点的区别.md","hash":"14e90153368bb74c0e71134cc773d31f00bba0f9","modified":1496506450000},{"_id":"source/_posts/metadata/领域元数据建模.md","hash":"47e1e503725cea5ac006b0a34bbd21ae509ccf2a","modified":1496506450000},{"_id":"source/_posts/tools/IntelliJ IDEA使用总结.md","hash":"9144ff22121e755e2000e5df5724c51e4bb97a85","modified":1497550337000},{"_id":"source/_posts/tools/IntelliJ IDEA配置play1.md","hash":"c4198668e685332a19210cad52784aacbd05f6ff","modified":1496541208000},{"_id":"source/_posts/tools/Mybatis语法总结.md","hash":"933378f2a665a50e2ef712e2836799cd194d38e3","modified":1497536777000},{"_id":"source/_posts/tools/POI高效操作Excel.md","hash":"0d435df38a871984777afa761f2f74e80faea3f4","modified":1496506450000},{"_id":"source/_posts/tools/Vim常用命令整理.md","hash":"dcbddab9dfd31ad5a4fb9456cc47c35cb00b8d1c","modified":1497600162000},{"_id":"source/_posts/tools/[1]SpringBoot.md","hash":"8e5c64158513ac5ea0d50722c4ccf487976d90e0","modified":1496676471000},{"_id":"source/_posts/tools/转换HQL为原生SQL解决Cross Join问题.md","hash":"c2bfaa6b95e915004991d3ff5e7ded783db88e31","modified":1496506450000},{"_id":"source/_posts/tuning/TCP连接及故障排查.md","hash":"f7d2aa2b941640fe2cafd959cb12e19d8a5852f0","modified":1497356331000},{"_id":"source/_posts/tuning/[1]Mysql优化总结.md","hash":"e0408fbb1f6690dd75d75da76008454a63511236","modified":1496713029000},{"_id":"source/_posts/tuning/[1]jvm参数优化及性能调优.md","hash":"be6b2605544145fae03e017a8399045d68739ae8","modified":1497602676000},{"_id":"source/_posts/tuning/[1]Linux服务器性能评估与优化.md","hash":"3c33ed60543df499f5a24b1ad119f3e60587815f","modified":1497370317000},{"_id":"source/_posts/tuning/快速查找JVM中占用CPU线程排行.md","hash":"c9701a69aecf4a69d76552d4e31569381ec862ec","modified":1497102332000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1496506450000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1496506450000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1496506450000},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"b16fcbf0efd20c018d7545257a8533c497ea7647","modified":1496506450000},{"_id":"themes/next/layout/_macro/post.swig","hash":"6fd50d08a38775e78af8e70a5fef1b1f0cc72fdd","modified":1496506450000},{"_id":"themes/next/layout/_macro/reward.swig","hash":"db18117d02615f7ebc925b028d85b764a8cc5aec","modified":1496506450000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"911b99ba0445b2c07373128d87a4ef2eb7de341a","modified":1496506450000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"14e785adeb0e671ba0ff9a553e6f0d8def6c670c","modified":1496506450000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"1c7d3c975e499b9aa3119d6724b030b7b00fc87e","modified":1496506450000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"7172c6053118b7c291a56a7860128a652ae66b83","modified":1496506450000},{"_id":"themes/next/layout/_partials/head.swig","hash":"2b593eb629320551478de7c3c36ce866b9c2a733","modified":1496506450000},{"_id":"themes/next/layout/_partials/header.swig","hash":"a1ffbb691dfad3eaf2832a11766e58a179003b8b","modified":1496506450000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1496506450000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1496506450000},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1496506450000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1496506450000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1496506450000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9baf90f7c40b3b10f288e9268c3191e895890cea","modified":1496506450000},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1496506450000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1496506450000},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1496506450000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1496506450000},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1496506450000},{"_id":"themes/next/scripts/tags/button.js","hash":"62e6dbeb53d07627a048132c79630b45d9a8f2cc","modified":1496506450000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1496506450000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1496506450000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1496506450000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1496506450000},{"_id":"themes/next/scripts/tags/note.js","hash":"6752925eedbdb939d8ec4d11bdfb75199f18dd70","modified":1496506450000},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1496506450000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1496506450000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1496506450000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1496506450000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1496506450000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1496506450000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1496506450000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1496506450000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1496506450000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1496506450000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1496506450000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1496506450000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1496506450000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1496506450000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1496506450000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1496506450000},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1496506450000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1496506450000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1496506450000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1496506450000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1496506450000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1496506450000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1496506450000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1496506450000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1496506450000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1496506450000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"394d008e5e94575280407ad8a1607a028026cbc3","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"3358d11b9a26185a2d36c96049e4340e701646e4","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"92dc60821307fc9769bea9b2d60adaeb798342af","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1496506450000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/gentie.swig","hash":"03592d1d731592103a41ebb87437fe4b0a4c78ca","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"abb92620197a16ed2c0775edf18a0f044a82256e","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"1d0d01aaeb7bcde3671263d736718f8837c20182","modified":1496506450000},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"af9dd8a4aed7d06cf47b363eebff48850888566c","modified":1496506450000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1496506450000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1496506450000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"1f349aa30dd1f7022f7d07a1f085eea5ace3f26d","modified":1496506450000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1496506450000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1496506450000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"78a83c38f69a8747bb74e420e6c9eeef1ea76525","modified":1496506450000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"715d5b40dc52f319fe4bff0325beb874774d9bd9","modified":1496506450000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1496506450000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"06f432f328a5b8a9ef0dbd5301b002aba600b4ce","modified":1496506450000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"d6a793bcada68d4b6c58392546bc48a482e4a7d3","modified":1496506450000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1496506450000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1496506450000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"aab7be0a6e2724b3faa9338db93c19556c559625","modified":1496506450000},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1496506450000},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1496506450000},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1496506450000},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1496506450000},{"_id":"themes/next/source/js/src/post-details.js","hash":"af7a417dd1cb02465a7b98211653e7c6192e6d55","modified":1496506450000},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1496506450000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1496506450000},{"_id":"themes/next/source/js/src/utils.js","hash":"803f684fa7d0e729115a48851023a31f6fb6d0a7","modified":1496506450000},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1496506450000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1496506450000},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"3587602ad777b031628bb5944864d1a4fcfea4ac","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1496506450000},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1496506450000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1496506450000},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1496506450000},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1496506450000},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1496506450000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1496506450000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1496506450000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"59ad08bcc6fe9793594869ac2b4c525021453e78","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ef089a407c90e58eca10c49bc47ec978f96e03ba","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1496506450000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1496506450000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"7804e31c44717c9a9ddf0f8482b9b9c1a0f74538","modified":1496506450000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1496506450000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1496506450000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1496506450000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"fda14bc35be2e1b332809b55b3d07155a833dbf4","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"82bbaa6322764779a1ac2e2c8390ce901c7972e2","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"e3e23751d4ad24e8714b425d768cf68e37de7ded","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1496506450000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"79da92119bc246fe05d1626ac98426a83ec90a94","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"d9c0b3dc9158e717fde36f554709e6c3a22b5f85","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1496506450000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1496506450000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1496506450000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"38e48f275ad00daa9dcdcb8d9b44e576acda4707","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1496506450000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1496506450000},{"_id":"source/2017/05/20/build/hexo+travis/index.html","hash":"0043e6e9c681686e813626fea81156ff0acb0326","modified":1496506450000},{"_id":"source/2017/05/19/metadata/领域元数据建模/index.html","hash":"12c2654130708bc871a1e06573d2be9ecedd9f81","modified":1496506450000},{"_id":"source/2017/05/20/build/安装升级Node.js/index.html","hash":"ebd420b432f0c5362edf27a130f1e7bf9662a023","modified":1496506450000},{"_id":"source/2017/05/20/tools/POI高效操作Excel/index.html","hash":"e3a5c23740b68eec928a4469070b8a7964abcef9","modified":1496506450000},{"_id":"source/2017/05/20/language/YAML使用/index.html","hash":"1a9d713acaa4b3969eef494a2b65075d6ab1862f","modified":1496506450000},{"_id":"source/2017/05/21/build/CentOS7安装git/index.html","hash":"5be67421d628dfd3bd1e435cd425d43a979c16ef","modified":1496506450000},{"_id":"source/2017/05/22/build/next主题前端资源CDN加速/index.html","hash":"c72c1fbe81e7d245df025f6b75b1850b1597d767","modified":1496506450000},{"_id":"source/2017/05/24/architecture/系统架构演进/index.html","hash":"a2d6887bb3d9f29587e4bae6e9be6a74653928d3","modified":1496506450000},{"_id":"source/2017/05/22/tuning/快速查找JVM中占用CPU线程排行/index.html","hash":"8f6fa4f2e1cc6a566810afdd5659cb404921a0e0","modified":1496506450000},{"_id":"source/2017/05/23/build/General-SSL-Problem/index.html","hash":"76c9c4b8761043792c22b8e68ec51ecfc4a7f70a","modified":1496506450000},{"_id":"source/2017/05/23/language/JAVA keytool证书工具/index.html","hash":"e71e23aee9cb28c2d8e0ed909df09e2ac7563ea3","modified":1496506450000},{"_id":"source/2017/05/25/life/2B和2C站点的区别/index.html","hash":"d76c002fe2a663d798c4c9bd2ea3926acaa306ee","modified":1496506450000},{"_id":"source/2017/05/25/tools/转换HQL为原生SQL解决Cross Join问题/index.html","hash":"877556ad56eea108cccda8344a48221dd02d429b","modified":1496506450000},{"_id":"source/2017/05/26/tools/IntelliJ IDEA使用总结/index.html","hash":"b8400f0b7e62ce20f83f3efc8106b2e6f3b2e1df","modified":1496506450000},{"_id":"source/2017/05/28/Spider/Scrapy-Install/index.html","hash":"93e6128eb9e5f5ac9d6ee7842cdcf9bb5e6d3b34","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"740d37f428b8f4574a76fc95cc25e50e0565f45e","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"beccb53dcd658136fb91a0c5678dea8f37d6e0b6","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"dbc07ec641a537df5918b41ce40a6466712a44f6","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"88c7d75646b66b168213190ee4cd874609afd5e3","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"c089419916988d0f51d89b225460fe11b631e0a3","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"e792c8dc41561c96d128e9b421187f1c3dc978a0","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"963105a531403d7aad6d9e5e23e3bfabb8ec065a","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"8c0276883398651336853d5ec0e9da267a00dd86","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"5f6ea57aabfa30a437059bf8352f1ad829dbd4ff","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a2ec22ef4a6817bbb2abe8660fcd99fe4ca0cc5e","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"b8969e1654eec89a0fd10d88b337fee9cb03cd44","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"74d0ba86f698165d13402670382a822c8736a556","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"dd310c2d999185e881db007360176ee2f811df10","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/gentie.styl","hash":"586a3ec0f1015e7207cd6a2474362e068c341744","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1496506450000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"bb3be8374c31c372ed0995bd8030d2b920d581de","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1496506450000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1496506450000},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1496506450000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1496506450000},{"_id":"source/2017/05/26/build/jetty-maven-plugin-config/index.html","hash":"9d48ebbaae6d44615ec12702d3bdf2b307df13f7","modified":1496506450000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1496506450000},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1496506450000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1496506450000},{"_id":"source/_posts/build/Hexo将内容添加到algolia中以供搜索.md","hash":"521d182c6ae15c5c04a4fa8c1e024be8fe60fc85","modified":1497620727000}],"Category":[{"name":"Spider","_id":"cj3zwegqy00069vvutjoe76ro"},{"name":"architecture","_id":"cj3zwegr4000b9vvut7631ol4"},{"name":"build","_id":"cj3zwegr7000g9vvu451kifq2"},{"name":"language","_id":"cj3zwegrm001c9vvulgobuvtk"},{"name":"life","_id":"cj3zwegrz00249vvugjf4k8l0"},{"name":"metadata","_id":"cj3zwegs4002b9vvupwj7xgdi"},{"name":"tools","_id":"cj3zwegs6002i9vvuj45p826i"},{"name":"tuning","_id":"cj3zwegsd003a9vvuihnwt6xg"}],"Data":[],"Page":[{"title":"啊~哦~ 您要查看的页面不存在或已删除！","_content":"\n<html>\n    <head>\n        <meta name=\"author\" content=\"xcoder.me\">\n        <link href=\"http://static.xcoder.ren/public/css/404.css\" rel=\"stylesheet\" rev=\"stylesheet\" />\n        <meta name=\"description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta property=\"og:type\" content=\"website\">\n        <meta property=\"og:title\" content=\"架构演进之旅\">\n        <meta property=\"og:url\" content=\"http://xcoder.me/index.html\">\n        <meta property=\"og:site_name\" content=\"架构演进之旅\">\n        <meta property=\"og:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta name=\"twitter:card\" content=\"summary\">\n        <meta name=\"twitter:title\" content=\"架构演进之旅\">\n        <meta name=\"twitter:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n    </head>\n    <body>\n    <div style=\"margin:0px auto;\">\n        <img style=\"margin:0px auto;\" height=\"320\" src=\"http://static.xcoder.ren/public/images/notfound.gif\" width=\"520\" />\n        <p style=\"font-size:24px;line-height:50px;\">可能是该文章重新编辑过或者不正确的网址信息</p>\n        <p style=\"font-size:16px;line-height:30px;\">您可以通过顶部搜索功能搜索您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/archives\" rel=\"section\">归档</a>功能查找您需要的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/tags\" rel=\"section\">标签</a>功能寻找您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px\">当然也可以回到 <a href=\"/\">网站首页</a></p>\n    </div>\n    </body>\n</html>","source":"404.html","raw":"\n---\ntitle: 啊~哦~ 您要查看的页面不存在或已删除！\npermalink: /404.html\n---\n\n<html>\n    <head>\n        <meta name=\"author\" content=\"xcoder.me\">\n        <link href=\"http://static.xcoder.ren/public/css/404.css\" rel=\"stylesheet\" rev=\"stylesheet\" />\n        <meta name=\"description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta property=\"og:type\" content=\"website\">\n        <meta property=\"og:title\" content=\"架构演进之旅\">\n        <meta property=\"og:url\" content=\"http://xcoder.me/index.html\">\n        <meta property=\"og:site_name\" content=\"架构演进之旅\">\n        <meta property=\"og:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta name=\"twitter:card\" content=\"summary\">\n        <meta name=\"twitter:title\" content=\"架构演进之旅\">\n        <meta name=\"twitter:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n    </head>\n    <body>\n    <div style=\"margin:0px auto;\">\n        <img style=\"margin:0px auto;\" height=\"320\" src=\"http://static.xcoder.ren/public/images/notfound.gif\" width=\"520\" />\n        <p style=\"font-size:24px;line-height:50px;\">可能是该文章重新编辑过或者不正确的网址信息</p>\n        <p style=\"font-size:16px;line-height:30px;\">您可以通过顶部搜索功能搜索您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/archives\" rel=\"section\">归档</a>功能查找您需要的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/tags\" rel=\"section\">标签</a>功能寻找您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px\">当然也可以回到 <a href=\"/\">网站首页</a></p>\n    </div>\n    </body>\n</html>","date":"2017-06-16T07:56:54.000Z","updated":"2017-06-16T07:56:54.000Z","path":"/404.html","comments":1,"layout":"page","_id":"cj3zwegja00009vvuwl0ro7wa","content":"\n<html>\n    <head>\n        <meta name=\"author\" content=\"xcoder.me\">\n        <link href=\"http://static.xcoder.ren/public/css/404.css\" rel=\"stylesheet\" rev=\"stylesheet\">\n        <meta name=\"description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta property=\"og:type\" content=\"website\">\n        <meta property=\"og:title\" content=\"架构演进之旅\">\n        <meta property=\"og:url\" content=\"http://xcoder.me/index.html\">\n        <meta property=\"og:site_name\" content=\"架构演进之旅\">\n        <meta property=\"og:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta name=\"twitter:card\" content=\"summary\">\n        <meta name=\"twitter:title\" content=\"架构演进之旅\">\n        <meta name=\"twitter:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n    </head>\n    <body>\n    <div style=\"margin:0px auto;\">\n        <img style=\"margin:0px auto;\" height=\"320\" src=\"http://static.xcoder.ren/public/images/notfound.gif\" width=\"520\">\n        <p style=\"font-size:24px;line-height:50px;\">可能是该文章重新编辑过或者不正确的网址信息</p>\n        <p style=\"font-size:16px;line-height:30px;\">您可以通过顶部搜索功能搜索您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/archives\" rel=\"section\">归档</a>功能查找您需要的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/tags\" rel=\"section\">标签</a>功能寻找您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px\">当然也可以回到 <a href=\"/\">网站首页</a></p>\n    </div>\n    </body>\n</html>","site":{"data":{}},"excerpt":"","more":"\n<html>\n    <head>\n        <meta name=\"author\" content=\"xcoder.me\">\n        <link href=\"http://static.xcoder.ren/public/css/404.css\" rel=\"stylesheet\" rev=\"stylesheet\">\n        <meta name=\"description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta property=\"og:type\" content=\"website\">\n        <meta property=\"og:title\" content=\"架构演进之旅\">\n        <meta property=\"og:url\" content=\"http://xcoder.me/index.html\">\n        <meta property=\"og:site_name\" content=\"架构演进之旅\">\n        <meta property=\"og:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n        <meta name=\"twitter:card\" content=\"summary\">\n        <meta name=\"twitter:title\" content=\"架构演进之旅\">\n        <meta name=\"twitter:description\" content=\"互联网架构设计及DevOps总结,性能调优,运维,mysql,linux,jvm,java\">\n    </head>\n    <body>\n    <div style=\"margin:0px auto;\">\n        <img style=\"margin:0px auto;\" height=\"320\" src=\"http://static.xcoder.ren/public/images/notfound.gif\" width=\"520\">\n        <p style=\"font-size:24px;line-height:50px;\">可能是该文章重新编辑过或者不正确的网址信息</p>\n        <p style=\"font-size:16px;line-height:30px;\">您可以通过顶部搜索功能搜索您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/archives\" rel=\"section\">归档</a>功能查找您需要的内容</p>\n        <p style=\"font-size:16px;line-height:30px;\">通过<a href=\"/tags\" rel=\"section\">标签</a>功能寻找您感兴趣的内容</p>\n        <p style=\"font-size:16px;line-height:30px\">当然也可以回到 <a href=\"/\">网站首页</a></p>\n    </div>\n    </body>\n</html>"},{"title":"categories","date":"2017-05-19T22:49:50.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"\n---\ntitle: categories\ndate: 2017-05-20 06:49:50\ntype: \"categories\"\ncomments: false\n---\n","updated":"2017-06-03T16:14:10.000Z","path":"categories/index.html","layout":"page","_id":"cj3zwegkm00019vvudjlh14hy","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2017-05-19T22:49:50.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"\n---\ntitle: tags\ndate: 2017-5-20 06:49:50\ntype: \"tags\"\ncomments: false\n---\n","updated":"2017-06-03T16:14:10.000Z","path":"tags/index.html","layout":"page","_id":"cj3zwegpy00029vvu07p0la1j","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,pre,form,fieldset,legend,button,input,textarea,th,td {\n    margin: 0;\n    padding: 0\n}\n\nhtml {\n    color: #000;\n    background: #fff;\n    overflow-y: scroll\n}\n\nbody,button,input,select,textarea,pre {\n    font-size: 12px;\n    font-family: Tahoma, Helvetica, \"Microsoft Yahei\", \"å¾®è½¯é›…é»‘\", Arial, STHeiti;\n    _font-family: Tahoma,Arial,Helvetica,STHeiti\n}\n\nhtml.mod-without-msyahei body {\n    font-family: Tahoma,Helvetica,Arial,STHeiti\n}\n\nh1,h2,h3,h4,h5,h6 {\n    font-size: 100%\n}\n\naddress,cite,dfn,em,var {\n    font-style: normal\n}\n\nsmall {\n    font-size: 12px\n}\n\nul,ol {\n    list-style: none\n}\n\na {\n    text-decoration: none;\n    color: #3fa7cb\n}\n\na:hover {\n    color: #3cbce7;\n    -webkit-transition: color .15s linear , background-color .3s linear;\n    -moz-transition: color .15s linear , background-color .3s linear;\n    -o-transition: color .15s linear , background-color .3s linear;\n    -ms-transition: color .15s linear , background-color .3s linear;\n    transition: color .15s linear , background-color .3s linear;\n    cursor: pointer\n}\n\nsup {\n    vertical-align: text-top\n}\n\nsub {\n    vertical-align: text-bottom\n}\n\nlegend {\n    color: #000\n}\n\nfieldset,img {\n    border: 0\n}\n\nbutton,input,select,textarea {\n    font-size: 100%\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0\n}\n\nimg {\n    -ms-interpolation-mode: bicubic\n}\n\ntextarea {\n    resize: vertical\n}\n\n*:focus {\n    outline: 0\n}\n\n.left {\n    float: left\n}\n\n.right {\n    float: right\n}\n\n.overflow {\n    overflow: hidden\n}\n\n.hide {\n    display: none\n}\n\n.inlineBlock {\n    display: inline-block;\n    zoom:1}\n\n.block {\n    display: block\n}\n\n.inline {\n    display: inline\n}\n\n.error {\n    color: #F00;\n    font-size: 12px\n}\n\nbutton {\n    cursor: pointer\n}\n\n.grid-98 {\n    width: 980px\n}\n\narticle,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary {\n    display: block\n}\n\n.clearfix:after {\n    content: '\\20';\n    display: block;\n    height: 0;\n    clear: both\n}\n\n.clearfix {\n    zoom:1}\n\n.clear {\n    clear: both;\n    height: 0;\n    line-height: 0;\n    font-size: 0;\n    visibility: hidden;\n    overflow: hidden\n}\n\n.wordwrap {\n    word-break: break-all;\n    word-wrap: break-word\n}\n\npre.wordwrap {\n    white-space: pre-wrap\n}\n\nhtml,body {\n    height: 100%;\n    width: 100%\n}\n\nhtml {\n    background: url(data:image/gif;base64,R0lGODlhKAAoALMAAO7s7fv5+vr4+e/t7vPx8vLw8fDu7/Xz9Pj29/n3+PTy8/b09ff19vHv8AAAAAAAACH5BAAAAAAALAAAAAAoACgAAAT/sCh0ThpqAJbKTciCJESyMM1iEEPSGEvBGQVSAE1DCLlHMIXFYsCANQ5CA4XQUBhgJEPnMEAwQgrCAaFQFBsMgEBAQGgPjBKy0DAlDMUCerE7oqAVGcJQmTStRC1oA3BlCm0HhwkHAlc5VTI8eWlNL3IMAz+JBAAKbGwLVAoWIkChBw0DbBMJb1wVW181IEw8GQUGAHQdCi48rQsZQyY9XaGaiQsXNToEyocHBgJCYsFHbQ0IOhYwGdFDXaodNqqpHRco2ldCHEyZYE90NI9zOCrYDNM1WiB62UNVsnhisKVJNC8sQhxJMGqAnWxFXLzBpGRIAxmtCGTBUaBRjSoh/xCILPAjGJoLPwqQ5HBoT7ByxJQ461JG2ZFeTFLAycZFGQAXXVZwYKgL2Co3BzomVSDgQpMT0bRpQ2JFAok9zZQlIFihSRAgWToYSEHkHxoEYvgQGMuBAhFgOWoSWxSAC4NRW5yIoBNqyAoJDGKIPaCRASY2HO6KzKfFiQ6PLkPQcgIIRYcyInWMSrJWyUJMPVusCIZJUTQkTpQMwODN1YJsJACOGItE1YCkjTJVuAIDQNITezSCSCNChp4yN60wFElnD5FXNVAoCKbNiQwnhN5MYOmJNkkwQKIFtjsdiEMhYU8QYyMlRjYPAaa0DGygCzwTcDzY0HJkD8kqBHigQP8ncGgDhUo6qANOEKPgtEl6o1AQAhqpUKHEd6AY8ZqEbGQjxQZOFEGQBytUwZIUN20FxhGJHBIKQ0yNxpU2R1wXgxAFZCKAN6/h4AlJa4ExghMoacMEB1F1U4USh7yXhkYUuJAIMShMyccoO4aSIx+GWTCdC0Bw4EEKFjAWwgBCgPFGHmY0MZYMFqGyUVI08LFAJ8qwgKJhLKnwRBsD4XJbCS45o2V4XrTHBx8moAdDETswsagpDFVwQg6WDEXFAk3dEU5SQUwTzDFCMFRTGyR5EuB1oCQAgF1R3PXCIlIgmI4FfwSmg2YvdfFkNESgsGOOMYQh4RMWvgYpGKoksRiKmpI1QMZroYrj4ggwZhGgLuK9UAEBa6kiDSpA1OfDdAKMNZYLQ7hnGI2vbXGCDA4ZEgIdTUxQpg7iakOCRp1QsUc+q8mAIiEqGNxlU2OCK1UOw7hagwygoXCbnVzmhwlDRcABAJppRBcNGOI1wkdIUJLUVDP1/YSSEm22woi2aORUhgHPeRFYPxEAADs=) repeat top left fixed\n}\n\n.mod-page-body {\n    height: auto;\n    _height: 100%;\n    min-height: 100%;\n    zoom:1}\n\n.mod-page-body .mod-page-main .x-page-container {\n    padding: 0;\n    margin: 0;\n    zoom:1}\n\n.mod-page-body {\n    color: #454545;\n    zoom:1}\n\n.mod-page-body .t-remark {\n    color: #959595\n}\n\n.mod-page-body a.a-normal {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-normal:hover {\n    color: #3cbce7\n}\n\n.mod-page-body a.a-incontent {\n    color: #454545\n}\n\n.mod-page-body a.a-incontent:hover {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-insist {\n    color: #f46e6e\n}\n\n.mod-page-body a.a-insist:hover {\n    color: #c55454\n}\n\n.border-radius-6 {\n    -moz-border-radius: 6px;\n    -khtml-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px\n}\n\n.border-radius-10 {\n    -moz-border-radius: 10px;\n    -khtml-border-radius: 10px;\n    -webkit-border-radius: 10px;\n    border-radius: 10px\n}\n\n.border-shadow {\n    -webkit-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -moz-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -khtml-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    box-shadow: 0 2px 2px rgba(6,0,1,0.05)\n}\n\n.mod-page-body .mod-page-main {\n    padding-top: 50px\n}\n\n.mod-without-msyahei .mod-topbar .q-nav-sp span {\n    _margin-top: 18px\n}\n\n.mod-pagerbar {\n    background: #fff;\n    padding: 20px 0;\n    text-align: center;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none\n}\n\n.mod-pagerbar a,.mod-pagerbar span {\n    padding: 3px 8px;\n    margin: 0 5px 0 0;\n    color: #454545\n}\n\n.mod-pagerbar a {\n    background: #f5f5f5;\n    cursor: pointer\n}\n\n.mod-pagerbar a:hover {\n    background-color: #3fa7cb;\n    color: #fff\n}\n\n.mod-pagerbar span {\n    background: #3fa7cb;\n    color: #fff;\n    font-weight: bold;\n    cursor: default\n}\n\n.mod-page-body .mod-page-main {\n    padding-bottom: 85px\n}\n\n.mod-footer {\n    padding: 30px 0 15px 0;\n    width: 100%;\n    height: 40px;\n    position: relative;\n    margin-top: -85px;\n    clear: both;\n    zoom:1}\n\n.mod-footer .hidden-box {\n    line-height: 0;\n    height: 0;\n    overflow: hidden\n}\n\n.mod-footer .footer-box {\n    text-align: center;\n    font-family: Arial,simsun;\n    font-size: 12px\n}\n\n.mod-footer .footer-box .inner-box {\n    margin-bottom: 10px;\n    line-height: 14px;\n    height: 14px;\n    overflow: hidden;\n    color: #3FA7CB\n}\n\n.mod-footer .footer-box .copy-box {\n    color: #959595;\n    line-height: 12px;\n    height: 12px;\n    overflow: hidden\n}\n\n.custom-scroll-bar {\n    overflow-y: auto;\n    overflow-x: hidden\n}\n\n.custom-scroll-bar::-webkit-scrollbar {\n    width: 10px;\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(202, 202, 202, .07)),color-stop(100%,rgba(229, 229, 229, .07)));\n    background: -webkit-linear-gradient(left,rgba(202, 202, 202, .07) 0,rgba(229, 229, 229, .07) 100%);\n    -webkit-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    -moz-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    background-color: #E5E5E5\n}\n\n.custom-scroll-bar::-webkit-scrollbar-thumb {\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(233, 233, 233, .05)),color-stop(100%,rgba(221, 221, 221, .05)));\n    background: -webkit-linear-gradient(left,rgba(233, 233, 233, .05) 0,rgba(221, 221, 221, .05) 100%);\n    -webkit-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    -moz-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    background-color: #E9E9E9\n}\n\n.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb {\n    overflow: visible;\n    border-radius: 4px;\n    -moz-border-radius: 4px;\n    -webkit-border-radius: 4px;\n    border: solid 1px #A6A6A6\n}\n\n.custom-scroll-bar::-webkit-scrollbar-button {\n    height: 0;\n    display: block;\n    background-color: transparent\n}\n\n.tab {\n    position: relative;\n    z-index: 1\n}\n\n.tab-bottom-line {\n    border-top: 2px solid #e7e7e7;\n    margin-top: -2px\n}\n\n.tab-vernier {\n    display: none;\n    border-bottom: 2px solid #3fa7cb;\n    position: absolute;\n    top: 0;\n    bottom: 0\n}\n\n.tab-li {\n    display: inline-block;\n    *display: inline;\n    *zoom:1;cursor: pointer;\n    padding: 5px 10px;\n    border-bottom: 2px solid #e7e7e7\n}\n\n.tab-li-ascii {\n    *position: relative;\n    *bottom: -2px;\n    _bottom: 0;\n    _position: static\n}\n\n.tab-li span {\n    _height: auto;\n    _line-height: 18px\n}\n\n.tab-li-hover,.tab-li-selected {\n    color: #3fa7cb;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n    border-bottom-color: #3fa7cb\n}\n\n.tab-li-hover {\n    -webkit-transition: color .5s, border-bottom-color .5s;\n    -o-transition: color .5s, border-bottom-color .5s;\n    -moz-transition: color .5s, border-bottom-color .5s;\n    -ms-transition: color .5s, border-bottom-color .5s;\n    transition: color .5s, border-bottom-color .5s\n}\n\n.input-box-container input.real-input,.input-box-parent,.input-box {\n    color: #CCC;\n    border: 1px solid #CCC;\n    border-bottom: 1px solid #e2e2e2;\n    border-right: 1px solid #e2e2e2;\n    box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -moz-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -webkit-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    background-color: white;\n    vertical-align: middle;\n    font-size: 12px;\n    padding: 10px 0 8px 8px;\n    padding: 12px 0 6px 8px\\9;\n    height: 18px;\n    overflow: hidden\n}\n\n\n.mod-ting-player {\n    height: 37px;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo,.mod-ting-player .music-play-bt,.mod-ting-player .music-desc-info {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAACaCAMAAADcrusAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwBQTFRFYp/KP4vADW6xSZLERpDCH3m25eXl09PT////Q6jL/Pz85ubmL4mtBliP6+vrEHCygrTW8PDwzuHu0+LsnsTeDm+xC22w6Ojo8PX4CGyv29vboMXfD2+x6urqIXq3YaDLttHjQIzASJHD5+fnr87j19fX9vb3MIO8MoS86vH27e3t7fHzu9zoxdro7vL0E3KzXp7KCm2wL4K7S5PEWLHQq8zjyt7s7+/vpcjhncTe8vT27vHzF3W0FnS0Gna1JHy49fb2Inu3g7PUnMPehbXXd67Sn8nZV5rH+fn6GXW0Kn+6w9vr9Pb3LIG7JX24xNrp9vf41+bwyt7rxNvr8/X2Q47C6u/ztdLm1ePtEHGymcHdX57Jv9bm2ebvMoS7gLHS+fr7ytzpSaXGpcLVarDK6/L3b6jPQabJ+Pn5vNHf8PLzgbPWjLLM2OfxfLDT4OrtFW+sbKbO8PP0B2ms8vT14ez0g7TWLIG6uNPl5e3yTZXFZKLMk73aWZzJ4uzzjbrZd63SIHq3UJbG1eXr2+PpwNfnq8vhx97nrszheq/T/f39zN/rh8bcjsHU0uHr2NjYdaXE3ebsdKrPx9vqZaLLcqrQtNPf+vv8RYi1RqXIKoC67vT49PX2TJPD2+rv0eLuU4+4XZ3JXJ3KR6rMXZ7JzODt7vH0Imub7/T2b6jQo8fgNIa96/H0c7PLc73XQZS1yd3rXKvI8/b5yt3q2+jx3+nw4+zwe7DU9Pj69/r7Qo3Bl83fQaTID3Cxxd/pQqbJQqfKw9no3+ju3uvvkrzZMn2wk77bea3Q6O7ylcvevNboHHe1m8HbCWywGmaZH2maf7HT4ervEG2sRJS1aaXOR5a2OYi+PIq/ocbfSavMEXGyFHOzU5fGJn24hLTViLfWWJrHWJvILIC6LYG7udLkVZnG7/L0zdzm4Ovx4erx2ubuZqLMHXi2Xp/LvNfpW5zJKX65B2uv9vb29/f39fX18fHx+Pj49PT05OTk8/Pz+fn5+/v78vLy+vr66enp////uAyb8AAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAQYSURBVHja7Nh3eBNlHAfwo5Q0d4U0KS1tacsse4koCgIyxIELAQEB90ZxVQFRAWUj7r0VlakyZQruvQc4sW7Bgf7urve2uVzjXd4ceS+53uVX+uTJ49PvH7nk976fJ/ckT/K9hAvLpVW4cHKNqOLCoYXKZWt4EtSQSUsSaJmVxWUrQUQ63BEO25CR0+/rnFNS0iuz4tYEkhW2I69mAkDv/Hz9duBFM5MhN5YA9Hlr/4mjyy77GWDaBjsiKWxmAawet1XQ9GWty6wB0OpUy7INmV8ENz0iaObDtSfDw3udyfWnQLstKjMYNQC+CCYQUYplKAyaohrHth9EJ29AxhPMhnjScd5PMHuxot/7ATYH6axnJ/j7zFpJj0Y5kJGrSf1f3Pcr+LUxHSVp8KPS9wCD/hxrJbJIc+77+jvR6UJpYdshQ74Bf8W2NuI1XOYfk4r08S3dopus5Dt9CdoJbfLhrxG9wH8cFCu/7YG+488w5sUWQmSab42lPusfg9bXdfkR/IfAkcpRh7bIbZ5jzFsrdJOV7DCWZsxs8mFfTZwYT5ZqdqRV5FlW7IYJksyB/xkoU+TOJllpIdWE5m5jqbFWAQPvPfssmPoUzPjk7RPyKSl6L0g3WclrX+prpx8/+WqDwjFlLSLHZ2/vrd/OFkQ7Qj69YkSTfy4h5J7ifnnDcpUe/fLy8lYVNv/35kZfnaMQloSqzRBFVYP60XjZJbmavvrVRFU10dwST5JIHUgHPAlESGUIEVkVBCQxkiJScEQlMhxpjzVcONQe25VhdOpCkjwbH0NoZXq8zpWqdfVhiapVJRK3yvPESHSQfqRlAE1qso0O9Hjd6pslNfVBlr2THGEKcflHlyoJsZDIgCXNysvv7I8k+rfwm7+7E6Z2DQKfXS5ZYiGRQQIBePAuNIGrzncmYiwmgfInJx8YWkhkYEsAfkGTGx5QbIlRmx6vHItJjj5c0A4MkyEZiwoFScaQxqcJQWZmJUZterwklmbRcyJsnMnHOcMLVYkQBJm7UVAIcSJGB3q8bCMSktiSLsQuLPGhiU+kxK3uGKLKkQGGRAfpR2jLerwuNRyowpJAge+gujKtSry0DiVeWi8l7vb7+39e4hhSLyW+4jk02bVmgQuh9cqsNn3p4ttOSoIwfd2U5/l1c1C9bxD+oWMdCK3XeMK/csEmLOH58+53JkzFm4R/+flr7XufNrId4fmdaLJksD2h9cr0vkkO684MkyFPb+8p4sgLj4tirYTWq5VYzqk2wlwVfP71u93k+DiTK1+XZWdCu1J2yUGSaIkTl9iUOIKYJY4gZr2mhiCuYcxGdhGhKiwJ1WSju7IgXUuc/YtARSdFREMnRSQLHf2zj00DaSANpIEkSwR0uBA6KSKV6NSF4LvyPwEGAADi7COi7zQsAAAAAElFTkSuQmCC) no-repeat\n}\n\n.mod-ting-player .music-bg-cover {\n    height: 37px;\n    display: block;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo {\n    float: left;\n    height: 37px;\n    width: 50px;\n    text-indent: -9999em;\n    position: relative;\n    z-index: 2\n}\n\n.mod-ting-player .music-play-bt {\n    float: right;\n    height: 37px;\n    width: 41px;\n    background-position: 0 -39px;\n    text-indent: -9999em;\n    z-index: 2;\n    position: relative\n}\n\n.mod-feed-list-box .feed-content .music-player-wraper .music-play-bt:hover {\n    background-position: 0 -78px\n}\n\n.mod-ting-player .music-desc-info {\n    height: 37px;\n    font-family: 'simsun';\n    font-size: 12px;\n    position: relative;\n    line-height: 37px;\n    text-align: center;\n    overflow: hidden;\n    background-position: 0 -117px;\n    background-repeat: repeat-x;\n    margin: -37px 10px 0 10px\n}\n\n.border-radius-6,.border-radius-10,.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb,.x-message-shadow,.x-message-box .x-message-content {\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box\n}\n\n.mod-notfound {\n    border-right: #e1e1e1 1px solid; border-top: #e1e1e1 1px solid; margin-top: 10px; background: #fff; border-left: #e1e1e1 1px solid; border-bottom: #e1e1e1 1px solid; height: 585px; text-align: center; border-radius: 10px\n}","source":"uploads/404.css","raw":"body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,pre,form,fieldset,legend,button,input,textarea,th,td {\n    margin: 0;\n    padding: 0\n}\n\nhtml {\n    color: #000;\n    background: #fff;\n    overflow-y: scroll\n}\n\nbody,button,input,select,textarea,pre {\n    font-size: 12px;\n    font-family: Tahoma, Helvetica, \"Microsoft Yahei\", \"å¾®è½¯é›…é»‘\", Arial, STHeiti;\n    _font-family: Tahoma,Arial,Helvetica,STHeiti\n}\n\nhtml.mod-without-msyahei body {\n    font-family: Tahoma,Helvetica,Arial,STHeiti\n}\n\nh1,h2,h3,h4,h5,h6 {\n    font-size: 100%\n}\n\naddress,cite,dfn,em,var {\n    font-style: normal\n}\n\nsmall {\n    font-size: 12px\n}\n\nul,ol {\n    list-style: none\n}\n\na {\n    text-decoration: none;\n    color: #3fa7cb\n}\n\na:hover {\n    color: #3cbce7;\n    -webkit-transition: color .15s linear , background-color .3s linear;\n    -moz-transition: color .15s linear , background-color .3s linear;\n    -o-transition: color .15s linear , background-color .3s linear;\n    -ms-transition: color .15s linear , background-color .3s linear;\n    transition: color .15s linear , background-color .3s linear;\n    cursor: pointer\n}\n\nsup {\n    vertical-align: text-top\n}\n\nsub {\n    vertical-align: text-bottom\n}\n\nlegend {\n    color: #000\n}\n\nfieldset,img {\n    border: 0\n}\n\nbutton,input,select,textarea {\n    font-size: 100%\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0\n}\n\nimg {\n    -ms-interpolation-mode: bicubic\n}\n\ntextarea {\n    resize: vertical\n}\n\n*:focus {\n    outline: 0\n}\n\n.left {\n    float: left\n}\n\n.right {\n    float: right\n}\n\n.overflow {\n    overflow: hidden\n}\n\n.hide {\n    display: none\n}\n\n.inlineBlock {\n    display: inline-block;\n    zoom:1}\n\n.block {\n    display: block\n}\n\n.inline {\n    display: inline\n}\n\n.error {\n    color: #F00;\n    font-size: 12px\n}\n\nbutton {\n    cursor: pointer\n}\n\n.grid-98 {\n    width: 980px\n}\n\narticle,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary {\n    display: block\n}\n\n.clearfix:after {\n    content: '\\20';\n    display: block;\n    height: 0;\n    clear: both\n}\n\n.clearfix {\n    zoom:1}\n\n.clear {\n    clear: both;\n    height: 0;\n    line-height: 0;\n    font-size: 0;\n    visibility: hidden;\n    overflow: hidden\n}\n\n.wordwrap {\n    word-break: break-all;\n    word-wrap: break-word\n}\n\npre.wordwrap {\n    white-space: pre-wrap\n}\n\nhtml,body {\n    height: 100%;\n    width: 100%\n}\n\nhtml {\n    background: url(data:image/gif;base64,R0lGODlhKAAoALMAAO7s7fv5+vr4+e/t7vPx8vLw8fDu7/Xz9Pj29/n3+PTy8/b09ff19vHv8AAAAAAAACH5BAAAAAAALAAAAAAoACgAAAT/sCh0ThpqAJbKTciCJESyMM1iEEPSGEvBGQVSAE1DCLlHMIXFYsCANQ5CA4XQUBhgJEPnMEAwQgrCAaFQFBsMgEBAQGgPjBKy0DAlDMUCerE7oqAVGcJQmTStRC1oA3BlCm0HhwkHAlc5VTI8eWlNL3IMAz+JBAAKbGwLVAoWIkChBw0DbBMJb1wVW181IEw8GQUGAHQdCi48rQsZQyY9XaGaiQsXNToEyocHBgJCYsFHbQ0IOhYwGdFDXaodNqqpHRco2ldCHEyZYE90NI9zOCrYDNM1WiB62UNVsnhisKVJNC8sQhxJMGqAnWxFXLzBpGRIAxmtCGTBUaBRjSoh/xCILPAjGJoLPwqQ5HBoT7ByxJQ461JG2ZFeTFLAycZFGQAXXVZwYKgL2Co3BzomVSDgQpMT0bRpQ2JFAok9zZQlIFihSRAgWToYSEHkHxoEYvgQGMuBAhFgOWoSWxSAC4NRW5yIoBNqyAoJDGKIPaCRASY2HO6KzKfFiQ6PLkPQcgIIRYcyInWMSrJWyUJMPVusCIZJUTQkTpQMwODN1YJsJACOGItE1YCkjTJVuAIDQNITezSCSCNChp4yN60wFElnD5FXNVAoCKbNiQwnhN5MYOmJNkkwQKIFtjsdiEMhYU8QYyMlRjYPAaa0DGygCzwTcDzY0HJkD8kqBHigQP8ncGgDhUo6qANOEKPgtEl6o1AQAhqpUKHEd6AY8ZqEbGQjxQZOFEGQBytUwZIUN20FxhGJHBIKQ0yNxpU2R1wXgxAFZCKAN6/h4AlJa4ExghMoacMEB1F1U4USh7yXhkYUuJAIMShMyccoO4aSIx+GWTCdC0Bw4EEKFjAWwgBCgPFGHmY0MZYMFqGyUVI08LFAJ8qwgKJhLKnwRBsD4XJbCS45o2V4XrTHBx8moAdDETswsagpDFVwQg6WDEXFAk3dEU5SQUwTzDFCMFRTGyR5EuB1oCQAgF1R3PXCIlIgmI4FfwSmg2YvdfFkNESgsGOOMYQh4RMWvgYpGKoksRiKmpI1QMZroYrj4ggwZhGgLuK9UAEBa6kiDSpA1OfDdAKMNZYLQ7hnGI2vbXGCDA4ZEgIdTUxQpg7iakOCRp1QsUc+q8mAIiEqGNxlU2OCK1UOw7hagwygoXCbnVzmhwlDRcABAJppRBcNGOI1wkdIUJLUVDP1/YSSEm22woi2aORUhgHPeRFYPxEAADs=) repeat top left fixed\n}\n\n.mod-page-body {\n    height: auto;\n    _height: 100%;\n    min-height: 100%;\n    zoom:1}\n\n.mod-page-body .mod-page-main .x-page-container {\n    padding: 0;\n    margin: 0;\n    zoom:1}\n\n.mod-page-body {\n    color: #454545;\n    zoom:1}\n\n.mod-page-body .t-remark {\n    color: #959595\n}\n\n.mod-page-body a.a-normal {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-normal:hover {\n    color: #3cbce7\n}\n\n.mod-page-body a.a-incontent {\n    color: #454545\n}\n\n.mod-page-body a.a-incontent:hover {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-insist {\n    color: #f46e6e\n}\n\n.mod-page-body a.a-insist:hover {\n    color: #c55454\n}\n\n.border-radius-6 {\n    -moz-border-radius: 6px;\n    -khtml-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px\n}\n\n.border-radius-10 {\n    -moz-border-radius: 10px;\n    -khtml-border-radius: 10px;\n    -webkit-border-radius: 10px;\n    border-radius: 10px\n}\n\n.border-shadow {\n    -webkit-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -moz-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -khtml-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    box-shadow: 0 2px 2px rgba(6,0,1,0.05)\n}\n\n.mod-page-body .mod-page-main {\n    padding-top: 50px\n}\n\n.mod-without-msyahei .mod-topbar .q-nav-sp span {\n    _margin-top: 18px\n}\n\n.mod-pagerbar {\n    background: #fff;\n    padding: 20px 0;\n    text-align: center;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none\n}\n\n.mod-pagerbar a,.mod-pagerbar span {\n    padding: 3px 8px;\n    margin: 0 5px 0 0;\n    color: #454545\n}\n\n.mod-pagerbar a {\n    background: #f5f5f5;\n    cursor: pointer\n}\n\n.mod-pagerbar a:hover {\n    background-color: #3fa7cb;\n    color: #fff\n}\n\n.mod-pagerbar span {\n    background: #3fa7cb;\n    color: #fff;\n    font-weight: bold;\n    cursor: default\n}\n\n.mod-page-body .mod-page-main {\n    padding-bottom: 85px\n}\n\n.mod-footer {\n    padding: 30px 0 15px 0;\n    width: 100%;\n    height: 40px;\n    position: relative;\n    margin-top: -85px;\n    clear: both;\n    zoom:1}\n\n.mod-footer .hidden-box {\n    line-height: 0;\n    height: 0;\n    overflow: hidden\n}\n\n.mod-footer .footer-box {\n    text-align: center;\n    font-family: Arial,simsun;\n    font-size: 12px\n}\n\n.mod-footer .footer-box .inner-box {\n    margin-bottom: 10px;\n    line-height: 14px;\n    height: 14px;\n    overflow: hidden;\n    color: #3FA7CB\n}\n\n.mod-footer .footer-box .copy-box {\n    color: #959595;\n    line-height: 12px;\n    height: 12px;\n    overflow: hidden\n}\n\n.custom-scroll-bar {\n    overflow-y: auto;\n    overflow-x: hidden\n}\n\n.custom-scroll-bar::-webkit-scrollbar {\n    width: 10px;\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(202, 202, 202, .07)),color-stop(100%,rgba(229, 229, 229, .07)));\n    background: -webkit-linear-gradient(left,rgba(202, 202, 202, .07) 0,rgba(229, 229, 229, .07) 100%);\n    -webkit-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    -moz-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    background-color: #E5E5E5\n}\n\n.custom-scroll-bar::-webkit-scrollbar-thumb {\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(233, 233, 233, .05)),color-stop(100%,rgba(221, 221, 221, .05)));\n    background: -webkit-linear-gradient(left,rgba(233, 233, 233, .05) 0,rgba(221, 221, 221, .05) 100%);\n    -webkit-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    -moz-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    background-color: #E9E9E9\n}\n\n.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb {\n    overflow: visible;\n    border-radius: 4px;\n    -moz-border-radius: 4px;\n    -webkit-border-radius: 4px;\n    border: solid 1px #A6A6A6\n}\n\n.custom-scroll-bar::-webkit-scrollbar-button {\n    height: 0;\n    display: block;\n    background-color: transparent\n}\n\n.tab {\n    position: relative;\n    z-index: 1\n}\n\n.tab-bottom-line {\n    border-top: 2px solid #e7e7e7;\n    margin-top: -2px\n}\n\n.tab-vernier {\n    display: none;\n    border-bottom: 2px solid #3fa7cb;\n    position: absolute;\n    top: 0;\n    bottom: 0\n}\n\n.tab-li {\n    display: inline-block;\n    *display: inline;\n    *zoom:1;cursor: pointer;\n    padding: 5px 10px;\n    border-bottom: 2px solid #e7e7e7\n}\n\n.tab-li-ascii {\n    *position: relative;\n    *bottom: -2px;\n    _bottom: 0;\n    _position: static\n}\n\n.tab-li span {\n    _height: auto;\n    _line-height: 18px\n}\n\n.tab-li-hover,.tab-li-selected {\n    color: #3fa7cb;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n    border-bottom-color: #3fa7cb\n}\n\n.tab-li-hover {\n    -webkit-transition: color .5s, border-bottom-color .5s;\n    -o-transition: color .5s, border-bottom-color .5s;\n    -moz-transition: color .5s, border-bottom-color .5s;\n    -ms-transition: color .5s, border-bottom-color .5s;\n    transition: color .5s, border-bottom-color .5s\n}\n\n.input-box-container input.real-input,.input-box-parent,.input-box {\n    color: #CCC;\n    border: 1px solid #CCC;\n    border-bottom: 1px solid #e2e2e2;\n    border-right: 1px solid #e2e2e2;\n    box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -moz-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -webkit-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    background-color: white;\n    vertical-align: middle;\n    font-size: 12px;\n    padding: 10px 0 8px 8px;\n    padding: 12px 0 6px 8px\\9;\n    height: 18px;\n    overflow: hidden\n}\n\n\n.mod-ting-player {\n    height: 37px;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo,.mod-ting-player .music-play-bt,.mod-ting-player .music-desc-info {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAACaCAMAAADcrusAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwBQTFRFYp/KP4vADW6xSZLERpDCH3m25eXl09PT////Q6jL/Pz85ubmL4mtBliP6+vrEHCygrTW8PDwzuHu0+LsnsTeDm+xC22w6Ojo8PX4CGyv29vboMXfD2+x6urqIXq3YaDLttHjQIzASJHD5+fnr87j19fX9vb3MIO8MoS86vH27e3t7fHzu9zoxdro7vL0E3KzXp7KCm2wL4K7S5PEWLHQq8zjyt7s7+/vpcjhncTe8vT27vHzF3W0FnS0Gna1JHy49fb2Inu3g7PUnMPehbXXd67Sn8nZV5rH+fn6GXW0Kn+6w9vr9Pb3LIG7JX24xNrp9vf41+bwyt7rxNvr8/X2Q47C6u/ztdLm1ePtEHGymcHdX57Jv9bm2ebvMoS7gLHS+fr7ytzpSaXGpcLVarDK6/L3b6jPQabJ+Pn5vNHf8PLzgbPWjLLM2OfxfLDT4OrtFW+sbKbO8PP0B2ms8vT14ez0g7TWLIG6uNPl5e3yTZXFZKLMk73aWZzJ4uzzjbrZd63SIHq3UJbG1eXr2+PpwNfnq8vhx97nrszheq/T/f39zN/rh8bcjsHU0uHr2NjYdaXE3ebsdKrPx9vqZaLLcqrQtNPf+vv8RYi1RqXIKoC67vT49PX2TJPD2+rv0eLuU4+4XZ3JXJ3KR6rMXZ7JzODt7vH0Imub7/T2b6jQo8fgNIa96/H0c7PLc73XQZS1yd3rXKvI8/b5yt3q2+jx3+nw4+zwe7DU9Pj69/r7Qo3Bl83fQaTID3Cxxd/pQqbJQqfKw9no3+ju3uvvkrzZMn2wk77bea3Q6O7ylcvevNboHHe1m8HbCWywGmaZH2maf7HT4ervEG2sRJS1aaXOR5a2OYi+PIq/ocbfSavMEXGyFHOzU5fGJn24hLTViLfWWJrHWJvILIC6LYG7udLkVZnG7/L0zdzm4Ovx4erx2ubuZqLMHXi2Xp/LvNfpW5zJKX65B2uv9vb29/f39fX18fHx+Pj49PT05OTk8/Pz+fn5+/v78vLy+vr66enp////uAyb8AAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAQYSURBVHja7Nh3eBNlHAfwo5Q0d4U0KS1tacsse4koCgIyxIELAQEB90ZxVQFRAWUj7r0VlakyZQruvQc4sW7Bgf7urve2uVzjXd4ceS+53uVX+uTJ49PvH7nk976fJ/ckT/K9hAvLpVW4cHKNqOLCoYXKZWt4EtSQSUsSaJmVxWUrQUQ63BEO25CR0+/rnFNS0iuz4tYEkhW2I69mAkDv/Hz9duBFM5MhN5YA9Hlr/4mjyy77GWDaBjsiKWxmAawet1XQ9GWty6wB0OpUy7INmV8ENz0iaObDtSfDw3udyfWnQLstKjMYNQC+CCYQUYplKAyaohrHth9EJ29AxhPMhnjScd5PMHuxot/7ATYH6axnJ/j7zFpJj0Y5kJGrSf1f3Pcr+LUxHSVp8KPS9wCD/hxrJbJIc+77+jvR6UJpYdshQ74Bf8W2NuI1XOYfk4r08S3dopus5Dt9CdoJbfLhrxG9wH8cFCu/7YG+488w5sUWQmSab42lPusfg9bXdfkR/IfAkcpRh7bIbZ5jzFsrdJOV7DCWZsxs8mFfTZwYT5ZqdqRV5FlW7IYJksyB/xkoU+TOJllpIdWE5m5jqbFWAQPvPfssmPoUzPjk7RPyKSl6L0g3WclrX+prpx8/+WqDwjFlLSLHZ2/vrd/OFkQ7Qj69YkSTfy4h5J7ifnnDcpUe/fLy8lYVNv/35kZfnaMQloSqzRBFVYP60XjZJbmavvrVRFU10dwST5JIHUgHPAlESGUIEVkVBCQxkiJScEQlMhxpjzVcONQe25VhdOpCkjwbH0NoZXq8zpWqdfVhiapVJRK3yvPESHSQfqRlAE1qso0O9Hjd6pslNfVBlr2THGEKcflHlyoJsZDIgCXNysvv7I8k+rfwm7+7E6Z2DQKfXS5ZYiGRQQIBePAuNIGrzncmYiwmgfInJx8YWkhkYEsAfkGTGx5QbIlRmx6vHItJjj5c0A4MkyEZiwoFScaQxqcJQWZmJUZterwklmbRcyJsnMnHOcMLVYkQBJm7UVAIcSJGB3q8bCMSktiSLsQuLPGhiU+kxK3uGKLKkQGGRAfpR2jLerwuNRyowpJAge+gujKtSry0DiVeWi8l7vb7+39e4hhSLyW+4jk02bVmgQuh9cqsNn3p4ttOSoIwfd2U5/l1c1C9bxD+oWMdCK3XeMK/csEmLOH58+53JkzFm4R/+flr7XufNrId4fmdaLJksD2h9cr0vkkO684MkyFPb+8p4sgLj4tirYTWq5VYzqk2wlwVfP71u93k+DiTK1+XZWdCu1J2yUGSaIkTl9iUOIKYJY4gZr2mhiCuYcxGdhGhKiwJ1WSju7IgXUuc/YtARSdFREMnRSQLHf2zj00DaSANpIEkSwR0uBA6KSKV6NSF4LvyPwEGAADi7COi7zQsAAAAAElFTkSuQmCC) no-repeat\n}\n\n.mod-ting-player .music-bg-cover {\n    height: 37px;\n    display: block;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo {\n    float: left;\n    height: 37px;\n    width: 50px;\n    text-indent: -9999em;\n    position: relative;\n    z-index: 2\n}\n\n.mod-ting-player .music-play-bt {\n    float: right;\n    height: 37px;\n    width: 41px;\n    background-position: 0 -39px;\n    text-indent: -9999em;\n    z-index: 2;\n    position: relative\n}\n\n.mod-feed-list-box .feed-content .music-player-wraper .music-play-bt:hover {\n    background-position: 0 -78px\n}\n\n.mod-ting-player .music-desc-info {\n    height: 37px;\n    font-family: 'simsun';\n    font-size: 12px;\n    position: relative;\n    line-height: 37px;\n    text-align: center;\n    overflow: hidden;\n    background-position: 0 -117px;\n    background-repeat: repeat-x;\n    margin: -37px 10px 0 10px\n}\n\n.border-radius-6,.border-radius-10,.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb,.x-message-shadow,.x-message-box .x-message-content {\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box\n}\n\n.mod-notfound {\n    border-right: #e1e1e1 1px solid; border-top: #e1e1e1 1px solid; margin-top: 10px; background: #fff; border-left: #e1e1e1 1px solid; border-bottom: #e1e1e1 1px solid; height: 585px; text-align: center; border-radius: 10px\n}","date":"2017-06-16T06:28:35.000Z","updated":"2017-06-16T06:28:35.000Z","path":"uploads/404.css","layout":"false","title":"","comments":1,"_id":"cj3zwegq000039vvu81y0fj4k","content":"body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,pre,form,fieldset,legend,button,input,textarea,th,td {\n    margin: 0;\n    padding: 0\n}\n\nhtml {\n    color: #000;\n    background: #fff;\n    overflow-y: scroll\n}\n\nbody,button,input,select,textarea,pre {\n    font-size: 12px;\n    font-family: Tahoma, Helvetica, \"Microsoft Yahei\", \"å¾®è½¯é›…é»‘\", Arial, STHeiti;\n    _font-family: Tahoma,Arial,Helvetica,STHeiti\n}\n\nhtml.mod-without-msyahei body {\n    font-family: Tahoma,Helvetica,Arial,STHeiti\n}\n\nh1,h2,h3,h4,h5,h6 {\n    font-size: 100%\n}\n\naddress,cite,dfn,em,var {\n    font-style: normal\n}\n\nsmall {\n    font-size: 12px\n}\n\nul,ol {\n    list-style: none\n}\n\na {\n    text-decoration: none;\n    color: #3fa7cb\n}\n\na:hover {\n    color: #3cbce7;\n    -webkit-transition: color .15s linear , background-color .3s linear;\n    -moz-transition: color .15s linear , background-color .3s linear;\n    -o-transition: color .15s linear , background-color .3s linear;\n    -ms-transition: color .15s linear , background-color .3s linear;\n    transition: color .15s linear , background-color .3s linear;\n    cursor: pointer\n}\n\nsup {\n    vertical-align: text-top\n}\n\nsub {\n    vertical-align: text-bottom\n}\n\nlegend {\n    color: #000\n}\n\nfieldset,img {\n    border: 0\n}\n\nbutton,input,select,textarea {\n    font-size: 100%\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0\n}\n\nimg {\n    -ms-interpolation-mode: bicubic\n}\n\ntextarea {\n    resize: vertical\n}\n\n*:focus {\n    outline: 0\n}\n\n.left {\n    float: left\n}\n\n.right {\n    float: right\n}\n\n.overflow {\n    overflow: hidden\n}\n\n.hide {\n    display: none\n}\n\n.inlineBlock {\n    display: inline-block;\n    zoom:1}\n\n.block {\n    display: block\n}\n\n.inline {\n    display: inline\n}\n\n.error {\n    color: #F00;\n    font-size: 12px\n}\n\nbutton {\n    cursor: pointer\n}\n\n.grid-98 {\n    width: 980px\n}\n\narticle,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary {\n    display: block\n}\n\n.clearfix:after {\n    content: '\\20';\n    display: block;\n    height: 0;\n    clear: both\n}\n\n.clearfix {\n    zoom:1}\n\n.clear {\n    clear: both;\n    height: 0;\n    line-height: 0;\n    font-size: 0;\n    visibility: hidden;\n    overflow: hidden\n}\n\n.wordwrap {\n    word-break: break-all;\n    word-wrap: break-word\n}\n\npre.wordwrap {\n    white-space: pre-wrap\n}\n\nhtml,body {\n    height: 100%;\n    width: 100%\n}\n\nhtml {\n    background: url(data:image/gif;base64,R0lGODlhKAAoALMAAO7s7fv5+vr4+e/t7vPx8vLw8fDu7/Xz9Pj29/n3+PTy8/b09ff19vHv8AAAAAAAACH5BAAAAAAALAAAAAAoACgAAAT/sCh0ThpqAJbKTciCJESyMM1iEEPSGEvBGQVSAE1DCLlHMIXFYsCANQ5CA4XQUBhgJEPnMEAwQgrCAaFQFBsMgEBAQGgPjBKy0DAlDMUCerE7oqAVGcJQmTStRC1oA3BlCm0HhwkHAlc5VTI8eWlNL3IMAz+JBAAKbGwLVAoWIkChBw0DbBMJb1wVW181IEw8GQUGAHQdCi48rQsZQyY9XaGaiQsXNToEyocHBgJCYsFHbQ0IOhYwGdFDXaodNqqpHRco2ldCHEyZYE90NI9zOCrYDNM1WiB62UNVsnhisKVJNC8sQhxJMGqAnWxFXLzBpGRIAxmtCGTBUaBRjSoh/xCILPAjGJoLPwqQ5HBoT7ByxJQ461JG2ZFeTFLAycZFGQAXXVZwYKgL2Co3BzomVSDgQpMT0bRpQ2JFAok9zZQlIFihSRAgWToYSEHkHxoEYvgQGMuBAhFgOWoSWxSAC4NRW5yIoBNqyAoJDGKIPaCRASY2HO6KzKfFiQ6PLkPQcgIIRYcyInWMSrJWyUJMPVusCIZJUTQkTpQMwODN1YJsJACOGItE1YCkjTJVuAIDQNITezSCSCNChp4yN60wFElnD5FXNVAoCKbNiQwnhN5MYOmJNkkwQKIFtjsdiEMhYU8QYyMlRjYPAaa0DGygCzwTcDzY0HJkD8kqBHigQP8ncGgDhUo6qANOEKPgtEl6o1AQAhqpUKHEd6AY8ZqEbGQjxQZOFEGQBytUwZIUN20FxhGJHBIKQ0yNxpU2R1wXgxAFZCKAN6/h4AlJa4ExghMoacMEB1F1U4USh7yXhkYUuJAIMShMyccoO4aSIx+GWTCdC0Bw4EEKFjAWwgBCgPFGHmY0MZYMFqGyUVI08LFAJ8qwgKJhLKnwRBsD4XJbCS45o2V4XrTHBx8moAdDETswsagpDFVwQg6WDEXFAk3dEU5SQUwTzDFCMFRTGyR5EuB1oCQAgF1R3PXCIlIgmI4FfwSmg2YvdfFkNESgsGOOMYQh4RMWvgYpGKoksRiKmpI1QMZroYrj4ggwZhGgLuK9UAEBa6kiDSpA1OfDdAKMNZYLQ7hnGI2vbXGCDA4ZEgIdTUxQpg7iakOCRp1QsUc+q8mAIiEqGNxlU2OCK1UOw7hagwygoXCbnVzmhwlDRcABAJppRBcNGOI1wkdIUJLUVDP1/YSSEm22woi2aORUhgHPeRFYPxEAADs=) repeat top left fixed\n}\n\n.mod-page-body {\n    height: auto;\n    _height: 100%;\n    min-height: 100%;\n    zoom:1}\n\n.mod-page-body .mod-page-main .x-page-container {\n    padding: 0;\n    margin: 0;\n    zoom:1}\n\n.mod-page-body {\n    color: #454545;\n    zoom:1}\n\n.mod-page-body .t-remark {\n    color: #959595\n}\n\n.mod-page-body a.a-normal {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-normal:hover {\n    color: #3cbce7\n}\n\n.mod-page-body a.a-incontent {\n    color: #454545\n}\n\n.mod-page-body a.a-incontent:hover {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-insist {\n    color: #f46e6e\n}\n\n.mod-page-body a.a-insist:hover {\n    color: #c55454\n}\n\n.border-radius-6 {\n    -moz-border-radius: 6px;\n    -khtml-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px\n}\n\n.border-radius-10 {\n    -moz-border-radius: 10px;\n    -khtml-border-radius: 10px;\n    -webkit-border-radius: 10px;\n    border-radius: 10px\n}\n\n.border-shadow {\n    -webkit-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -moz-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -khtml-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    box-shadow: 0 2px 2px rgba(6,0,1,0.05)\n}\n\n.mod-page-body .mod-page-main {\n    padding-top: 50px\n}\n\n.mod-without-msyahei .mod-topbar .q-nav-sp span {\n    _margin-top: 18px\n}\n\n.mod-pagerbar {\n    background: #fff;\n    padding: 20px 0;\n    text-align: center;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none\n}\n\n.mod-pagerbar a,.mod-pagerbar span {\n    padding: 3px 8px;\n    margin: 0 5px 0 0;\n    color: #454545\n}\n\n.mod-pagerbar a {\n    background: #f5f5f5;\n    cursor: pointer\n}\n\n.mod-pagerbar a:hover {\n    background-color: #3fa7cb;\n    color: #fff\n}\n\n.mod-pagerbar span {\n    background: #3fa7cb;\n    color: #fff;\n    font-weight: bold;\n    cursor: default\n}\n\n.mod-page-body .mod-page-main {\n    padding-bottom: 85px\n}\n\n.mod-footer {\n    padding: 30px 0 15px 0;\n    width: 100%;\n    height: 40px;\n    position: relative;\n    margin-top: -85px;\n    clear: both;\n    zoom:1}\n\n.mod-footer .hidden-box {\n    line-height: 0;\n    height: 0;\n    overflow: hidden\n}\n\n.mod-footer .footer-box {\n    text-align: center;\n    font-family: Arial,simsun;\n    font-size: 12px\n}\n\n.mod-footer .footer-box .inner-box {\n    margin-bottom: 10px;\n    line-height: 14px;\n    height: 14px;\n    overflow: hidden;\n    color: #3FA7CB\n}\n\n.mod-footer .footer-box .copy-box {\n    color: #959595;\n    line-height: 12px;\n    height: 12px;\n    overflow: hidden\n}\n\n.custom-scroll-bar {\n    overflow-y: auto;\n    overflow-x: hidden\n}\n\n.custom-scroll-bar::-webkit-scrollbar {\n    width: 10px;\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(202, 202, 202, .07)),color-stop(100%,rgba(229, 229, 229, .07)));\n    background: -webkit-linear-gradient(left,rgba(202, 202, 202, .07) 0,rgba(229, 229, 229, .07) 100%);\n    -webkit-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    -moz-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    background-color: #E5E5E5\n}\n\n.custom-scroll-bar::-webkit-scrollbar-thumb {\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(233, 233, 233, .05)),color-stop(100%,rgba(221, 221, 221, .05)));\n    background: -webkit-linear-gradient(left,rgba(233, 233, 233, .05) 0,rgba(221, 221, 221, .05) 100%);\n    -webkit-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    -moz-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    background-color: #E9E9E9\n}\n\n.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb {\n    overflow: visible;\n    border-radius: 4px;\n    -moz-border-radius: 4px;\n    -webkit-border-radius: 4px;\n    border: solid 1px #A6A6A6\n}\n\n.custom-scroll-bar::-webkit-scrollbar-button {\n    height: 0;\n    display: block;\n    background-color: transparent\n}\n\n.tab {\n    position: relative;\n    z-index: 1\n}\n\n.tab-bottom-line {\n    border-top: 2px solid #e7e7e7;\n    margin-top: -2px\n}\n\n.tab-vernier {\n    display: none;\n    border-bottom: 2px solid #3fa7cb;\n    position: absolute;\n    top: 0;\n    bottom: 0\n}\n\n.tab-li {\n    display: inline-block;\n    *display: inline;\n    *zoom:1;cursor: pointer;\n    padding: 5px 10px;\n    border-bottom: 2px solid #e7e7e7\n}\n\n.tab-li-ascii {\n    *position: relative;\n    *bottom: -2px;\n    _bottom: 0;\n    _position: static\n}\n\n.tab-li span {\n    _height: auto;\n    _line-height: 18px\n}\n\n.tab-li-hover,.tab-li-selected {\n    color: #3fa7cb;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n    border-bottom-color: #3fa7cb\n}\n\n.tab-li-hover {\n    -webkit-transition: color .5s, border-bottom-color .5s;\n    -o-transition: color .5s, border-bottom-color .5s;\n    -moz-transition: color .5s, border-bottom-color .5s;\n    -ms-transition: color .5s, border-bottom-color .5s;\n    transition: color .5s, border-bottom-color .5s\n}\n\n.input-box-container input.real-input,.input-box-parent,.input-box {\n    color: #CCC;\n    border: 1px solid #CCC;\n    border-bottom: 1px solid #e2e2e2;\n    border-right: 1px solid #e2e2e2;\n    box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -moz-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -webkit-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    background-color: white;\n    vertical-align: middle;\n    font-size: 12px;\n    padding: 10px 0 8px 8px;\n    padding: 12px 0 6px 8px\\9;\n    height: 18px;\n    overflow: hidden\n}\n\n\n.mod-ting-player {\n    height: 37px;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo,.mod-ting-player .music-play-bt,.mod-ting-player .music-desc-info {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAACaCAMAAADcrusAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwBQTFRFYp/KP4vADW6xSZLERpDCH3m25eXl09PT////Q6jL/Pz85ubmL4mtBliP6+vrEHCygrTW8PDwzuHu0+LsnsTeDm+xC22w6Ojo8PX4CGyv29vboMXfD2+x6urqIXq3YaDLttHjQIzASJHD5+fnr87j19fX9vb3MIO8MoS86vH27e3t7fHzu9zoxdro7vL0E3KzXp7KCm2wL4K7S5PEWLHQq8zjyt7s7+/vpcjhncTe8vT27vHzF3W0FnS0Gna1JHy49fb2Inu3g7PUnMPehbXXd67Sn8nZV5rH+fn6GXW0Kn+6w9vr9Pb3LIG7JX24xNrp9vf41+bwyt7rxNvr8/X2Q47C6u/ztdLm1ePtEHGymcHdX57Jv9bm2ebvMoS7gLHS+fr7ytzpSaXGpcLVarDK6/L3b6jPQabJ+Pn5vNHf8PLzgbPWjLLM2OfxfLDT4OrtFW+sbKbO8PP0B2ms8vT14ez0g7TWLIG6uNPl5e3yTZXFZKLMk73aWZzJ4uzzjbrZd63SIHq3UJbG1eXr2+PpwNfnq8vhx97nrszheq/T/f39zN/rh8bcjsHU0uHr2NjYdaXE3ebsdKrPx9vqZaLLcqrQtNPf+vv8RYi1RqXIKoC67vT49PX2TJPD2+rv0eLuU4+4XZ3JXJ3KR6rMXZ7JzODt7vH0Imub7/T2b6jQo8fgNIa96/H0c7PLc73XQZS1yd3rXKvI8/b5yt3q2+jx3+nw4+zwe7DU9Pj69/r7Qo3Bl83fQaTID3Cxxd/pQqbJQqfKw9no3+ju3uvvkrzZMn2wk77bea3Q6O7ylcvevNboHHe1m8HbCWywGmaZH2maf7HT4ervEG2sRJS1aaXOR5a2OYi+PIq/ocbfSavMEXGyFHOzU5fGJn24hLTViLfWWJrHWJvILIC6LYG7udLkVZnG7/L0zdzm4Ovx4erx2ubuZqLMHXi2Xp/LvNfpW5zJKX65B2uv9vb29/f39fX18fHx+Pj49PT05OTk8/Pz+fn5+/v78vLy+vr66enp////uAyb8AAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAQYSURBVHja7Nh3eBNlHAfwo5Q0d4U0KS1tacsse4koCgIyxIELAQEB90ZxVQFRAWUj7r0VlakyZQruvQc4sW7Bgf7urve2uVzjXd4ceS+53uVX+uTJ49PvH7nk976fJ/ckT/K9hAvLpVW4cHKNqOLCoYXKZWt4EtSQSUsSaJmVxWUrQUQ63BEO25CR0+/rnFNS0iuz4tYEkhW2I69mAkDv/Hz9duBFM5MhN5YA9Hlr/4mjyy77GWDaBjsiKWxmAawet1XQ9GWty6wB0OpUy7INmV8ENz0iaObDtSfDw3udyfWnQLstKjMYNQC+CCYQUYplKAyaohrHth9EJ29AxhPMhnjScd5PMHuxot/7ATYH6axnJ/j7zFpJj0Y5kJGrSf1f3Pcr+LUxHSVp8KPS9wCD/hxrJbJIc+77+jvR6UJpYdshQ74Bf8W2NuI1XOYfk4r08S3dopus5Dt9CdoJbfLhrxG9wH8cFCu/7YG+488w5sUWQmSab42lPusfg9bXdfkR/IfAkcpRh7bIbZ5jzFsrdJOV7DCWZsxs8mFfTZwYT5ZqdqRV5FlW7IYJksyB/xkoU+TOJllpIdWE5m5jqbFWAQPvPfssmPoUzPjk7RPyKSl6L0g3WclrX+prpx8/+WqDwjFlLSLHZ2/vrd/OFkQ7Qj69YkSTfy4h5J7ifnnDcpUe/fLy8lYVNv/35kZfnaMQloSqzRBFVYP60XjZJbmavvrVRFU10dwST5JIHUgHPAlESGUIEVkVBCQxkiJScEQlMhxpjzVcONQe25VhdOpCkjwbH0NoZXq8zpWqdfVhiapVJRK3yvPESHSQfqRlAE1qso0O9Hjd6pslNfVBlr2THGEKcflHlyoJsZDIgCXNysvv7I8k+rfwm7+7E6Z2DQKfXS5ZYiGRQQIBePAuNIGrzncmYiwmgfInJx8YWkhkYEsAfkGTGx5QbIlRmx6vHItJjj5c0A4MkyEZiwoFScaQxqcJQWZmJUZterwklmbRcyJsnMnHOcMLVYkQBJm7UVAIcSJGB3q8bCMSktiSLsQuLPGhiU+kxK3uGKLKkQGGRAfpR2jLerwuNRyowpJAge+gujKtSry0DiVeWi8l7vb7+39e4hhSLyW+4jk02bVmgQuh9cqsNn3p4ttOSoIwfd2U5/l1c1C9bxD+oWMdCK3XeMK/csEmLOH58+53JkzFm4R/+flr7XufNrId4fmdaLJksD2h9cr0vkkO684MkyFPb+8p4sgLj4tirYTWq5VYzqk2wlwVfP71u93k+DiTK1+XZWdCu1J2yUGSaIkTl9iUOIKYJY4gZr2mhiCuYcxGdhGhKiwJ1WSju7IgXUuc/YtARSdFREMnRSQLHf2zj00DaSANpIEkSwR0uBA6KSKV6NSF4LvyPwEGAADi7COi7zQsAAAAAElFTkSuQmCC) no-repeat\n}\n\n.mod-ting-player .music-bg-cover {\n    height: 37px;\n    display: block;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo {\n    float: left;\n    height: 37px;\n    width: 50px;\n    text-indent: -9999em;\n    position: relative;\n    z-index: 2\n}\n\n.mod-ting-player .music-play-bt {\n    float: right;\n    height: 37px;\n    width: 41px;\n    background-position: 0 -39px;\n    text-indent: -9999em;\n    z-index: 2;\n    position: relative\n}\n\n.mod-feed-list-box .feed-content .music-player-wraper .music-play-bt:hover {\n    background-position: 0 -78px\n}\n\n.mod-ting-player .music-desc-info {\n    height: 37px;\n    font-family: 'simsun';\n    font-size: 12px;\n    position: relative;\n    line-height: 37px;\n    text-align: center;\n    overflow: hidden;\n    background-position: 0 -117px;\n    background-repeat: repeat-x;\n    margin: -37px 10px 0 10px\n}\n\n.border-radius-6,.border-radius-10,.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb,.x-message-shadow,.x-message-box .x-message-content {\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box\n}\n\n.mod-notfound {\n    border-right: #e1e1e1 1px solid; border-top: #e1e1e1 1px solid; margin-top: 10px; background: #fff; border-left: #e1e1e1 1px solid; border-bottom: #e1e1e1 1px solid; height: 585px; text-align: center; border-radius: 10px\n}","site":{"data":{}},"excerpt":"","more":"body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,pre,form,fieldset,legend,button,input,textarea,th,td {\n    margin: 0;\n    padding: 0\n}\n\nhtml {\n    color: #000;\n    background: #fff;\n    overflow-y: scroll\n}\n\nbody,button,input,select,textarea,pre {\n    font-size: 12px;\n    font-family: Tahoma, Helvetica, \"Microsoft Yahei\", \"å¾®è½¯é›…é»‘\", Arial, STHeiti;\n    _font-family: Tahoma,Arial,Helvetica,STHeiti\n}\n\nhtml.mod-without-msyahei body {\n    font-family: Tahoma,Helvetica,Arial,STHeiti\n}\n\nh1,h2,h3,h4,h5,h6 {\n    font-size: 100%\n}\n\naddress,cite,dfn,em,var {\n    font-style: normal\n}\n\nsmall {\n    font-size: 12px\n}\n\nul,ol {\n    list-style: none\n}\n\na {\n    text-decoration: none;\n    color: #3fa7cb\n}\n\na:hover {\n    color: #3cbce7;\n    -webkit-transition: color .15s linear , background-color .3s linear;\n    -moz-transition: color .15s linear , background-color .3s linear;\n    -o-transition: color .15s linear , background-color .3s linear;\n    -ms-transition: color .15s linear , background-color .3s linear;\n    transition: color .15s linear , background-color .3s linear;\n    cursor: pointer\n}\n\nsup {\n    vertical-align: text-top\n}\n\nsub {\n    vertical-align: text-bottom\n}\n\nlegend {\n    color: #000\n}\n\nfieldset,img {\n    border: 0\n}\n\nbutton,input,select,textarea {\n    font-size: 100%\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0\n}\n\nimg {\n    -ms-interpolation-mode: bicubic\n}\n\ntextarea {\n    resize: vertical\n}\n\n*:focus {\n    outline: 0\n}\n\n.left {\n    float: left\n}\n\n.right {\n    float: right\n}\n\n.overflow {\n    overflow: hidden\n}\n\n.hide {\n    display: none\n}\n\n.inlineBlock {\n    display: inline-block;\n    zoom:1}\n\n.block {\n    display: block\n}\n\n.inline {\n    display: inline\n}\n\n.error {\n    color: #F00;\n    font-size: 12px\n}\n\nbutton {\n    cursor: pointer\n}\n\n.grid-98 {\n    width: 980px\n}\n\narticle,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary {\n    display: block\n}\n\n.clearfix:after {\n    content: '\\20';\n    display: block;\n    height: 0;\n    clear: both\n}\n\n.clearfix {\n    zoom:1}\n\n.clear {\n    clear: both;\n    height: 0;\n    line-height: 0;\n    font-size: 0;\n    visibility: hidden;\n    overflow: hidden\n}\n\n.wordwrap {\n    word-break: break-all;\n    word-wrap: break-word\n}\n\npre.wordwrap {\n    white-space: pre-wrap\n}\n\nhtml,body {\n    height: 100%;\n    width: 100%\n}\n\nhtml {\n    background: url(data:image/gif;base64,R0lGODlhKAAoALMAAO7s7fv5+vr4+e/t7vPx8vLw8fDu7/Xz9Pj29/n3+PTy8/b09ff19vHv8AAAAAAAACH5BAAAAAAALAAAAAAoACgAAAT/sCh0ThpqAJbKTciCJESyMM1iEEPSGEvBGQVSAE1DCLlHMIXFYsCANQ5CA4XQUBhgJEPnMEAwQgrCAaFQFBsMgEBAQGgPjBKy0DAlDMUCerE7oqAVGcJQmTStRC1oA3BlCm0HhwkHAlc5VTI8eWlNL3IMAz+JBAAKbGwLVAoWIkChBw0DbBMJb1wVW181IEw8GQUGAHQdCi48rQsZQyY9XaGaiQsXNToEyocHBgJCYsFHbQ0IOhYwGdFDXaodNqqpHRco2ldCHEyZYE90NI9zOCrYDNM1WiB62UNVsnhisKVJNC8sQhxJMGqAnWxFXLzBpGRIAxmtCGTBUaBRjSoh/xCILPAjGJoLPwqQ5HBoT7ByxJQ461JG2ZFeTFLAycZFGQAXXVZwYKgL2Co3BzomVSDgQpMT0bRpQ2JFAok9zZQlIFihSRAgWToYSEHkHxoEYvgQGMuBAhFgOWoSWxSAC4NRW5yIoBNqyAoJDGKIPaCRASY2HO6KzKfFiQ6PLkPQcgIIRYcyInWMSrJWyUJMPVusCIZJUTQkTpQMwODN1YJsJACOGItE1YCkjTJVuAIDQNITezSCSCNChp4yN60wFElnD5FXNVAoCKbNiQwnhN5MYOmJNkkwQKIFtjsdiEMhYU8QYyMlRjYPAaa0DGygCzwTcDzY0HJkD8kqBHigQP8ncGgDhUo6qANOEKPgtEl6o1AQAhqpUKHEd6AY8ZqEbGQjxQZOFEGQBytUwZIUN20FxhGJHBIKQ0yNxpU2R1wXgxAFZCKAN6/h4AlJa4ExghMoacMEB1F1U4USh7yXhkYUuJAIMShMyccoO4aSIx+GWTCdC0Bw4EEKFjAWwgBCgPFGHmY0MZYMFqGyUVI08LFAJ8qwgKJhLKnwRBsD4XJbCS45o2V4XrTHBx8moAdDETswsagpDFVwQg6WDEXFAk3dEU5SQUwTzDFCMFRTGyR5EuB1oCQAgF1R3PXCIlIgmI4FfwSmg2YvdfFkNESgsGOOMYQh4RMWvgYpGKoksRiKmpI1QMZroYrj4ggwZhGgLuK9UAEBa6kiDSpA1OfDdAKMNZYLQ7hnGI2vbXGCDA4ZEgIdTUxQpg7iakOCRp1QsUc+q8mAIiEqGNxlU2OCK1UOw7hagwygoXCbnVzmhwlDRcABAJppRBcNGOI1wkdIUJLUVDP1/YSSEm22woi2aORUhgHPeRFYPxEAADs=) repeat top left fixed\n}\n\n.mod-page-body {\n    height: auto;\n    _height: 100%;\n    min-height: 100%;\n    zoom:1}\n\n.mod-page-body .mod-page-main .x-page-container {\n    padding: 0;\n    margin: 0;\n    zoom:1}\n\n.mod-page-body {\n    color: #454545;\n    zoom:1}\n\n.mod-page-body .t-remark {\n    color: #959595\n}\n\n.mod-page-body a.a-normal {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-normal:hover {\n    color: #3cbce7\n}\n\n.mod-page-body a.a-incontent {\n    color: #454545\n}\n\n.mod-page-body a.a-incontent:hover {\n    color: #3fa7cb\n}\n\n.mod-page-body a.a-insist {\n    color: #f46e6e\n}\n\n.mod-page-body a.a-insist:hover {\n    color: #c55454\n}\n\n.border-radius-6 {\n    -moz-border-radius: 6px;\n    -khtml-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px\n}\n\n.border-radius-10 {\n    -moz-border-radius: 10px;\n    -khtml-border-radius: 10px;\n    -webkit-border-radius: 10px;\n    border-radius: 10px\n}\n\n.border-shadow {\n    -webkit-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -moz-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    -khtml-box-shadow: 0 2px 2px rgba(6,0,1,0.05);\n    box-shadow: 0 2px 2px rgba(6,0,1,0.05)\n}\n\n.mod-page-body .mod-page-main {\n    padding-top: 50px\n}\n\n.mod-without-msyahei .mod-topbar .q-nav-sp span {\n    _margin-top: 18px\n}\n\n.mod-pagerbar {\n    background: #fff;\n    padding: 20px 0;\n    text-align: center;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none\n}\n\n.mod-pagerbar a,.mod-pagerbar span {\n    padding: 3px 8px;\n    margin: 0 5px 0 0;\n    color: #454545\n}\n\n.mod-pagerbar a {\n    background: #f5f5f5;\n    cursor: pointer\n}\n\n.mod-pagerbar a:hover {\n    background-color: #3fa7cb;\n    color: #fff\n}\n\n.mod-pagerbar span {\n    background: #3fa7cb;\n    color: #fff;\n    font-weight: bold;\n    cursor: default\n}\n\n.mod-page-body .mod-page-main {\n    padding-bottom: 85px\n}\n\n.mod-footer {\n    padding: 30px 0 15px 0;\n    width: 100%;\n    height: 40px;\n    position: relative;\n    margin-top: -85px;\n    clear: both;\n    zoom:1}\n\n.mod-footer .hidden-box {\n    line-height: 0;\n    height: 0;\n    overflow: hidden\n}\n\n.mod-footer .footer-box {\n    text-align: center;\n    font-family: Arial,simsun;\n    font-size: 12px\n}\n\n.mod-footer .footer-box .inner-box {\n    margin-bottom: 10px;\n    line-height: 14px;\n    height: 14px;\n    overflow: hidden;\n    color: #3FA7CB\n}\n\n.mod-footer .footer-box .copy-box {\n    color: #959595;\n    line-height: 12px;\n    height: 12px;\n    overflow: hidden\n}\n\n.custom-scroll-bar {\n    overflow-y: auto;\n    overflow-x: hidden\n}\n\n.custom-scroll-bar::-webkit-scrollbar {\n    width: 10px;\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(202, 202, 202, .07)),color-stop(100%,rgba(229, 229, 229, .07)));\n    background: -webkit-linear-gradient(left,rgba(202, 202, 202, .07) 0,rgba(229, 229, 229, .07) 100%);\n    -webkit-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    -moz-box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    box-shadow: 0 0 1px 0 rgba(0,0,0,.15) inset,0 1px 0 0 #fff;\n    background-color: #E5E5E5\n}\n\n.custom-scroll-bar::-webkit-scrollbar-thumb {\n    background: -webkit-gradient(linear,left top,right top,color-stop(0%,rgba(233, 233, 233, .05)),color-stop(100%,rgba(221, 221, 221, .05)));\n    background: -webkit-linear-gradient(left,rgba(233, 233, 233, .05) 0,rgba(221, 221, 221, .05) 100%);\n    -webkit-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    -moz-box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    box-shadow: 0 2px 1px 0 rgba(0,0,0,.05);\n    background-color: #E9E9E9\n}\n\n.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb {\n    overflow: visible;\n    border-radius: 4px;\n    -moz-border-radius: 4px;\n    -webkit-border-radius: 4px;\n    border: solid 1px #A6A6A6\n}\n\n.custom-scroll-bar::-webkit-scrollbar-button {\n    height: 0;\n    display: block;\n    background-color: transparent\n}\n\n.tab {\n    position: relative;\n    z-index: 1\n}\n\n.tab-bottom-line {\n    border-top: 2px solid #e7e7e7;\n    margin-top: -2px\n}\n\n.tab-vernier {\n    display: none;\n    border-bottom: 2px solid #3fa7cb;\n    position: absolute;\n    top: 0;\n    bottom: 0\n}\n\n.tab-li {\n    display: inline-block;\n    *display: inline;\n    *zoom:1;cursor: pointer;\n    padding: 5px 10px;\n    border-bottom: 2px solid #e7e7e7\n}\n\n.tab-li-ascii {\n    *position: relative;\n    *bottom: -2px;\n    _bottom: 0;\n    _position: static\n}\n\n.tab-li span {\n    _height: auto;\n    _line-height: 18px\n}\n\n.tab-li-hover,.tab-li-selected {\n    color: #3fa7cb;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n    border-bottom-color: #3fa7cb\n}\n\n.tab-li-hover {\n    -webkit-transition: color .5s, border-bottom-color .5s;\n    -o-transition: color .5s, border-bottom-color .5s;\n    -moz-transition: color .5s, border-bottom-color .5s;\n    -ms-transition: color .5s, border-bottom-color .5s;\n    transition: color .5s, border-bottom-color .5s\n}\n\n.input-box-container input.real-input,.input-box-parent,.input-box {\n    color: #CCC;\n    border: 1px solid #CCC;\n    border-bottom: 1px solid #e2e2e2;\n    border-right: 1px solid #e2e2e2;\n    box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -moz-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    -webkit-box-shadow: 1px 2px 3px #F0F0F0 inset;\n    background-color: white;\n    vertical-align: middle;\n    font-size: 12px;\n    padding: 10px 0 8px 8px;\n    padding: 12px 0 6px 8px\\9;\n    height: 18px;\n    overflow: hidden\n}\n\n\n.mod-ting-player {\n    height: 37px;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo,.mod-ting-player .music-play-bt,.mod-ting-player .music-desc-info {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAACaCAMAAADcrusAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwBQTFRFYp/KP4vADW6xSZLERpDCH3m25eXl09PT////Q6jL/Pz85ubmL4mtBliP6+vrEHCygrTW8PDwzuHu0+LsnsTeDm+xC22w6Ojo8PX4CGyv29vboMXfD2+x6urqIXq3YaDLttHjQIzASJHD5+fnr87j19fX9vb3MIO8MoS86vH27e3t7fHzu9zoxdro7vL0E3KzXp7KCm2wL4K7S5PEWLHQq8zjyt7s7+/vpcjhncTe8vT27vHzF3W0FnS0Gna1JHy49fb2Inu3g7PUnMPehbXXd67Sn8nZV5rH+fn6GXW0Kn+6w9vr9Pb3LIG7JX24xNrp9vf41+bwyt7rxNvr8/X2Q47C6u/ztdLm1ePtEHGymcHdX57Jv9bm2ebvMoS7gLHS+fr7ytzpSaXGpcLVarDK6/L3b6jPQabJ+Pn5vNHf8PLzgbPWjLLM2OfxfLDT4OrtFW+sbKbO8PP0B2ms8vT14ez0g7TWLIG6uNPl5e3yTZXFZKLMk73aWZzJ4uzzjbrZd63SIHq3UJbG1eXr2+PpwNfnq8vhx97nrszheq/T/f39zN/rh8bcjsHU0uHr2NjYdaXE3ebsdKrPx9vqZaLLcqrQtNPf+vv8RYi1RqXIKoC67vT49PX2TJPD2+rv0eLuU4+4XZ3JXJ3KR6rMXZ7JzODt7vH0Imub7/T2b6jQo8fgNIa96/H0c7PLc73XQZS1yd3rXKvI8/b5yt3q2+jx3+nw4+zwe7DU9Pj69/r7Qo3Bl83fQaTID3Cxxd/pQqbJQqfKw9no3+ju3uvvkrzZMn2wk77bea3Q6O7ylcvevNboHHe1m8HbCWywGmaZH2maf7HT4ervEG2sRJS1aaXOR5a2OYi+PIq/ocbfSavMEXGyFHOzU5fGJn24hLTViLfWWJrHWJvILIC6LYG7udLkVZnG7/L0zdzm4Ovx4erx2ubuZqLMHXi2Xp/LvNfpW5zJKX65B2uv9vb29/f39fX18fHx+Pj49PT05OTk8/Pz+fn5+/v78vLy+vr66enp////uAyb8AAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAQYSURBVHja7Nh3eBNlHAfwo5Q0d4U0KS1tacsse4koCgIyxIELAQEB90ZxVQFRAWUj7r0VlakyZQruvQc4sW7Bgf7urve2uVzjXd4ceS+53uVX+uTJ49PvH7nk976fJ/ckT/K9hAvLpVW4cHKNqOLCoYXKZWt4EtSQSUsSaJmVxWUrQUQ63BEO25CR0+/rnFNS0iuz4tYEkhW2I69mAkDv/Hz9duBFM5MhN5YA9Hlr/4mjyy77GWDaBjsiKWxmAawet1XQ9GWty6wB0OpUy7INmV8ENz0iaObDtSfDw3udyfWnQLstKjMYNQC+CCYQUYplKAyaohrHth9EJ29AxhPMhnjScd5PMHuxot/7ATYH6axnJ/j7zFpJj0Y5kJGrSf1f3Pcr+LUxHSVp8KPS9wCD/hxrJbJIc+77+jvR6UJpYdshQ74Bf8W2NuI1XOYfk4r08S3dopus5Dt9CdoJbfLhrxG9wH8cFCu/7YG+488w5sUWQmSab42lPusfg9bXdfkR/IfAkcpRh7bIbZ5jzFsrdJOV7DCWZsxs8mFfTZwYT5ZqdqRV5FlW7IYJksyB/xkoU+TOJllpIdWE5m5jqbFWAQPvPfssmPoUzPjk7RPyKSl6L0g3WclrX+prpx8/+WqDwjFlLSLHZ2/vrd/OFkQ7Qj69YkSTfy4h5J7ifnnDcpUe/fLy8lYVNv/35kZfnaMQloSqzRBFVYP60XjZJbmavvrVRFU10dwST5JIHUgHPAlESGUIEVkVBCQxkiJScEQlMhxpjzVcONQe25VhdOpCkjwbH0NoZXq8zpWqdfVhiapVJRK3yvPESHSQfqRlAE1qso0O9Hjd6pslNfVBlr2THGEKcflHlyoJsZDIgCXNysvv7I8k+rfwm7+7E6Z2DQKfXS5ZYiGRQQIBePAuNIGrzncmYiwmgfInJx8YWkhkYEsAfkGTGx5QbIlRmx6vHItJjj5c0A4MkyEZiwoFScaQxqcJQWZmJUZterwklmbRcyJsnMnHOcMLVYkQBJm7UVAIcSJGB3q8bCMSktiSLsQuLPGhiU+kxK3uGKLKkQGGRAfpR2jLerwuNRyowpJAge+gujKtSry0DiVeWi8l7vb7+39e4hhSLyW+4jk02bVmgQuh9cqsNn3p4ttOSoIwfd2U5/l1c1C9bxD+oWMdCK3XeMK/csEmLOH58+53JkzFm4R/+flr7XufNrId4fmdaLJksD2h9cr0vkkO684MkyFPb+8p4sgLj4tirYTWq5VYzqk2wlwVfP71u93k+DiTK1+XZWdCu1J2yUGSaIkTl9iUOIKYJY4gZr2mhiCuYcxGdhGhKiwJ1WSju7IgXUuc/YtARSdFREMnRSQLHf2zj00DaSANpIEkSwR0uBA6KSKV6NSF4LvyPwEGAADi7COi7zQsAAAAAElFTkSuQmCC) no-repeat\n}\n\n.mod-ting-player .music-bg-cover {\n    height: 37px;\n    display: block;\n    overflow: hidden\n}\n\n.mod-ting-player .music-logo {\n    float: left;\n    height: 37px;\n    width: 50px;\n    text-indent: -9999em;\n    position: relative;\n    z-index: 2\n}\n\n.mod-ting-player .music-play-bt {\n    float: right;\n    height: 37px;\n    width: 41px;\n    background-position: 0 -39px;\n    text-indent: -9999em;\n    z-index: 2;\n    position: relative\n}\n\n.mod-feed-list-box .feed-content .music-player-wraper .music-play-bt:hover {\n    background-position: 0 -78px\n}\n\n.mod-ting-player .music-desc-info {\n    height: 37px;\n    font-family: 'simsun';\n    font-size: 12px;\n    position: relative;\n    line-height: 37px;\n    text-align: center;\n    overflow: hidden;\n    background-position: 0 -117px;\n    background-repeat: repeat-x;\n    margin: -37px 10px 0 10px\n}\n\n.border-radius-6,.border-radius-10,.custom-scroll-bar::-webkit-scrollbar,.custom-scroll-bar::-webkit-scrollbar-thumb,.x-message-shadow,.x-message-box .x-message-content {\n    -moz-background-clip: padding;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box\n}\n\n.mod-notfound {\n    border-right: #e1e1e1 1px solid; border-top: #e1e1e1 1px solid; margin-top: 10px; background: #fff; border-left: #e1e1e1 1px solid; border-bottom: #e1e1e1 1px solid; height: 585px; text-align: center; border-radius: 10px\n}"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/hexo+travis/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">自动部署发布Hexo程序到Github上</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/hexo+travis/\" class=\"leancloud_visitors\" data-flag-title=\"自动部署发布Hexo程序到Github上\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(自动部署发布Hexo程序到Github上)原始地址]<a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                            <p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br><a id=\"more\"></a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/travis-CI/\" rel=\"tag\"># travis CI</a>\n\n                                <a href=\"/tags/GitHub/\" rel=\"tag\"># GitHub</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"next\" title=\"YAML使用\">\n                                        <i class=\"fa fa-chevron-left\"></i> YAML使用\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"prev\" title=\"Centos7安装git\">\n                                        Centos7安装git <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/20/build/hexo+travis/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/hexo+travis/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">自动部署发布Hexo程序到Github上</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/hexo+travis/\" class=\"leancloud_visitors\" data-flag-title=\"自动部署发布Hexo程序到Github上\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(自动部署发布Hexo程序到Github上)原始地址]<a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                            <p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br><a id=\"more\"></a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/travis-CI/\" rel=\"tag\"># travis CI</a>\n\n                                <a href=\"/tags/GitHub/\" rel=\"tag\"># GitHub</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"next\" title=\"YAML使用\">\n                                        <i class=\"fa fa-chevron-left\"></i> YAML使用\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"prev\" title=\"Centos7安装git\">\n                                        Centos7安装git <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/20/build/hexo+travis/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw1006v9vvuxwi4xcm9","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/hexo+travis/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">自动部署发布Hexo程序到Github上</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/hexo+travis/\" class=\"leancloud_visitors\" data-flag-title=\"自动部署发布Hexo程序到Github上\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(自动部署发布Hexo程序到Github上)原始地址]<a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                            <p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br><a id=\"more\"></a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/travis-CI/\" rel=\"tag\"># travis CI</a>\n\n                                <a href=\"/tags/GitHub/\" rel=\"tag\"># GitHub</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"next\" title=\"YAML使用\">\n                                        <i class=\"fa fa-chevron-left\"></i> YAML使用\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"prev\" title=\"Centos7安装git\">\n                                        Centos7安装git <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/hexo+travis/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">自动部署发布Hexo程序到Github上</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/hexo+travis/\" class=\"leancloud_visitors\" data-flag-title=\"自动部署发布Hexo程序到Github上\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(自动部署发布Hexo程序到Github上)原始地址]<a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                            <p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br><a id=\"more\"></a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/hexo+travis/\" title=\"自动部署发布Hexo程序到Github上\">http://xcoder.me/2017-05/build/hexo+travis/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/travis-CI/\" rel=\"tag\"># travis CI</a>\n\n                                <a href=\"/tags/GitHub/\" rel=\"tag\"># GitHub</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"next\" title=\"YAML使用\">\n                                        <i class=\"fa fa-chevron-left\"></i> YAML使用\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"prev\" title=\"Centos7安装git\">\n                                        Centos7安装git <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">安装升级Node.js</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/安装升级Node.js/\" class=\"leancloud_visitors\" data-flag-title=\"安装升级Node.js\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(安装升级Node.js)原始地址]<a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                            <p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n                            <h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2><a id=\"more\"></a>\n                            <h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n                            <p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n                            <p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n                            <p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n                            <p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n                            <p>删除此失败版本</p>\n                            <p>再重复上面的动作</p>\n                            <h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n                            <p>其他相关命令</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Node-js/\" rel=\"tag\"># Node.js</a>\n\n                                <a href=\"/tags/pm2/\" rel=\"tag\"># pm2</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"next\" title=\"POI高效操作Excel\">\n                                        <i class=\"fa fa-chevron-left\"></i> POI高效操作Excel\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"prev\" title=\"YAML使用\">\n                                        YAML使用 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级Node\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">升级Node</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#全局安装n模块\"><span class=\"nav-number\">1.1.</span> <span class=\"nav-text\">全局安装n模块</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级PM2和NPM\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">升级PM2和NPM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/20/build/安装升级Node.js/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">安装升级Node.js</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/安装升级Node.js/\" class=\"leancloud_visitors\" data-flag-title=\"安装升级Node.js\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(安装升级Node.js)原始地址]<a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                            <p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n                            <h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2><a id=\"more\"></a>\n                            <h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n                            <p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n                            <p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n                            <p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n                            <p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n                            <p>删除此失败版本</p>\n                            <p>再重复上面的动作</p>\n                            <h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n                            <p>其他相关命令</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Node-js/\" rel=\"tag\"># Node.js</a>\n\n                                <a href=\"/tags/pm2/\" rel=\"tag\"># pm2</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"next\" title=\"POI高效操作Excel\">\n                                        <i class=\"fa fa-chevron-left\"></i> POI高效操作Excel\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"prev\" title=\"YAML使用\">\n                                        YAML使用 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级Node\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">升级Node</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#全局安装n模块\"><span class=\"nav-number\">1.1.</span> <span class=\"nav-text\">全局安装n模块</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级PM2和NPM\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">升级PM2和NPM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/20/build/安装升级Node.js/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw2006w9vvu0p0600fc","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">安装升级Node.js</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/安装升级Node.js/\" class=\"leancloud_visitors\" data-flag-title=\"安装升级Node.js\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(安装升级Node.js)原始地址]<a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                            <p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n                            <h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2><a id=\"more\"></a>\n                            <h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n                            <p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n                            <p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n                            <p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n                            <p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n                            <p>删除此失败版本</p>\n                            <p>再重复上面的动作</p>\n                            <h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n                            <p>其他相关命令</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Node-js/\" rel=\"tag\"># Node.js</a>\n\n                                <a href=\"/tags/pm2/\" rel=\"tag\"># pm2</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"next\" title=\"POI高效操作Excel\">\n                                        <i class=\"fa fa-chevron-left\"></i> POI高效操作Excel\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"prev\" title=\"YAML使用\">\n                                        YAML使用 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级Node\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">升级Node</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#全局安装n模块\"><span class=\"nav-number\">1.1.</span> <span class=\"nav-text\">全局安装n模块</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级PM2和NPM\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">升级PM2和NPM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">安装升级Node.js</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/安装升级Node.js/\" class=\"leancloud_visitors\" data-flag-title=\"安装升级Node.js\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(安装升级Node.js)原始地址]<a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                            <p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n                            <h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2><a id=\"more\"></a>\n                            <h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n                            <p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n                            <p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n                            <p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n                            <p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n                            <p>删除此失败版本</p>\n                            <p>再重复上面的动作</p>\n                            <h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n                            <p>其他相关命令</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/安装升级Node.js/\" title=\"安装升级Node.js\">http://xcoder.me/2017-05/build/安装升级Node.js/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Node-js/\" rel=\"tag\"># Node.js</a>\n\n                                <a href=\"/tags/pm2/\" rel=\"tag\"># pm2</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"next\" title=\"POI高效操作Excel\">\n                                        <i class=\"fa fa-chevron-left\"></i> POI高效操作Excel\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/YAML使用/\" rel=\"prev\" title=\"YAML使用\">\n                                        YAML使用 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级Node\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">升级Node</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#全局安装n模块\"><span class=\"nav-number\">1.1.</span> <span class=\"nav-text\">全局安装n模块</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#升级PM2和NPM\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">升级PM2和NPM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">领域元数据建模</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/metadata/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">metadata</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/19/metadata/领域元数据建模/\" class=\"leancloud_visitors\" data-flag-title=\"领域元数据建模\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(领域元数据建模)原始地址]<a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                            <h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br><a id=\"more\"></a></p>\n                            <h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n                            <blockquote>\n                                <h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n                            <p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n                            <blockquote>\n                                <h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n                            <p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n                            <thead>\n                            <tr>\n                                <th>UML领域元素</th>\n                                <th style=\"text-align:center\">元数据元素</th>\n                                <th style=\"text-align:right\">示例</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>包</td>\n                                <td style=\"text-align:center\">Component</td>\n                                <td style=\"text-align:right\">sm.order</td>\n                            </tr>\n                            <tr>\n                                <td>包间依赖</td>\n                                <td style=\"text-align:center\">Component.dependencies</td>\n                                <td style=\"text-align:right\"></td>\n                            </tr>\n                            <tr>\n                                <td>基础类型</td>\n                                <td style=\"text-align:center\">DataType</td>\n                                <td style=\"text-align:right\">Integer,DateTime,String</td>\n                            </tr>\n                            <tr>\n                                <td>枚举类型</td>\n                                <td style=\"text-align:center\">Enumeration</td>\n                                <td style=\"text-align:right\">OrderStatus</td>\n                            </tr>\n                            <tr>\n                                <td>类型</td>\n                                <td style=\"text-align:center\">Entity</td>\n                                <td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n                            </tr>\n                            <tr>\n                                <td>接口</td>\n                                <td style=\"text-align:center\">Interface</td>\n                                <td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n                            </tr>\n                            <tr>\n                                <td>组合关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">组合</td>\n                            </tr>\n                            <tr>\n                                <td>关联关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">关联</td>\n                            </tr>\n                            <tr>\n                                <td>继承关系</td>\n                                <td style=\"text-align:center\">Generalization</td>\n                                <td style=\"text-align:right\">继承</td>\n                            </tr>\n                            <tr>\n                                <td>实现关系</td>\n                                <td style=\"text-align:center\">Realization</td>\n                                <td style=\"text-align:right\">实现</td>\n                            </tr>\n                            <tr>\n                                <td>属性</td>\n                                <td style=\"text-align:center\">Property</td>\n                                <td style=\"text-align:right\">code,status,order,details</td>\n                            </tr>\n                            <tr>\n                                <td>方法</td>\n                                <td style=\"text-align:center\">Operation</td>\n                                <td style=\"text-align:right\">submit,unSubmit</td>\n                            </tr>\n                            <tr>\n                                <td>方法参数</td>\n                                <td style=\"text-align:center\">Parameter</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                            <h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n                            <h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n                            <p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n                            <h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n                            <p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n                            <p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n                            <p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n                            <p>一个属性定义如下结构：</p>\n                            <p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n                            <p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n                            <p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n                            <p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n                            <p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n                            <h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n                            <p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n                            <p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n                            <h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n                            <p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n                            <h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n                            <h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n                            <p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n                            <h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n                            <p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n                            <h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n                            <h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/领域元数据/\" rel=\"tag\"># 领域元数据</a>\n\n                                <a href=\"/tags/建模/\" rel=\"tag\"># 建模</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"prev\" title=\"POI高效操作Excel\">\n                                        POI高效操作Excel <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#意义\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">意义</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#举例\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">举例</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#数据类型定义\"><span class=\"nav-number\">2.1.</span> <span class=\"nav-text\">数据类型定义</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#基础数据结构定义\"><span class=\"nav-number\">2.2.</span> <span class=\"nav-text\">基础数据结构定义</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#领域模型和元数据映射\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">领域模型和元数据映射</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#元数据结构\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">元数据结构</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#包\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">包</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#类型\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">类型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#枚举\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">枚举</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#组合\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">组合</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#关联\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">关联</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#接口\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">接口</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#实现\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#继承\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">继承</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#数据表\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">数据表</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/19/metadata/领域元数据建模/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">领域元数据建模</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/metadata/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">metadata</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/19/metadata/领域元数据建模/\" class=\"leancloud_visitors\" data-flag-title=\"领域元数据建模\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(领域元数据建模)原始地址]<a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                            <h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br><a id=\"more\"></a></p>\n                            <h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n                            <blockquote>\n                                <h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n                            <p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n                            <blockquote>\n                                <h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n                            <p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n                            <thead>\n                            <tr>\n                                <th>UML领域元素</th>\n                                <th style=\"text-align:center\">元数据元素</th>\n                                <th style=\"text-align:right\">示例</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>包</td>\n                                <td style=\"text-align:center\">Component</td>\n                                <td style=\"text-align:right\">sm.order</td>\n                            </tr>\n                            <tr>\n                                <td>包间依赖</td>\n                                <td style=\"text-align:center\">Component.dependencies</td>\n                                <td style=\"text-align:right\"></td>\n                            </tr>\n                            <tr>\n                                <td>基础类型</td>\n                                <td style=\"text-align:center\">DataType</td>\n                                <td style=\"text-align:right\">Integer,DateTime,String</td>\n                            </tr>\n                            <tr>\n                                <td>枚举类型</td>\n                                <td style=\"text-align:center\">Enumeration</td>\n                                <td style=\"text-align:right\">OrderStatus</td>\n                            </tr>\n                            <tr>\n                                <td>类型</td>\n                                <td style=\"text-align:center\">Entity</td>\n                                <td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n                            </tr>\n                            <tr>\n                                <td>接口</td>\n                                <td style=\"text-align:center\">Interface</td>\n                                <td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n                            </tr>\n                            <tr>\n                                <td>组合关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">组合</td>\n                            </tr>\n                            <tr>\n                                <td>关联关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">关联</td>\n                            </tr>\n                            <tr>\n                                <td>继承关系</td>\n                                <td style=\"text-align:center\">Generalization</td>\n                                <td style=\"text-align:right\">继承</td>\n                            </tr>\n                            <tr>\n                                <td>实现关系</td>\n                                <td style=\"text-align:center\">Realization</td>\n                                <td style=\"text-align:right\">实现</td>\n                            </tr>\n                            <tr>\n                                <td>属性</td>\n                                <td style=\"text-align:center\">Property</td>\n                                <td style=\"text-align:right\">code,status,order,details</td>\n                            </tr>\n                            <tr>\n                                <td>方法</td>\n                                <td style=\"text-align:center\">Operation</td>\n                                <td style=\"text-align:right\">submit,unSubmit</td>\n                            </tr>\n                            <tr>\n                                <td>方法参数</td>\n                                <td style=\"text-align:center\">Parameter</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                            <h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n                            <h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n                            <p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n                            <h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n                            <p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n                            <p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n                            <p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n                            <p>一个属性定义如下结构：</p>\n                            <p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n                            <p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n                            <p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n                            <p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n                            <p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n                            <h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n                            <p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n                            <p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n                            <h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n                            <p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n                            <h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n                            <h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n                            <p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n                            <h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n                            <p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n                            <h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n                            <h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/领域元数据/\" rel=\"tag\"># 领域元数据</a>\n\n                                <a href=\"/tags/建模/\" rel=\"tag\"># 建模</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"prev\" title=\"POI高效操作Excel\">\n                                        POI高效操作Excel <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#意义\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">意义</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#举例\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">举例</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#数据类型定义\"><span class=\"nav-number\">2.1.</span> <span class=\"nav-text\">数据类型定义</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#基础数据结构定义\"><span class=\"nav-number\">2.2.</span> <span class=\"nav-text\">基础数据结构定义</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#领域模型和元数据映射\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">领域模型和元数据映射</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#元数据结构\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">元数据结构</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#包\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">包</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#类型\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">类型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#枚举\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">枚举</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#组合\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">组合</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#关联\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">关联</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#接口\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">接口</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#实现\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#继承\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">继承</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#数据表\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">数据表</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/19/metadata/领域元数据建模/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw2006x9vvu03woq7lw","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">领域元数据建模</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/metadata/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">metadata</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/19/metadata/领域元数据建模/\" class=\"leancloud_visitors\" data-flag-title=\"领域元数据建模\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(领域元数据建模)原始地址]<a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                            <h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br><a id=\"more\"></a></p>\n                            <h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n                            <blockquote>\n                                <h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n                            <p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n                            <blockquote>\n                                <h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n                            <p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n                            <thead>\n                            <tr>\n                                <th>UML领域元素</th>\n                                <th style=\"text-align:center\">元数据元素</th>\n                                <th style=\"text-align:right\">示例</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>包</td>\n                                <td style=\"text-align:center\">Component</td>\n                                <td style=\"text-align:right\">sm.order</td>\n                            </tr>\n                            <tr>\n                                <td>包间依赖</td>\n                                <td style=\"text-align:center\">Component.dependencies</td>\n                                <td style=\"text-align:right\"></td>\n                            </tr>\n                            <tr>\n                                <td>基础类型</td>\n                                <td style=\"text-align:center\">DataType</td>\n                                <td style=\"text-align:right\">Integer,DateTime,String</td>\n                            </tr>\n                            <tr>\n                                <td>枚举类型</td>\n                                <td style=\"text-align:center\">Enumeration</td>\n                                <td style=\"text-align:right\">OrderStatus</td>\n                            </tr>\n                            <tr>\n                                <td>类型</td>\n                                <td style=\"text-align:center\">Entity</td>\n                                <td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n                            </tr>\n                            <tr>\n                                <td>接口</td>\n                                <td style=\"text-align:center\">Interface</td>\n                                <td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n                            </tr>\n                            <tr>\n                                <td>组合关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">组合</td>\n                            </tr>\n                            <tr>\n                                <td>关联关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">关联</td>\n                            </tr>\n                            <tr>\n                                <td>继承关系</td>\n                                <td style=\"text-align:center\">Generalization</td>\n                                <td style=\"text-align:right\">继承</td>\n                            </tr>\n                            <tr>\n                                <td>实现关系</td>\n                                <td style=\"text-align:center\">Realization</td>\n                                <td style=\"text-align:right\">实现</td>\n                            </tr>\n                            <tr>\n                                <td>属性</td>\n                                <td style=\"text-align:center\">Property</td>\n                                <td style=\"text-align:right\">code,status,order,details</td>\n                            </tr>\n                            <tr>\n                                <td>方法</td>\n                                <td style=\"text-align:center\">Operation</td>\n                                <td style=\"text-align:right\">submit,unSubmit</td>\n                            </tr>\n                            <tr>\n                                <td>方法参数</td>\n                                <td style=\"text-align:center\">Parameter</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                            <h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n                            <h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n                            <p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n                            <h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n                            <p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n                            <p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n                            <p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n                            <p>一个属性定义如下结构：</p>\n                            <p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n                            <p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n                            <p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n                            <p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n                            <p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n                            <h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n                            <p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n                            <p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n                            <h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n                            <p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n                            <h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n                            <h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n                            <p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n                            <h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n                            <p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n                            <h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n                            <h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/领域元数据/\" rel=\"tag\"># 领域元数据</a>\n\n                                <a href=\"/tags/建模/\" rel=\"tag\"># 建模</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"prev\" title=\"POI高效操作Excel\">\n                                        POI高效操作Excel <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#意义\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">意义</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#举例\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">举例</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#数据类型定义\"><span class=\"nav-number\">2.1.</span> <span class=\"nav-text\">数据类型定义</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#基础数据结构定义\"><span class=\"nav-number\">2.2.</span> <span class=\"nav-text\">基础数据结构定义</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#领域模型和元数据映射\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">领域模型和元数据映射</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#元数据结构\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">元数据结构</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#包\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">包</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#类型\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">类型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#枚举\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">枚举</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#组合\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">组合</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#关联\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">关联</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#接口\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">接口</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#实现\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#继承\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">继承</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#数据表\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">数据表</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">领域元数据建模</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/metadata/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">metadata</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/19/metadata/领域元数据建模/\" class=\"leancloud_visitors\" data-flag-title=\"领域元数据建模\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(领域元数据建模)原始地址]<a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                            <h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br><a id=\"more\"></a></p>\n                            <h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n                            <blockquote>\n                                <h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n                            <p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n                            <blockquote>\n                                <h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n                            <p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n                            <thead>\n                            <tr>\n                                <th>UML领域元素</th>\n                                <th style=\"text-align:center\">元数据元素</th>\n                                <th style=\"text-align:right\">示例</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>包</td>\n                                <td style=\"text-align:center\">Component</td>\n                                <td style=\"text-align:right\">sm.order</td>\n                            </tr>\n                            <tr>\n                                <td>包间依赖</td>\n                                <td style=\"text-align:center\">Component.dependencies</td>\n                                <td style=\"text-align:right\"></td>\n                            </tr>\n                            <tr>\n                                <td>基础类型</td>\n                                <td style=\"text-align:center\">DataType</td>\n                                <td style=\"text-align:right\">Integer,DateTime,String</td>\n                            </tr>\n                            <tr>\n                                <td>枚举类型</td>\n                                <td style=\"text-align:center\">Enumeration</td>\n                                <td style=\"text-align:right\">OrderStatus</td>\n                            </tr>\n                            <tr>\n                                <td>类型</td>\n                                <td style=\"text-align:center\">Entity</td>\n                                <td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n                            </tr>\n                            <tr>\n                                <td>接口</td>\n                                <td style=\"text-align:center\">Interface</td>\n                                <td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n                            </tr>\n                            <tr>\n                                <td>组合关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">组合</td>\n                            </tr>\n                            <tr>\n                                <td>关联关系</td>\n                                <td style=\"text-align:center\">Association</td>\n                                <td style=\"text-align:right\">关联</td>\n                            </tr>\n                            <tr>\n                                <td>继承关系</td>\n                                <td style=\"text-align:center\">Generalization</td>\n                                <td style=\"text-align:right\">继承</td>\n                            </tr>\n                            <tr>\n                                <td>实现关系</td>\n                                <td style=\"text-align:center\">Realization</td>\n                                <td style=\"text-align:right\">实现</td>\n                            </tr>\n                            <tr>\n                                <td>属性</td>\n                                <td style=\"text-align:center\">Property</td>\n                                <td style=\"text-align:right\">code,status,order,details</td>\n                            </tr>\n                            <tr>\n                                <td>方法</td>\n                                <td style=\"text-align:center\">Operation</td>\n                                <td style=\"text-align:right\">submit,unSubmit</td>\n                            </tr>\n                            <tr>\n                                <td>方法参数</td>\n                                <td style=\"text-align:center\">Parameter</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                            <h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n                            <p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n                            <h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n                            <p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n                            <h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n                            <p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n                            <p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n                            <p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n                            <p>一个属性定义如下结构：</p>\n                            <p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n                            <p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n                            <p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n                            <p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n                            <p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n                            <h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n                            <p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n                            <p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n                            <h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n                            <p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n                            <h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n                            <p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n                            <h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n                            <p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n                            <h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n                            <p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n                            <h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n                            <p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n                            <h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/metadata/领域元数据建模/\" title=\"领域元数据建模\">http://xcoder.me/2017-05/metadata/领域元数据建模/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/领域元数据/\" rel=\"tag\"># 领域元数据</a>\n\n                                <a href=\"/tags/建模/\" rel=\"tag\"># 建模</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/POI高效操作Excel/\" rel=\"prev\" title=\"POI高效操作Excel\">\n                                        POI高效操作Excel <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#意义\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">意义</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#举例\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">举例</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#数据类型定义\"><span class=\"nav-number\">2.1.</span> <span class=\"nav-text\">数据类型定义</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#基础数据结构定义\"><span class=\"nav-number\">2.2.</span> <span class=\"nav-text\">基础数据结构定义</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#领域模型和元数据映射\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">领域模型和元数据映射</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#元数据结构\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">元数据结构</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#包\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">包</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#类型\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">类型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#枚举\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">枚举</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#组合\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">组合</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#关联\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">关联</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#接口\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">接口</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#实现\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#继承\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">继承</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#数据表\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">数据表</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">POI高效操作Excel</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/POI高效操作Excel/\" class=\"leancloud_visitors\" data-flag-title=\"POI高效操作Excel\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(POI高效操作Excel)原始地址]<a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                            <p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n                            <h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n                            <h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br><a id=\"more\"></a><br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n                            <p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n                            <p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n                            <h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n                            <p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/POI/\" rel=\"tag\"># POI</a>\n\n                                <a href=\"/tags/Excel/\" rel=\"tag\"># Excel</a>\n\n                                <a href=\"/tags/高效/\" rel=\"tag\"># 高效</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/metadata/领域元数据建模/\" rel=\"next\" title=\"领域元数据建模\">\n                                        <i class=\"fa fa-chevron-left\"></i> 领域元数据建模\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/安装升级Node.js/\" rel=\"prev\" title=\"安装升级Node.js\">\n                                        安装升级Node.js <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#事件模型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">事件模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#用户模型\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">用户模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#读取XLSX例子\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">读取XLSX例子</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/20/tools/POI高效操作Excel/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">POI高效操作Excel</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/POI高效操作Excel/\" class=\"leancloud_visitors\" data-flag-title=\"POI高效操作Excel\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(POI高效操作Excel)原始地址]<a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                            <p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n                            <h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n                            <h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br><a id=\"more\"></a><br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n                            <p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n                            <p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n                            <h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n                            <p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/POI/\" rel=\"tag\"># POI</a>\n\n                                <a href=\"/tags/Excel/\" rel=\"tag\"># Excel</a>\n\n                                <a href=\"/tags/高效/\" rel=\"tag\"># 高效</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/metadata/领域元数据建模/\" rel=\"next\" title=\"领域元数据建模\">\n                                        <i class=\"fa fa-chevron-left\"></i> 领域元数据建模\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/安装升级Node.js/\" rel=\"prev\" title=\"安装升级Node.js\">\n                                        安装升级Node.js <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#事件模型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">事件模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#用户模型\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">用户模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#读取XLSX例子\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">读取XLSX例子</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/20/tools/POI高效操作Excel/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw3006y9vvu83485nsq","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">POI高效操作Excel</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/POI高效操作Excel/\" class=\"leancloud_visitors\" data-flag-title=\"POI高效操作Excel\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(POI高效操作Excel)原始地址]<a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                            <p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n                            <h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n                            <h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br><a id=\"more\"></a><br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n                            <p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n                            <p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n                            <h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n                            <p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/POI/\" rel=\"tag\"># POI</a>\n\n                                <a href=\"/tags/Excel/\" rel=\"tag\"># Excel</a>\n\n                                <a href=\"/tags/高效/\" rel=\"tag\"># 高效</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/metadata/领域元数据建模/\" rel=\"next\" title=\"领域元数据建模\">\n                                        <i class=\"fa fa-chevron-left\"></i> 领域元数据建模\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/安装升级Node.js/\" rel=\"prev\" title=\"安装升级Node.js\">\n                                        安装升级Node.js <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#事件模型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">事件模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#用户模型\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">用户模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#读取XLSX例子\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">读取XLSX例子</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">POI高效操作Excel</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/POI高效操作Excel/\" class=\"leancloud_visitors\" data-flag-title=\"POI高效操作Excel\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(POI高效操作Excel)原始地址]<a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                            <p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n                            <h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n                            <h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br><a id=\"more\"></a><br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n                            <p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n                            <p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n                            <h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n                            <p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/POI高效操作Excel/\" title=\"POI高效操作Excel\">http://xcoder.me/2017-05/tools/POI高效操作Excel/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/POI/\" rel=\"tag\"># POI</a>\n\n                                <a href=\"/tags/Excel/\" rel=\"tag\"># Excel</a>\n\n                                <a href=\"/tags/高效/\" rel=\"tag\"># 高效</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/metadata/领域元数据建模/\" rel=\"next\" title=\"领域元数据建模\">\n                                        <i class=\"fa fa-chevron-left\"></i> 领域元数据建模\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/安装升级Node.js/\" rel=\"prev\" title=\"安装升级Node.js\">\n                                        安装升级Node.js <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#事件模型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">事件模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#用户模型\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">用户模型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#读取XLSX例子\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">读取XLSX例子</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Centos7安装git</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/CentOS7安装git/\" class=\"leancloud_visitors\" data-flag-title=\"Centos7安装git\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(Centos7安装git)原始地址]<a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                            <h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/centos7/\" rel=\"tag\"># centos7</a>\n\n                                <a href=\"/tags/git/\" rel=\"tag\"># git</a>\n\n                                <a href=\"/tags/yum/\" rel=\"tag\"># yum</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/hexo+travis/\" rel=\"next\" title=\"自动部署发布Hexo程序到Github上\">\n                                        <i class=\"fa fa-chevron-left\"></i> 自动部署发布Hexo程序到Github上\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"prev\" title=\"NexT主题前端资源CDN加速\">\n                                        NexT主题前端资源CDN加速 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查看系统是否已经安装git\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查看系统是否已经安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#CentOS7-yum-安装git\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">CentOS7 yum 安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装成功\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">安装成功</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#卸载git\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">卸载git</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/21/build/CentOS7安装git/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Centos7安装git</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/CentOS7安装git/\" class=\"leancloud_visitors\" data-flag-title=\"Centos7安装git\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(Centos7安装git)原始地址]<a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                            <h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/centos7/\" rel=\"tag\"># centos7</a>\n\n                                <a href=\"/tags/git/\" rel=\"tag\"># git</a>\n\n                                <a href=\"/tags/yum/\" rel=\"tag\"># yum</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/hexo+travis/\" rel=\"next\" title=\"自动部署发布Hexo程序到Github上\">\n                                        <i class=\"fa fa-chevron-left\"></i> 自动部署发布Hexo程序到Github上\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"prev\" title=\"NexT主题前端资源CDN加速\">\n                                        NexT主题前端资源CDN加速 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查看系统是否已经安装git\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查看系统是否已经安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#CentOS7-yum-安装git\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">CentOS7 yum 安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装成功\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">安装成功</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#卸载git\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">卸载git</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/21/build/CentOS7安装git/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw3006z9vvupk5gv6wx","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Centos7安装git</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/CentOS7安装git/\" class=\"leancloud_visitors\" data-flag-title=\"Centos7安装git\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(Centos7安装git)原始地址]<a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                            <h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/centos7/\" rel=\"tag\"># centos7</a>\n\n                                <a href=\"/tags/git/\" rel=\"tag\"># git</a>\n\n                                <a href=\"/tags/yum/\" rel=\"tag\"># yum</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/hexo+travis/\" rel=\"next\" title=\"自动部署发布Hexo程序到Github上\">\n                                        <i class=\"fa fa-chevron-left\"></i> 自动部署发布Hexo程序到Github上\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"prev\" title=\"NexT主题前端资源CDN加速\">\n                                        NexT主题前端资源CDN加速 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查看系统是否已经安装git\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查看系统是否已经安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#CentOS7-yum-安装git\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">CentOS7 yum 安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装成功\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">安装成功</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#卸载git\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">卸载git</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Centos7安装git</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/CentOS7安装git/\" class=\"leancloud_visitors\" data-flag-title=\"Centos7安装git\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(Centos7安装git)原始地址]<a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                            <h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n                            <h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/CentOS7安装git/\" title=\"Centos7安装git\">http://xcoder.me/2017-05/build/CentOS7安装git/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/centos7/\" rel=\"tag\"># centos7</a>\n\n                                <a href=\"/tags/git/\" rel=\"tag\"># git</a>\n\n                                <a href=\"/tags/yum/\" rel=\"tag\"># yum</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/hexo+travis/\" rel=\"next\" title=\"自动部署发布Hexo程序到Github上\">\n                                        <i class=\"fa fa-chevron-left\"></i> 自动部署发布Hexo程序到Github上\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"prev\" title=\"NexT主题前端资源CDN加速\">\n                                        NexT主题前端资源CDN加速 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查看系统是否已经安装git\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查看系统是否已经安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#CentOS7-yum-安装git\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">CentOS7 yum 安装git</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装成功\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">安装成功</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#卸载git\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">卸载git</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/YAML使用/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">YAML使用</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/20/language/YAML使用/\" class=\"leancloud_visitors\" data-flag-title=\"YAML使用\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(YAML使用)原始地址]<a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                            <p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n                            <p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n                            <h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n                            <blockquote>\n                                <p><strong>优势:</strong></p>\n                                <ul>\n                                    <li>YAML的可读性好</li>\n                                    <li>YAML和脚本语言的交互性好</li>\n                                    <li>YAML使用实现语言的数据类型</li>\n                                    <li>YAML有一个一致的信息模型</li>\n                                    <li>YAML易于实现</li>\n                                </ul>\n                            </blockquote>\n                            <p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>YAML可以基于流来处理</li>\n                                    <li>YAML表达能力强，扩展性好</li>\n                                </ul>\n                            </blockquote>\n                            <p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br><a id=\"more\"></a></p>\n                            <h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n                            <h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n                            <h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n                            <h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n                            <h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n                            <h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n                            <h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n                            <ul>\n                                <li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n                                <li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n                                <li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n                                <li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n                                <li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n                                <li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n                                <li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n                                <li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n                                <li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n                                <li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n                                <li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n                                <li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n                                <li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n                            </ul>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n                            <p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n                            <h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n                            <h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n                                    <li>支持YAML的所有类型</li>\n                                    <li>支持UTF-8/UTF-16的输入和输出</li>\n                                    <li>提供了本地java对象的序列化和反序列化的高层API</li>\n                                    <li>提供相对合理的错误提示信息</li>\n                                </ul>\n                            </blockquote>\n                            <p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n                            <p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n                            <p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n                            <p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n                            <p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n                            <p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n                            <p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n                            <p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n                            <p>集合的默认实现是：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>List:  ArrayList</li>\n                                    <li>Map:  LinkedHashMap</li>\n                                </ul>\n                            </blockquote>\n                            <h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n                            <p>YAML数据</p>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <blockquote>\n                                <p>JAVA代码</p>\n                            </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/YAML/\" rel=\"tag\"># YAML</a>\n\n                                <a href=\"/tags/yml/\" rel=\"tag\"># yml</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/安装升级Node.js/\" rel=\"next\" title=\"安装升级Node.js\">\n                                        <i class=\"fa fa-chevron-left\"></i> 安装升级Node.js\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/hexo+travis/\" rel=\"prev\" title=\"自动部署发布Hexo程序到Github上\">\n                                        自动部署发布Hexo程序到Github上 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-XML\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">YAML vs XML</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-JSON\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">YAML vs JSON</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML用途\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">YAML用途</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#脚本语言\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">脚本语言</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#序列化\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">序列化</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#配置文件\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">配置文件</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#调试\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">调试</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML缺陷与不足\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">YAML缺陷与不足</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML语法与范例\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">YAML语法与范例</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JavaScript实现\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">YAML的JavaScript实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JAVA实现\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">YAML的JAVA实现</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#使用SnakeYAML实现\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">使用SnakeYAML实现</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#YAML转MAP\"><span class=\"nav-number\">7.2.</span> <span class=\"nav-text\">YAML转MAP</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML转Bean\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">YAML转Bean</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/20/language/YAML使用/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/YAML使用/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">YAML使用</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/20/language/YAML使用/\" class=\"leancloud_visitors\" data-flag-title=\"YAML使用\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(YAML使用)原始地址]<a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                            <p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n                            <p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n                            <h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n                            <blockquote>\n                                <p><strong>优势:</strong></p>\n                                <ul>\n                                    <li>YAML的可读性好</li>\n                                    <li>YAML和脚本语言的交互性好</li>\n                                    <li>YAML使用实现语言的数据类型</li>\n                                    <li>YAML有一个一致的信息模型</li>\n                                    <li>YAML易于实现</li>\n                                </ul>\n                            </blockquote>\n                            <p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>YAML可以基于流来处理</li>\n                                    <li>YAML表达能力强，扩展性好</li>\n                                </ul>\n                            </blockquote>\n                            <p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br><a id=\"more\"></a></p>\n                            <h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n                            <h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n                            <h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n                            <h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n                            <h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n                            <h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n                            <h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n                            <ul>\n                                <li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n                                <li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n                                <li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n                                <li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n                                <li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n                                <li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n                                <li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n                                <li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n                                <li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n                                <li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n                                <li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n                                <li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n                                <li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n                            </ul>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n                            <p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n                            <h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n                            <h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n                                    <li>支持YAML的所有类型</li>\n                                    <li>支持UTF-8/UTF-16的输入和输出</li>\n                                    <li>提供了本地java对象的序列化和反序列化的高层API</li>\n                                    <li>提供相对合理的错误提示信息</li>\n                                </ul>\n                            </blockquote>\n                            <p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n                            <p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n                            <p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n                            <p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n                            <p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n                            <p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n                            <p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n                            <p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n                            <p>集合的默认实现是：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>List:  ArrayList</li>\n                                    <li>Map:  LinkedHashMap</li>\n                                </ul>\n                            </blockquote>\n                            <h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n                            <p>YAML数据</p>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <blockquote>\n                                <p>JAVA代码</p>\n                            </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/YAML/\" rel=\"tag\"># YAML</a>\n\n                                <a href=\"/tags/yml/\" rel=\"tag\"># yml</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/安装升级Node.js/\" rel=\"next\" title=\"安装升级Node.js\">\n                                        <i class=\"fa fa-chevron-left\"></i> 安装升级Node.js\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/hexo+travis/\" rel=\"prev\" title=\"自动部署发布Hexo程序到Github上\">\n                                        自动部署发布Hexo程序到Github上 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-XML\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">YAML vs XML</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-JSON\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">YAML vs JSON</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML用途\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">YAML用途</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#脚本语言\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">脚本语言</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#序列化\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">序列化</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#配置文件\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">配置文件</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#调试\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">调试</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML缺陷与不足\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">YAML缺陷与不足</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML语法与范例\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">YAML语法与范例</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JavaScript实现\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">YAML的JavaScript实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JAVA实现\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">YAML的JAVA实现</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#使用SnakeYAML实现\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">使用SnakeYAML实现</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#YAML转MAP\"><span class=\"nav-number\">7.2.</span> <span class=\"nav-text\">YAML转MAP</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML转Bean\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">YAML转Bean</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/20/language/YAML使用/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw300709vvu7d6bxy0s","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/YAML使用/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">YAML使用</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/20/language/YAML使用/\" class=\"leancloud_visitors\" data-flag-title=\"YAML使用\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(YAML使用)原始地址]<a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                            <p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n                            <p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n                            <h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n                            <blockquote>\n                                <p><strong>优势:</strong></p>\n                                <ul>\n                                    <li>YAML的可读性好</li>\n                                    <li>YAML和脚本语言的交互性好</li>\n                                    <li>YAML使用实现语言的数据类型</li>\n                                    <li>YAML有一个一致的信息模型</li>\n                                    <li>YAML易于实现</li>\n                                </ul>\n                            </blockquote>\n                            <p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>YAML可以基于流来处理</li>\n                                    <li>YAML表达能力强，扩展性好</li>\n                                </ul>\n                            </blockquote>\n                            <p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br><a id=\"more\"></a></p>\n                            <h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n                            <h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n                            <h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n                            <h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n                            <h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n                            <h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n                            <h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n                            <ul>\n                                <li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n                                <li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n                                <li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n                                <li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n                                <li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n                                <li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n                                <li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n                                <li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n                                <li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n                                <li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n                                <li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n                                <li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n                                <li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n                            </ul>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n                            <p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n                            <h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n                            <h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n                                    <li>支持YAML的所有类型</li>\n                                    <li>支持UTF-8/UTF-16的输入和输出</li>\n                                    <li>提供了本地java对象的序列化和反序列化的高层API</li>\n                                    <li>提供相对合理的错误提示信息</li>\n                                </ul>\n                            </blockquote>\n                            <p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n                            <p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n                            <p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n                            <p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n                            <p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n                            <p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n                            <p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n                            <p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n                            <p>集合的默认实现是：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>List:  ArrayList</li>\n                                    <li>Map:  LinkedHashMap</li>\n                                </ul>\n                            </blockquote>\n                            <h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n                            <p>YAML数据</p>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <blockquote>\n                                <p>JAVA代码</p>\n                            </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/YAML/\" rel=\"tag\"># YAML</a>\n\n                                <a href=\"/tags/yml/\" rel=\"tag\"># yml</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/安装升级Node.js/\" rel=\"next\" title=\"安装升级Node.js\">\n                                        <i class=\"fa fa-chevron-left\"></i> 安装升级Node.js\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/hexo+travis/\" rel=\"prev\" title=\"自动部署发布Hexo程序到Github上\">\n                                        自动部署发布Hexo程序到Github上 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-XML\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">YAML vs XML</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-JSON\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">YAML vs JSON</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML用途\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">YAML用途</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#脚本语言\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">脚本语言</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#序列化\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">序列化</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#配置文件\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">配置文件</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#调试\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">调试</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML缺陷与不足\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">YAML缺陷与不足</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML语法与范例\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">YAML语法与范例</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JavaScript实现\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">YAML的JavaScript实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JAVA实现\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">YAML的JAVA实现</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#使用SnakeYAML实现\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">使用SnakeYAML实现</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#YAML转MAP\"><span class=\"nav-number\">7.2.</span> <span class=\"nav-text\">YAML转MAP</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML转Bean\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">YAML转Bean</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/YAML使用/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">YAML使用</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017/05/20/language/YAML使用/\" class=\"leancloud_visitors\" data-flag-title=\"YAML使用\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(YAML使用)原始地址]<a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                            <p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n                            <p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n                            <h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n                            <blockquote>\n                                <p><strong>优势:</strong></p>\n                                <ul>\n                                    <li>YAML的可读性好</li>\n                                    <li>YAML和脚本语言的交互性好</li>\n                                    <li>YAML使用实现语言的数据类型</li>\n                                    <li>YAML有一个一致的信息模型</li>\n                                    <li>YAML易于实现</li>\n                                </ul>\n                            </blockquote>\n                            <p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>YAML可以基于流来处理</li>\n                                    <li>YAML表达能力强，扩展性好</li>\n                                </ul>\n                            </blockquote>\n                            <p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br><a id=\"more\"></a></p>\n                            <h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n                            <h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n                            <h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n                            <h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n                            <h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n                            <h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n                            <h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n                            <ul>\n                                <li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n                                <li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n                                <li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n                                <li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n                                <li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n                                <li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n                                <li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n                                <li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n                                <li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n                                <li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n                                <li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n                                <li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n                                <li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n                            </ul>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n                            <p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n                            <h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n                            <h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n                                    <li>支持YAML的所有类型</li>\n                                    <li>支持UTF-8/UTF-16的输入和输出</li>\n                                    <li>提供了本地java对象的序列化和反序列化的高层API</li>\n                                    <li>提供相对合理的错误提示信息</li>\n                                </ul>\n                            </blockquote>\n                            <p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n                            <p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n                            <p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n                            <p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n                            <p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n                            <p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n                            <p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n                            <p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n                            <p>集合的默认实现是：</p>\n                            <blockquote>\n                                <ul>\n                                    <li>List:  ArrayList</li>\n                                    <li>Map:  LinkedHashMap</li>\n                                </ul>\n                            </blockquote>\n                            <h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n                            <p>YAML数据</p>\n                        </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <blockquote>\n                                <p>JAVA代码</p>\n                            </blockquote>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/language/YAML使用/\" title=\"YAML使用\">http://xcoder.me/language/YAML使用/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/YAML/\" rel=\"tag\"># YAML</a>\n\n                                <a href=\"/tags/yml/\" rel=\"tag\"># yml</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/安装升级Node.js/\" rel=\"next\" title=\"安装升级Node.js\">\n                                        <i class=\"fa fa-chevron-left\"></i> 安装升级Node.js\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017/05/20/build/hexo+travis/\" rel=\"prev\" title=\"自动部署发布Hexo程序到Github上\">\n                                        自动部署发布Hexo程序到Github上 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-XML\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">YAML vs XML</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML-vs-JSON\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">YAML vs JSON</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML用途\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">YAML用途</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#脚本语言\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">脚本语言</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#序列化\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">序列化</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#配置文件\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">配置文件</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#调试\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">调试</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML缺陷与不足\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">YAML缺陷与不足</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML语法与范例\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">YAML语法与范例</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JavaScript实现\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">YAML的JavaScript实现</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML的JAVA实现\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">YAML的JAVA实现</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#使用SnakeYAML实现\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">使用SnakeYAML实现</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#YAML转MAP\"><span class=\"nav-number\">7.2.</span> <span class=\"nav-text\">YAML转MAP</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#YAML转Bean\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">YAML转Bean</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">NexT主题前端资源CDN加速</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/next主题前端资源CDN加速/\" class=\"leancloud_visitors\" data-flag-title=\"NexT主题前端资源CDN加速\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(NexT主题前端资源CDN加速)原始地址]<a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                            <p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/NexT/\" rel=\"tag\"># NexT</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"next\" title=\"Centos7安装git\">\n                                        <i class=\"fa fa-chevron-left\"></i> Centos7安装git\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"prev\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        快速查找JVM中占用CPU线程排行 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/22/build/next主题前端资源CDN加速/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">NexT主题前端资源CDN加速</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/next主题前端资源CDN加速/\" class=\"leancloud_visitors\" data-flag-title=\"NexT主题前端资源CDN加速\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(NexT主题前端资源CDN加速)原始地址]<a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                            <p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/NexT/\" rel=\"tag\"># NexT</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"next\" title=\"Centos7安装git\">\n                                        <i class=\"fa fa-chevron-left\"></i> Centos7安装git\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"prev\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        快速查找JVM中占用CPU线程排行 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/22/build/next主题前端资源CDN加速/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw400719vvu3anbkrqo","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">NexT主题前端资源CDN加速</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/next主题前端资源CDN加速/\" class=\"leancloud_visitors\" data-flag-title=\"NexT主题前端资源CDN加速\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(NexT主题前端资源CDN加速)原始地址]<a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                            <p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/NexT/\" rel=\"tag\"># NexT</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"next\" title=\"Centos7安装git\">\n                                        <i class=\"fa fa-chevron-left\"></i> Centos7安装git\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"prev\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        快速查找JVM中占用CPU线程排行 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">NexT主题前端资源CDN加速</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/next主题前端资源CDN加速/\" class=\"leancloud_visitors\" data-flag-title=\"NexT主题前端资源CDN加速\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(NexT主题前端资源CDN加速)原始地址]<a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                            <p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/next主题前端资源CDN加速/\" title=\"NexT主题前端资源CDN加速\">http://xcoder.me/2017-05/build/next主题前端资源CDN加速/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hexo/\" rel=\"tag\"># Hexo</a>\n\n                                <a href=\"/tags/NexT/\" rel=\"tag\"># NexT</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/CentOS7安装git/\" rel=\"next\" title=\"Centos7安装git\">\n                                        <i class=\"fa fa-chevron-left\"></i> Centos7安装git\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"prev\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        快速查找JVM中占用CPU线程排行 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">一个业务系统的架构设计</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/architecture/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">architecture</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/architecture/系统架构演进/\" class=\"leancloud_visitors\" data-flag-title=\"一个业务系统的架构设计\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(一个业务系统的架构设计)原始地址]<a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                            <p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n                            <h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n                            <li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n                            <li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n                        </ul>\n                            <p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n                            <p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n                            <ul>\n                                <li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n                                <li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n                                <li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n                                <li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n                                <li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n                                <li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n                                <li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n                                <li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n                            </ul>\n                            <p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>\n                            <a id=\"more\"></a>\n                            <h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n                            <p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n                            <ul>\n                                <li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n                                <li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n                                <li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n                                <li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n                                <li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n                                <li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n                                <li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n                            </ul>\n                            <p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n                            <ul>\n                                <li>解决前端页面加载效率因地区而异</li>\n                                <li>节省带宽资源</li>\n                                <li>专注业务处理</li>\n                                <li>为集群服务铺路</li>\n                            </ul>\n                            <p>在运维上我们做了一些优化提升</p>\n                            <ul>\n                                <li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n                                <li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n                                <li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n                                <li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n                                <li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n                            </ul>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/架构设计/\" rel=\"tag\"># 架构设计</a>\n\n                                <a href=\"/tags/SAAS/\" rel=\"tag\"># SAAS</a>\n\n                                <a href=\"/tags/互联网应用架构/\" rel=\"tag\"># 互联网应用架构</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"next\" title=\"General SSL Problem总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> General SSL Problem总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"prev\" title=\"2B和2C站点的区别\">\n                                        2B和2C站点的区别 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#技术选型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">技术选型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#架构演进\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">架构演进</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/24/architecture/系统架构演进/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">一个业务系统的架构设计</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/architecture/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">architecture</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/architecture/系统架构演进/\" class=\"leancloud_visitors\" data-flag-title=\"一个业务系统的架构设计\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(一个业务系统的架构设计)原始地址]<a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                            <p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n                            <h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n                            <li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n                            <li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n                        </ul>\n                            <p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n                            <p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n                            <ul>\n                                <li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n                                <li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n                                <li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n                                <li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n                                <li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n                                <li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n                                <li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n                                <li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n                            </ul>\n                            <p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>\n                            <a id=\"more\"></a>\n                            <h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n                            <p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n                            <ul>\n                                <li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n                                <li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n                                <li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n                                <li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n                                <li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n                                <li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n                                <li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n                            </ul>\n                            <p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n                            <ul>\n                                <li>解决前端页面加载效率因地区而异</li>\n                                <li>节省带宽资源</li>\n                                <li>专注业务处理</li>\n                                <li>为集群服务铺路</li>\n                            </ul>\n                            <p>在运维上我们做了一些优化提升</p>\n                            <ul>\n                                <li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n                                <li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n                                <li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n                                <li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n                                <li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n                            </ul>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/架构设计/\" rel=\"tag\"># 架构设计</a>\n\n                                <a href=\"/tags/SAAS/\" rel=\"tag\"># SAAS</a>\n\n                                <a href=\"/tags/互联网应用架构/\" rel=\"tag\"># 互联网应用架构</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"next\" title=\"General SSL Problem总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> General SSL Problem总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"prev\" title=\"2B和2C站点的区别\">\n                                        2B和2C站点的区别 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#技术选型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">技术选型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#架构演进\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">架构演进</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/24/architecture/系统架构演进/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw400729vvuf7f1bark","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">一个业务系统的架构设计</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/architecture/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">architecture</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/architecture/系统架构演进/\" class=\"leancloud_visitors\" data-flag-title=\"一个业务系统的架构设计\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(一个业务系统的架构设计)原始地址]<a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                            <p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n                            <h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n                            <li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n                            <li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n                        </ul>\n                            <p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n                            <p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n                            <ul>\n                                <li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n                                <li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n                                <li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n                                <li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n                                <li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n                                <li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n                                <li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n                                <li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n                            </ul>\n                            <p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>\n                            <a id=\"more\"></a>\n                            <h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n                            <p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n                            <ul>\n                                <li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n                                <li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n                                <li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n                                <li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n                                <li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n                                <li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n                                <li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n                            </ul>\n                            <p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n                            <ul>\n                                <li>解决前端页面加载效率因地区而异</li>\n                                <li>节省带宽资源</li>\n                                <li>专注业务处理</li>\n                                <li>为集群服务铺路</li>\n                            </ul>\n                            <p>在运维上我们做了一些优化提升</p>\n                            <ul>\n                                <li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n                                <li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n                                <li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n                                <li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n                                <li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n                            </ul>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/架构设计/\" rel=\"tag\"># 架构设计</a>\n\n                                <a href=\"/tags/SAAS/\" rel=\"tag\"># SAAS</a>\n\n                                <a href=\"/tags/互联网应用架构/\" rel=\"tag\"># 互联网应用架构</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"next\" title=\"General SSL Problem总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> General SSL Problem总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"prev\" title=\"2B和2C站点的区别\">\n                                        2B和2C站点的区别 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#技术选型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">技术选型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#架构演进\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">架构演进</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">一个业务系统的架构设计</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/architecture/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">architecture</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/architecture/系统架构演进/\" class=\"leancloud_visitors\" data-flag-title=\"一个业务系统的架构设计\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(一个业务系统的架构设计)原始地址]<a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                            <p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n                            <h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n                            <li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n                            <li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n                        </ul>\n                            <p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n                            <p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n                            <ul>\n                                <li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n                                <li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n                                <li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n                                <li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n                                <li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n                                <li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n                                <li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n                                <li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n                            </ul>\n                            <p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>\n                            <a id=\"more\"></a>\n                            <h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n                            <p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n                            <ul>\n                                <li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n                                <li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n                                <li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n                                <li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n                                <li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n                                <li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n                                <li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n                            </ul>\n                            <p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n                            <ul>\n                                <li>解决前端页面加载效率因地区而异</li>\n                                <li>节省带宽资源</li>\n                                <li>专注业务处理</li>\n                                <li>为集群服务铺路</li>\n                            </ul>\n                            <p>在运维上我们做了一些优化提升</p>\n                            <ul>\n                                <li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n                                <li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n                                <li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n                                <li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n                                <li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n                            </ul>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/architecture/系统架构演进/\" title=\"一个业务系统的架构设计\">http://xcoder.me/2017-05/architecture/系统架构演进/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/架构设计/\" rel=\"tag\"># 架构设计</a>\n\n                                <a href=\"/tags/SAAS/\" rel=\"tag\"># SAAS</a>\n\n                                <a href=\"/tags/互联网应用架构/\" rel=\"tag\"># 互联网应用架构</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"next\" title=\"General SSL Problem总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> General SSL Problem总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"prev\" title=\"2B和2C站点的区别\">\n                                        2B和2C站点的区别 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#技术选型\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">技术选型</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#架构演进\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">架构演进</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">快速查找JVM中占用CPU线程排行</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tuning/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tuning</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" class=\"leancloud_visitors\" data-flag-title=\"快速查找JVM中占用CPU线程排行\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(快速查找JVM中占用CPU线程排行)原始地址]<a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                            <p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n                            <p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n                            <p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n                            <p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n                            <p>适用于Linux，不适用于macOS</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JVM/\" rel=\"tag\"># JVM</a>\n\n                                <a href=\"/tags/CPU/\" rel=\"tag\"># CPU</a>\n\n                                <a href=\"/tags/Thread/\" rel=\"tag\"># Thread</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"next\" title=\"NexT主题前端资源CDN加速\">\n                                        <i class=\"fa fa-chevron-left\"></i> NexT主题前端资源CDN加速\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"prev\" title=\"java keytool证书工具\">\n                                        java keytool证书工具 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/22/tuning/快速查找JVM中占用CPU线程排行/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">快速查找JVM中占用CPU线程排行</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tuning/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tuning</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" class=\"leancloud_visitors\" data-flag-title=\"快速查找JVM中占用CPU线程排行\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(快速查找JVM中占用CPU线程排行)原始地址]<a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                            <p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n                            <p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n                            <p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n                            <p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n                            <p>适用于Linux，不适用于macOS</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JVM/\" rel=\"tag\"># JVM</a>\n\n                                <a href=\"/tags/CPU/\" rel=\"tag\"># CPU</a>\n\n                                <a href=\"/tags/Thread/\" rel=\"tag\"># Thread</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"next\" title=\"NexT主题前端资源CDN加速\">\n                                        <i class=\"fa fa-chevron-left\"></i> NexT主题前端资源CDN加速\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"prev\" title=\"java keytool证书工具\">\n                                        java keytool证书工具 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/22/tuning/快速查找JVM中占用CPU线程排行/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw400739vvuii66mps4","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">快速查找JVM中占用CPU线程排行</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tuning/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tuning</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" class=\"leancloud_visitors\" data-flag-title=\"快速查找JVM中占用CPU线程排行\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(快速查找JVM中占用CPU线程排行)原始地址]<a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                            <p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n                            <p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n                            <p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n                            <p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n                            <p>适用于Linux，不适用于macOS</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JVM/\" rel=\"tag\"># JVM</a>\n\n                                <a href=\"/tags/CPU/\" rel=\"tag\"># CPU</a>\n\n                                <a href=\"/tags/Thread/\" rel=\"tag\"># Thread</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"next\" title=\"NexT主题前端资源CDN加速\">\n                                        <i class=\"fa fa-chevron-left\"></i> NexT主题前端资源CDN加速\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"prev\" title=\"java keytool证书工具\">\n                                        java keytool证书工具 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">快速查找JVM中占用CPU线程排行</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tuning/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tuning</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" class=\"leancloud_visitors\" data-flag-title=\"快速查找JVM中占用CPU线程排行\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(快速查找JVM中占用CPU线程排行)原始地址]<a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                            <p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n                            <p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n                            <p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>\n                            <a id=\"more\"></a>\n                            <p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n                            <p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n                            <p>适用于Linux，不适用于macOS</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" title=\"快速查找JVM中占用CPU线程排行\">http://xcoder.me/2017-05/tuning/快速查找JVM中占用CPU线程排行/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JVM/\" rel=\"tag\"># JVM</a>\n\n                                <a href=\"/tags/CPU/\" rel=\"tag\"># CPU</a>\n\n                                <a href=\"/tags/Thread/\" rel=\"tag\"># Thread</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/next主题前端资源CDN加速/\" rel=\"next\" title=\"NexT主题前端资源CDN加速\">\n                                        <i class=\"fa fa-chevron-left\"></i> NexT主题前端资源CDN加速\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"prev\" title=\"java keytool证书工具\">\n                                        java keytool证书工具 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">General SSL Problem总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/General-SSL-Problem/\" class=\"leancloud_visitors\" data-flag-title=\"General SSL Problem总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(General SSL Problem总结)原始地址]<a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                            <p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n                            <p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n                            <p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n                            <p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>\n                            <a id=\"more\"></a>\n                            <p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n                            <p>选择一种解决方法，然后再次测试</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/证书/\" rel=\"tag\"># 证书</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"next\" title=\"java keytool证书工具\">\n                                        <i class=\"fa fa-chevron-left\"></i> java keytool证书工具\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"prev\" title=\"一个业务系统的架构设计\">\n                                        一个业务系统的架构设计 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/23/build/General-SSL-Problem/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">General SSL Problem总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/General-SSL-Problem/\" class=\"leancloud_visitors\" data-flag-title=\"General SSL Problem总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(General SSL Problem总结)原始地址]<a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                            <p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n                            <p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n                            <p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n                            <p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>\n                            <a id=\"more\"></a>\n                            <p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n                            <p>选择一种解决方法，然后再次测试</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/证书/\" rel=\"tag\"># 证书</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"next\" title=\"java keytool证书工具\">\n                                        <i class=\"fa fa-chevron-left\"></i> java keytool证书工具\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"prev\" title=\"一个业务系统的架构设计\">\n                                        一个业务系统的架构设计 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/23/build/General-SSL-Problem/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw400749vvus8nxmr7b","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">General SSL Problem总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/General-SSL-Problem/\" class=\"leancloud_visitors\" data-flag-title=\"General SSL Problem总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(General SSL Problem总结)原始地址]<a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                            <p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n                            <p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n                            <p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n                            <p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>\n                            <a id=\"more\"></a>\n                            <p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n                            <p>选择一种解决方法，然后再次测试</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/证书/\" rel=\"tag\"># 证书</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"next\" title=\"java keytool证书工具\">\n                                        <i class=\"fa fa-chevron-left\"></i> java keytool证书工具\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"prev\" title=\"一个业务系统的架构设计\">\n                                        一个业务系统的架构设计 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">General SSL Problem总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/General-SSL-Problem/\" class=\"leancloud_visitors\" data-flag-title=\"General SSL Problem总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(General SSL Problem总结)原始地址]<a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                            <p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n                            <p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n                            <p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n                            <p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>\n                            <a id=\"more\"></a>\n                            <p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n                            <p>选择一种解决方法，然后再次测试</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/General-SSL-Problem/\" title=\"General SSL Problem总结\">http://xcoder.me/2017-05/build/General-SSL-Problem/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/证书/\" rel=\"tag\"># 证书</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/language/JAVA keytool证书工具/\" rel=\"next\" title=\"java keytool证书工具\">\n                                        <i class=\"fa fa-chevron-left\"></i> java keytool证书工具\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"prev\" title=\"一个业务系统的架构设计\">\n                                        一个业务系统的架构设计 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">java keytool证书工具</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/language/JAVA keytool证书工具/\" class=\"leancloud_visitors\" data-flag-title=\"java keytool证书工具\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(java keytool证书工具)原始地址]<a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                            <p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br><a id=\"more\"></a><br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n                            <p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n                            <p>更改后需要重启JAVA服务生效</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/keytool/\" rel=\"tag\"># keytool</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"next\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        <i class=\"fa fa-chevron-left\"></i> 快速查找JVM中占用CPU线程排行\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"prev\" title=\"General SSL Problem总结\">\n                                        General SSL Problem总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/23/language/JAVA keytool证书工具/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">java keytool证书工具</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/language/JAVA keytool证书工具/\" class=\"leancloud_visitors\" data-flag-title=\"java keytool证书工具\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(java keytool证书工具)原始地址]<a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                            <p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br><a id=\"more\"></a><br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n                            <p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n                            <p>更改后需要重启JAVA服务生效</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/keytool/\" rel=\"tag\"># keytool</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"next\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        <i class=\"fa fa-chevron-left\"></i> 快速查找JVM中占用CPU线程排行\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"prev\" title=\"General SSL Problem总结\">\n                                        General SSL Problem总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/23/language/JAVA keytool证书工具/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw400759vvuqzekx2mu","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">java keytool证书工具</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/language/JAVA keytool证书工具/\" class=\"leancloud_visitors\" data-flag-title=\"java keytool证书工具\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(java keytool证书工具)原始地址]<a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                            <p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br><a id=\"more\"></a><br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n                            <p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n                            <p>更改后需要重启JAVA服务生效</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/keytool/\" rel=\"tag\"># keytool</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"next\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        <i class=\"fa fa-chevron-left\"></i> 快速查找JVM中占用CPU线程排行\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"prev\" title=\"General SSL Problem总结\">\n                                        General SSL Problem总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">java keytool证书工具</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/language/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">language</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/language/JAVA keytool证书工具/\" class=\"leancloud_visitors\" data-flag-title=\"java keytool证书工具\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(java keytool证书工具)原始地址]<a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                            <p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br><a id=\"more\"></a><br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n                            <p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n                            <p>更改后需要重启JAVA服务生效</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/language/JAVA keytool证书工具/\" title=\"java keytool证书工具\">http://xcoder.me/2017-05/language/JAVA keytool证书工具/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JAVA/\" rel=\"tag\"># JAVA</a>\n\n                                <a href=\"/tags/keytool/\" rel=\"tag\"># keytool</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tuning/快速查找JVM中占用CPU线程排行/\" rel=\"next\" title=\"快速查找JVM中占用CPU线程排行\">\n                                        <i class=\"fa fa-chevron-left\"></i> 快速查找JVM中占用CPU线程排行\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/General-SSL-Problem/\" rel=\"prev\" title=\"General SSL Problem总结\">\n                                        General SSL Problem总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">2B和2C站点的区别</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/life/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">life</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/life/2B和2C站点的区别/\" class=\"leancloud_visitors\" data-flag-title=\"2B和2C站点的区别\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(2B和2C站点的区别)原始地址]<a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                            <p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/2B/\" rel=\"tag\"># 2B</a>\n\n                                <a href=\"/tags/2C/\" rel=\"tag\"># 2C</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"next\" title=\"一个业务系统的架构设计\">\n                                        <i class=\"fa fa-chevron-left\"></i> 一个业务系统的架构设计\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"prev\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        转换HQL为原生SQL解决Cross Join问题 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/25/life/2B和2C站点的区别/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">2B和2C站点的区别</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/life/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">life</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/life/2B和2C站点的区别/\" class=\"leancloud_visitors\" data-flag-title=\"2B和2C站点的区别\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(2B和2C站点的区别)原始地址]<a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                            <p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/2B/\" rel=\"tag\"># 2B</a>\n\n                                <a href=\"/tags/2C/\" rel=\"tag\"># 2C</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"next\" title=\"一个业务系统的架构设计\">\n                                        <i class=\"fa fa-chevron-left\"></i> 一个业务系统的架构设计\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"prev\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        转换HQL为原生SQL解决Cross Join问题 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/25/life/2B和2C站点的区别/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw500769vvunp2u72xi","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">2B和2C站点的区别</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/life/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">life</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/life/2B和2C站点的区别/\" class=\"leancloud_visitors\" data-flag-title=\"2B和2C站点的区别\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(2B和2C站点的区别)原始地址]<a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                            <p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/2B/\" rel=\"tag\"># 2B</a>\n\n                                <a href=\"/tags/2C/\" rel=\"tag\"># 2C</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"next\" title=\"一个业务系统的架构设计\">\n                                        <i class=\"fa fa-chevron-left\"></i> 一个业务系统的架构设计\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"prev\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        转换HQL为原生SQL解决Cross Join问题 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">2B和2C站点的区别</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/life/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">life</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/life/2B和2C站点的区别/\" class=\"leancloud_visitors\" data-flag-title=\"2B和2C站点的区别\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(2B和2C站点的区别)原始地址]<a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                            <p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/life/2B和2C站点的区别/\" title=\"2B和2C站点的区别\">http://xcoder.me/2017-05/life/2B和2C站点的区别/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/2B/\" rel=\"tag\"># 2B</a>\n\n                                <a href=\"/tags/2C/\" rel=\"tag\"># 2C</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/architecture/系统架构演进/\" rel=\"next\" title=\"一个业务系统的架构设计\">\n                                        <i class=\"fa fa-chevron-left\"></i> 一个业务系统的架构设计\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"prev\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        转换HQL为原生SQL解决Cross Join问题 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">转换HQL为原生SQL解决Cross Join问题</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" class=\"leancloud_visitors\" data-flag-title=\"转换HQL为原生SQL解决Cross Join问题\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(转换HQL为原生SQL解决Cross Join问题)原始地址]<a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                            <p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n                            <p>Hibernate将HQL转换为原生sql的测试用例。</p>\n                            <a id=\"more\"></a>\n                            <p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n                            <p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n                            <p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n                            <p>回头可以试一下。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hibernate/\" rel=\"tag\"># Hibernate</a>\n\n                                <a href=\"/tags/HQL/\" rel=\"tag\"># HQL</a>\n\n                                <a href=\"/tags/Cross-Join/\" rel=\"tag\"># Cross Join</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"next\" title=\"2B和2C站点的区别\">\n                                        <i class=\"fa fa-chevron-left\"></i> 2B和2C站点的区别\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"prev\" title=\"IntelliJ IDEA使用总结\">\n                                        IntelliJ IDEA使用总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/25/tools/转换HQL为原生SQL解决Cross Join问题/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">转换HQL为原生SQL解决Cross Join问题</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" class=\"leancloud_visitors\" data-flag-title=\"转换HQL为原生SQL解决Cross Join问题\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(转换HQL为原生SQL解决Cross Join问题)原始地址]<a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                            <p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n                            <p>Hibernate将HQL转换为原生sql的测试用例。</p>\n                            <a id=\"more\"></a>\n                            <p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n                            <p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n                            <p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n                            <p>回头可以试一下。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hibernate/\" rel=\"tag\"># Hibernate</a>\n\n                                <a href=\"/tags/HQL/\" rel=\"tag\"># HQL</a>\n\n                                <a href=\"/tags/Cross-Join/\" rel=\"tag\"># Cross Join</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"next\" title=\"2B和2C站点的区别\">\n                                        <i class=\"fa fa-chevron-left\"></i> 2B和2C站点的区别\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"prev\" title=\"IntelliJ IDEA使用总结\">\n                                        IntelliJ IDEA使用总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/25/tools/转换HQL为原生SQL解决Cross Join问题/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw500779vvuszjg0ff8","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">转换HQL为原生SQL解决Cross Join问题</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" class=\"leancloud_visitors\" data-flag-title=\"转换HQL为原生SQL解决Cross Join问题\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(转换HQL为原生SQL解决Cross Join问题)原始地址]<a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                            <p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n                            <p>Hibernate将HQL转换为原生sql的测试用例。</p>\n                            <a id=\"more\"></a>\n                            <p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n                            <p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n                            <p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n                            <p>回头可以试一下。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hibernate/\" rel=\"tag\"># Hibernate</a>\n\n                                <a href=\"/tags/HQL/\" rel=\"tag\"># HQL</a>\n\n                                <a href=\"/tags/Cross-Join/\" rel=\"tag\"># Cross Join</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"next\" title=\"2B和2C站点的区别\">\n                                        <i class=\"fa fa-chevron-left\"></i> 2B和2C站点的区别\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"prev\" title=\"IntelliJ IDEA使用总结\">\n                                        IntelliJ IDEA使用总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">转换HQL为原生SQL解决Cross Join问题</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" class=\"leancloud_visitors\" data-flag-title=\"转换HQL为原生SQL解决Cross Join问题\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(转换HQL为原生SQL解决Cross Join问题)原始地址]<a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                            <p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n                            <p>Hibernate将HQL转换为原生sql的测试用例。</p>\n                            <a id=\"more\"></a>\n                            <p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n                            <p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n                            <p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n                            <p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n                            <p>回头可以试一下。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" title=\"转换HQL为原生SQL解决Cross Join问题\">http://xcoder.me/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Hibernate/\" rel=\"tag\"># Hibernate</a>\n\n                                <a href=\"/tags/HQL/\" rel=\"tag\"># HQL</a>\n\n                                <a href=\"/tags/Cross-Join/\" rel=\"tag\"># Cross Join</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/life/2B和2C站点的区别/\" rel=\"next\" title=\"2B和2C站点的区别\">\n                                        <i class=\"fa fa-chevron-left\"></i> 2B和2C站点的区别\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"prev\" title=\"IntelliJ IDEA使用总结\">\n                                        IntelliJ IDEA使用总结 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n\n                <section class=\"site-overview sidebar-panel sidebar-panel-active\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">IntelliJ IDEA使用总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/IntelliJ IDEA使用总结/\" class=\"leancloud_visitors\" data-flag-title=\"IntelliJ IDEA使用总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(IntelliJ IDEA使用总结)原始地址]<a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                            <p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>  <a id=\"more\"></a><br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n                            <p>我原来安装的版本就是最新的。</p>\n                            <p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n                            <p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n                            <p>装上之后我就激动了，谁用谁知道。</p>\n                            <p>Eclipse有的咱就不说了，说点实用的</p>\n                            <h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n                            <li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n                            <li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n                            <li>command+f<br>  当前文件查找特定内容</li>\n                            <li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n                            <li>command+n<br>  查找类</li>\n                            <li>command+shift+n<br>  查找文件</li>\n                            <li>command+e<br>  最近的文件</li>\n                            <li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方</li>\n                        </ul>\n                            <h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n                            <li>shift+enter<br>  另起一行</li>\n                            <li>command+r<br>  当前文件替换特定内容</li>\n                            <li>command+shift+r<br>  当前项目替换特定内容</li>\n                            <li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容</li>\n                            <li>command+d<br>  复制当前行到下一行</li>\n                            <li>command+x<br>  剪切当前行</li>\n                            <li>command+c \\ command+v<br>  不讲都知道</li>\n                            <li>command+z<br>  撤销</li>\n                            <li>command+shift+z<br>  取消撤销</li>\n                            <li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n                            <li>command+alt+L<br>  自动格式化代码</li>\n                            <li>ctrl+alt+O<br>  去除没有用到的import</li>\n                            <li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n                        </ul>\n                            <p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JetBrains/\" rel=\"tag\"># JetBrains</a>\n\n                                <a href=\"/tags/IntelliJ-Idea/\" rel=\"tag\"># IntelliJ Idea</a>\n\n                                <a href=\"/tags/IDE/\" rel=\"tag\"># IDE</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"next\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        <i class=\"fa fa-chevron-left\"></i> 转换HQL为原生SQL解决Cross Join问题\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"prev\" title=\"jetty maven plugin config\">\n                                        jetty maven plugin config <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查找\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查找</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#编辑\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">编辑</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/26/tools/IntelliJ IDEA使用总结/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">IntelliJ IDEA使用总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/IntelliJ IDEA使用总结/\" class=\"leancloud_visitors\" data-flag-title=\"IntelliJ IDEA使用总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(IntelliJ IDEA使用总结)原始地址]<a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                            <p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>  <a id=\"more\"></a><br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n                            <p>我原来安装的版本就是最新的。</p>\n                            <p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n                            <p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n                            <p>装上之后我就激动了，谁用谁知道。</p>\n                            <p>Eclipse有的咱就不说了，说点实用的</p>\n                            <h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n                            <li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n                            <li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n                            <li>command+f<br>  当前文件查找特定内容</li>\n                            <li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n                            <li>command+n<br>  查找类</li>\n                            <li>command+shift+n<br>  查找文件</li>\n                            <li>command+e<br>  最近的文件</li>\n                            <li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方</li>\n                        </ul>\n                            <h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n                            <li>shift+enter<br>  另起一行</li>\n                            <li>command+r<br>  当前文件替换特定内容</li>\n                            <li>command+shift+r<br>  当前项目替换特定内容</li>\n                            <li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容</li>\n                            <li>command+d<br>  复制当前行到下一行</li>\n                            <li>command+x<br>  剪切当前行</li>\n                            <li>command+c \\ command+v<br>  不讲都知道</li>\n                            <li>command+z<br>  撤销</li>\n                            <li>command+shift+z<br>  取消撤销</li>\n                            <li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n                            <li>command+alt+L<br>  自动格式化代码</li>\n                            <li>ctrl+alt+O<br>  去除没有用到的import</li>\n                            <li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n                        </ul>\n                            <p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JetBrains/\" rel=\"tag\"># JetBrains</a>\n\n                                <a href=\"/tags/IntelliJ-Idea/\" rel=\"tag\"># IntelliJ Idea</a>\n\n                                <a href=\"/tags/IDE/\" rel=\"tag\"># IDE</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"next\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        <i class=\"fa fa-chevron-left\"></i> 转换HQL为原生SQL解决Cross Join问题\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"prev\" title=\"jetty maven plugin config\">\n                                        jetty maven plugin config <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查找\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查找</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#编辑\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">编辑</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/26/tools/IntelliJ IDEA使用总结/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw500789vvuynvnv8md","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">IntelliJ IDEA使用总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/IntelliJ IDEA使用总结/\" class=\"leancloud_visitors\" data-flag-title=\"IntelliJ IDEA使用总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(IntelliJ IDEA使用总结)原始地址]<a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                            <p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>  <a id=\"more\"></a><br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n                            <p>我原来安装的版本就是最新的。</p>\n                            <p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n                            <p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n                            <p>装上之后我就激动了，谁用谁知道。</p>\n                            <p>Eclipse有的咱就不说了，说点实用的</p>\n                            <h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n                            <li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n                            <li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n                            <li>command+f<br>  当前文件查找特定内容</li>\n                            <li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n                            <li>command+n<br>  查找类</li>\n                            <li>command+shift+n<br>  查找文件</li>\n                            <li>command+e<br>  最近的文件</li>\n                            <li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方</li>\n                        </ul>\n                            <h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n                            <li>shift+enter<br>  另起一行</li>\n                            <li>command+r<br>  当前文件替换特定内容</li>\n                            <li>command+shift+r<br>  当前项目替换特定内容</li>\n                            <li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容</li>\n                            <li>command+d<br>  复制当前行到下一行</li>\n                            <li>command+x<br>  剪切当前行</li>\n                            <li>command+c \\ command+v<br>  不讲都知道</li>\n                            <li>command+z<br>  撤销</li>\n                            <li>command+shift+z<br>  取消撤销</li>\n                            <li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n                            <li>command+alt+L<br>  自动格式化代码</li>\n                            <li>ctrl+alt+O<br>  去除没有用到的import</li>\n                            <li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n                        </ul>\n                            <p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JetBrains/\" rel=\"tag\"># JetBrains</a>\n\n                                <a href=\"/tags/IntelliJ-Idea/\" rel=\"tag\"># IntelliJ Idea</a>\n\n                                <a href=\"/tags/IDE/\" rel=\"tag\"># IDE</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"next\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        <i class=\"fa fa-chevron-left\"></i> 转换HQL为原生SQL解决Cross Join问题\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"prev\" title=\"jetty maven plugin config\">\n                                        jetty maven plugin config <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查找\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查找</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#编辑\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">编辑</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">IntelliJ IDEA使用总结</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/tools/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">tools</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/tools/IntelliJ IDEA使用总结/\" class=\"leancloud_visitors\" data-flag-title=\"IntelliJ IDEA使用总结\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(IntelliJ IDEA使用总结)原始地址]<a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                            <p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>  <a id=\"more\"></a><br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n                            <p>我原来安装的版本就是最新的。</p>\n                            <p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n                            <p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n                            <p>装上之后我就激动了，谁用谁知道。</p>\n                            <p>Eclipse有的咱就不说了，说点实用的</p>\n                            <h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n                            <li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n                            <li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n                            <li>command+f<br>  当前文件查找特定内容</li>\n                            <li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n                            <li>command+n<br>  查找类</li>\n                            <li>command+shift+n<br>  查找文件</li>\n                            <li>command+e<br>  最近的文件</li>\n                            <li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方</li>\n                        </ul>\n                            <h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n                            <li>shift+enter<br>  另起一行</li>\n                            <li>command+r<br>  当前文件替换特定内容</li>\n                            <li>command+shift+r<br>  当前项目替换特定内容</li>\n                            <li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容</li>\n                            <li>command+d<br>  复制当前行到下一行</li>\n                            <li>command+x<br>  剪切当前行</li>\n                            <li>command+c \\ command+v<br>  不讲都知道</li>\n                            <li>command+z<br>  撤销</li>\n                            <li>command+shift+z<br>  取消撤销</li>\n                            <li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n                            <li>command+alt+L<br>  自动格式化代码</li>\n                            <li>ctrl+alt+O<br>  去除没有用到的import</li>\n                            <li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n                        </ul>\n                            <p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/\" title=\"IntelliJ IDEA使用总结\">http://xcoder.me/2017-05/tools/IntelliJ IDEA使用总结/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/JetBrains/\" rel=\"tag\"># JetBrains</a>\n\n                                <a href=\"/tags/IntelliJ-Idea/\" rel=\"tag\"># IntelliJ Idea</a>\n\n                                <a href=\"/tags/IDE/\" rel=\"tag\"># IDE</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/转换HQL为原生SQL解决Cross Join问题/\" rel=\"next\" title=\"转换HQL为原生SQL解决Cross Join问题\">\n                                        <i class=\"fa fa-chevron-left\"></i> 转换HQL为原生SQL解决Cross Join问题\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"prev\" title=\"jetty maven plugin config\">\n                                        jetty maven plugin config <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#查找\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">查找</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#编辑\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">编辑</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Scrapy之新手上路</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/Spider/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">Spider</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/Spider/Scrapy-Install/\" class=\"leancloud_visitors\" data-flag-title=\"Scrapy之新手上路\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(Scrapy之新手上路)原始地址]<a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                            <h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n                            <p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n                            <p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n                            <p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n                            <p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>\n                            <a id=\"more\"></a>\n                            <ul>\n                                <li><p>安装python</p>\n                                    <p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n                                    <p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n                                    <p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n                                </li>\n                                <li><p>使用pip安装Scrapy</p>\n                                    <p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n                                    <p>  好了，来安装Scrapy吧</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n                                    <p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n                                </li>\n                            </ul>\n                            <h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n                            <p>创建一个项目可以看到它的目录结构</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n                            <ul>\n                                <li>scrapy.cfg: 配置文件</li>\n                                <li>tutorial/: 该项目的python模块.</li>\n                                <li>tutorial/items.py: 项目中的item文件.</li>\n                                <li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n                                <li>tutorial/settings.py: 项目的设置文件.</li>\n                                <li>tutorial/spiders/: 放置spider代码的目录.</li>\n                            </ul>\n                            <h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n                            <p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n                            <p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n                            <p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Scrapy/\" rel=\"tag\"># Scrapy</a>\n\n                                <a href=\"/tags/Spider/\" rel=\"tag\"># Spider</a>\n\n                                <a href=\"/tags/python/\" rel=\"tag\"># python</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"next\" title=\"jetty maven plugin config\">\n                                        <i class=\"fa fa-chevron-left\"></i> jetty maven plugin config\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装Scrapy\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">安装Scrapy</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建一个爬虫项目\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">创建一个爬虫项目</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建Spider\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">创建Spider</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#运行Spider\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">运行Spider</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/28/Spider/Scrapy-Install/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Scrapy之新手上路</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/Spider/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">Spider</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/Spider/Scrapy-Install/\" class=\"leancloud_visitors\" data-flag-title=\"Scrapy之新手上路\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(Scrapy之新手上路)原始地址]<a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                            <h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n                            <p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n                            <p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n                            <p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n                            <p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>\n                            <a id=\"more\"></a>\n                            <ul>\n                                <li><p>安装python</p>\n                                    <p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n                                    <p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n                                    <p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n                                </li>\n                                <li><p>使用pip安装Scrapy</p>\n                                    <p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n                                    <p>  好了，来安装Scrapy吧</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n                                    <p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n                                </li>\n                            </ul>\n                            <h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n                            <p>创建一个项目可以看到它的目录结构</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n                            <ul>\n                                <li>scrapy.cfg: 配置文件</li>\n                                <li>tutorial/: 该项目的python模块.</li>\n                                <li>tutorial/items.py: 项目中的item文件.</li>\n                                <li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n                                <li>tutorial/settings.py: 项目的设置文件.</li>\n                                <li>tutorial/spiders/: 放置spider代码的目录.</li>\n                            </ul>\n                            <h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n                            <p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n                            <p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n                            <p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\"/>\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\"/>\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Scrapy/\" rel=\"tag\"># Scrapy</a>\n\n                                <a href=\"/tags/Spider/\" rel=\"tag\"># Spider</a>\n\n                                <a href=\"/tags/python/\" rel=\"tag\"># python</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"next\" title=\"jetty maven plugin config\">\n                                        <i class=\"fa fa-chevron-left\"></i> jetty maven plugin config\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装Scrapy\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">安装Scrapy</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建一个爬虫项目\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">创建一个爬虫项目</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建Spider\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">创建Spider</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#运行Spider\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">运行Spider</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/28/Spider/Scrapy-Install/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw600799vvu861ot2u3","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Scrapy之新手上路</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/Spider/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">Spider</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/Spider/Scrapy-Install/\" class=\"leancloud_visitors\" data-flag-title=\"Scrapy之新手上路\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(Scrapy之新手上路)原始地址]<a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                            <h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n                            <p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n                            <p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n                            <p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n                            <p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>\n                            <a id=\"more\"></a>\n                            <ul>\n                                <li><p>安装python</p>\n                                    <p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n                                    <p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n                                    <p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n                                </li>\n                                <li><p>使用pip安装Scrapy</p>\n                                    <p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n                                    <p>  好了，来安装Scrapy吧</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n                                    <p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n                                </li>\n                            </ul>\n                            <h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n                            <p>创建一个项目可以看到它的目录结构</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n                            <ul>\n                                <li>scrapy.cfg: 配置文件</li>\n                                <li>tutorial/: 该项目的python模块.</li>\n                                <li>tutorial/items.py: 项目中的item文件.</li>\n                                <li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n                                <li>tutorial/settings.py: 项目的设置文件.</li>\n                                <li>tutorial/spiders/: 放置spider代码的目录.</li>\n                            </ul>\n                            <h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n                            <p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n                            <p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n                            <p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Scrapy/\" rel=\"tag\"># Scrapy</a>\n\n                                <a href=\"/tags/Spider/\" rel=\"tag\"># Spider</a>\n\n                                <a href=\"/tags/python/\" rel=\"tag\"># python</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"next\" title=\"jetty maven plugin config\">\n                                        <i class=\"fa fa-chevron-left\"></i> jetty maven plugin config\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装Scrapy\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">安装Scrapy</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建一个爬虫项目\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">创建一个爬虫项目</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建Spider\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">创建Spider</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#运行Spider\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">运行Spider</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">Scrapy之新手上路</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/Spider/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">Spider</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/Spider/Scrapy-Install/\" class=\"leancloud_visitors\" data-flag-title=\"Scrapy之新手上路\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(Scrapy之新手上路)原始地址]<a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                            <h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n                            <p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n                            <p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n                            <p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n                            <p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>\n                            <a id=\"more\"></a>\n                            <ul>\n                                <li><p>安装python</p>\n                                    <p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n                                    <p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n                                    <p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n                                </li>\n                                <li><p>使用pip安装Scrapy</p>\n                                    <p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n                                    <p>  好了，来安装Scrapy吧</p>\n                                    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n                                    <p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n                                </li>\n                            </ul>\n                            <h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n                            <p>创建一个项目可以看到它的目录结构</p>\n                            <p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n                            <ul>\n                                <li>scrapy.cfg: 配置文件</li>\n                                <li>tutorial/: 该项目的python模块.</li>\n                                <li>tutorial/items.py: 项目中的item文件.</li>\n                                <li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n                                <li>tutorial/settings.py: 项目的设置文件.</li>\n                                <li>tutorial/spiders/: 放置spider代码的目录.</li>\n                            </ul>\n                            <h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n                            <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n                            <p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n                            <p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n                            <p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                            <div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;\">\n                                <div>enjoy?donate!</div>\n                                <button id=\"rewardButton\" disable=\"enable\" onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\">\n                                    <span>赏</span>\n                                </button>\n                                <div id=\"QR\" style=\"display: none;\">\n\n                                    <div id=\"wechat\" style=\"display: inline-block\">\n                                        <img id=\"wechat_qr\" src=\"http://static.xcoder.ren/public/images/wechat.png\" alt=\"小英雄雨来 WeChat Pay\">\n                                        <p>微信打赏</p>\n                                    </div>\n\n\n                                    <div id=\"alipay\" style=\"display: inline-block\">\n                                        <img id=\"alipay_qr\" src=\"http://static.xcoder.ren/public/images/alipay.png\" alt=\"小英雄雨来 Alipay\">\n                                        <p>支付宝打赏</p>\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/Spider/Scrapy-Install/\" title=\"Scrapy之新手上路\">http://xcoder.me/2017-05/Spider/Scrapy-Install/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/Scrapy/\" rel=\"tag\"># Scrapy</a>\n\n                                <a href=\"/tags/Spider/\" rel=\"tag\"># Spider</a>\n\n                                <a href=\"/tags/python/\" rel=\"tag\"># python</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/build/jetty-maven-plugin-config/\" rel=\"next\" title=\"jetty maven plugin config\">\n                                        <i class=\"fa fa-chevron-left\"></i> jetty maven plugin config\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#安装Scrapy\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">安装Scrapy</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建一个爬虫项目\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">创建一个爬虫项目</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#创建Spider\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">创建Spider</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#运行Spider\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">运行Spider</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"},{"_content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">jetty maven plugin config</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/jetty-maven-plugin-config/\" class=\"leancloud_visitors\" data-flag-title=\"jetty maven plugin config\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(jetty maven plugin config)原始地址]<a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                            <p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n                            <p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n                            <p>warName.war<br>在没有XML IoC文件的情况下：</p>\n                            <ul>\n                                <li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n                                <li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n                                <li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n                            </ul>\n                            <p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n                            <p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>\n                            <a id=\"more\"></a>\n                            <p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n                            <p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n                            <p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n                            <p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n                            <h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, from the same directory as your root pom.xml, type:</p>\n                            <blockquote>\n                                <p>mvn jetty:run</p>\n                            </blockquote>\n                            <p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n                            <p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n                            <p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n                            <p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n                            <h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n                            <p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n                            <blockquote>\n                                <p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n                                <p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n                            </blockquote>\n                            <h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n                            <h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n                            <h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n                            <h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n                            <h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n                            <h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n                            <h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n                            <p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n                            <h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n                            <h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n                            <h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n                            <h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n                            <h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n                            <h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n                            <p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n                            <h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n                            <h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n                            <h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n                            <h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n                            <h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n                            <h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n                            <h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n                            <h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n                            </blockquote>\n                            <p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n                            <h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n                            <h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n                            <h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n                            <h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n                            <h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n                            <h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n                            <h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n                            <h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n                            <h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n                            <h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n                            <h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n                            <h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n                            <h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n                            <h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n                            <ul>\n                                <li>resources in ${project.basedir}/src/main/webapp</li>\n                                <li>classes in ${project.build.outputDirectory}</li>\n                                <li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n                            </ul>\n                            <p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n                            <p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n                            <h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n                            <h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n                            <h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n                            <h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n                            <h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n                            <h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n                            <h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n                            <h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n                            <h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n                            <h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n                            <h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n                            <h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n                            <h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n                            <h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n                            <h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n                            <h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n                            <h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n                            <h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n                            <h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n                            <h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n                            <h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n                            <h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n                            <h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n                            <p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n                            <p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n                            <h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n                            <p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n                            <h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n                            <h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n                            <h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, while Jetty is running (in another window), type:</p>\n                            <h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n                            <h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n                            <p>The following configuration parameters allow you to save the file:</p>\n                            <h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n                            <h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n                            <h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n                            <h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n                            <h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n                            <h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n                            <p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n                            <p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n                            <h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n                            <p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n                            <p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n                            <p>Putting the configuration in webapp A’s pom.xml:</p>\n                            <p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n                            <p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n                            <h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n                            <p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n                            <h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n                            <p>Specifying System Properties in a File</p>\n                            <p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n                            <p>Suppose we have a file called mysys.props which contains the following:</p>\n                            <blockquote>\n                                <p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/jetty/\" rel=\"tag\"># jetty</a>\n\n                                <a href=\"/tags/maven/\" rel=\"tag\"># maven</a>\n\n                                <a href=\"/tags/config/\" rel=\"tag\"># config</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"next\" title=\"IntelliJ IDEA使用总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> IntelliJ IDEA使用总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/Spider/Scrapy-Install/\" rel=\"prev\" title=\"Scrapy之新手上路\">\n                                        Scrapy之新手上路 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Quick-Start-Get-Up-and-Running\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">Quick Start: Get Up and Running</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Supported-Goals\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">Supported Goals</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-the-Jetty-Container\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">Configuring the Jetty Container</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#httpConnector\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">httpConnector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#port\"><span class=\"nav-number\">3.1.1.</span> <span class=\"nav-text\">port</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#host\"><span class=\"nav-number\">3.1.2.</span> <span class=\"nav-text\">host</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#name\"><span class=\"nav-number\">3.1.3.</span> <span class=\"nav-text\">name</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#idleTimeout\"><span class=\"nav-number\">3.1.4.</span> <span class=\"nav-text\">idleTimeout</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#soLinger\"><span class=\"nav-number\">3.1.5.</span> <span class=\"nav-text\">soLinger</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jettyXml\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">jettyXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#scanIntervalSeconds\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#reload\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#dumpOnStart\"><span class=\"nav-number\">3.5.</span> <span class=\"nav-text\">dumpOnStart</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#loginServices\"><span class=\"nav-number\">3.6.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#requestLog\"><span class=\"nav-number\">3.7.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#server\"><span class=\"nav-number\">3.8.</span> <span class=\"nav-text\">server</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort\"><span class=\"nav-number\">3.9.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey\"><span class=\"nav-number\">3.10.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemProperties\"><span class=\"nav-number\">3.11.</span> <span class=\"nav-text\">systemProperties</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemPropertiesFile\"><span class=\"nav-number\">3.12.</span> <span class=\"nav-text\">systemPropertiesFile</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#skip\"><span class=\"nav-number\">3.13.</span> <span class=\"nav-text\">skip</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#useProvidedScope\"><span class=\"nav-number\">3.14.</span> <span class=\"nav-text\">useProvidedScope</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#excludedGoals\"><span class=\"nav-number\">3.15.</span> <span class=\"nav-text\">excludedGoals</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-a-Https-Connector\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">Configuring a Https Connector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-xml\"><span class=\"nav-number\">4.1.</span> <span class=\"nav-text\">jetty.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-ssl-xml\"><span class=\"nav-number\">4.2.</span> <span class=\"nav-text\">jetty-ssl.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-https-xml\"><span class=\"nav-number\">4.3.</span> <span class=\"nav-text\">jetty-https.xml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Your-WebApp\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">Configuring Your WebApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#webApp\"><span class=\"nav-number\">5.1.</span> <span class=\"nav-text\">webApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#contextPath\"><span class=\"nav-number\">5.1.1.</span> <span class=\"nav-text\">contextPath</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#descriptor\"><span class=\"nav-number\">5.1.2.</span> <span class=\"nav-text\">descriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#defaultsDescriptor\"><span class=\"nav-number\">5.1.3.</span> <span class=\"nav-text\">defaultsDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#overrideDescriptor\"><span class=\"nav-number\">5.1.4.</span> <span class=\"nav-text\">overrideDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#tempDirectory\"><span class=\"nav-number\">5.1.5.</span> <span class=\"nav-text\">tempDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseResource\"><span class=\"nav-number\">5.1.6.</span> <span class=\"nav-text\">baseResource</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#resourceBases\"><span class=\"nav-number\">5.1.7.</span> <span class=\"nav-text\">resourceBases</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseAppFirst\"><span class=\"nav-number\">5.1.8.</span> <span class=\"nav-text\">baseAppFirst</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#containerIncludeJarPattern\"><span class=\"nav-number\">5.1.9.</span> <span class=\"nav-text\">containerIncludeJarPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webInfIncludeJarPattern\"><span class=\"nav-number\">5.1.10.</span> <span class=\"nav-text\">webInfIncludeJarPattern</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#contextXml\"><span class=\"nav-number\">5.2.</span> <span class=\"nav-text\">contextXml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">jetty:run</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration\"><span class=\"nav-number\">6.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#classesDirectory\"><span class=\"nav-number\">6.1.1.</span> <span class=\"nav-text\">classesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#testClassesDirectory\"><span class=\"nav-number\">6.1.2.</span> <span class=\"nav-text\">testClassesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#useTestScope\"><span class=\"nav-number\">6.1.3.</span> <span class=\"nav-text\">useTestScope</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webAppSourceDirectory\"><span class=\"nav-number\">6.1.4.</span> <span class=\"nav-text\">webAppSourceDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jettyEnvXml\"><span class=\"nav-number\">6.1.5.</span> <span class=\"nav-text\">jettyEnvXml</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargets\"><span class=\"nav-number\">6.1.6.</span> <span class=\"nav-text\">scanTargets</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargetPatterns\"><span class=\"nav-number\">6.1.7.</span> <span class=\"nav-text\">scanTargetPatterns</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanClassesPattern\"><span class=\"nav-number\">6.1.8.</span> <span class=\"nav-text\">scanClassesPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTestClassesPattern\"><span class=\"nav-number\">6.1.9.</span> <span class=\"nav-text\">scanTestClassesPattern</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-war\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">jetty:run-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-1\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war\"><span class=\"nav-number\">7.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-exploded\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">jetty:run-exploded</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-2\"><span class=\"nav-number\">8.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-1\"><span class=\"nav-number\">8.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-deploy-war\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">jetty:deploy-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-3\"><span class=\"nav-number\">9.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-2\"><span class=\"nav-number\">9.1.1.</span> <span class=\"nav-text\">war</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#daemon\"><span class=\"nav-number\">9.1.2.</span> <span class=\"nav-text\">daemon</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-forked\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">jetty:run-forked</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-4\"><span class=\"nav-number\">10.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jvmArgs\"><span class=\"nav-number\">10.1.1.</span> <span class=\"nav-text\">jvmArgs</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#waitForChild\"><span class=\"nav-number\">10.1.2.</span> <span class=\"nav-text\">waitForChild</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#maxStartupLines\"><span class=\"nav-number\">10.1.3.</span> <span class=\"nav-text\">maxStartupLines</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanIntervalSeconds-1\"><span class=\"nav-number\">10.1.4.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#reload-1\"><span class=\"nav-number\">10.1.5.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#httpConnector-1\"><span class=\"nav-number\">10.1.6.</span> <span class=\"nav-text\">httpConnector</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#loginServices-1\"><span class=\"nav-number\">10.1.7.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#requestLog-1\"><span class=\"nav-number\">10.1.8.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#systemProperties-1\"><span class=\"nav-number\">10.1.9.</span> <span class=\"nav-text\">systemProperties</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-run-forked\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">mvn jetty:run-forked</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-start\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">jetty:start</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-stop\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">jetty:stop</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort-1\"><span class=\"nav-number\">13.1.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey-1\"><span class=\"nav-number\">13.2.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopWait\"><span class=\"nav-number\">13.3.</span> <span class=\"nav-text\">stopWait</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-stop\"><span class=\"nav-number\">14.</span> <span class=\"nav-text\">mvn jetty:stop</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-effective-web-xml\"><span class=\"nav-number\">15.</span> <span class=\"nav-text\">jetty:effective-web-xml</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#deleteOnExit\"><span class=\"nav-number\">15.1.</span> <span class=\"nav-text\">deleteOnExit</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#effectiveWebXml\"><span class=\"nav-number\">15.2.</span> <span class=\"nav-text\">effectiveWebXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#originAttribute\"><span class=\"nav-number\">15.3.</span> <span class=\"nav-text\">originAttribute</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#generateOrigin\"><span class=\"nav-number\">15.4.</span> <span class=\"nav-text\">generateOrigin</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Overlaid-wars\"><span class=\"nav-number\">16.</span> <span class=\"nav-text\">Using Overlaid wars</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#With-maven-war-plugin\"><span class=\"nav-number\">17.</span> <span class=\"nav-text\">With maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Without-maven-war-plugin\"><span class=\"nav-number\">18.</span> <span class=\"nav-text\">Without maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Security-Settings\"><span class=\"nav-number\">19.</span> <span class=\"nav-text\">Configuring Security Settings</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Multiple-Webapp-Root-Directories\"><span class=\"nav-number\">20.</span> <span class=\"nav-text\">Using Multiple Webapp Root Directories</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Running-More-than-One-Webapp\"><span class=\"nav-number\">21.</span> <span class=\"nav-text\">Running More than One Webapp</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Setting-System-Properties\"><span class=\"nav-number\">22.</span> <span class=\"nav-text\">Setting System Properties</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Specifying-System-Properties-in-the-POM\"><span class=\"nav-number\">23.</span> <span class=\"nav-text\">Specifying System Properties in the POM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","source":"2017/05/26/build/jetty-maven-plugin-config/index.html","raw":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\">\n\n                        <span hidden itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">jetty maven plugin config</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\" >\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/jetty-maven-plugin-config/\" class=\"leancloud_visitors\" data-flag-title=\"jetty maven plugin config\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\" />\n                            </a>\n                            <br/>\n                            [本文(jetty maven plugin config)原始地址]<a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                            <p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n                            <p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n                            <p>warName.war<br>在没有XML IoC文件的情况下：</p>\n                            <ul>\n                                <li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n                                <li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n                                <li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n                            </ul>\n                            <p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n                            <p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>\n                            <a id=\"more\"></a>\n                            <p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n                            <p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n                            <p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n                            <p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n                            <h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, from the same directory as your root pom.xml, type:</p>\n                            <blockquote>\n                                <p>mvn jetty:run</p>\n                            </blockquote>\n                            <p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n                            <p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n                            <p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n                            <p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n                            <h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n                            <p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n                            <blockquote>\n                                <p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n                                <p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n                            </blockquote>\n                            <h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n                            <h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n                            <h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n                            <h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n                            <h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n                            <h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n                            <h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n                            <p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n                            <h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n                            <h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n                            <h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n                            <h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n                            <h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n                            <h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n                            <p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n                            <h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n                            <h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n                            <h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n                            <h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n                            <h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n                            <h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n                            <h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n                            <h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n                            </blockquote>\n                            <p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n                            <h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n                            <h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n                            <h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n                            <h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n                            <h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n                            <h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n                            <h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n                            <h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n                            <h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n                            <h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n                            <h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n                            <h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n                            <h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n                            <h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n                            <ul>\n                                <li>resources in ${project.basedir}/src/main/webapp</li>\n                                <li>classes in ${project.build.outputDirectory}</li>\n                                <li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n                            </ul>\n                            <p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n                            <p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n                            <h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n                            <h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n                            <h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n                            <h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n                            <h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n                            <h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n                            <h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n                            <h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n                            <h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n                            <h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n                            <h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n                            <h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n                            <h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n                            <h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n                            <h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n                            <h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n                            <h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n                            <h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n                            <h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n                            <h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n                            <h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n                            <h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n                            <h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n                            <p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n                            <p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n                            <h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n                            <p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n                            <h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n                            <h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n                            <h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, while Jetty is running (in another window), type:</p>\n                            <h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n                            <h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n                            <p>The following configuration parameters allow you to save the file:</p>\n                            <h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n                            <h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n                            <h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n                            <h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n                            <h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n                            <h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n                            <p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n                            <p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n                            <h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n                            <p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n                            <p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n                            <p>Putting the configuration in webapp A’s pom.xml:</p>\n                            <p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n                            <p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n                            <h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n                            <p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n                            <h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n                            <p>Specifying System Properties in a File</p>\n                            <p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n                            <p>Suppose we have a file called mysys.props which contains the following:</p>\n                            <blockquote>\n                                <p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\" />\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/jetty/\" rel=\"tag\"># jetty</a>\n\n                                <a href=\"/tags/maven/\" rel=\"tag\"># maven</a>\n\n                                <a href=\"/tags/config/\" rel=\"tag\"># config</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"next\" title=\"IntelliJ IDEA使用总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> IntelliJ IDEA使用总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/Spider/Scrapy-Install/\" rel=\"prev\" title=\"Scrapy之新手上路\">\n                                        Scrapy之新手上路 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\" >\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\" >\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\"\n                             src=\"/images/avatar.gif\"\n                             alt=\"小英雄雨来\" />\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Quick-Start-Get-Up-and-Running\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">Quick Start: Get Up and Running</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Supported-Goals\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">Supported Goals</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-the-Jetty-Container\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">Configuring the Jetty Container</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#httpConnector\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">httpConnector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#port\"><span class=\"nav-number\">3.1.1.</span> <span class=\"nav-text\">port</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#host\"><span class=\"nav-number\">3.1.2.</span> <span class=\"nav-text\">host</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#name\"><span class=\"nav-number\">3.1.3.</span> <span class=\"nav-text\">name</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#idleTimeout\"><span class=\"nav-number\">3.1.4.</span> <span class=\"nav-text\">idleTimeout</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#soLinger\"><span class=\"nav-number\">3.1.5.</span> <span class=\"nav-text\">soLinger</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jettyXml\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">jettyXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#scanIntervalSeconds\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#reload\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#dumpOnStart\"><span class=\"nav-number\">3.5.</span> <span class=\"nav-text\">dumpOnStart</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#loginServices\"><span class=\"nav-number\">3.6.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#requestLog\"><span class=\"nav-number\">3.7.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#server\"><span class=\"nav-number\">3.8.</span> <span class=\"nav-text\">server</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort\"><span class=\"nav-number\">3.9.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey\"><span class=\"nav-number\">3.10.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemProperties\"><span class=\"nav-number\">3.11.</span> <span class=\"nav-text\">systemProperties</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemPropertiesFile\"><span class=\"nav-number\">3.12.</span> <span class=\"nav-text\">systemPropertiesFile</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#skip\"><span class=\"nav-number\">3.13.</span> <span class=\"nav-text\">skip</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#useProvidedScope\"><span class=\"nav-number\">3.14.</span> <span class=\"nav-text\">useProvidedScope</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#excludedGoals\"><span class=\"nav-number\">3.15.</span> <span class=\"nav-text\">excludedGoals</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-a-Https-Connector\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">Configuring a Https Connector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-xml\"><span class=\"nav-number\">4.1.</span> <span class=\"nav-text\">jetty.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-ssl-xml\"><span class=\"nav-number\">4.2.</span> <span class=\"nav-text\">jetty-ssl.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-https-xml\"><span class=\"nav-number\">4.3.</span> <span class=\"nav-text\">jetty-https.xml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Your-WebApp\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">Configuring Your WebApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#webApp\"><span class=\"nav-number\">5.1.</span> <span class=\"nav-text\">webApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#contextPath\"><span class=\"nav-number\">5.1.1.</span> <span class=\"nav-text\">contextPath</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#descriptor\"><span class=\"nav-number\">5.1.2.</span> <span class=\"nav-text\">descriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#defaultsDescriptor\"><span class=\"nav-number\">5.1.3.</span> <span class=\"nav-text\">defaultsDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#overrideDescriptor\"><span class=\"nav-number\">5.1.4.</span> <span class=\"nav-text\">overrideDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#tempDirectory\"><span class=\"nav-number\">5.1.5.</span> <span class=\"nav-text\">tempDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseResource\"><span class=\"nav-number\">5.1.6.</span> <span class=\"nav-text\">baseResource</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#resourceBases\"><span class=\"nav-number\">5.1.7.</span> <span class=\"nav-text\">resourceBases</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseAppFirst\"><span class=\"nav-number\">5.1.8.</span> <span class=\"nav-text\">baseAppFirst</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#containerIncludeJarPattern\"><span class=\"nav-number\">5.1.9.</span> <span class=\"nav-text\">containerIncludeJarPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webInfIncludeJarPattern\"><span class=\"nav-number\">5.1.10.</span> <span class=\"nav-text\">webInfIncludeJarPattern</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#contextXml\"><span class=\"nav-number\">5.2.</span> <span class=\"nav-text\">contextXml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">jetty:run</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration\"><span class=\"nav-number\">6.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#classesDirectory\"><span class=\"nav-number\">6.1.1.</span> <span class=\"nav-text\">classesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#testClassesDirectory\"><span class=\"nav-number\">6.1.2.</span> <span class=\"nav-text\">testClassesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#useTestScope\"><span class=\"nav-number\">6.1.3.</span> <span class=\"nav-text\">useTestScope</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webAppSourceDirectory\"><span class=\"nav-number\">6.1.4.</span> <span class=\"nav-text\">webAppSourceDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jettyEnvXml\"><span class=\"nav-number\">6.1.5.</span> <span class=\"nav-text\">jettyEnvXml</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargets\"><span class=\"nav-number\">6.1.6.</span> <span class=\"nav-text\">scanTargets</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargetPatterns\"><span class=\"nav-number\">6.1.7.</span> <span class=\"nav-text\">scanTargetPatterns</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanClassesPattern\"><span class=\"nav-number\">6.1.8.</span> <span class=\"nav-text\">scanClassesPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTestClassesPattern\"><span class=\"nav-number\">6.1.9.</span> <span class=\"nav-text\">scanTestClassesPattern</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-war\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">jetty:run-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-1\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war\"><span class=\"nav-number\">7.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-exploded\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">jetty:run-exploded</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-2\"><span class=\"nav-number\">8.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-1\"><span class=\"nav-number\">8.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-deploy-war\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">jetty:deploy-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-3\"><span class=\"nav-number\">9.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-2\"><span class=\"nav-number\">9.1.1.</span> <span class=\"nav-text\">war</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#daemon\"><span class=\"nav-number\">9.1.2.</span> <span class=\"nav-text\">daemon</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-forked\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">jetty:run-forked</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-4\"><span class=\"nav-number\">10.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jvmArgs\"><span class=\"nav-number\">10.1.1.</span> <span class=\"nav-text\">jvmArgs</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#waitForChild\"><span class=\"nav-number\">10.1.2.</span> <span class=\"nav-text\">waitForChild</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#maxStartupLines\"><span class=\"nav-number\">10.1.3.</span> <span class=\"nav-text\">maxStartupLines</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanIntervalSeconds-1\"><span class=\"nav-number\">10.1.4.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#reload-1\"><span class=\"nav-number\">10.1.5.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#httpConnector-1\"><span class=\"nav-number\">10.1.6.</span> <span class=\"nav-text\">httpConnector</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#loginServices-1\"><span class=\"nav-number\">10.1.7.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#requestLog-1\"><span class=\"nav-number\">10.1.8.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#systemProperties-1\"><span class=\"nav-number\">10.1.9.</span> <span class=\"nav-text\">systemProperties</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-run-forked\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">mvn jetty:run-forked</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-start\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">jetty:start</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-stop\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">jetty:stop</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort-1\"><span class=\"nav-number\">13.1.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey-1\"><span class=\"nav-number\">13.2.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopWait\"><span class=\"nav-number\">13.3.</span> <span class=\"nav-text\">stopWait</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-stop\"><span class=\"nav-number\">14.</span> <span class=\"nav-text\">mvn jetty:stop</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-effective-web-xml\"><span class=\"nav-number\">15.</span> <span class=\"nav-text\">jetty:effective-web-xml</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#deleteOnExit\"><span class=\"nav-number\">15.1.</span> <span class=\"nav-text\">deleteOnExit</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#effectiveWebXml\"><span class=\"nav-number\">15.2.</span> <span class=\"nav-text\">effectiveWebXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#originAttribute\"><span class=\"nav-number\">15.3.</span> <span class=\"nav-text\">originAttribute</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#generateOrigin\"><span class=\"nav-number\">15.4.</span> <span class=\"nav-text\">generateOrigin</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Overlaid-wars\"><span class=\"nav-number\">16.</span> <span class=\"nav-text\">Using Overlaid wars</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#With-maven-war-plugin\"><span class=\"nav-number\">17.</span> <span class=\"nav-text\">With maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Without-maven-war-plugin\"><span class=\"nav-number\">18.</span> <span class=\"nav-text\">Without maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Security-Settings\"><span class=\"nav-number\">19.</span> <span class=\"nav-text\">Configuring Security Settings</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Multiple-Webapp-Root-Directories\"><span class=\"nav-number\">20.</span> <span class=\"nav-text\">Using Multiple Webapp Root Directories</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Running-More-than-One-Webapp\"><span class=\"nav-number\">21.</span> <span class=\"nav-text\">Running More than One Webapp</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Setting-System-Properties\"><span class=\"nav-number\">22.</span> <span class=\"nav-text\">Setting System Properties</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Specifying-System-Properties-in-the-POM\"><span class=\"nav-number\">23.</span> <span class=\"nav-text\">Specifying System Properties in the POM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","date":"2017-06-03T16:14:10.000Z","updated":"2017-06-03T16:14:10.000Z","path":"2017/05/26/build/jetty-maven-plugin-config/index.html","title":"","comments":1,"layout":"page","_id":"cj3zwegw7007a9vvuaxvsj0sc","content":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">jetty maven plugin config</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/jetty-maven-plugin-config/\" class=\"leancloud_visitors\" data-flag-title=\"jetty maven plugin config\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(jetty maven plugin config)原始地址]<a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                            <p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n                            <p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n                            <p>warName.war<br>在没有XML IoC文件的情况下：</p>\n                            <ul>\n                                <li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n                                <li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n                                <li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n                            </ul>\n                            <p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n                            <p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>\n                            <a id=\"more\"></a>\n                            <p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n                            <p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n                            <p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n                            <p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n                            <h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, from the same directory as your root pom.xml, type:</p>\n                            <blockquote>\n                                <p>mvn jetty:run</p>\n                            </blockquote>\n                            <p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n                            <p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n                            <p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n                            <p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n                            <h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n                            <p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n                            <blockquote>\n                                <p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n                                <p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n                            </blockquote>\n                            <h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n                            <h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n                            <h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n                            <h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n                            <h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n                            <h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n                            <h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n                            <p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n                            <h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n                            <h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n                            <h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n                            <h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n                            <h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n                            <h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n                            <p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n                            <h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n                            <h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n                            <h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n                            <h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n                            <h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n                            <h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n                            <h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n                            <h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n                            </blockquote>\n                            <p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n                            <h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n                            <h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n                            <h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n                            <h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n                            <h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n                            <h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n                            <h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n                            <h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n                            <h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n                            <h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n                            <h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n                            <h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n                            <h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n                            <h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n                            <ul>\n                                <li>resources in ${project.basedir}/src/main/webapp</li>\n                                <li>classes in ${project.build.outputDirectory}</li>\n                                <li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n                            </ul>\n                            <p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n                            <p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n                            <h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n                            <h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n                            <h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n                            <h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n                            <h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n                            <h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n                            <h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n                            <h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n                            <h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n                            <h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n                            <h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n                            <h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n                            <h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n                            <h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n                            <h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n                            <h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n                            <h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n                            <h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n                            <h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n                            <h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n                            <h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n                            <h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n                            <h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n                            <p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n                            <p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n                            <h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n                            <p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n                            <h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n                            <h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n                            <h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, while Jetty is running (in another window), type:</p>\n                            <h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n                            <h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n                            <p>The following configuration parameters allow you to save the file:</p>\n                            <h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n                            <h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n                            <h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n                            <h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n                            <h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n                            <h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n                            <p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n                            <p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n                            <h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n                            <p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n                            <p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n                            <p>Putting the configuration in webapp A’s pom.xml:</p>\n                            <p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n                            <p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n                            <h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n                            <p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n                            <h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n                            <p>Specifying System Properties in a File</p>\n                            <p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n                            <p>Suppose we have a file called mysys.props which contains the following:</p>\n                            <blockquote>\n                                <p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/jetty/\" rel=\"tag\"># jetty</a>\n\n                                <a href=\"/tags/maven/\" rel=\"tag\"># maven</a>\n\n                                <a href=\"/tags/config/\" rel=\"tag\"># config</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"next\" title=\"IntelliJ IDEA使用总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> IntelliJ IDEA使用总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/Spider/Scrapy-Install/\" rel=\"prev\" title=\"Scrapy之新手上路\">\n                                        Scrapy之新手上路 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Quick-Start-Get-Up-and-Running\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">Quick Start: Get Up and Running</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Supported-Goals\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">Supported Goals</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-the-Jetty-Container\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">Configuring the Jetty Container</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#httpConnector\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">httpConnector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#port\"><span class=\"nav-number\">3.1.1.</span> <span class=\"nav-text\">port</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#host\"><span class=\"nav-number\">3.1.2.</span> <span class=\"nav-text\">host</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#name\"><span class=\"nav-number\">3.1.3.</span> <span class=\"nav-text\">name</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#idleTimeout\"><span class=\"nav-number\">3.1.4.</span> <span class=\"nav-text\">idleTimeout</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#soLinger\"><span class=\"nav-number\">3.1.5.</span> <span class=\"nav-text\">soLinger</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jettyXml\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">jettyXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#scanIntervalSeconds\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#reload\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#dumpOnStart\"><span class=\"nav-number\">3.5.</span> <span class=\"nav-text\">dumpOnStart</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#loginServices\"><span class=\"nav-number\">3.6.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#requestLog\"><span class=\"nav-number\">3.7.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#server\"><span class=\"nav-number\">3.8.</span> <span class=\"nav-text\">server</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort\"><span class=\"nav-number\">3.9.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey\"><span class=\"nav-number\">3.10.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemProperties\"><span class=\"nav-number\">3.11.</span> <span class=\"nav-text\">systemProperties</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemPropertiesFile\"><span class=\"nav-number\">3.12.</span> <span class=\"nav-text\">systemPropertiesFile</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#skip\"><span class=\"nav-number\">3.13.</span> <span class=\"nav-text\">skip</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#useProvidedScope\"><span class=\"nav-number\">3.14.</span> <span class=\"nav-text\">useProvidedScope</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#excludedGoals\"><span class=\"nav-number\">3.15.</span> <span class=\"nav-text\">excludedGoals</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-a-Https-Connector\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">Configuring a Https Connector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-xml\"><span class=\"nav-number\">4.1.</span> <span class=\"nav-text\">jetty.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-ssl-xml\"><span class=\"nav-number\">4.2.</span> <span class=\"nav-text\">jetty-ssl.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-https-xml\"><span class=\"nav-number\">4.3.</span> <span class=\"nav-text\">jetty-https.xml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Your-WebApp\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">Configuring Your WebApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#webApp\"><span class=\"nav-number\">5.1.</span> <span class=\"nav-text\">webApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#contextPath\"><span class=\"nav-number\">5.1.1.</span> <span class=\"nav-text\">contextPath</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#descriptor\"><span class=\"nav-number\">5.1.2.</span> <span class=\"nav-text\">descriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#defaultsDescriptor\"><span class=\"nav-number\">5.1.3.</span> <span class=\"nav-text\">defaultsDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#overrideDescriptor\"><span class=\"nav-number\">5.1.4.</span> <span class=\"nav-text\">overrideDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#tempDirectory\"><span class=\"nav-number\">5.1.5.</span> <span class=\"nav-text\">tempDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseResource\"><span class=\"nav-number\">5.1.6.</span> <span class=\"nav-text\">baseResource</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#resourceBases\"><span class=\"nav-number\">5.1.7.</span> <span class=\"nav-text\">resourceBases</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseAppFirst\"><span class=\"nav-number\">5.1.8.</span> <span class=\"nav-text\">baseAppFirst</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#containerIncludeJarPattern\"><span class=\"nav-number\">5.1.9.</span> <span class=\"nav-text\">containerIncludeJarPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webInfIncludeJarPattern\"><span class=\"nav-number\">5.1.10.</span> <span class=\"nav-text\">webInfIncludeJarPattern</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#contextXml\"><span class=\"nav-number\">5.2.</span> <span class=\"nav-text\">contextXml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">jetty:run</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration\"><span class=\"nav-number\">6.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#classesDirectory\"><span class=\"nav-number\">6.1.1.</span> <span class=\"nav-text\">classesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#testClassesDirectory\"><span class=\"nav-number\">6.1.2.</span> <span class=\"nav-text\">testClassesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#useTestScope\"><span class=\"nav-number\">6.1.3.</span> <span class=\"nav-text\">useTestScope</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webAppSourceDirectory\"><span class=\"nav-number\">6.1.4.</span> <span class=\"nav-text\">webAppSourceDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jettyEnvXml\"><span class=\"nav-number\">6.1.5.</span> <span class=\"nav-text\">jettyEnvXml</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargets\"><span class=\"nav-number\">6.1.6.</span> <span class=\"nav-text\">scanTargets</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargetPatterns\"><span class=\"nav-number\">6.1.7.</span> <span class=\"nav-text\">scanTargetPatterns</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanClassesPattern\"><span class=\"nav-number\">6.1.8.</span> <span class=\"nav-text\">scanClassesPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTestClassesPattern\"><span class=\"nav-number\">6.1.9.</span> <span class=\"nav-text\">scanTestClassesPattern</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-war\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">jetty:run-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-1\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war\"><span class=\"nav-number\">7.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-exploded\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">jetty:run-exploded</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-2\"><span class=\"nav-number\">8.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-1\"><span class=\"nav-number\">8.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-deploy-war\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">jetty:deploy-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-3\"><span class=\"nav-number\">9.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-2\"><span class=\"nav-number\">9.1.1.</span> <span class=\"nav-text\">war</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#daemon\"><span class=\"nav-number\">9.1.2.</span> <span class=\"nav-text\">daemon</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-forked\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">jetty:run-forked</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-4\"><span class=\"nav-number\">10.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jvmArgs\"><span class=\"nav-number\">10.1.1.</span> <span class=\"nav-text\">jvmArgs</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#waitForChild\"><span class=\"nav-number\">10.1.2.</span> <span class=\"nav-text\">waitForChild</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#maxStartupLines\"><span class=\"nav-number\">10.1.3.</span> <span class=\"nav-text\">maxStartupLines</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanIntervalSeconds-1\"><span class=\"nav-number\">10.1.4.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#reload-1\"><span class=\"nav-number\">10.1.5.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#httpConnector-1\"><span class=\"nav-number\">10.1.6.</span> <span class=\"nav-text\">httpConnector</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#loginServices-1\"><span class=\"nav-number\">10.1.7.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#requestLog-1\"><span class=\"nav-number\">10.1.8.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#systemProperties-1\"><span class=\"nav-number\">10.1.9.</span> <span class=\"nav-text\">systemProperties</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-run-forked\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">mvn jetty:run-forked</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-start\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">jetty:start</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-stop\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">jetty:stop</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort-1\"><span class=\"nav-number\">13.1.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey-1\"><span class=\"nav-number\">13.2.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopWait\"><span class=\"nav-number\">13.3.</span> <span class=\"nav-text\">stopWait</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-stop\"><span class=\"nav-number\">14.</span> <span class=\"nav-text\">mvn jetty:stop</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-effective-web-xml\"><span class=\"nav-number\">15.</span> <span class=\"nav-text\">jetty:effective-web-xml</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#deleteOnExit\"><span class=\"nav-number\">15.1.</span> <span class=\"nav-text\">deleteOnExit</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#effectiveWebXml\"><span class=\"nav-number\">15.2.</span> <span class=\"nav-text\">effectiveWebXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#originAttribute\"><span class=\"nav-number\">15.3.</span> <span class=\"nav-text\">originAttribute</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#generateOrigin\"><span class=\"nav-number\">15.4.</span> <span class=\"nav-text\">generateOrigin</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Overlaid-wars\"><span class=\"nav-number\">16.</span> <span class=\"nav-text\">Using Overlaid wars</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#With-maven-war-plugin\"><span class=\"nav-number\">17.</span> <span class=\"nav-text\">With maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Without-maven-war-plugin\"><span class=\"nav-number\">18.</span> <span class=\"nav-text\">Without maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Security-Settings\"><span class=\"nav-number\">19.</span> <span class=\"nav-text\">Configuring Security Settings</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Multiple-Webapp-Root-Directories\"><span class=\"nav-number\">20.</span> <span class=\"nav-text\">Using Multiple Webapp Root Directories</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Running-More-than-One-Webapp\"><span class=\"nav-number\">21.</span> <span class=\"nav-text\">Running More than One Webapp</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Setting-System-Properties\"><span class=\"nav-number\">22.</span> <span class=\"nav-text\">Setting System Properties</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Specifying-System-Properties-in-the-POM\"><span class=\"nav-number\">23.</span> <span class=\"nav-text\">Specifying System Properties in the POM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n","site":{"data":{}},"excerpt":"","more":"\n<main id=\"main\" class=\"main\">\n    <div class=\"main-inner\">\n        <div class=\"content-wrap\">\n            <div id=\"content\" class=\"content\">\n\n\n                <div id=\"posts\" class=\"posts-expand\">\n\n\n\n\n\n\n\n\n                    <article class=\"post post-type-normal \" itemscope=\"\" itemtype=\"http://schema.org/Article\">\n                        <link itemprop=\"mainEntityOfPage\" href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\">\n\n                        <span hidden itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n      <meta itemprop=\"name\" content=\"小英雄雨来\">\n      <meta itemprop=\"description\" content=\"\">\n      <meta itemprop=\"image\" content=\"/images/avatar.gif\">\n    </span>\n\n                        <span hidden itemprop=\"publisher\" itemscope=\"\" itemtype=\"http://schema.org/Organization\">\n      <meta itemprop=\"name\" content=\"架构演进之旅\">\n    </span>\n\n\n                        <header class=\"post-header\">\n\n\n\n                            <h2 class=\"post-title\" itemprop=\"name headline\">jetty maven plugin config</h2>\n\n\n                            <div class=\"post-meta\">\n          <span class=\"post-time\">\n\n\n\n\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-calendar-check-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">更新于</span>\n\n              <time title=\"更新于\" itemprop=\"dateModified\" datetime=\"2017-05-30T05:16:34+00:00\">\n                2017-05-30\n              </time>\n\n          </span>\n\n\n                                <span class=\"post-category\">\n\n              <span class=\"post-meta-divider\">|</span>\n\n              <span class=\"post-meta-item-icon\">\n                <i class=\"fa fa-folder-o\"></i>\n              </span>\n\n                <span class=\"post-meta-item-text\">分类于</span>\n\n\n                <span itemprop=\"about\" itemscope=\"\" itemtype=\"http://schema.org/Thing\">\n                  <a href=\"/categories/build/\" itemprop=\"url\" rel=\"index\">\n                    <span itemprop=\"name\">build</span>\n                  </a>\n                </span>\n\n\n\n\n            </span>\n\n\n\n\n\n\n\n\n                                <span id=\"/2017-05/build/jetty-maven-plugin-config/\" class=\"leancloud_visitors\" data-flag-title=\"jetty maven plugin config\">\n               <span class=\"post-meta-divider\">|</span>\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n\n                 <span class=\"post-meta-item-text\">阅读次数 </span>\n\n                 <span class=\"leancloud-visitors-count\"></span>\n             </span>\n\n\n\n\n\n\n\n\n                            </div>\n                        </header>\n\n\n                        <div class=\"post-body\" itemprop=\"articleBody\">\n\n\n\n\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DS2FPo9pod%2FMcQipKwQzePCperVdZeJviEViQ0P1Vf2kguMN8XjClAoggAmZh6Xz4dTUCp7J6xLhlPjx8CqYfPWjTbzraVxy7YzvZkCrmclL9U03wBYLV9%2Bdn1BbglxZYxUhy8exlzcpAFEHVckI7b93srg%2FL%2FeD3keUEnoKELDlWYetMiZZgV%2BSx6OrKqagyklzFeKMz7Cd4Qek9OyREeQ%2BdciYQJaT7LNmFwzcjFAU%3D\" title=\"阿里云推广\">\n                                <img src=\"http://static.xcoder.ren/public/images/aliyun-ECS-AD/700-90.jpg\" height=\"90\" width=\"700\" alt=\"阿里云推广\">\n                            </a>\n                            <br>\n                            [本文(jetty maven plugin config)原始地址]<a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                            <p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n                            <p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n                            <p>warName.war<br>在没有XML IoC文件的情况下：</p>\n                            <ul>\n                                <li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n                                <li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n                                <li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n                            </ul>\n                            <p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n                            <p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>\n                            <a id=\"more\"></a>\n                            <p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n                            <p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n                            <p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n                            <p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n                            <h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, from the same directory as your root pom.xml, type:</p>\n                            <blockquote>\n                                <p>mvn jetty:run</p>\n                            </blockquote>\n                            <p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n                            <p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n                            <p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n                            <p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n                            <h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n                            <p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n                            <blockquote>\n                                <p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n                                <p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n                            </blockquote>\n                            <h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n                            <h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n                            <h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n                            <h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n                            <h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n                            <h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n                            <h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n                            <p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n                            <h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n                            <h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n                            <h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n                            <h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n                            <h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n                            <h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n                            <p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n                            <h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n                            <h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n                            <h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n                            <h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n                            <h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n                            <h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n                            <h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n                            <h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n                            <h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <blockquote>\n                                <p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n                            </blockquote>\n                            <p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n                            <h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n                            <h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n                            <h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n                            <h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n                            <h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n                            <h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n                            <h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n                            <h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n                            <h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n                            <h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n                            <h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n                            <h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n                            <h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n                            <h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n                            <ul>\n                                <li>resources in ${project.basedir}/src/main/webapp</li>\n                                <li>classes in ${project.build.outputDirectory}</li>\n                                <li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n                            </ul>\n                            <p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n                            <p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n                            <h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n                            <h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n                            <h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n                            <h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n                            <h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n                            <h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n                            <h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n                            <h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n                            <h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n                            <h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n                            <h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n                            <h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n                            <h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n                            <h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n                            <h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n                            <h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n                            <h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n                            <h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n                            <h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n                            <h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n                            <h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n                            <h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n                            <h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n                            <h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n                            <p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n                            <p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n                            <h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n                            <p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n                            <h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n                            <h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n                            <h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then, while Jetty is running (in another window), type:</p>\n                            <h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n                            <h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n                            <p>The following configuration parameters allow you to save the file:</p>\n                            <h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n                            <h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n                            <h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n                            <h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n                            <h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n                            <h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n                            <p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n                            <p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n                            <h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n                            <p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n                            <p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n                            <p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n                            <h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n                            <p>Putting the configuration in webapp A’s pom.xml:</p>\n                            <p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n                            <p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n                            <p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n                            <h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n                            <p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n                            <h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            <p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n                            <p>Specifying System Properties in a File</p>\n                            <p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n                            <p>Suppose we have a file called mysys.props which contains the following:</p>\n                            <blockquote>\n                                <p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n                            </blockquote>\n                            <p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>\n\n                            <a class=\"post-gallery\" target=\"_blank\" itemprop=\"contents\" href=\"https://s.click.taobao.com/t?e=m%3D2%26s%3DGxUK4RxRAUwcQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMaoDsluWCMrtJ1gyddu7kN%2FjA8%2F%2BZJDLfQ4Zu0ikTBVI5H6lqT7H0fKnLcgY8qPbG6UuZxIcp9pfUIgVEmFmgnaR4ypTBJBwtB6l0bxfYrBpJPwiig1bxLMAV4Err%2B0r%2ByrbHgqSJ08vcSpj5qSCmbA%3D\" title=\"2017天猫618\">\n                                <img src=\"https://img.alicdn.com/tfs/TB1_phpRpXXXXaTXVXXXXXXXXXX-440-180.jpg\" height=\"180\" width=\"440\" alt=\"2017天猫618\">\n                            </a>\n\n                        </div>\n\n                        <div>\n\n\n\n\n                        </div>\n\n                        <div>\n\n\n\n                        </div>\n\n                        <div>\n\n\n                            <ul class=\"post-copyright\">\n                                <li class=\"post-copyright-author\">\n                                    <strong>本文作者：</strong>\n                                    小英雄雨来\n                                </li>\n                                <li class=\"post-copyright-link\">\n                                    <strong>本文链接：</strong>\n                                    <a href=\"http://xcoder.me/2017-05/build/jetty-maven-plugin-config/\" title=\"jetty maven plugin config\">http://xcoder.me/2017-05/build/jetty-maven-plugin-config/</a>\n                                </li>\n                                <li class=\"post-copyright-license\">\n                                    <strong>版权声明： </strong>\n                                    本博客所有文章除特别声明外，均采用 <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\"external nofollow\" target=\"_blank\">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！\n                                </li>\n                            </ul>\n\n\n\n                        </div>\n\n                        <footer class=\"post-footer\">\n\n                            <div class=\"post-tags\">\n\n                                <a href=\"/tags/jetty/\" rel=\"tag\"># jetty</a>\n\n                                <a href=\"/tags/maven/\" rel=\"tag\"># maven</a>\n\n                                <a href=\"/tags/config/\" rel=\"tag\"># config</a>\n\n                            </div>\n\n\n\n\n\n\n\n                            <div class=\"post-nav\">\n                                <div class=\"post-nav-next post-nav-item\">\n\n                                    <a href=\"/2017-05/tools/IntelliJ IDEA使用总结/\" rel=\"next\" title=\"IntelliJ IDEA使用总结\">\n                                        <i class=\"fa fa-chevron-left\"></i> IntelliJ IDEA使用总结\n                                    </a>\n\n                                </div>\n\n                                <span class=\"post-nav-divider\"></span>\n\n                                <div class=\"post-nav-prev post-nav-item\">\n\n                                    <a href=\"/2017-05/Spider/Scrapy-Install/\" rel=\"prev\" title=\"Scrapy之新手上路\">\n                                        Scrapy之新手上路 <i class=\"fa fa-chevron-right\"></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n\n\n\n                        </footer>\n                    </article>\n\n\n\n                    <div class=\"post-spread\">\n\n                        <!-- JiaThis Button BEGIN -->\n                        <div class=\"jiathis_style\">\n                            <a class=\"jiathis_button_tsina\"></a>\n                            <a class=\"jiathis_button_tqq\"></a>\n                            <a class=\"jiathis_button_weixin\"></a>\n                            <a class=\"jiathis_button_cqq\"></a>\n                            <a class=\"jiathis_button_douban\"></a>\n                            <a class=\"jiathis_button_renren\"></a>\n                            <a class=\"jiathis_button_qzone\"></a>\n                            <a class=\"jiathis_button_kaixin001\"></a>\n                            <a class=\"jiathis_button_copy\"></a>\n                            <a href=\"http://www.jiathis.com/share\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n                            <a class=\"jiathis_counter_style\"></a>\n                        </div>\n                        <script type=\"text/javascript\">\n                            var jiathis_config={\n                                hideMore:false\n                            }\n                        </script>\n                        <script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js\" charset=\"utf-8\"></script>\n                        <!-- JiaThis Button END -->\n\n\n                    </div>\n                </div>\n\n\n            </div>\n\n\n\n\n\n            <div class=\"comments\" id=\"comments\">\n\n            </div>\n\n\n        </div>\n\n\n\n        <div class=\"sidebar-toggle\">\n            <div class=\"sidebar-toggle-line-wrap\">\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-first\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-middle\"></span>\n                <span class=\"sidebar-toggle-line sidebar-toggle-line-last\"></span>\n            </div>\n        </div>\n\n        <aside id=\"sidebar\" class=\"sidebar\">\n            <div class=\"sidebar-inner\">\n\n\n\n\n                <ul class=\"sidebar-nav motion-element\">\n                    <li class=\"sidebar-nav-toc sidebar-nav-active\" data-target=\"post-toc-wrap\">\n                        文章目录\n                    </li>\n                    <li class=\"sidebar-nav-overview\" data-target=\"site-overview\">\n                        站点概览\n                    </li>\n                </ul>\n\n\n                <section class=\"site-overview sidebar-panel\">\n                    <div class=\"site-author motion-element\" itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\">\n                        <img class=\"site-author-image\" itemprop=\"image\" src=\"/images/avatar.gif\" alt=\"小英雄雨来\">\n                        <p class=\"site-author-name\" itemprop=\"name\">小英雄雨来</p>\n\n                        <p class=\"site-description motion-element\" itemprop=\"description\"></p>\n\n                    </div>\n                    <nav class=\"site-state motion-element\">\n\n\n                        <div class=\"site-state-item site-state-posts\">\n                            <a href=\"/archives\">\n                                <span class=\"site-state-item-count\">16</span>\n                                <span class=\"site-state-item-name\">日志</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-categories\">\n                            <a href=\"/categories/index.html\">\n                                <span class=\"site-state-item-count\">8</span>\n                                <span class=\"site-state-item-name\">分类</span>\n                            </a>\n                        </div>\n\n\n\n\n\n                        <div class=\"site-state-item site-state-tags\">\n                            <a href=\"/tags/index.html\">\n                                <span class=\"site-state-item-count\">39</span>\n                                <span class=\"site-state-item-name\">标签</span>\n                            </a>\n                        </div>\n\n\n                    </nav>\n\n\n\n                    <div class=\"links-of-author motion-element\">\n\n                    </div>\n\n\n\n\n\n\n                    <div class=\"links-of-blogroll motion-element links-of-blogroll-inline\">\n                        <div class=\"links-of-blogroll-title\">\n                            <i class=\"fa  fa-fw fa-globe\"></i>\n                            收藏\n                        </div>\n                        <ul class=\"links-of-blogroll-list\">\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://news.dbanotes.net/\" title=\"dbanotes\" target=\"_blank\">dbanotes</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://hedengcheng.com/\" title=\"数据库\" target=\"_blank\">数据库</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"http://www.ruanyifeng.com/blog/\" title=\"ruanyifeng\" target=\"_blank\">ruanyifeng</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://readhub.me/\" title=\"readhub\" target=\"_blank\">readhub</a>\n                            </li>\n\n                            <li class=\"links-of-blogroll-item\">\n                                <a href=\"https://www.thoughtworks.com/cn/radar\" title=\"技术雷达\" target=\"_blank\">技术雷达</a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n\n\n\n\n                </section>\n\n\n                <!--noindex-->\n                <section class=\"post-toc-wrap motion-element sidebar-panel sidebar-panel-active\">\n                    <div class=\"post-toc\">\n\n\n\n\n\n\n                        <div class=\"post-toc-content\"><ol class=\"nav\"><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Quick-Start-Get-Up-and-Running\"><span class=\"nav-number\">1.</span> <span class=\"nav-text\">Quick Start: Get Up and Running</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Supported-Goals\"><span class=\"nav-number\">2.</span> <span class=\"nav-text\">Supported Goals</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-the-Jetty-Container\"><span class=\"nav-number\">3.</span> <span class=\"nav-text\">Configuring the Jetty Container</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#httpConnector\"><span class=\"nav-number\">3.1.</span> <span class=\"nav-text\">httpConnector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#port\"><span class=\"nav-number\">3.1.1.</span> <span class=\"nav-text\">port</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#host\"><span class=\"nav-number\">3.1.2.</span> <span class=\"nav-text\">host</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#name\"><span class=\"nav-number\">3.1.3.</span> <span class=\"nav-text\">name</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#idleTimeout\"><span class=\"nav-number\">3.1.4.</span> <span class=\"nav-text\">idleTimeout</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#soLinger\"><span class=\"nav-number\">3.1.5.</span> <span class=\"nav-text\">soLinger</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jettyXml\"><span class=\"nav-number\">3.2.</span> <span class=\"nav-text\">jettyXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#scanIntervalSeconds\"><span class=\"nav-number\">3.3.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#reload\"><span class=\"nav-number\">3.4.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#dumpOnStart\"><span class=\"nav-number\">3.5.</span> <span class=\"nav-text\">dumpOnStart</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#loginServices\"><span class=\"nav-number\">3.6.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#requestLog\"><span class=\"nav-number\">3.7.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#server\"><span class=\"nav-number\">3.8.</span> <span class=\"nav-text\">server</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort\"><span class=\"nav-number\">3.9.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey\"><span class=\"nav-number\">3.10.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemProperties\"><span class=\"nav-number\">3.11.</span> <span class=\"nav-text\">systemProperties</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#systemPropertiesFile\"><span class=\"nav-number\">3.12.</span> <span class=\"nav-text\">systemPropertiesFile</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#skip\"><span class=\"nav-number\">3.13.</span> <span class=\"nav-text\">skip</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#useProvidedScope\"><span class=\"nav-number\">3.14.</span> <span class=\"nav-text\">useProvidedScope</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#excludedGoals\"><span class=\"nav-number\">3.15.</span> <span class=\"nav-text\">excludedGoals</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-a-Https-Connector\"><span class=\"nav-number\">4.</span> <span class=\"nav-text\">Configuring a Https Connector</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-xml\"><span class=\"nav-number\">4.1.</span> <span class=\"nav-text\">jetty.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-ssl-xml\"><span class=\"nav-number\">4.2.</span> <span class=\"nav-text\">jetty-ssl.xml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#jetty-https-xml\"><span class=\"nav-number\">4.3.</span> <span class=\"nav-text\">jetty-https.xml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Your-WebApp\"><span class=\"nav-number\">5.</span> <span class=\"nav-text\">Configuring Your WebApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#webApp\"><span class=\"nav-number\">5.1.</span> <span class=\"nav-text\">webApp</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#contextPath\"><span class=\"nav-number\">5.1.1.</span> <span class=\"nav-text\">contextPath</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#descriptor\"><span class=\"nav-number\">5.1.2.</span> <span class=\"nav-text\">descriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#defaultsDescriptor\"><span class=\"nav-number\">5.1.3.</span> <span class=\"nav-text\">defaultsDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#overrideDescriptor\"><span class=\"nav-number\">5.1.4.</span> <span class=\"nav-text\">overrideDescriptor</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#tempDirectory\"><span class=\"nav-number\">5.1.5.</span> <span class=\"nav-text\">tempDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseResource\"><span class=\"nav-number\">5.1.6.</span> <span class=\"nav-text\">baseResource</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#resourceBases\"><span class=\"nav-number\">5.1.7.</span> <span class=\"nav-text\">resourceBases</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#baseAppFirst\"><span class=\"nav-number\">5.1.8.</span> <span class=\"nav-text\">baseAppFirst</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#containerIncludeJarPattern\"><span class=\"nav-number\">5.1.9.</span> <span class=\"nav-text\">containerIncludeJarPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webInfIncludeJarPattern\"><span class=\"nav-number\">5.1.10.</span> <span class=\"nav-text\">webInfIncludeJarPattern</span></a></li></ol></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#contextXml\"><span class=\"nav-number\">5.2.</span> <span class=\"nav-text\">contextXml</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run\"><span class=\"nav-number\">6.</span> <span class=\"nav-text\">jetty:run</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration\"><span class=\"nav-number\">6.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#classesDirectory\"><span class=\"nav-number\">6.1.1.</span> <span class=\"nav-text\">classesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#testClassesDirectory\"><span class=\"nav-number\">6.1.2.</span> <span class=\"nav-text\">testClassesDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#useTestScope\"><span class=\"nav-number\">6.1.3.</span> <span class=\"nav-text\">useTestScope</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#webAppSourceDirectory\"><span class=\"nav-number\">6.1.4.</span> <span class=\"nav-text\">webAppSourceDirectory</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jettyEnvXml\"><span class=\"nav-number\">6.1.5.</span> <span class=\"nav-text\">jettyEnvXml</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargets\"><span class=\"nav-number\">6.1.6.</span> <span class=\"nav-text\">scanTargets</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTargetPatterns\"><span class=\"nav-number\">6.1.7.</span> <span class=\"nav-text\">scanTargetPatterns</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanClassesPattern\"><span class=\"nav-number\">6.1.8.</span> <span class=\"nav-text\">scanClassesPattern</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanTestClassesPattern\"><span class=\"nav-number\">6.1.9.</span> <span class=\"nav-text\">scanTestClassesPattern</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-war\"><span class=\"nav-number\">7.</span> <span class=\"nav-text\">jetty:run-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-1\"><span class=\"nav-number\">7.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war\"><span class=\"nav-number\">7.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-exploded\"><span class=\"nav-number\">8.</span> <span class=\"nav-text\">jetty:run-exploded</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-2\"><span class=\"nav-number\">8.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-1\"><span class=\"nav-number\">8.1.1.</span> <span class=\"nav-text\">war</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-deploy-war\"><span class=\"nav-number\">9.</span> <span class=\"nav-text\">jetty:deploy-war</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-3\"><span class=\"nav-number\">9.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#war-2\"><span class=\"nav-number\">9.1.1.</span> <span class=\"nav-text\">war</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#daemon\"><span class=\"nav-number\">9.1.2.</span> <span class=\"nav-text\">daemon</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-run-forked\"><span class=\"nav-number\">10.</span> <span class=\"nav-text\">jetty:run-forked</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#Configuration-4\"><span class=\"nav-number\">10.1.</span> <span class=\"nav-text\">Configuration</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#jvmArgs\"><span class=\"nav-number\">10.1.1.</span> <span class=\"nav-text\">jvmArgs</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#waitForChild\"><span class=\"nav-number\">10.1.2.</span> <span class=\"nav-text\">waitForChild</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#maxStartupLines\"><span class=\"nav-number\">10.1.3.</span> <span class=\"nav-text\">maxStartupLines</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#scanIntervalSeconds-1\"><span class=\"nav-number\">10.1.4.</span> <span class=\"nav-text\">scanIntervalSeconds</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#reload-1\"><span class=\"nav-number\">10.1.5.</span> <span class=\"nav-text\">reload</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#httpConnector-1\"><span class=\"nav-number\">10.1.6.</span> <span class=\"nav-text\">httpConnector</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#loginServices-1\"><span class=\"nav-number\">10.1.7.</span> <span class=\"nav-text\">loginServices</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#requestLog-1\"><span class=\"nav-number\">10.1.8.</span> <span class=\"nav-text\">requestLog</span></a></li><li class=\"nav-item nav-level-4\"><a class=\"nav-link\" href=\"#systemProperties-1\"><span class=\"nav-number\">10.1.9.</span> <span class=\"nav-text\">systemProperties</span></a></li></ol></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-run-forked\"><span class=\"nav-number\">11.</span> <span class=\"nav-text\">mvn jetty:run-forked</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-start\"><span class=\"nav-number\">12.</span> <span class=\"nav-text\">jetty:start</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-stop\"><span class=\"nav-number\">13.</span> <span class=\"nav-text\">jetty:stop</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopPort-1\"><span class=\"nav-number\">13.1.</span> <span class=\"nav-text\">stopPort</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopKey-1\"><span class=\"nav-number\">13.2.</span> <span class=\"nav-text\">stopKey</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#stopWait\"><span class=\"nav-number\">13.3.</span> <span class=\"nav-text\">stopWait</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#mvn-jetty-stop\"><span class=\"nav-number\">14.</span> <span class=\"nav-text\">mvn jetty:stop</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#jetty-effective-web-xml\"><span class=\"nav-number\">15.</span> <span class=\"nav-text\">jetty:effective-web-xml</span></a><ol class=\"nav-child\"><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#deleteOnExit\"><span class=\"nav-number\">15.1.</span> <span class=\"nav-text\">deleteOnExit</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#effectiveWebXml\"><span class=\"nav-number\">15.2.</span> <span class=\"nav-text\">effectiveWebXml</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#originAttribute\"><span class=\"nav-number\">15.3.</span> <span class=\"nav-text\">originAttribute</span></a></li><li class=\"nav-item nav-level-3\"><a class=\"nav-link\" href=\"#generateOrigin\"><span class=\"nav-number\">15.4.</span> <span class=\"nav-text\">generateOrigin</span></a></li></ol></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Overlaid-wars\"><span class=\"nav-number\">16.</span> <span class=\"nav-text\">Using Overlaid wars</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#With-maven-war-plugin\"><span class=\"nav-number\">17.</span> <span class=\"nav-text\">With maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Without-maven-war-plugin\"><span class=\"nav-number\">18.</span> <span class=\"nav-text\">Without maven-war-plugin</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Configuring-Security-Settings\"><span class=\"nav-number\">19.</span> <span class=\"nav-text\">Configuring Security Settings</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Using-Multiple-Webapp-Root-Directories\"><span class=\"nav-number\">20.</span> <span class=\"nav-text\">Using Multiple Webapp Root Directories</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Running-More-than-One-Webapp\"><span class=\"nav-number\">21.</span> <span class=\"nav-text\">Running More than One Webapp</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Setting-System-Properties\"><span class=\"nav-number\">22.</span> <span class=\"nav-text\">Setting System Properties</span></a></li><li class=\"nav-item nav-level-2\"><a class=\"nav-link\" href=\"#Specifying-System-Properties-in-the-POM\"><span class=\"nav-number\">23.</span> <span class=\"nav-text\">Specifying System Properties in the POM</span></a></li></ol></div>\n\n\n                    </div>\n                </section>\n                <!--/noindex-->\n\n\n\n\n            </div>\n        </aside>\n\n\n\n    </div>\n</main>\n"}],"Post":[{"title":"Scrapy之新手上路","date":"2017-05-28T14:38:56.000Z","reward":true,"_content":"\n## 安装Scrapy\n\n我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目\n\n![img](http://static.xcoder.ren/public/images/crawler-most-stars.png)\n\nScrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。\n\nScrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。\n\n是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了\n\n这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]https://docs.scrapy.org/en/latest/intro/install.html）。\n\n<!--more-->\n\n* 安装python\n\n    执行``python -V``看看是否安装了2.7或3.3的python。\n\n    如果没有安装``brew install python``或者要升级python\n    ```\n    brew update; brew upgrade python\n    ```\n    不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧[Homebrew介绍](https://brew.sh/index_zh-cn.html)\n\n* 使用pip安装Scrapy\n\n    执行``pip --version``来确认你安装来pip\n    没有安装？从 https://pip.pypa.io/en/latest/installing.html 安装 pip\n    pip升级？``pip install --upgrade pip``\n    \n    好了，来安装Scrapy吧\n    ```\n    pip install Scrapy\n    ```\n    ![img](http://static.xcoder.ren/public/images/success-install-scrapy.png)\n    上面就说明安装成功了\n\n## 创建一个爬虫项目\n    \n通过scrapy --help我们可以看到scrapy的基本命令\n    \n![img](http://static.xcoder.ren/public/images/scrapy-help.png)\n\n```\nscrapy startproject project名称\n```\n创建一个项目可以看到它的目录结构\n\n![img](http://static.xcoder.ren/public/images/directory-struct.png)\n\n* scrapy.cfg: 配置文件\n* tutorial/: 该项目的python模块.\n* tutorial/items.py: 项目中的item文件.\n* tutorial/pipelines.py: 项目中的pipelines文件.\n* tutorial/settings.py: 项目的设置文件.\n* tutorial/spiders/: 放置spider代码的目录.\n\n## 创建Spider\n\n在tutorial/spiders中创建一个cnblogs_spider.py如下：\n```\n# encoding=utf8\nimport scrapy\n# import json\n\n\nclass CnblogsSpider(scrapy.Spider):\n    # spider的唯一标示，在project中要唯一,spider名称\n    name = \"cnblogs\"\n\n    start_urls = [\n        'https://news.cnblogs.com/n/page/1/',\n        # 'https://news.cnblogs.com/n/page/2/',\n        # 'https://news.cnblogs.com/n/page/3/'\n    ]\n\n    # def start_requests(self):\n    #     urls = [\n    #         'https://news.cnblogs.com/n/page/1/',\n    #         'https://news.cnblogs.com/n/page/2/',\n    #         'https://news.cnblogs.com/n/page/3/'\n    #     ]\n    #     for url in urls:\n    #         yield scrapy.Request(url=url, callback=self.parse)\n\n    def parse(self, response):\n        # page = response.url.split('/')[-2]\n        # filename = 'cnblogs-%s.json' % page\n        # with open(filename, 'wb') as f:\n        #     data = []\n        #     for new in response.css('div#news_list div.content'):\n        #         new_content = {\n        #             'title': ''.join(new.css('h2.news_entry a::text').extract()),\n        #             'summary': ''.join(new.css('div.entry_summary::text').extract()[1].lstrip().rstrip()),\n        #             'author': ''.join(new.css('div.entry_footer a::text').extract()[0].strip()),\n        #             'url': 'https://news.cnblogs.com'+new.css('h2.news_entry a::attr(href)').extract_first()\n        #         }\n        #         data.append(new_content)\n        #\n        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+'\\r\\n', 'utf-8'))\n        # self.log('save file %s' % filename)\n        # f.close()\n        for new in response.css('div#news_list div.content'):\n            yield {\n                'title': ''.join(new.css('h2.news_entry a::text').extract()),\n                'summary': ''.join(new.css('div.entry_summary::text').extract()).lstrip().rstrip(),\n                'author': ''.join(new.css('div.entry_footer a::text').extract()[1]).strip(),\n                'url': 'https://news.cnblogs.com'+new.css('h2.news_entry a::attr(href)').extract_first()\n            }\n\n        next_page = response.css('div#pager a::attr(href)').extract()[-1]\n        if next_page is not None:\n            next_page = response.urljoin(next_page)\n            yield scrapy.Request(next_page, callback=self.parse)\n\n```\n\n## 运行Spider\n\n完成了一个简单的spider，如何运行它来输出我们需要的结果呢？\n在项目的根目录中执行如下的命令：\n\n```\nscrapy crawl spider名称 -o spider.json\n```\n\n例如``scrapy crawl cnblogs``其中cnblogs即为定义的spider的name\n\n\n最终输出一个完整的json数据\n![img](http://static.xcoder.ren/public/images/scrapy-spider-export-json.png)\n```\n[\n{\"url\": \"https://news.cnblogs.com/n/570434/\", \"title\": \"传软银欲成印度打车应用Ola控股股东\", \"author\": \"itwriter\", \"summary\": \"腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...\"},\n{\"url\": \"https://news.cnblogs.com/n/570431/\", \"title\": \"黄金不仅可以做首饰 还能变成抗击癌症的“子弹”\", \"author\": \"itwriter\", \"summary\": \"说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...\"},\n{\"url\": \"https://news.cnblogs.com/n/570430/\", \"title\": \"联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？\", \"author\": \"itwriter\", \"summary\": \"文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...\"},\n{\"url\": \"https://news.cnblogs.com/n/570429/\", \"title\": \"美国正式对尼康展开专利侵权调查：日本巨头面临禁售\", \"author\": \"itwriter\", \"summary\": \"今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...\"},\n{\"url\": \"https://news.cnblogs.com/n/570428/\", \"title\": \"高德诉滴滴不正当竞争：8起案件索赔7500万元\", \"author\": \"itwriter\", \"summary\": \"北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...\"},\n{\"url\": \"https://news.cnblogs.com/n/570427/\", \"title\": \"从网易严选毛巾事件，看互联网撕逼的12个暗黑法则\", \"author\": \"itwriter\", \"summary\": \"一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...\"},\n{\"url\": \"https://news.cnblogs.com/n/570426/\", \"title\": \"马云李彦宏数博会上\\\"隔空对战\\\" 马化腾来“劝架”了\", \"author\": \"itwriter\", \"summary\": \"近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...\"},\n{\"url\": \"https://news.cnblogs.com/n/570425/\", \"title\": \"小米转型里程碑！小米之家突破100家：端午一天开四家\", \"author\": \"itwriter\", \"summary\": \"曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...\"},\n{\"url\": \"https://news.cnblogs.com/n/570424/\", \"title\": \"看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩\", \"author\": \"itwriter\", \"summary\": \"在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...\"},\n{\"url\": \"https://news.cnblogs.com/n/570423/\", \"title\": \"知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP\", \"author\": \"itwriter\", \"summary\": \"投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...\"},\n{\"url\": \"https://news.cnblogs.com/n/570422/\", \"title\": \"万人围观！雷军回老家过端午：亲登龙舟擂鼓\", \"author\": \"itwriter\", \"summary\": \"端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...\"},\n{\"url\": \"https://news.cnblogs.com/n/570421/\", \"title\": \"运动App掌门人：我们不需要流量，只想做体育的服务行业\", \"author\": \"itwriter\", \"summary\": \"运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...\"},\n{\"url\": \"https://news.cnblogs.com/n/570420/\", \"title\": \"十年版iPhone X最新爆料：会二选一\", \"author\": \"itwriter\", \"summary\": \"今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...\"},\n{\"url\": \"https://news.cnblogs.com/n/570419/\", \"title\": \"马斯克的火箭7年共发射34次，成功率94%\", \"author\": \"itwriter\", \"summary\": \"Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...\"},\n{\"url\": \"https://news.cnblogs.com/n/570417/\", \"title\": \"亚马逊在纽约开了首家实体书店：全是四星以上评级的书\", \"author\": \"itwriter\", \"summary\": \"BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...\"},\n{\"url\": \"https://news.cnblogs.com/n/570416/\", \"title\": \"比较Google地图和苹果地图一年的变化\", \"author\": \"itwriter\", \"summary\": \"2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O'Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...\"},\n{\"url\": \"https://news.cnblogs.com/n/570415/\", \"title\": \"两周过去了，“想哭”勒索蠕虫近来可好？\", \"author\": \"itwriter\", \"summary\": \"距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...\"},\n{\"url\": \"https://news.cnblogs.com/n/570414/\", \"title\": \"暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉\", \"author\": \"itwriter\", \"summary\": \"暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...\"},\n{\"url\": \"https://news.cnblogs.com/n/570413/\", \"title\": \"野心不小：从纸盒到Daydream 谷歌渴望VR独立运行\", \"author\": \"itwriter\", \"summary\": \"5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...\"},\n{\"url\": \"https://news.cnblogs.com/n/570412/\", \"title\": \"北斗/GPS导航定位基准服务启用！精度/信号大提升\", \"author\": \"itwriter\", \"summary\": \"卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...\"},\n{\"url\": \"https://news.cnblogs.com/n/570411/\", \"title\": \"农村淘宝APP正式停用：并入手机淘宝\", \"author\": \"itwriter\", \"summary\": \"农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...\"},\n{\"url\": \"https://news.cnblogs.com/n/570410/\", \"title\": \"苹果地图更新 可显示Apple Park 3D模型\", \"author\": \"itwriter\", \"summary\": \"近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...\"},\n{\"url\": \"https://news.cnblogs.com/n/570409/\", \"title\": \"亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了\", \"author\": \"itwriter\", \"summary\": \"根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...\"},\n{\"url\": \"https://news.cnblogs.com/n/570408/\", \"title\": \"腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究\", \"author\": \"itwriter\", \"summary\": \"5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...\"},\n{\"url\": \"https://news.cnblogs.com/n/570407/\", \"title\": \"淘宝心选自营店试运营 满79元包邮/7天无理由退货\", \"author\": \"itwriter\", \"summary\": \"淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...\"},\n{\"url\": \"https://news.cnblogs.com/n/570406/\", \"title\": \"爱奇艺龚宇：后来者居上的六点思考\", \"author\": \"itwriter\", \"summary\": \"编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...\"},\n{\"url\": \"https://news.cnblogs.com/n/570405/\", \"title\": \"新加坡首家苹果零售店开业：人山人海！\", \"author\": \"itwriter\", \"summary\": \"5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...\"},\n{\"url\": \"https://news.cnblogs.com/n/570404/\", \"title\": \"阿里成为二股东后，联华线下3618家门店会怎么变\", \"author\": \"itwriter\", \"summary\": \"在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...\"},\n{\"url\": \"https://news.cnblogs.com/n/570403/\", \"title\": \"来看看Win32资源监视器在Fluent Design设计语言下的样子\", \"author\": \"itwriter\", \"summary\": \"近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...\"},\n{\"url\": \"https://news.cnblogs.com/n/570402/\", \"title\": \"Google Play Music新用户免费服务使用期限延至4个月\", \"author\": \"itwriter\", \"summary\": \"据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...\"}\n]\n```\n这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。\n\n\n\n\n    \n    ","source":"_posts/Spider/Scrapy-Install.md","raw":"---\ntitle: Scrapy之新手上路\ndate: 2017-05-28 22:38:56\nreward: true\ncategories:\n    - Spider\ntags:\n    - Scrapy\n    - Spider\n    - python\n---\n\n## 安装Scrapy\n\n我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目\n\n![img](http://static.xcoder.ren/public/images/crawler-most-stars.png)\n\nScrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。\n\nScrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。\n\n是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了\n\n这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]https://docs.scrapy.org/en/latest/intro/install.html）。\n\n<!--more-->\n\n* 安装python\n\n    执行``python -V``看看是否安装了2.7或3.3的python。\n\n    如果没有安装``brew install python``或者要升级python\n    ```\n    brew update; brew upgrade python\n    ```\n    不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧[Homebrew介绍](https://brew.sh/index_zh-cn.html)\n\n* 使用pip安装Scrapy\n\n    执行``pip --version``来确认你安装来pip\n    没有安装？从 https://pip.pypa.io/en/latest/installing.html 安装 pip\n    pip升级？``pip install --upgrade pip``\n    \n    好了，来安装Scrapy吧\n    ```\n    pip install Scrapy\n    ```\n    ![img](http://static.xcoder.ren/public/images/success-install-scrapy.png)\n    上面就说明安装成功了\n\n## 创建一个爬虫项目\n    \n通过scrapy --help我们可以看到scrapy的基本命令\n    \n![img](http://static.xcoder.ren/public/images/scrapy-help.png)\n\n```\nscrapy startproject project名称\n```\n创建一个项目可以看到它的目录结构\n\n![img](http://static.xcoder.ren/public/images/directory-struct.png)\n\n* scrapy.cfg: 配置文件\n* tutorial/: 该项目的python模块.\n* tutorial/items.py: 项目中的item文件.\n* tutorial/pipelines.py: 项目中的pipelines文件.\n* tutorial/settings.py: 项目的设置文件.\n* tutorial/spiders/: 放置spider代码的目录.\n\n## 创建Spider\n\n在tutorial/spiders中创建一个cnblogs_spider.py如下：\n```\n# encoding=utf8\nimport scrapy\n# import json\n\n\nclass CnblogsSpider(scrapy.Spider):\n    # spider的唯一标示，在project中要唯一,spider名称\n    name = \"cnblogs\"\n\n    start_urls = [\n        'https://news.cnblogs.com/n/page/1/',\n        # 'https://news.cnblogs.com/n/page/2/',\n        # 'https://news.cnblogs.com/n/page/3/'\n    ]\n\n    # def start_requests(self):\n    #     urls = [\n    #         'https://news.cnblogs.com/n/page/1/',\n    #         'https://news.cnblogs.com/n/page/2/',\n    #         'https://news.cnblogs.com/n/page/3/'\n    #     ]\n    #     for url in urls:\n    #         yield scrapy.Request(url=url, callback=self.parse)\n\n    def parse(self, response):\n        # page = response.url.split('/')[-2]\n        # filename = 'cnblogs-%s.json' % page\n        # with open(filename, 'wb') as f:\n        #     data = []\n        #     for new in response.css('div#news_list div.content'):\n        #         new_content = {\n        #             'title': ''.join(new.css('h2.news_entry a::text').extract()),\n        #             'summary': ''.join(new.css('div.entry_summary::text').extract()[1].lstrip().rstrip()),\n        #             'author': ''.join(new.css('div.entry_footer a::text').extract()[0].strip()),\n        #             'url': 'https://news.cnblogs.com'+new.css('h2.news_entry a::attr(href)').extract_first()\n        #         }\n        #         data.append(new_content)\n        #\n        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+'\\r\\n', 'utf-8'))\n        # self.log('save file %s' % filename)\n        # f.close()\n        for new in response.css('div#news_list div.content'):\n            yield {\n                'title': ''.join(new.css('h2.news_entry a::text').extract()),\n                'summary': ''.join(new.css('div.entry_summary::text').extract()).lstrip().rstrip(),\n                'author': ''.join(new.css('div.entry_footer a::text').extract()[1]).strip(),\n                'url': 'https://news.cnblogs.com'+new.css('h2.news_entry a::attr(href)').extract_first()\n            }\n\n        next_page = response.css('div#pager a::attr(href)').extract()[-1]\n        if next_page is not None:\n            next_page = response.urljoin(next_page)\n            yield scrapy.Request(next_page, callback=self.parse)\n\n```\n\n## 运行Spider\n\n完成了一个简单的spider，如何运行它来输出我们需要的结果呢？\n在项目的根目录中执行如下的命令：\n\n```\nscrapy crawl spider名称 -o spider.json\n```\n\n例如``scrapy crawl cnblogs``其中cnblogs即为定义的spider的name\n\n\n最终输出一个完整的json数据\n![img](http://static.xcoder.ren/public/images/scrapy-spider-export-json.png)\n```\n[\n{\"url\": \"https://news.cnblogs.com/n/570434/\", \"title\": \"传软银欲成印度打车应用Ola控股股东\", \"author\": \"itwriter\", \"summary\": \"腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...\"},\n{\"url\": \"https://news.cnblogs.com/n/570431/\", \"title\": \"黄金不仅可以做首饰 还能变成抗击癌症的“子弹”\", \"author\": \"itwriter\", \"summary\": \"说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...\"},\n{\"url\": \"https://news.cnblogs.com/n/570430/\", \"title\": \"联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？\", \"author\": \"itwriter\", \"summary\": \"文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...\"},\n{\"url\": \"https://news.cnblogs.com/n/570429/\", \"title\": \"美国正式对尼康展开专利侵权调查：日本巨头面临禁售\", \"author\": \"itwriter\", \"summary\": \"今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...\"},\n{\"url\": \"https://news.cnblogs.com/n/570428/\", \"title\": \"高德诉滴滴不正当竞争：8起案件索赔7500万元\", \"author\": \"itwriter\", \"summary\": \"北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...\"},\n{\"url\": \"https://news.cnblogs.com/n/570427/\", \"title\": \"从网易严选毛巾事件，看互联网撕逼的12个暗黑法则\", \"author\": \"itwriter\", \"summary\": \"一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...\"},\n{\"url\": \"https://news.cnblogs.com/n/570426/\", \"title\": \"马云李彦宏数博会上\\\"隔空对战\\\" 马化腾来“劝架”了\", \"author\": \"itwriter\", \"summary\": \"近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...\"},\n{\"url\": \"https://news.cnblogs.com/n/570425/\", \"title\": \"小米转型里程碑！小米之家突破100家：端午一天开四家\", \"author\": \"itwriter\", \"summary\": \"曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...\"},\n{\"url\": \"https://news.cnblogs.com/n/570424/\", \"title\": \"看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩\", \"author\": \"itwriter\", \"summary\": \"在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...\"},\n{\"url\": \"https://news.cnblogs.com/n/570423/\", \"title\": \"知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP\", \"author\": \"itwriter\", \"summary\": \"投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...\"},\n{\"url\": \"https://news.cnblogs.com/n/570422/\", \"title\": \"万人围观！雷军回老家过端午：亲登龙舟擂鼓\", \"author\": \"itwriter\", \"summary\": \"端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...\"},\n{\"url\": \"https://news.cnblogs.com/n/570421/\", \"title\": \"运动App掌门人：我们不需要流量，只想做体育的服务行业\", \"author\": \"itwriter\", \"summary\": \"运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...\"},\n{\"url\": \"https://news.cnblogs.com/n/570420/\", \"title\": \"十年版iPhone X最新爆料：会二选一\", \"author\": \"itwriter\", \"summary\": \"今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...\"},\n{\"url\": \"https://news.cnblogs.com/n/570419/\", \"title\": \"马斯克的火箭7年共发射34次，成功率94%\", \"author\": \"itwriter\", \"summary\": \"Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...\"},\n{\"url\": \"https://news.cnblogs.com/n/570417/\", \"title\": \"亚马逊在纽约开了首家实体书店：全是四星以上评级的书\", \"author\": \"itwriter\", \"summary\": \"BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...\"},\n{\"url\": \"https://news.cnblogs.com/n/570416/\", \"title\": \"比较Google地图和苹果地图一年的变化\", \"author\": \"itwriter\", \"summary\": \"2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O'Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...\"},\n{\"url\": \"https://news.cnblogs.com/n/570415/\", \"title\": \"两周过去了，“想哭”勒索蠕虫近来可好？\", \"author\": \"itwriter\", \"summary\": \"距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...\"},\n{\"url\": \"https://news.cnblogs.com/n/570414/\", \"title\": \"暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉\", \"author\": \"itwriter\", \"summary\": \"暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...\"},\n{\"url\": \"https://news.cnblogs.com/n/570413/\", \"title\": \"野心不小：从纸盒到Daydream 谷歌渴望VR独立运行\", \"author\": \"itwriter\", \"summary\": \"5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...\"},\n{\"url\": \"https://news.cnblogs.com/n/570412/\", \"title\": \"北斗/GPS导航定位基准服务启用！精度/信号大提升\", \"author\": \"itwriter\", \"summary\": \"卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...\"},\n{\"url\": \"https://news.cnblogs.com/n/570411/\", \"title\": \"农村淘宝APP正式停用：并入手机淘宝\", \"author\": \"itwriter\", \"summary\": \"农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...\"},\n{\"url\": \"https://news.cnblogs.com/n/570410/\", \"title\": \"苹果地图更新 可显示Apple Park 3D模型\", \"author\": \"itwriter\", \"summary\": \"近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...\"},\n{\"url\": \"https://news.cnblogs.com/n/570409/\", \"title\": \"亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了\", \"author\": \"itwriter\", \"summary\": \"根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...\"},\n{\"url\": \"https://news.cnblogs.com/n/570408/\", \"title\": \"腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究\", \"author\": \"itwriter\", \"summary\": \"5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...\"},\n{\"url\": \"https://news.cnblogs.com/n/570407/\", \"title\": \"淘宝心选自营店试运营 满79元包邮/7天无理由退货\", \"author\": \"itwriter\", \"summary\": \"淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...\"},\n{\"url\": \"https://news.cnblogs.com/n/570406/\", \"title\": \"爱奇艺龚宇：后来者居上的六点思考\", \"author\": \"itwriter\", \"summary\": \"编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...\"},\n{\"url\": \"https://news.cnblogs.com/n/570405/\", \"title\": \"新加坡首家苹果零售店开业：人山人海！\", \"author\": \"itwriter\", \"summary\": \"5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...\"},\n{\"url\": \"https://news.cnblogs.com/n/570404/\", \"title\": \"阿里成为二股东后，联华线下3618家门店会怎么变\", \"author\": \"itwriter\", \"summary\": \"在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...\"},\n{\"url\": \"https://news.cnblogs.com/n/570403/\", \"title\": \"来看看Win32资源监视器在Fluent Design设计语言下的样子\", \"author\": \"itwriter\", \"summary\": \"近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...\"},\n{\"url\": \"https://news.cnblogs.com/n/570402/\", \"title\": \"Google Play Music新用户免费服务使用期限延至4个月\", \"author\": \"itwriter\", \"summary\": \"据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...\"}\n]\n```\n这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。\n\n\n\n\n    \n    ","slug":"Spider/Scrapy-Install","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegqs00049vvu09s4yp94","content":"<h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n<p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n<p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n<p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n<p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n<p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>\n<a id=\"more\"></a>\n<ul>\n<li><p>安装python</p>\n<p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n<p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n<p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n</li>\n<li><p>使用pip安装Scrapy</p>\n<p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n<p>  好了，来安装Scrapy吧</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n<p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n</li>\n</ul>\n<h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n<p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n<p>创建一个项目可以看到它的目录结构</p>\n<p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n<ul>\n<li>scrapy.cfg: 配置文件</li>\n<li>tutorial/: 该项目的python模块.</li>\n<li>tutorial/items.py: 项目中的item文件.</li>\n<li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n<li>tutorial/settings.py: 项目的设置文件.</li>\n<li>tutorial/spiders/: 放置spider代码的目录.</li>\n</ul>\n<h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n<h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n<p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n<p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"安装Scrapy\"><a href=\"#安装Scrapy\" class=\"headerlink\" title=\"安装Scrapy\"></a>安装Scrapy</h2><p>我们使用crawler在github上搜索 most stars我们会看到Scrapy这个热门的开源项目</p>\n<p><img src=\"http://static.xcoder.ren/public/images/crawler-most-stars.png\" alt=\"img\"></p>\n<p>Scrapy，Python开发的一个快速,高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>\n<p>Scrapy吸引人的地方在于它是一个框架，任何人都可以根据需求方便的修改。它也提供了多种类型爬虫的基类，如BaseSpider、sitemap爬虫等，最新版本又提供了web2.0爬虫的支持。</p>\n<p>是不是迫不及待想体验一下强大的Scrapy呢？几个简单的步骤我们就可以开始用了</p>\n<p>这些基础组件的安装，网络上都有很详细的安装过程，这里只是简单介绍，且针对macOs（想详细了解／其他系统？[scrapy-install]<a href=\"https://docs.scrapy.org/en/latest/intro/install.html）。\" target=\"_blank\" rel=\"external\">https://docs.scrapy.org/en/latest/intro/install.html）。</a></p>","more":"<ul>\n<li><p>安装python</p>\n<p>  执行<code>python -V</code>看看是否安装了2.7或3.3的python。</p>\n<p>  如果没有安装<code>brew install python</code>或者要升级python</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew update; brew upgrade python</div></pre></td></tr></table></figure>\n<p>  不知道brew？难道你还没有用macOS的强大软件包管理器？赶紧来一套吧<a href=\"https://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew介绍</a></p>\n</li>\n<li><p>使用pip安装Scrapy</p>\n<p>  执行<code>pip --version</code>来确认你安装来pip<br>  没有安装？从 <a href=\"https://pip.pypa.io/en/latest/installing.html\" target=\"_blank\" rel=\"external\">https://pip.pypa.io/en/latest/installing.html</a> 安装 pip<br>  pip升级？<code>pip install --upgrade pip</code></p>\n<p>  好了，来安装Scrapy吧</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">pip install Scrapy</div></pre></td></tr></table></figure>\n<p>  <img src=\"http://static.xcoder.ren/public/images/success-install-scrapy.png\" alt=\"img\"><br>  上面就说明安装成功了</p>\n</li>\n</ul>\n<h2 id=\"创建一个爬虫项目\"><a href=\"#创建一个爬虫项目\" class=\"headerlink\" title=\"创建一个爬虫项目\"></a>创建一个爬虫项目</h2><p>通过scrapy –help我们可以看到scrapy的基本命令</p>\n<p><img src=\"http://static.xcoder.ren/public/images/scrapy-help.png\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy startproject project名称</div></pre></td></tr></table></figure>\n<p>创建一个项目可以看到它的目录结构</p>\n<p><img src=\"http://static.xcoder.ren/public/images/directory-struct.png\" alt=\"img\"></p>\n<ul>\n<li>scrapy.cfg: 配置文件</li>\n<li>tutorial/: 该项目的python模块.</li>\n<li>tutorial/items.py: 项目中的item文件.</li>\n<li>tutorial/pipelines.py: 项目中的pipelines文件.</li>\n<li>tutorial/settings.py: 项目的设置文件.</li>\n<li>tutorial/spiders/: 放置spider代码的目录.</li>\n</ul>\n<h2 id=\"创建Spider\"><a href=\"#创建Spider\" class=\"headerlink\" title=\"创建Spider\"></a>创建Spider</h2><p>在tutorial/spiders中创建一个cnblogs_spider.py如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"># encoding=utf8</div><div class=\"line\">import scrapy</div><div class=\"line\"># import json</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">class CnblogsSpider(scrapy.Spider):</div><div class=\"line\">    # spider的唯一标示，在project中要唯一,spider名称</div><div class=\"line\">    name = &quot;cnblogs&quot;</div><div class=\"line\"></div><div class=\"line\">    start_urls = [</div><div class=\"line\">        &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">        # &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    ]</div><div class=\"line\"></div><div class=\"line\">    # def start_requests(self):</div><div class=\"line\">    #     urls = [</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/1/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/2/&apos;,</div><div class=\"line\">    #         &apos;https://news.cnblogs.com/n/page/3/&apos;</div><div class=\"line\">    #     ]</div><div class=\"line\">    #     for url in urls:</div><div class=\"line\">    #         yield scrapy.Request(url=url, callback=self.parse)</div><div class=\"line\"></div><div class=\"line\">    def parse(self, response):</div><div class=\"line\">        # page = response.url.split(&apos;/&apos;)[-2]</div><div class=\"line\">        # filename = &apos;cnblogs-%s.json&apos; % page</div><div class=\"line\">        # with open(filename, &apos;wb&apos;) as f:</div><div class=\"line\">        #     data = []</div><div class=\"line\">        #     for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">        #         new_content = &#123;</div><div class=\"line\">        #             &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">        #             &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()[1].lstrip().rstrip()),</div><div class=\"line\">        #             &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[0].strip()),</div><div class=\"line\">        #             &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">        #         &#125;</div><div class=\"line\">        #         data.append(new_content)</div><div class=\"line\">        #</div><div class=\"line\">        #     f.write(unicode.encode(json.dumps(data, ensure_ascii=False, sort_keys=True, indent=4)+&apos;\\r\\n&apos;, &apos;utf-8&apos;))</div><div class=\"line\">        # self.log(&apos;save file %s&apos; % filename)</div><div class=\"line\">        # f.close()</div><div class=\"line\">        for new in response.css(&apos;div#news_list div.content&apos;):</div><div class=\"line\">            yield &#123;</div><div class=\"line\">                &apos;title&apos;: &apos;&apos;.join(new.css(&apos;h2.news_entry a::text&apos;).extract()),</div><div class=\"line\">                &apos;summary&apos;: &apos;&apos;.join(new.css(&apos;div.entry_summary::text&apos;).extract()).lstrip().rstrip(),</div><div class=\"line\">                &apos;author&apos;: &apos;&apos;.join(new.css(&apos;div.entry_footer a::text&apos;).extract()[1]).strip(),</div><div class=\"line\">                &apos;url&apos;: &apos;https://news.cnblogs.com&apos;+new.css(&apos;h2.news_entry a::attr(href)&apos;).extract_first()</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        next_page = response.css(&apos;div#pager a::attr(href)&apos;).extract()[-1]</div><div class=\"line\">        if next_page is not None:</div><div class=\"line\">            next_page = response.urljoin(next_page)</div><div class=\"line\">            yield scrapy.Request(next_page, callback=self.parse)</div></pre></td></tr></table></figure></p>\n<h2 id=\"运行Spider\"><a href=\"#运行Spider\" class=\"headerlink\" title=\"运行Spider\"></a>运行Spider</h2><p>完成了一个简单的spider，如何运行它来输出我们需要的结果呢？<br>在项目的根目录中执行如下的命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scrapy crawl spider名称 -o spider.json</div></pre></td></tr></table></figure>\n<p>例如<code>scrapy crawl cnblogs</code>其中cnblogs即为定义的spider的name</p>\n<p>最终输出一个完整的json数据<br><img src=\"http://static.xcoder.ren/public/images/scrapy-spider-export-json.png\" alt=\"img\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570434/&quot;, &quot;title&quot;: &quot;传软银欲成印度打车应用Ola控股股东&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;腾讯科技讯，据外电报道，软银目前正在巩固所有的印度投资。有消息称，继操刀推动其投资的印度第三大电商 Snapdeal 与该国第一大电商 Flipkart 进行合并之后，软银当前又计划通过交易买下该国乘车分享应用 Ola 大股东老虎环球基金（Tiger Global）所持的股份，欲成为 Ola...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570431/&quot;, &quot;title&quot;: &quot;黄金不仅可以做首饰 还能变成抗击癌症的“子弹”&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;说到黄金，大家可能会第一时间想到那些昂贵的黄金饰品，事实上黄金因其性质稳定，也多被用于制作一些医疗器具，比如心血管支架、假牙等等，那么黄金在医疗领域的应用又是否能更进一步呢，答案当然是肯定的，最近就有科学家发现黄金可以用来更有效地对抗癌症。通常来说，治疗癌症多为切除肿瘤之后进行放疗或...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570430/&quot;, &quot;title&quot;: &quot;联通与腾讯阿里小米合作的流量卡如雨后春笋，然而有用吗？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;文 / 宁宇，作者微信公众号：尚儒客栈（CMCC-ningyu）这段时间，中国联通的各种定制卡如雨后春笋般呈现在各个 APP 里。在我手机里看到的营销弹窗，包括与腾讯合作的大王卡、小王卡；与阿里巴巴合作的钉钉卡、蚂蚁宝卡；与百度合作的神卡（分大神卡、小神卡、女神卡...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570429/&quot;, &quot;title&quot;: &quot;美国正式对尼康展开专利侵权调查：日本巨头面临禁售&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年是日本相机企业尼康诞生的第 100 周年，但 100 岁的尼康也如其年龄一般“夕阳西下”，不仅 2016 年业绩出现大幅跳水，还面临被美国禁售的危险。据路透社报道，由于蔡司公司和 ASML 公司同样对尼康启动了法律程序，美国国际贸易委员会目前已经正式受理并...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570428/&quot;, &quot;title&quot;: &quot;高德诉滴滴不正当竞争：8起案件索赔7500万元&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;北京晨报讯（记者|颜斐）因认为北京滴滴无限科技发展有限公司、北京小桔科技有限公司虚假宣传，并伙同中智项目外包服务有限公司及公司原高级经理胡先生，拉拢公司掌握核心商业秘密的 6 名员工为滴滴公司、小桔公司提供服务，侵犯商业秘密，构成不正当竞争，高德软件有限公司、高德信息技术有限公司提起 8 起...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570427/&quot;, &quot;title&quot;: &quot;从网易严选毛巾事件，看互联网撕逼的12个暗黑法则&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;一、撕逼是未来常态“丁磊，能给创业者一条活路吗？”“我有一个创业者的故事，你想听吗？”“你说我是说谎者，我只说些事实。”“来看看，撕逼的套路与逻辑！”“...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570426/&quot;, &quot;title&quot;: &quot;马云李彦宏数博会上\\&quot;隔空对战\\&quot; 马化腾来“劝架”了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日举行的贵阳数博会，BAT 三家第一次在同一届数博会到齐。昨日，马云和李彦宏隔空对战更是成为大会看点，究其根源是对“人工智能”的看法不同，一个谈了“人工智能”，另一个谈的是“机器智能”。今天马化腾在闭幕...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570425/&quot;, &quot;title&quot;: &quot;小米转型里程碑！小米之家突破100家：端午一天开四家&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;曾经的“互联网手机之王”小米越来越重视线下市场，小米之家在全国遍地开花，今天端午佳节之时终于突破了 100 家，而目标是未来三年开到 1000 家。5 月 27 日，小米一口气开张了四家小米之家，分别是郑州大商新玛特国贸店(郑州的第三家)、广州西城都荟店、佛山顺德...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570424/&quot;, &quot;title&quot;: &quot;看到AlphaGo难免想起“深蓝”？可IBM当年前赢得并不光彩&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在关注“柯洁对战 AlphaGo”时，很多人或许都会想到 20 年前的“卡斯帕罗夫对战深蓝”，当时的那场世纪之战似乎比现在更加轰动，外媒撰文称，实际上深蓝之所以能够战胜卡斯帕罗夫，并非全凭技术，而是掺入了一些狡诈的伎俩。以下为 AI 世...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570423/&quot;, &quot;title&quot;: &quot;知道苹果有多值钱吗？市值超瑞士、荷兰等国GDP&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;投资银行美银/美林日前发布一份名为《占领硅谷》的报告。在该报告中，美银美林指出苹果和谷歌母公司 Alphabet 的市值，已超出除洛杉矶和纽约之外的所有美国城市的国内生产总值（GDP），且苹果与洛杉矶的差距已不足4%。虽然这些数据并不意味着苹果和 Alphabet 如今就要比绝大多数...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570422/&quot;, &quot;title&quot;: &quot;万人围观！雷军回老家过端午：亲登龙舟擂鼓&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;端午假期第一天，想必不少朋友已经回家或者在回家、游玩的路途中。昨天下午，小米董事长雷军也分享了动态，原来，他来到湖北仙桃老家，在这里庆祝传统端午佳节。雷军说，仙桃的风俗是赛龙舟、吃粽子，他此次也登船，泛舟莲花池，轻敲龙首鼓。按照仙桃小米之家的说法，雷军到访的是仙桃...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570421/&quot;, &quot;title&quot;: &quot;运动App掌门人：我们不需要流量，只想做体育的服务行业&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;运动 APP 的社交功能，使得用户可以分享运动排名，结识跑友，加入圈子。当下，跑者对于跑步类 APP 的依赖不容小觑。回顾历程，2012 年国内出现了首款运动 APP，随后运动软件行业在 2014 年经历了资本热潮，又在 2016 年度过了资本寒冬。但是市场就摆在那里，201...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570420/&quot;, &quot;title&quot;: &quot;十年版iPhone X最新爆料：会二选一&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;今年秋季，苹果将推出一款十年版手机（有媒体将其称之为 iPhone X 或是 iPhone 8），纪念第一部 iPhone 推出十周年。这款手机相较以往的 iPhone，将有比较大的升级内容（许多升级内容早已出现在其他品牌的手机中）。十年版手机的信息处于动态更新当中，日前外媒总结披露了该手机...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570419/&quot;, &quot;title&quot;: &quot;马斯克的火箭7年共发射34次，成功率94%&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;Recode 中文站 5 月 29 日报道由埃隆·马斯克（Elon Musk）统帅并得到美国国家航空航天局（NASA）支持的星际间旅行公司 SpaceX 在过去的 7 年中共发射了 34 次猎鹰 9 号火箭，绝大数获得了成功，只有两次完全失败的经历，其中一次发生在测试的...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570417/&quot;, &quot;title&quot;: &quot;亚马逊在纽约开了首家实体书店：全是四星以上评级的书&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;BI 中文站 5 月 28 日报道亚马逊在美国纽约市的首家实体店周四正式开张了，这是亚马逊在美国的第七家实体店。亚马逊的这家实体店位于纽约市曼哈顿的哥伦布圆环（Columbus Circle）内。店内主要销售书籍和一些电子产品（如亚马逊智能音箱 Echo）。亚马逊实体...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570416/&quot;, &quot;title&quot;: &quot;比较Google地图和苹果地图一年的变化&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;2012 年，苹果开始用自家地图应用取代 Google 地图，但苹果的早期地图因为数据存在大量错误而饱受用户批评，CEO 库克甚至为此公开道歉。五年之后，苹果地图相比 Google 地图又如何呢？Justin O&apos;Beirne 写了一个脚本每月在两个地图上截取相同地点的图像，仔细分析...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570415/&quot;, &quot;title&quot;: &quot;两周过去了，“想哭”勒索蠕虫近来可好？&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;距离“想哭”勒索病毒爆发已经过去了两周时间，然而永恒之蓝勒索蠕虫并没有就此停下脚步，此次基于 MS17-010 多个漏洞也极有可能会一直存活下去，持续制造麻烦。以下为 360 威胁情报中心提供的关于“永恒之蓝”勒索蠕虫及值得警惕的趋势。36...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570414/&quot;, &quot;title&quot;: &quot;暂缓IPO后，永安行回应单车专利侵权案：已委托律师应诉&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;暂缓 IPO 后，永安行加快了处理“单车专利纠纷案”的进度。5 月 27 日下午，永安行在其官方网站发布声明，坚持认为永安行的技术方案与顾泰来先生的专利权要求保护的范围不同，不构成侵权。并表示已经委托相关律师事务所全权处理并准备应诉事宜。声明中还继续谈到，永安...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570413/&quot;, &quot;title&quot;: &quot;野心不小：从纸盒到Daydream 谷歌渴望VR独立运行&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日消息，据 CNET 报道，3 年前，谷歌首次发布了 Cardboard，即不到 20 美元的 DIY 套件，几乎可以将任何手机变成虚拟现实（VR）浏览器。它是如此的简单，如此的便宜，以至于《纽约时报》最终决定向订阅印双版报纸的用户免费赠送。但是作为应对需要与高端电脑硬件绑定的 O...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570412/&quot;, &quot;title&quot;: &quot;北斗/GPS导航定位基准服务启用！精度/信号大提升&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;卫星定位不准确、信号弱的情况时有发生，当然相比初期的导航已经有了很好的表现，但这都是凭借更多卫星数量实现的。现在全国卫星导航定位基准服务系统正式启用，意味着未来卫星定位将更加精准，更可靠快速。该系统是我国目前规模最大、覆盖范围最广的导航定位服务系统，能够兼容北斗、GPS、格洛...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570411/&quot;, &quot;title&quot;: &quot;农村淘宝APP正式停用：并入手机淘宝&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;农村淘宝是阿里巴巴集团的战略项目，为服务农民、创新农业，阿里计划在三至五年内投资 100 亿元，建立 1000 个县级服务中心和 10 万个村级服务站。同时，阿里还推出了配套的农村淘宝 APP。不过根据官方公告，从 6 月 1 日起，农村淘宝 APP 将会完全停用，随后并入手...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570410/&quot;, &quot;title&quot;: &quot;苹果地图更新 可显示Apple Park 3D模型&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日苹果对地图应用进行了更新，完善应用中与 Apple Park 园区相关的信息，这款应用现在可以显示 Apple Park 3D 模型、人行道以及园区中的其他 POI。如上图，苹果地图中已经有了非常详尽的 Apple Park 3D 建筑模型图，以及所有与园区里里外外相同的道路和人行道等，苹果...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570409/&quot;, &quot;title&quot;: &quot;亚马逊市值不断飙升 CEO贝索斯财富快赶上比尔·盖茨了&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;根据福布斯的消息，亚马逊公司估价不断创下历史新高，这也使得亚马逊公司 CEO 贝佐斯的净资产不断提升。截至周五股市收盘，贝佐斯净资产增长 28 亿美元至 847 亿美元，创下历史新高。同时他也成为了财富增长最快的亿万富翁，距离比尔盖茨的差距越来越近，只有 38 亿美元左右的差距了。\\r...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570408/&quot;, &quot;title&quot;: &quot;腾讯AI Lab副主任俞栋：语音识别领域四大前沿问题亟待研究&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 27 日，由机器之心主办、为期两天的全球机器智能峰会（GMIS 2017）在北京 898 创新空间顺利开幕。腾讯 AI Lab 副主任俞栋博士、「LSTM 之父」Jürgen Schmidhuber、加州大学伯克利分校人工智能系统中心创始人 Stuart Russe...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570407/&quot;, &quot;title&quot;: &quot;淘宝心选自营店试运营 满79元包邮/7天无理由退货&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;淘宝和京东是国内最大的两个电商平台一直以来各有各的特点，京东自营深深的吸引消费者，在全国主要城市下单都可以做到 24 小时内送货上门。而阿里旗下的淘宝以及天猫商城则货源品种丰富，可以随心所欲的买买买。但随着“自营”概念的深入人心，淘宝也采取了更灵活的方式，淘宝...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570406/&quot;, &quot;title&quot;: &quot;爱奇艺龚宇：后来者居上的六点思考&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;编者按：本文来自“IDG 资本”（ID：idg_capital），在 5 月 12 日主题为“IPO 之路”的「IDG 资本私享会」上，爱奇艺创始人&amp;CEO 龚宇分享了他创办爱奇艺以来的六点思考。其实当爱奇艺进入视频行业的时候，...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570405/&quot;, &quot;title&quot;: &quot;新加坡首家苹果零售店开业：人山人海！&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;5 月 28 日，国外媒体报道，经过近两年的期盼，苹果在新加坡的首个零售店周六正式向公众开放，这也是苹果在东南亚的第一家零售店。该苹果商店位于新加坡著名的旅游购物街乌节路（Orchard Road)，店里的 237 名员工在上午 10 点就开门迎接大批粉丝的光顾，并向那些早日抵达的人发放...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570404/&quot;, &quot;title&quot;: &quot;阿里成为二股东后，联华线下3618家门店会怎么变&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;在签订战略框架协议三个月多月后，阿里系与百联集团资本层面的合作终于落地。日前，阿里巴巴集团受让了易果生鲜持有的联华超市 18% 的内资股权，成为联华超市第二大股东，而联华超市的控股方正是百联集团。在阿里的大电商板块中，从此收购中，获益最多的板块，应该是天猫超市，3618 家门...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570403/&quot;, &quot;title&quot;: &quot;来看看Win32资源监视器在Fluent Design设计语言下的样子&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;近日，微软推出了全新语言 Fluent Design，对此，一位来自 Redditor 的网友决定来看看 Win32 资源监视器(Resource Monitor)在这套新语言下的样子。可以看到，使用了新设计语言的 Win32 Resouce Monitor 看起来非常精简，像 CPU、内存、网...&quot;&#125;,</div><div class=\"line\">&#123;&quot;url&quot;: &quot;https://news.cnblogs.com/n/570402/&quot;, &quot;title&quot;: &quot;Google Play Music新用户免费服务使用期限延至4个月&quot;, &quot;author&quot;: &quot;itwriter&quot;, &quot;summary&quot;: &quot;据外媒报道，日前，谷歌将面向 Google Play Music 新用户推出的免费服务使用期限延长到了 4 个月，该免费服务使用期限只有 3 个月。据悉，只要用户开始使用他们的谷歌账号绑定 Google Play Music 即可享受这一优惠，等到 4 个月后，用户可以决定取消服务或继续使用，后...&quot;&#125;</div><div class=\"line\">]</div></pre></td></tr></table></figure></p>\n<p>这只是一个简单的示例程序，如果需要按照一定抓取规则采集数据还需要进一步改造spider。</p>"},{"title":"(转)够了，不要一上来就把微服务说的神乎其神","date":"2017-06-07T12:20:10.000Z","reward":true,"_content":"\n以下为转载自<a href=\"https://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&mid=2659599312&idx=1&sn=841fce4ab76f09bb7c59c7c02f2732a6&chksm=8be996c2bc9e1fd40e9caee879422640917d5e35a1371524a5d45a4659620e565975d564972a&scene=0&key=cf0fa2bf8e1a08ac7c02a18cbb33c470417dfaebfe5bd9dc254f9ca830c613ccc63e58687d4c8e0bfd577f58cf227c34dde396fcb9c9ea59597c86433fc35ebe2ca34511e012ee01d36403516bf81431&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=NM6Qc5rt%2FjhApAPuIaVUZbKzWLoQv5hi%2F96Zrn3KI73X8MF3uAVDGSHY%2Fyc36QJY\" title=\"微信公众号:聊聊架构\">微信公众号:聊聊架构</a>的文章片段\n\n## 我们为微服务做好准备了吗？\n在讨论架构选型时，人们经常会忽略这个问题，但其他却是最重要的。高级技术人员在了解了开发人员或业务人员的抱怨或痛点之后，开始在网上找寻找解决方案，他们总是宣称能解决这些问题。但在这些信誓旦旦的观点背后，有很多需要注意的地方。微服务有利也有弊。如果你的企业足够成熟，并且具有一定的技术积累，那么采用微服务所面临的挑战会小很多，并且能够带来更多正面好处。那么怎样才算已经为微服务做好准备了呢？Martin Fowler 在多年前表达了他对微服务先决条件的看法，但是从我的经验来看，大多数成长型初创公司完全忽略了他的观点。Martin 的观点是一个很好的切入点，让我们来逐个说明。\n我敢说，大部分成长型初创公司几乎连一个先决条件都无法满足，更不用说满足所有的条件了。如果你的技术团队不具备快速配置、部署和监控能力，那么在迁移到微服务前必须先获得这些能力。接下来让我们更详细地讨论这些先决条件。\n* 快速配置\n如果你的开发团队里只有少数几个人可以配置新服务、虚拟环境或其它配套设施，那说明你们还没有为微服务做好准备。你的每个团队里都应该要有几个这样的人，他们具备了配置基础设施和部署服务的能力，而且不需要求助于外部。要注意，光是有一个 DevOps 团队并不意味着你在实施 DevOps，开发人员应该参与管理与应用程序相关的组件，包括基础设施。\n类似的，如果你没有灵活的基础设施（易于伸缩并且可以由团队里的不同人员来管理）来支撑当前的架构，那么在迁移到微服务前必须先解决这个问题。你当然可以在裸机上运行微服务，以更低的成本获得出众的性能，但在服务的运维和部署方面也必须具备灵活性。\n* 基本的监控\n* 快速部署\n如果你的单体系统没有一个很好的持续集成流程和部署系统，那么要集成和部署好你的微服务几乎是件不可能的事。想象一下这样的场景：10 个团队和 100 个服务，它们都需要进行手动测试和部署，然后再将这些工作与测试和部署一个单体所需要的工作进行对比。100 个服务会出现多少种问题？而单体系统呢？这些先决条件很好地说明了微服务的复杂性。\nPhil Calcado 在 Fowler 的先决条件清单里添加了一些东西，不过我认为它们更像是重要的扩展，而不是真正的先决条件。\n<!--more-->\n\n## 本该在文章最前面的内容\n* 关于微服务的优势和劣势已经有过太多的讨论，不过我仍然看到很多成长型初创公司对它进行着“盲目崇拜”。冒着“重复发明轮子”的风险（Martin Fowler 已经写过“Microservice Premium”的文章），我想把我的一些想法写下来，在必要的时候可以发给客户，也希望能够帮助人们避免犯下我之前见过的那些错误。在进行架构或技术选型时，将网络上找到的一些所谓的最佳实践文章作为指南，一旦做出了错误的决定，就要付出惨重的代价。如果能够帮助哪怕一个公司避免犯下这种错误，那么写这篇文章都是值得的。\n\n* 如今微服务是个热门技术，微服务架构一直以来都存在（面向服务架构也算是吧？），但对于我所见过的大部分公司来说，微服务不仅浪费了他们的时间，分散了他们的注意力，而且让事情变得更糟糕。\n\n* 这听起来似乎很奇怪，因为大部分关于微服务的文章都会肯定微服务的各种好处，比如解耦系统、更好的伸缩性、移除开发团队之间的依赖，等等。如果你的公司有 Uber、Airbnb、Facebook 或 Twitter 那样的规模，那么就不存在什么问题。我曾经帮助一些大型组织转型到微服务架构，包括搭建消息系统和采用一些能够提升伸缩性的技术。不过，对于成长型初创公司来说，很少需要这些技术和微服务。\n\n* Russ Miles 在他的《让微服务失效的八种方式》这篇文章中表达了他的首要观点，而在我看来，这些场景却到处可见。成长型初创公司总是想模仿那些大公司的最佳实践，用它们来弥补自身的不足。但是，最佳实践是要视情况而定的。有些东西对于 Facebook 来说是最佳实践，但对于只有不到百人的初创公司来说，它们就不一定也是最佳实践。\n\n* 如果你的公司比那些大公司小一些，你仍然能够在一定程度上从微服务架构中获得好处。但是，对于成长型初创公司来说，大规模地迁移到微服务是一种过错，而且对技术人来说是不公平的。\n\n* 切记不要混淆了解耦和分布式二者的含义。由模块和接口组成的单体可以帮助你达到解耦的目的，而且你也应该这么做。你没有必要把应用程序拆分成分布式的多个独立服务，在模块间定义清晰的接口也能达到解耦的目的。\n\n\n## 如果我们具备了这些先决条件呢？\n就算具备了这些条件，仍然需要注意微服务的负面因素，确保微服务能够为你的业务带来真正的帮助。事实上，很多技术人员对微服务中存在的分布式计算谬论视而不见，但为了确保能够成功，这些问题是必须要考虑到的。对于大部分成长型初创公司来说，基于各种原因，他们应该避免使用微服务。\n* 运营成本的增加\n快速部署这一先决条件已经涵盖了一部分成本，除此之外，对微服务进行容器化（可能使用 Docker）和使用容器编排系统（比如 Kubernetes）也需要耗费很多成本。Docker 和 Kubernetes 都是很优秀的技术，但是对于大部分成长型初创公司来说，它们都是一种负担。我见过初创公司使用 rsync 作为部署和编排工具，我也见过很多的初创公司陷入运维工具的复杂性泥潭里，他们因此浪费了很多时间，而这些时间本来可以用于为用户开发更多的功能。\n* 你的应用会被拖慢\n如果你的单体系统里包含了多个模块，并且在模块间定义了良好的 API，那么 API 之间的交互就几乎没有什么额外开销。但对于微服务来说就不是这么一回事了，因为它们一般运行在不同的机器上，它们之间需要通过网络进行交互。这样会在一定程度上拖慢整个系统。如果一个请求需要多个服务进行同步的交互，那么情况会变得更加糟糕。我曾经工作过的一个公司，他们需要调用将近 10 个服务才能处理完某些请求。处理请求的每一个步骤都需要额外的网络开销和延迟，但实际上，他们可以把这些服务放在单个软件包里，按照不同的模块来区分，或者把它们设计成异步的。这样可以为他们节省大量的基础设施成本。\n* 本地开发变得更加困难\n如果你有一个单体应用，后端只有一个数据库，那么在开发过程中，在本地运行这个应用是很容易的。如果你有 100 个服务，并使用了多个数据存储系统，而且它们之间互相依赖，那么本地开发就会变成一个噩梦。即使是 Docker 也无法把你从这种复杂性泥潭中拯救出来。虽然事情原本可以简单一些，不过仍然需要处理依赖问题。理论上说，微服务不存在这些问题，因为微服务被认为是相互独立的。不过，对于成长型初创公司来说，就不是这么一回事了。技术人员一般需要在本地运行所有（或者几乎所有）的服务才能进行新功能的开发和测试。这种复杂性是对资源的巨大浪费。\n* 难以伸缩\n对单体系统进行伸缩的最简单方式是在负载均衡器后面部署单体系统的多个实例。在流量增长的情况下，这是一种非常简单的伸缩方式，而且从运维角度来讲，它的复杂性是最低的。你的系统在编排平台（如 Elastic Beanstalk）上运行的时间越长越好，你和你的团队就可以集中精力构建客户需要的东西，而不是忙于解决部署管道问题。使用合适的 CI/CD 系统可以缓解这个问题，但在微服务生态系统里，事情要复杂得多，而且这些复杂性所造成的麻烦已经超过了它们所能带来的好处。\n\n## 本该优先考虑的方向\n&#8194;如果你刚好处在一个成长型初创公司里，需要对架构做一些调整，而微服务似乎不能解决你的问题，这个时候应该怎么办？\n&#8194;Fowler 提出的先决条件可以说是技术领域的能力成熟度模型，Fowler 在他的文章里对成熟度模型进行过介绍。如果这种成熟度模型对于公司来说是说得通的，那么我们可以按照 Fowler 提出的先决条件，并使用其他的一些中间步骤为向微服务迁移做好准备。下面的内容引用自 Fowler 的文章。\n```\n关键你要认识到，成熟度模型的评估结果并不代表你的当前水平，它们只是在告诉你需要做哪些工作才能朝着改进的目标前进。你当前的水平只是一种中间工作，用于确定下一步该获得什么样的技能。\n```\n&#8194;那么，我们该做出怎样的改进，以及如何达成这些目标？我们需要经过一些简单的步骤，其中前面两步就可以解决很多在向微服务迁移过程中会出现的问题，而且不会带来相关的复杂性。\n* 清理应用程序。确保应用程序具有良好的自动化测试套件，并使用了最新版本的软件包、框架和编程语言。\n* 重构应用程序，把它拆分成多个模块，为模块定义清晰的 API。不要让外部代码直接触及模块内部，所有的交互应该通过模块提供的 API 来进行。\n* 从应用程序中选择一个模块，并把它拆分成独立的应用程序，部署在相同的主机上。你可以从中获得一些好处，而不会带来太多的运维麻烦。不过，你仍然需要解决这两个应用之间的交互问题，虽然它们都部署在同一个主机上。不过你可以无视微服务架构里固有的网络分区问题和分布式系统的可用性问题。\n* 把独立出来的模块移动到不同的主机上。现在，你需要处理跨网络交互问题，不过这样可以让这两个系统之间的耦合降得更低。\n* 如果有可能，可以重构数据存储系统，让另一个主机上的模块负责自己的数据存储。\n&#8194;在我所见过的公司里，如果他们能够完成前面两个步骤就算万事大吉了。如果他们能够完成前面两个步骤，那么剩下的步骤一般不会像他们最初想象的那么重要了。如果你决定在这个过程的某个点上停下来，而系统仍然具有可维护性和比刚开始时更好的状态，那么就再好不过了。","source":"_posts/architecture/[转]够了，不要一上来就把微服务说的神乎其神.md","raw":"\n---\ntitle: (转)够了，不要一上来就把微服务说的神乎其神\ndate: 2017-06-07 20:20:10\nreward: true\ncategories:\n    - architecture\ntags:\n    - 架构设计\n    - SAAS\n    - 微服务\n---\n\n以下为转载自<a href=\"https://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&mid=2659599312&idx=1&sn=841fce4ab76f09bb7c59c7c02f2732a6&chksm=8be996c2bc9e1fd40e9caee879422640917d5e35a1371524a5d45a4659620e565975d564972a&scene=0&key=cf0fa2bf8e1a08ac7c02a18cbb33c470417dfaebfe5bd9dc254f9ca830c613ccc63e58687d4c8e0bfd577f58cf227c34dde396fcb9c9ea59597c86433fc35ebe2ca34511e012ee01d36403516bf81431&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=NM6Qc5rt%2FjhApAPuIaVUZbKzWLoQv5hi%2F96Zrn3KI73X8MF3uAVDGSHY%2Fyc36QJY\" title=\"微信公众号:聊聊架构\">微信公众号:聊聊架构</a>的文章片段\n\n## 我们为微服务做好准备了吗？\n在讨论架构选型时，人们经常会忽略这个问题，但其他却是最重要的。高级技术人员在了解了开发人员或业务人员的抱怨或痛点之后，开始在网上找寻找解决方案，他们总是宣称能解决这些问题。但在这些信誓旦旦的观点背后，有很多需要注意的地方。微服务有利也有弊。如果你的企业足够成熟，并且具有一定的技术积累，那么采用微服务所面临的挑战会小很多，并且能够带来更多正面好处。那么怎样才算已经为微服务做好准备了呢？Martin Fowler 在多年前表达了他对微服务先决条件的看法，但是从我的经验来看，大多数成长型初创公司完全忽略了他的观点。Martin 的观点是一个很好的切入点，让我们来逐个说明。\n我敢说，大部分成长型初创公司几乎连一个先决条件都无法满足，更不用说满足所有的条件了。如果你的技术团队不具备快速配置、部署和监控能力，那么在迁移到微服务前必须先获得这些能力。接下来让我们更详细地讨论这些先决条件。\n* 快速配置\n如果你的开发团队里只有少数几个人可以配置新服务、虚拟环境或其它配套设施，那说明你们还没有为微服务做好准备。你的每个团队里都应该要有几个这样的人，他们具备了配置基础设施和部署服务的能力，而且不需要求助于外部。要注意，光是有一个 DevOps 团队并不意味着你在实施 DevOps，开发人员应该参与管理与应用程序相关的组件，包括基础设施。\n类似的，如果你没有灵活的基础设施（易于伸缩并且可以由团队里的不同人员来管理）来支撑当前的架构，那么在迁移到微服务前必须先解决这个问题。你当然可以在裸机上运行微服务，以更低的成本获得出众的性能，但在服务的运维和部署方面也必须具备灵活性。\n* 基本的监控\n* 快速部署\n如果你的单体系统没有一个很好的持续集成流程和部署系统，那么要集成和部署好你的微服务几乎是件不可能的事。想象一下这样的场景：10 个团队和 100 个服务，它们都需要进行手动测试和部署，然后再将这些工作与测试和部署一个单体所需要的工作进行对比。100 个服务会出现多少种问题？而单体系统呢？这些先决条件很好地说明了微服务的复杂性。\nPhil Calcado 在 Fowler 的先决条件清单里添加了一些东西，不过我认为它们更像是重要的扩展，而不是真正的先决条件。\n<!--more-->\n\n## 本该在文章最前面的内容\n* 关于微服务的优势和劣势已经有过太多的讨论，不过我仍然看到很多成长型初创公司对它进行着“盲目崇拜”。冒着“重复发明轮子”的风险（Martin Fowler 已经写过“Microservice Premium”的文章），我想把我的一些想法写下来，在必要的时候可以发给客户，也希望能够帮助人们避免犯下我之前见过的那些错误。在进行架构或技术选型时，将网络上找到的一些所谓的最佳实践文章作为指南，一旦做出了错误的决定，就要付出惨重的代价。如果能够帮助哪怕一个公司避免犯下这种错误，那么写这篇文章都是值得的。\n\n* 如今微服务是个热门技术，微服务架构一直以来都存在（面向服务架构也算是吧？），但对于我所见过的大部分公司来说，微服务不仅浪费了他们的时间，分散了他们的注意力，而且让事情变得更糟糕。\n\n* 这听起来似乎很奇怪，因为大部分关于微服务的文章都会肯定微服务的各种好处，比如解耦系统、更好的伸缩性、移除开发团队之间的依赖，等等。如果你的公司有 Uber、Airbnb、Facebook 或 Twitter 那样的规模，那么就不存在什么问题。我曾经帮助一些大型组织转型到微服务架构，包括搭建消息系统和采用一些能够提升伸缩性的技术。不过，对于成长型初创公司来说，很少需要这些技术和微服务。\n\n* Russ Miles 在他的《让微服务失效的八种方式》这篇文章中表达了他的首要观点，而在我看来，这些场景却到处可见。成长型初创公司总是想模仿那些大公司的最佳实践，用它们来弥补自身的不足。但是，最佳实践是要视情况而定的。有些东西对于 Facebook 来说是最佳实践，但对于只有不到百人的初创公司来说，它们就不一定也是最佳实践。\n\n* 如果你的公司比那些大公司小一些，你仍然能够在一定程度上从微服务架构中获得好处。但是，对于成长型初创公司来说，大规模地迁移到微服务是一种过错，而且对技术人来说是不公平的。\n\n* 切记不要混淆了解耦和分布式二者的含义。由模块和接口组成的单体可以帮助你达到解耦的目的，而且你也应该这么做。你没有必要把应用程序拆分成分布式的多个独立服务，在模块间定义清晰的接口也能达到解耦的目的。\n\n\n## 如果我们具备了这些先决条件呢？\n就算具备了这些条件，仍然需要注意微服务的负面因素，确保微服务能够为你的业务带来真正的帮助。事实上，很多技术人员对微服务中存在的分布式计算谬论视而不见，但为了确保能够成功，这些问题是必须要考虑到的。对于大部分成长型初创公司来说，基于各种原因，他们应该避免使用微服务。\n* 运营成本的增加\n快速部署这一先决条件已经涵盖了一部分成本，除此之外，对微服务进行容器化（可能使用 Docker）和使用容器编排系统（比如 Kubernetes）也需要耗费很多成本。Docker 和 Kubernetes 都是很优秀的技术，但是对于大部分成长型初创公司来说，它们都是一种负担。我见过初创公司使用 rsync 作为部署和编排工具，我也见过很多的初创公司陷入运维工具的复杂性泥潭里，他们因此浪费了很多时间，而这些时间本来可以用于为用户开发更多的功能。\n* 你的应用会被拖慢\n如果你的单体系统里包含了多个模块，并且在模块间定义了良好的 API，那么 API 之间的交互就几乎没有什么额外开销。但对于微服务来说就不是这么一回事了，因为它们一般运行在不同的机器上，它们之间需要通过网络进行交互。这样会在一定程度上拖慢整个系统。如果一个请求需要多个服务进行同步的交互，那么情况会变得更加糟糕。我曾经工作过的一个公司，他们需要调用将近 10 个服务才能处理完某些请求。处理请求的每一个步骤都需要额外的网络开销和延迟，但实际上，他们可以把这些服务放在单个软件包里，按照不同的模块来区分，或者把它们设计成异步的。这样可以为他们节省大量的基础设施成本。\n* 本地开发变得更加困难\n如果你有一个单体应用，后端只有一个数据库，那么在开发过程中，在本地运行这个应用是很容易的。如果你有 100 个服务，并使用了多个数据存储系统，而且它们之间互相依赖，那么本地开发就会变成一个噩梦。即使是 Docker 也无法把你从这种复杂性泥潭中拯救出来。虽然事情原本可以简单一些，不过仍然需要处理依赖问题。理论上说，微服务不存在这些问题，因为微服务被认为是相互独立的。不过，对于成长型初创公司来说，就不是这么一回事了。技术人员一般需要在本地运行所有（或者几乎所有）的服务才能进行新功能的开发和测试。这种复杂性是对资源的巨大浪费。\n* 难以伸缩\n对单体系统进行伸缩的最简单方式是在负载均衡器后面部署单体系统的多个实例。在流量增长的情况下，这是一种非常简单的伸缩方式，而且从运维角度来讲，它的复杂性是最低的。你的系统在编排平台（如 Elastic Beanstalk）上运行的时间越长越好，你和你的团队就可以集中精力构建客户需要的东西，而不是忙于解决部署管道问题。使用合适的 CI/CD 系统可以缓解这个问题，但在微服务生态系统里，事情要复杂得多，而且这些复杂性所造成的麻烦已经超过了它们所能带来的好处。\n\n## 本该优先考虑的方向\n&#8194;如果你刚好处在一个成长型初创公司里，需要对架构做一些调整，而微服务似乎不能解决你的问题，这个时候应该怎么办？\n&#8194;Fowler 提出的先决条件可以说是技术领域的能力成熟度模型，Fowler 在他的文章里对成熟度模型进行过介绍。如果这种成熟度模型对于公司来说是说得通的，那么我们可以按照 Fowler 提出的先决条件，并使用其他的一些中间步骤为向微服务迁移做好准备。下面的内容引用自 Fowler 的文章。\n```\n关键你要认识到，成熟度模型的评估结果并不代表你的当前水平，它们只是在告诉你需要做哪些工作才能朝着改进的目标前进。你当前的水平只是一种中间工作，用于确定下一步该获得什么样的技能。\n```\n&#8194;那么，我们该做出怎样的改进，以及如何达成这些目标？我们需要经过一些简单的步骤，其中前面两步就可以解决很多在向微服务迁移过程中会出现的问题，而且不会带来相关的复杂性。\n* 清理应用程序。确保应用程序具有良好的自动化测试套件，并使用了最新版本的软件包、框架和编程语言。\n* 重构应用程序，把它拆分成多个模块，为模块定义清晰的 API。不要让外部代码直接触及模块内部，所有的交互应该通过模块提供的 API 来进行。\n* 从应用程序中选择一个模块，并把它拆分成独立的应用程序，部署在相同的主机上。你可以从中获得一些好处，而不会带来太多的运维麻烦。不过，你仍然需要解决这两个应用之间的交互问题，虽然它们都部署在同一个主机上。不过你可以无视微服务架构里固有的网络分区问题和分布式系统的可用性问题。\n* 把独立出来的模块移动到不同的主机上。现在，你需要处理跨网络交互问题，不过这样可以让这两个系统之间的耦合降得更低。\n* 如果有可能，可以重构数据存储系统，让另一个主机上的模块负责自己的数据存储。\n&#8194;在我所见过的公司里，如果他们能够完成前面两个步骤就算万事大吉了。如果他们能够完成前面两个步骤，那么剩下的步骤一般不会像他们最初想象的那么重要了。如果你决定在这个过程的某个点上停下来，而系统仍然具有可维护性和比刚开始时更好的状态，那么就再好不过了。","slug":"architecture/[转]够了，不要一上来就把微服务说的神乎其神","published":1,"updated":"2017-06-07T13:47:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegqw00059vvuznb8fh8p","content":"<p>以下为转载自<a href=\"https://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&mid=2659599312&idx=1&sn=841fce4ab76f09bb7c59c7c02f2732a6&chksm=8be996c2bc9e1fd40e9caee879422640917d5e35a1371524a5d45a4659620e565975d564972a&scene=0&key=cf0fa2bf8e1a08ac7c02a18cbb33c470417dfaebfe5bd9dc254f9ca830c613ccc63e58687d4c8e0bfd577f58cf227c34dde396fcb9c9ea59597c86433fc35ebe2ca34511e012ee01d36403516bf81431&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=NM6Qc5rt%2FjhApAPuIaVUZbKzWLoQv5hi%2F96Zrn3KI73X8MF3uAVDGSHY%2Fyc36QJY\" title=\"微信公众号:聊聊架构\" target=\"_blank\" rel=\"external\">微信公众号:聊聊架构</a>的文章片段</p>\n<h2 id=\"我们为微服务做好准备了吗？\"><a href=\"#我们为微服务做好准备了吗？\" class=\"headerlink\" title=\"我们为微服务做好准备了吗？\"></a>我们为微服务做好准备了吗？</h2><p>在讨论架构选型时，人们经常会忽略这个问题，但其他却是最重要的。高级技术人员在了解了开发人员或业务人员的抱怨或痛点之后，开始在网上找寻找解决方案，他们总是宣称能解决这些问题。但在这些信誓旦旦的观点背后，有很多需要注意的地方。微服务有利也有弊。如果你的企业足够成熟，并且具有一定的技术积累，那么采用微服务所面临的挑战会小很多，并且能够带来更多正面好处。那么怎样才算已经为微服务做好准备了呢？Martin Fowler 在多年前表达了他对微服务先决条件的看法，但是从我的经验来看，大多数成长型初创公司完全忽略了他的观点。Martin 的观点是一个很好的切入点，让我们来逐个说明。<br>我敢说，大部分成长型初创公司几乎连一个先决条件都无法满足，更不用说满足所有的条件了。如果你的技术团队不具备快速配置、部署和监控能力，那么在迁移到微服务前必须先获得这些能力。接下来让我们更详细地讨论这些先决条件。</p>\n<ul>\n<li>快速配置<br>如果你的开发团队里只有少数几个人可以配置新服务、虚拟环境或其它配套设施，那说明你们还没有为微服务做好准备。你的每个团队里都应该要有几个这样的人，他们具备了配置基础设施和部署服务的能力，而且不需要求助于外部。要注意，光是有一个 DevOps 团队并不意味着你在实施 DevOps，开发人员应该参与管理与应用程序相关的组件，包括基础设施。<br>类似的，如果你没有灵活的基础设施（易于伸缩并且可以由团队里的不同人员来管理）来支撑当前的架构，那么在迁移到微服务前必须先解决这个问题。你当然可以在裸机上运行微服务，以更低的成本获得出众的性能，但在服务的运维和部署方面也必须具备灵活性。</li>\n<li>基本的监控</li>\n<li>快速部署<br>如果你的单体系统没有一个很好的持续集成流程和部署系统，那么要集成和部署好你的微服务几乎是件不可能的事。想象一下这样的场景：10 个团队和 100 个服务，它们都需要进行手动测试和部署，然后再将这些工作与测试和部署一个单体所需要的工作进行对比。100 个服务会出现多少种问题？而单体系统呢？这些先决条件很好地说明了微服务的复杂性。<br>Phil Calcado 在 Fowler 的先决条件清单里添加了一些东西，不过我认为它们更像是重要的扩展，而不是真正的先决条件。<a id=\"more\"></a>\n</li>\n</ul>\n<h2 id=\"本该在文章最前面的内容\"><a href=\"#本该在文章最前面的内容\" class=\"headerlink\" title=\"本该在文章最前面的内容\"></a>本该在文章最前面的内容</h2><ul>\n<li><p>关于微服务的优势和劣势已经有过太多的讨论，不过我仍然看到很多成长型初创公司对它进行着“盲目崇拜”。冒着“重复发明轮子”的风险（Martin Fowler 已经写过“Microservice Premium”的文章），我想把我的一些想法写下来，在必要的时候可以发给客户，也希望能够帮助人们避免犯下我之前见过的那些错误。在进行架构或技术选型时，将网络上找到的一些所谓的最佳实践文章作为指南，一旦做出了错误的决定，就要付出惨重的代价。如果能够帮助哪怕一个公司避免犯下这种错误，那么写这篇文章都是值得的。</p>\n</li>\n<li><p>如今微服务是个热门技术，微服务架构一直以来都存在（面向服务架构也算是吧？），但对于我所见过的大部分公司来说，微服务不仅浪费了他们的时间，分散了他们的注意力，而且让事情变得更糟糕。</p>\n</li>\n<li><p>这听起来似乎很奇怪，因为大部分关于微服务的文章都会肯定微服务的各种好处，比如解耦系统、更好的伸缩性、移除开发团队之间的依赖，等等。如果你的公司有 Uber、Airbnb、Facebook 或 Twitter 那样的规模，那么就不存在什么问题。我曾经帮助一些大型组织转型到微服务架构，包括搭建消息系统和采用一些能够提升伸缩性的技术。不过，对于成长型初创公司来说，很少需要这些技术和微服务。</p>\n</li>\n<li><p>Russ Miles 在他的《让微服务失效的八种方式》这篇文章中表达了他的首要观点，而在我看来，这些场景却到处可见。成长型初创公司总是想模仿那些大公司的最佳实践，用它们来弥补自身的不足。但是，最佳实践是要视情况而定的。有些东西对于 Facebook 来说是最佳实践，但对于只有不到百人的初创公司来说，它们就不一定也是最佳实践。</p>\n</li>\n<li><p>如果你的公司比那些大公司小一些，你仍然能够在一定程度上从微服务架构中获得好处。但是，对于成长型初创公司来说，大规模地迁移到微服务是一种过错，而且对技术人来说是不公平的。</p>\n</li>\n<li><p>切记不要混淆了解耦和分布式二者的含义。由模块和接口组成的单体可以帮助你达到解耦的目的，而且你也应该这么做。你没有必要把应用程序拆分成分布式的多个独立服务，在模块间定义清晰的接口也能达到解耦的目的。</p>\n</li>\n</ul>\n<h2 id=\"如果我们具备了这些先决条件呢？\"><a href=\"#如果我们具备了这些先决条件呢？\" class=\"headerlink\" title=\"如果我们具备了这些先决条件呢？\"></a>如果我们具备了这些先决条件呢？</h2><p>就算具备了这些条件，仍然需要注意微服务的负面因素，确保微服务能够为你的业务带来真正的帮助。事实上，很多技术人员对微服务中存在的分布式计算谬论视而不见，但为了确保能够成功，这些问题是必须要考虑到的。对于大部分成长型初创公司来说，基于各种原因，他们应该避免使用微服务。</p>\n<ul>\n<li>运营成本的增加<br>快速部署这一先决条件已经涵盖了一部分成本，除此之外，对微服务进行容器化（可能使用 Docker）和使用容器编排系统（比如 Kubernetes）也需要耗费很多成本。Docker 和 Kubernetes 都是很优秀的技术，但是对于大部分成长型初创公司来说，它们都是一种负担。我见过初创公司使用 rsync 作为部署和编排工具，我也见过很多的初创公司陷入运维工具的复杂性泥潭里，他们因此浪费了很多时间，而这些时间本来可以用于为用户开发更多的功能。</li>\n<li>你的应用会被拖慢<br>如果你的单体系统里包含了多个模块，并且在模块间定义了良好的 API，那么 API 之间的交互就几乎没有什么额外开销。但对于微服务来说就不是这么一回事了，因为它们一般运行在不同的机器上，它们之间需要通过网络进行交互。这样会在一定程度上拖慢整个系统。如果一个请求需要多个服务进行同步的交互，那么情况会变得更加糟糕。我曾经工作过的一个公司，他们需要调用将近 10 个服务才能处理完某些请求。处理请求的每一个步骤都需要额外的网络开销和延迟，但实际上，他们可以把这些服务放在单个软件包里，按照不同的模块来区分，或者把它们设计成异步的。这样可以为他们节省大量的基础设施成本。</li>\n<li>本地开发变得更加困难<br>如果你有一个单体应用，后端只有一个数据库，那么在开发过程中，在本地运行这个应用是很容易的。如果你有 100 个服务，并使用了多个数据存储系统，而且它们之间互相依赖，那么本地开发就会变成一个噩梦。即使是 Docker 也无法把你从这种复杂性泥潭中拯救出来。虽然事情原本可以简单一些，不过仍然需要处理依赖问题。理论上说，微服务不存在这些问题，因为微服务被认为是相互独立的。不过，对于成长型初创公司来说，就不是这么一回事了。技术人员一般需要在本地运行所有（或者几乎所有）的服务才能进行新功能的开发和测试。这种复杂性是对资源的巨大浪费。</li>\n<li>难以伸缩<br>对单体系统进行伸缩的最简单方式是在负载均衡器后面部署单体系统的多个实例。在流量增长的情况下，这是一种非常简单的伸缩方式，而且从运维角度来讲，它的复杂性是最低的。你的系统在编排平台（如 Elastic Beanstalk）上运行的时间越长越好，你和你的团队就可以集中精力构建客户需要的东西，而不是忙于解决部署管道问题。使用合适的 CI/CD 系统可以缓解这个问题，但在微服务生态系统里，事情要复杂得多，而且这些复杂性所造成的麻烦已经超过了它们所能带来的好处。</li>\n</ul>\n<h2 id=\"本该优先考虑的方向\"><a href=\"#本该优先考虑的方向\" class=\"headerlink\" title=\"本该优先考虑的方向\"></a>本该优先考虑的方向</h2><p>&#8194;如果你刚好处在一个成长型初创公司里，需要对架构做一些调整，而微服务似乎不能解决你的问题，这个时候应该怎么办？<br>&#8194;Fowler 提出的先决条件可以说是技术领域的能力成熟度模型，Fowler 在他的文章里对成熟度模型进行过介绍。如果这种成熟度模型对于公司来说是说得通的，那么我们可以按照 Fowler 提出的先决条件，并使用其他的一些中间步骤为向微服务迁移做好准备。下面的内容引用自 Fowler 的文章。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">关键你要认识到，成熟度模型的评估结果并不代表你的当前水平，它们只是在告诉你需要做哪些工作才能朝着改进的目标前进。你当前的水平只是一种中间工作，用于确定下一步该获得什么样的技能。</div></pre></td></tr></table></figure></p>\n<p>&#8194;那么，我们该做出怎样的改进，以及如何达成这些目标？我们需要经过一些简单的步骤，其中前面两步就可以解决很多在向微服务迁移过程中会出现的问题，而且不会带来相关的复杂性。</p>\n<ul>\n<li>清理应用程序。确保应用程序具有良好的自动化测试套件，并使用了最新版本的软件包、框架和编程语言。</li>\n<li>重构应用程序，把它拆分成多个模块，为模块定义清晰的 API。不要让外部代码直接触及模块内部，所有的交互应该通过模块提供的 API 来进行。</li>\n<li>从应用程序中选择一个模块，并把它拆分成独立的应用程序，部署在相同的主机上。你可以从中获得一些好处，而不会带来太多的运维麻烦。不过，你仍然需要解决这两个应用之间的交互问题，虽然它们都部署在同一个主机上。不过你可以无视微服务架构里固有的网络分区问题和分布式系统的可用性问题。</li>\n<li>把独立出来的模块移动到不同的主机上。现在，你需要处理跨网络交互问题，不过这样可以让这两个系统之间的耦合降得更低。</li>\n<li>如果有可能，可以重构数据存储系统，让另一个主机上的模块负责自己的数据存储。<br>&#8194;在我所见过的公司里，如果他们能够完成前面两个步骤就算万事大吉了。如果他们能够完成前面两个步骤，那么剩下的步骤一般不会像他们最初想象的那么重要了。如果你决定在这个过程的某个点上停下来，而系统仍然具有可维护性和比刚开始时更好的状态，那么就再好不过了。</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>以下为转载自<a href=\"https://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&mid=2659599312&idx=1&sn=841fce4ab76f09bb7c59c7c02f2732a6&chksm=8be996c2bc9e1fd40e9caee879422640917d5e35a1371524a5d45a4659620e565975d564972a&scene=0&key=cf0fa2bf8e1a08ac7c02a18cbb33c470417dfaebfe5bd9dc254f9ca830c613ccc63e58687d4c8e0bfd577f58cf227c34dde396fcb9c9ea59597c86433fc35ebe2ca34511e012ee01d36403516bf81431&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=NM6Qc5rt%2FjhApAPuIaVUZbKzWLoQv5hi%2F96Zrn3KI73X8MF3uAVDGSHY%2Fyc36QJY\" title=\"微信公众号:聊聊架构\" target=\"_blank\" rel=\"external\">微信公众号:聊聊架构</a>的文章片段</p>\n<h2 id=\"我们为微服务做好准备了吗？\"><a href=\"#我们为微服务做好准备了吗？\" class=\"headerlink\" title=\"我们为微服务做好准备了吗？\"></a>我们为微服务做好准备了吗？</h2><p>在讨论架构选型时，人们经常会忽略这个问题，但其他却是最重要的。高级技术人员在了解了开发人员或业务人员的抱怨或痛点之后，开始在网上找寻找解决方案，他们总是宣称能解决这些问题。但在这些信誓旦旦的观点背后，有很多需要注意的地方。微服务有利也有弊。如果你的企业足够成熟，并且具有一定的技术积累，那么采用微服务所面临的挑战会小很多，并且能够带来更多正面好处。那么怎样才算已经为微服务做好准备了呢？Martin Fowler 在多年前表达了他对微服务先决条件的看法，但是从我的经验来看，大多数成长型初创公司完全忽略了他的观点。Martin 的观点是一个很好的切入点，让我们来逐个说明。<br>我敢说，大部分成长型初创公司几乎连一个先决条件都无法满足，更不用说满足所有的条件了。如果你的技术团队不具备快速配置、部署和监控能力，那么在迁移到微服务前必须先获得这些能力。接下来让我们更详细地讨论这些先决条件。</p>\n<ul>\n<li>快速配置<br>如果你的开发团队里只有少数几个人可以配置新服务、虚拟环境或其它配套设施，那说明你们还没有为微服务做好准备。你的每个团队里都应该要有几个这样的人，他们具备了配置基础设施和部署服务的能力，而且不需要求助于外部。要注意，光是有一个 DevOps 团队并不意味着你在实施 DevOps，开发人员应该参与管理与应用程序相关的组件，包括基础设施。<br>类似的，如果你没有灵活的基础设施（易于伸缩并且可以由团队里的不同人员来管理）来支撑当前的架构，那么在迁移到微服务前必须先解决这个问题。你当然可以在裸机上运行微服务，以更低的成本获得出众的性能，但在服务的运维和部署方面也必须具备灵活性。</li>\n<li>基本的监控</li>\n<li>快速部署<br>如果你的单体系统没有一个很好的持续集成流程和部署系统，那么要集成和部署好你的微服务几乎是件不可能的事。想象一下这样的场景：10 个团队和 100 个服务，它们都需要进行手动测试和部署，然后再将这些工作与测试和部署一个单体所需要的工作进行对比。100 个服务会出现多少种问题？而单体系统呢？这些先决条件很好地说明了微服务的复杂性。<br>Phil Calcado 在 Fowler 的先决条件清单里添加了一些东西，不过我认为它们更像是重要的扩展，而不是真正的先决条件。","more":"</li>\n</ul>\n<h2 id=\"本该在文章最前面的内容\"><a href=\"#本该在文章最前面的内容\" class=\"headerlink\" title=\"本该在文章最前面的内容\"></a>本该在文章最前面的内容</h2><ul>\n<li><p>关于微服务的优势和劣势已经有过太多的讨论，不过我仍然看到很多成长型初创公司对它进行着“盲目崇拜”。冒着“重复发明轮子”的风险（Martin Fowler 已经写过“Microservice Premium”的文章），我想把我的一些想法写下来，在必要的时候可以发给客户，也希望能够帮助人们避免犯下我之前见过的那些错误。在进行架构或技术选型时，将网络上找到的一些所谓的最佳实践文章作为指南，一旦做出了错误的决定，就要付出惨重的代价。如果能够帮助哪怕一个公司避免犯下这种错误，那么写这篇文章都是值得的。</p>\n</li>\n<li><p>如今微服务是个热门技术，微服务架构一直以来都存在（面向服务架构也算是吧？），但对于我所见过的大部分公司来说，微服务不仅浪费了他们的时间，分散了他们的注意力，而且让事情变得更糟糕。</p>\n</li>\n<li><p>这听起来似乎很奇怪，因为大部分关于微服务的文章都会肯定微服务的各种好处，比如解耦系统、更好的伸缩性、移除开发团队之间的依赖，等等。如果你的公司有 Uber、Airbnb、Facebook 或 Twitter 那样的规模，那么就不存在什么问题。我曾经帮助一些大型组织转型到微服务架构，包括搭建消息系统和采用一些能够提升伸缩性的技术。不过，对于成长型初创公司来说，很少需要这些技术和微服务。</p>\n</li>\n<li><p>Russ Miles 在他的《让微服务失效的八种方式》这篇文章中表达了他的首要观点，而在我看来，这些场景却到处可见。成长型初创公司总是想模仿那些大公司的最佳实践，用它们来弥补自身的不足。但是，最佳实践是要视情况而定的。有些东西对于 Facebook 来说是最佳实践，但对于只有不到百人的初创公司来说，它们就不一定也是最佳实践。</p>\n</li>\n<li><p>如果你的公司比那些大公司小一些，你仍然能够在一定程度上从微服务架构中获得好处。但是，对于成长型初创公司来说，大规模地迁移到微服务是一种过错，而且对技术人来说是不公平的。</p>\n</li>\n<li><p>切记不要混淆了解耦和分布式二者的含义。由模块和接口组成的单体可以帮助你达到解耦的目的，而且你也应该这么做。你没有必要把应用程序拆分成分布式的多个独立服务，在模块间定义清晰的接口也能达到解耦的目的。</p>\n</li>\n</ul>\n<h2 id=\"如果我们具备了这些先决条件呢？\"><a href=\"#如果我们具备了这些先决条件呢？\" class=\"headerlink\" title=\"如果我们具备了这些先决条件呢？\"></a>如果我们具备了这些先决条件呢？</h2><p>就算具备了这些条件，仍然需要注意微服务的负面因素，确保微服务能够为你的业务带来真正的帮助。事实上，很多技术人员对微服务中存在的分布式计算谬论视而不见，但为了确保能够成功，这些问题是必须要考虑到的。对于大部分成长型初创公司来说，基于各种原因，他们应该避免使用微服务。</p>\n<ul>\n<li>运营成本的增加<br>快速部署这一先决条件已经涵盖了一部分成本，除此之外，对微服务进行容器化（可能使用 Docker）和使用容器编排系统（比如 Kubernetes）也需要耗费很多成本。Docker 和 Kubernetes 都是很优秀的技术，但是对于大部分成长型初创公司来说，它们都是一种负担。我见过初创公司使用 rsync 作为部署和编排工具，我也见过很多的初创公司陷入运维工具的复杂性泥潭里，他们因此浪费了很多时间，而这些时间本来可以用于为用户开发更多的功能。</li>\n<li>你的应用会被拖慢<br>如果你的单体系统里包含了多个模块，并且在模块间定义了良好的 API，那么 API 之间的交互就几乎没有什么额外开销。但对于微服务来说就不是这么一回事了，因为它们一般运行在不同的机器上，它们之间需要通过网络进行交互。这样会在一定程度上拖慢整个系统。如果一个请求需要多个服务进行同步的交互，那么情况会变得更加糟糕。我曾经工作过的一个公司，他们需要调用将近 10 个服务才能处理完某些请求。处理请求的每一个步骤都需要额外的网络开销和延迟，但实际上，他们可以把这些服务放在单个软件包里，按照不同的模块来区分，或者把它们设计成异步的。这样可以为他们节省大量的基础设施成本。</li>\n<li>本地开发变得更加困难<br>如果你有一个单体应用，后端只有一个数据库，那么在开发过程中，在本地运行这个应用是很容易的。如果你有 100 个服务，并使用了多个数据存储系统，而且它们之间互相依赖，那么本地开发就会变成一个噩梦。即使是 Docker 也无法把你从这种复杂性泥潭中拯救出来。虽然事情原本可以简单一些，不过仍然需要处理依赖问题。理论上说，微服务不存在这些问题，因为微服务被认为是相互独立的。不过，对于成长型初创公司来说，就不是这么一回事了。技术人员一般需要在本地运行所有（或者几乎所有）的服务才能进行新功能的开发和测试。这种复杂性是对资源的巨大浪费。</li>\n<li>难以伸缩<br>对单体系统进行伸缩的最简单方式是在负载均衡器后面部署单体系统的多个实例。在流量增长的情况下，这是一种非常简单的伸缩方式，而且从运维角度来讲，它的复杂性是最低的。你的系统在编排平台（如 Elastic Beanstalk）上运行的时间越长越好，你和你的团队就可以集中精力构建客户需要的东西，而不是忙于解决部署管道问题。使用合适的 CI/CD 系统可以缓解这个问题，但在微服务生态系统里，事情要复杂得多，而且这些复杂性所造成的麻烦已经超过了它们所能带来的好处。</li>\n</ul>\n<h2 id=\"本该优先考虑的方向\"><a href=\"#本该优先考虑的方向\" class=\"headerlink\" title=\"本该优先考虑的方向\"></a>本该优先考虑的方向</h2><p>&#8194;如果你刚好处在一个成长型初创公司里，需要对架构做一些调整，而微服务似乎不能解决你的问题，这个时候应该怎么办？<br>&#8194;Fowler 提出的先决条件可以说是技术领域的能力成熟度模型，Fowler 在他的文章里对成熟度模型进行过介绍。如果这种成熟度模型对于公司来说是说得通的，那么我们可以按照 Fowler 提出的先决条件，并使用其他的一些中间步骤为向微服务迁移做好准备。下面的内容引用自 Fowler 的文章。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">关键你要认识到，成熟度模型的评估结果并不代表你的当前水平，它们只是在告诉你需要做哪些工作才能朝着改进的目标前进。你当前的水平只是一种中间工作，用于确定下一步该获得什么样的技能。</div></pre></td></tr></table></figure></p>\n<p>&#8194;那么，我们该做出怎样的改进，以及如何达成这些目标？我们需要经过一些简单的步骤，其中前面两步就可以解决很多在向微服务迁移过程中会出现的问题，而且不会带来相关的复杂性。</p>\n<ul>\n<li>清理应用程序。确保应用程序具有良好的自动化测试套件，并使用了最新版本的软件包、框架和编程语言。</li>\n<li>重构应用程序，把它拆分成多个模块，为模块定义清晰的 API。不要让外部代码直接触及模块内部，所有的交互应该通过模块提供的 API 来进行。</li>\n<li>从应用程序中选择一个模块，并把它拆分成独立的应用程序，部署在相同的主机上。你可以从中获得一些好处，而不会带来太多的运维麻烦。不过，你仍然需要解决这两个应用之间的交互问题，虽然它们都部署在同一个主机上。不过你可以无视微服务架构里固有的网络分区问题和分布式系统的可用性问题。</li>\n<li>把独立出来的模块移动到不同的主机上。现在，你需要处理跨网络交互问题，不过这样可以让这两个系统之间的耦合降得更低。</li>\n<li>如果有可能，可以重构数据存储系统，让另一个主机上的模块负责自己的数据存储。<br>&#8194;在我所见过的公司里，如果他们能够完成前面两个步骤就算万事大吉了。如果他们能够完成前面两个步骤，那么剩下的步骤一般不会像他们最初想象的那么重要了。如果你决定在这个过程的某个点上停下来，而系统仍然具有可维护性和比刚开始时更好的状态，那么就再好不过了。</li>\n</ul>"},{"title":"Centos7安装git","date":"2017-05-21T08:40:56.000Z","_content":"\n## 查看系统是否已经安装git\n\n```\ngit --version\n```\n\n## CentOS7 yum 安装git\n\n```\nyum install git\n```\n<!--more--> \n## 安装成功\n\n```\nyum --version\n```\n\n## 卸载git\n\n```\nyum remove git\n```\n","source":"_posts/build/CentOS7安装git.md","raw":"\n---\ntitle: Centos7安装git\ndate: 2017-05-21 16:40:56\ncategories:\n    - build\ntags:\n    - centos7\n    - git\n    - yum\n---\n\n## 查看系统是否已经安装git\n\n```\ngit --version\n```\n\n## CentOS7 yum 安装git\n\n```\nyum install git\n```\n<!--more--> \n## 安装成功\n\n```\nyum --version\n```\n\n## 卸载git\n\n```\nyum remove git\n```\n","slug":"build/CentOS7安装git","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegqz00089vvuc8jbiefa","content":"<h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n<h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n<a id=\"more\"></a> \n<h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n<h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h2 id=\"查看系统是否已经安装git\"><a href=\"#查看系统是否已经安装git\" class=\"headerlink\" title=\"查看系统是否已经安装git\"></a>查看系统是否已经安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git --version</div></pre></td></tr></table></figure>\n<h2 id=\"CentOS7-yum-安装git\"><a href=\"#CentOS7-yum-安装git\" class=\"headerlink\" title=\"CentOS7 yum 安装git\"></a>CentOS7 yum 安装git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>","more":"<h2 id=\"安装成功\"><a href=\"#安装成功\" class=\"headerlink\" title=\"安装成功\"></a>安装成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --version</div></pre></td></tr></table></figure>\n<h2 id=\"卸载git\"><a href=\"#卸载git\" class=\"headerlink\" title=\"卸载git\"></a>卸载git</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum remove git</div></pre></td></tr></table></figure>"},{"title":"General SSL Problem总结","date":"2017-05-23T12:59:56.000Z","reward":true,"_content":"\nGeneral SSL Problem \n```\nCaused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)\n\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)\n\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)\n\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)\n\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)\n\t... 18 more\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)\n\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)\n\tat sun.security.validator.Validator.validate(Validator.java:260)\n\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\n\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)\n\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)\n\t... 26 more\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)\n\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)\n\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\n\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)\n```\n如果您有同样的报错日志，不要急，下面讲解原因与解决办法。\n\n在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 http://www.2cto.com/kf/201408/323963.html\n\n原因：\n       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。\n\n<!--more-->\n\n解决办法：\n       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。\n       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）\nlinux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。\nwindows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。\n\n选择一种解决方法，然后再次测试","source":"_posts/build/General-SSL-Problem.md","raw":"\n---\ntitle: General SSL Problem总结\ndate: 2017-05-23 20:59:56\nreward: true\ncategories:\n    - build\ntags:\n    - JAVA\n    - 证书\n---\n\nGeneral SSL Problem \n```\nCaused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)\n\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)\n\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)\n\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)\n\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)\n\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)\n\t... 18 more\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)\n\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)\n\tat sun.security.validator.Validator.validate(Validator.java:260)\n\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\n\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)\n\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)\n\t... 26 more\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)\n\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)\n\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\n\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)\n```\n如果您有同样的报错日志，不要急，下面讲解原因与解决办法。\n\n在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 http://www.2cto.com/kf/201408/323963.html\n\n原因：\n       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。\n\n<!--more-->\n\n解决办法：\n       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。\n       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）\nlinux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。\nwindows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。\n\n选择一种解决方法，然后再次测试","slug":"build/General-SSL-Problem","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr200099vvu0xs9y8x9","content":"<p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n<p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n<p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n<p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>\n<a id=\"more\"></a>\n<p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n<p>选择一种解决方法，然后再次测试</p>\n","site":{"data":{}},"excerpt":"<p>General SSL Problem<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem</div><div class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)</div><div class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1728)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:304)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1478)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:212)</div><div class=\"line\">\tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:919)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$1.run(Handshaker.java:916)</div><div class=\"line\">\tat java.security.AccessController.doPrivileged(Native Method)</div><div class=\"line\">\tat sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1369)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1393)</div><div class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1256)</div><div class=\"line\">\t... 18 more</div><div class=\"line\">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)</div><div class=\"line\">\tat sun.security.validator.Validator.validate(Validator.java:260)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:281)</div><div class=\"line\">\tat sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)</div><div class=\"line\">\tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1465)</div><div class=\"line\">\t... 26 more</div><div class=\"line\">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:145)</div><div class=\"line\">\tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:131)</div><div class=\"line\">\tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)</div><div class=\"line\">\tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)</div></pre></td></tr></table></figure></p>\n<p>如果您有同样的报错日志，不要急，下面讲解原因与解决办法。</p>\n<p>在此之前需要了解下信任管理器(TrustManager)，它负责判断决定是否信任对方的安全证书，TrustManager对象由TrustManagerFactory工厂类生成。想了解Java安全套接字扩展详情，请访问 <a href=\"http://www.2cto.com/kf/201408/323963.html\" target=\"_blank\" rel=\"external\">http://www.2cto.com/kf/201408/323963.html</a></p>\n<p>原因：<br>       沃通顶级根，没有存在jdk信任管理器中，信任管理器，它的职责是觉得是否信任远端的证书，那么它凭借什么去判断呢？如果不显式设置信任存储器的文件路径，将遵循如下规则：①如果系统属性javax.net.ssl.truststore指定了truststore文件，那么信任管理器将去jre路径下的lib/security目录寻找这个文件作为信任存储器；②如果没设置①中的系统属性，则去寻找一个%java_home%/jre/lib/security/jssecacerts文件作为信任存储器；③如果jssecacerts不存在而cacerts存在，则cacerts作为信任存储器。一般情况下，都是%java_home%/jre/lib/security/cacerts作为任务管理器。</p>","more":"<p>解决办法：<br>       方法一：申请沃通企业级SHA2证书，沃通将这类型证书和certum做了交叉认证，certum在jdk 1.5+ 环境已经存在信任管理器中，这样不用做任何其他操作，替换证书即可通过信任。<br>       方法二：将您的公钥文件（for other server 包中的3_domian.crt文件）直接导入到信任管理器中，那么首先要确认是需要导入到哪个java环境呢？需要用户去判断是在哪个服务器的java环境调用https链接不受信任，那么就将证书公钥导入到这个Java环境的信任管理器中，方法如下。（以cacerts为例，其他信任管理器请相应修改！）<br>linux环境：执行 “ keytool -import -file 公钥文件路径/3_domian.crt -keystore %java_home%/jre/lib/security/cacerts -storepass changeit -alias wosign ”。<br>windows环境：dos下先cd到jdk的java\\jdk1.8.0.45\\bin目录下，执行 “ keytool -import -file 公钥文件路径\\3_domian.crt -keystore ../jre\\lib\\security\\cacerts -storepass changeit -alias wosign ”。</p>\n<p>选择一种解决方法，然后再次测试</p>"},{"title":"一个业务系统的架构设计","date":"2017-05-24T15:40:56.000Z","reward":true,"_content":"\n之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。\n\n## 技术选型\n\n* playframework\n    无状态\n    全栈(Hibernate,Netty,Groovy,Cache)\n    Python运维支持，开发热加载\n* AngularJS\n    对象操作\n    双向绑定\n    模版\n\n这样的技术选型是基于低成本／小规模团队快速上线应用的需要。\n\n选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。\n\n* 自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。\n* 无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。\n* 高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。\n* 快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。\n* Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。\n* 纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。\n* 基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。\n* 有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。\n\n选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。\n\n<!--more-->\n\n## 架构演进\n\n![架构演进](http://static.xcoder.ren/public/images/architecture.png)\n\n我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造\n\n![应用设计](http://static.xcoder.ren/public/images/applicationdesign.png)\n\n* 强制使用上下文(控制边界/业务隔离)\n    这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。\n* 实体缓存(提高效率)\n    为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。\n* 引入元数据(规范操作,公共问题公共处理)\n    引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。\n* 回调机制(解耦/二开)\n    让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。\n* playframework服务化(前后端分离/代码复用/更丰富的API)\n    我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。\n* Swagger:API量化(测试深入参与后端服务接口测试)\n    前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！\n* 大量使用多线程编程来提升系统运行效率\n    大量的异步多线程操作来保证系统运行效率。\n\n同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。\n\n* 解决前端页面加载效率因地区而异\n* 节省带宽资源\n* 专注业务处理\n* 为集群服务铺路\n\n在运维上我们做了一些优化提升\n\n* 全站HTTPS\n    避免单点积压\n    提高处理效率（相对部分HTTPS)\n    提升系统安全性\n* 负载均衡\n    提升系统稳定性\n    提升访问性能\n* 分布式memcached服务\n    避免单点雪崩效应\n    单实体强制缓存化(有效利用缓存分担数据库压力)\n* ELK\n    提供集群部署下快速分析解决问题的入口和渠道\n* Swagger-API文档\n    方便前后台分离协同开发及第三方开发者社区规范开发\n\n\n\n\n","source":"_posts/architecture/系统架构演进.md","raw":"\n---\ntitle: 一个业务系统的架构设计\ndate: 2017-05-24 23:40:56\nreward: true\ncategories:\n    - architecture\ntags:\n    - 架构设计\n    - SAAS\n    - 互联网应用架构\n---\n\n之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。\n\n## 技术选型\n\n* playframework\n    无状态\n    全栈(Hibernate,Netty,Groovy,Cache)\n    Python运维支持，开发热加载\n* AngularJS\n    对象操作\n    双向绑定\n    模版\n\n这样的技术选型是基于低成本／小规模团队快速上线应用的需要。\n\n选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。\n\n* 自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。\n* 无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。\n* 高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。\n* 快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。\n* Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。\n* 纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。\n* 基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。\n* 有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。\n\n选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。\n\n<!--more-->\n\n## 架构演进\n\n![架构演进](http://static.xcoder.ren/public/images/architecture.png)\n\n我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造\n\n![应用设计](http://static.xcoder.ren/public/images/applicationdesign.png)\n\n* 强制使用上下文(控制边界/业务隔离)\n    这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。\n* 实体缓存(提高效率)\n    为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。\n* 引入元数据(规范操作,公共问题公共处理)\n    引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。\n* 回调机制(解耦/二开)\n    让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。\n* playframework服务化(前后端分离/代码复用/更丰富的API)\n    我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。\n* Swagger:API量化(测试深入参与后端服务接口测试)\n    前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！\n* 大量使用多线程编程来提升系统运行效率\n    大量的异步多线程操作来保证系统运行效率。\n\n同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。\n\n* 解决前端页面加载效率因地区而异\n* 节省带宽资源\n* 专注业务处理\n* 为集群服务铺路\n\n在运维上我们做了一些优化提升\n\n* 全站HTTPS\n    避免单点积压\n    提高处理效率（相对部分HTTPS)\n    提升系统安全性\n* 负载均衡\n    提升系统稳定性\n    提升访问性能\n* 分布式memcached服务\n    避免单点雪崩效应\n    单实体强制缓存化(有效利用缓存分担数据库压力)\n* ELK\n    提供集群部署下快速分析解决问题的入口和渠道\n* Swagger-API文档\n    方便前后台分离协同开发及第三方开发者社区规范开发\n\n\n\n\n","slug":"architecture/系统架构演进","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr3000a9vvulp5ee4m9","content":"<p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n<h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n<li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n<li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n</ul>\n<p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n<p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n<ul>\n<li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n<li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n<li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n<li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n<li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n<li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n<li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n<li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n</ul>\n<p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>\n<a id=\"more\"></a>\n<h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n<p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n<p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n<ul>\n<li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n<li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n<li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n<li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n<li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n<li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n<li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n</ul>\n<p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n<ul>\n<li>解决前端页面加载效率因地区而异</li>\n<li>节省带宽资源</li>\n<li>专注业务处理</li>\n<li>为集群服务铺路</li>\n</ul>\n<p>在运维上我们做了一些优化提升</p>\n<ul>\n<li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n<li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n<li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n<li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n<li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>之前开发了一个包括多端（PC端，移动端，微信端，API）的B2B系统，分享一下系统的架构设计演进。</p>\n<h2 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h2><ul>\n<li>playframework<br>  无状态<br>  全栈(Hibernate,Netty,Groovy,Cache)<br>  Python运维支持，开发热加载</li>\n<li>AngularJS<br>  对象操作<br>  双向绑定<br>  模版</li>\n</ul>\n<p>这样的技术选型是基于低成本／小规模团队快速上线应用的需要。</p>\n<p>选择playframework是它让我们从开发到运维都能省去很多成本，对于开发人员只要掌握一定的语法就可以直接关注业务逻辑，不用所有的人都特别深入的学习框架。</p>\n<ul>\n<li>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用playframework开发(生产还是需要重启的)不需要手动编译、部署以及重新启动Web服务器等操作。</li>\n<li>无状态模型：playframework是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。</li>\n<li>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。</li>\n<li>快速解决错误：当错误发生时，playframework(play1)会在浏览器中显示出错代码块并提示问题发生的确切位置。</li>\n<li>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。</li>\n<li>纯Java：playframework(play1)采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。</li>\n<li>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。</li>\n<li>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</li>\n</ul>\n<p>选择AngularJS是我们的应用更多的是后台应用，在2014年轻量级可选择的还只有knockout和angular，考虑到谷歌以及丰富的控件组件，mvvm的便捷实用我们选择了它，现在它仍然在很好的发挥着作用，在前端开发人手不足时能让后台开发也能以面向对象的方式介入前台开发，以便应用快速上线。</p>","more":"<h2 id=\"架构演进\"><a href=\"#架构演进\" class=\"headerlink\" title=\"架构演进\"></a>架构演进</h2><p><img src=\"http://static.xcoder.ren/public/images/architecture.png\" alt=\"架构演进\"></p>\n<p>我们并不是只用playframework提供的功能而已，在playframework的基础上考虑整体的性能和扩展自定义开发等方面我们在playfamework上做了一些改造</p>\n<p><img src=\"http://static.xcoder.ren/public/images/applicationdesign.png\" alt=\"应用设计\"></p>\n<ul>\n<li>强制使用上下文(控制边界/业务隔离)<br>  这个应用是个多租户的应用，成本考虑不可能每个租户一个库，多个租户在同一个库中就存在租户信息不隔离不安全的问题，我们在数据访问层强制控制，不让业务通过租户字段访问，而是公共部分统一插入租户信息，这样既让业务无须关心租户，当前用户等业务周边信息，也能让类似租户信息更安全。</li>\n<li>实体缓存(提高效率)<br>  为了提高系统操作效率，我们为每个实体访问都设置了缓存，且无需业务干预和操作。能够极大的提高数据库的IO吞吐量。</li>\n<li>引入元数据(规范操作,公共问题公共处理)<br>  引入元数据可以让业务有更多可复用，更多可配置及更聚焦业务本身。比如有些业务表需要有审计功能（需要知道某条记录是谁修改，谁添加的），这个业务实体就可以实现审计接口，然后公共统一异步多线程处理审计问题，既能保证高效也能减少耦合。</li>\n<li>回调机制(解耦/二开)<br>  让业务之间不再通过代码相互调用，减少业务耦合。同时还可以更方便的让二次开发通过这个机制参与进来。</li>\n<li>playframework服务化(前后端分离/代码复用/更丰富的API)<br>  我们现在并没有让playframework来直接渲染界面，而是将playframework服务化，即它只提供后台多终端服务，前端通过Node.js或PHP来展现，前后端分离，更易维护，也让后端能发挥更大的作用。同时后端还可以随时被更高效的框架或者语言替代（比如scala,go)。</li>\n<li>Swagger:API量化(测试深入参与后端服务接口测试)<br>  前后台通过标准API文档交互，同时第三方开发者也能有标准规范的开发文档。而且业务接口变更或者新增，文档能够即时的更新，而不用手工操作！</li>\n<li>大量使用多线程编程来提升系统运行效率<br>  大量的异步多线程操作来保证系统运行效率。</li>\n</ul>\n<p>同时我们使用阿里云的OSS来做静态资源(JS/CSS的存储),使用七牛云存储来存储站点的大量图片和附件信息。</p>\n<ul>\n<li>解决前端页面加载效率因地区而异</li>\n<li>节省带宽资源</li>\n<li>专注业务处理</li>\n<li>为集群服务铺路</li>\n</ul>\n<p>在运维上我们做了一些优化提升</p>\n<ul>\n<li>全站HTTPS<br>  避免单点积压<br>  提高处理效率（相对部分HTTPS)<br>  提升系统安全性</li>\n<li>负载均衡<br>  提升系统稳定性<br>  提升访问性能</li>\n<li>分布式memcached服务<br>  避免单点雪崩效应<br>  单实体强制缓存化(有效利用缓存分担数据库压力)</li>\n<li>ELK<br>  提供集群部署下快速分析解决问题的入口和渠道</li>\n<li>Swagger-API文档<br>  方便前后台分离协同开发及第三方开发者社区规范开发</li>\n</ul>"},{"title":"自动部署发布Hexo程序到Github上","date":"2017-05-20T14:40:56.000Z","_content":"\n[自动部署发布Hexo程序到Github上](http://blog.csdn.net/woblog/article/details/51319364)\n<!--more-->\n","source":"_posts/build/hexo+travis.md","raw":"\n---\ntitle: 自动部署发布Hexo程序到Github上\ndate: 2017-05-20 22:40:56\ncategories:\n    - build\ntags: \n    - Hexo\n    - travis CI\n    - GitHub\n---\n\n[自动部署发布Hexo程序到Github上](http://blog.csdn.net/woblog/article/details/51319364)\n<!--more-->\n","slug":"build/hexo+travis","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr5000d9vvu2055smwh","content":"<p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br><a id=\"more\"></a></p>\n","site":{"data":{}},"excerpt":"<p><a href=\"http://blog.csdn.net/woblog/article/details/51319364\" target=\"_blank\" rel=\"external\">自动部署发布Hexo程序到Github上</a><br>","more":"</p>"},{"title":"centos7上firewalld防火墙配置","date":"2017-06-08T01:40:56.000Z","reward":true,"_content":"## firewalld介绍\nfirewalld 提供了支持网络/防火墙区域(zone)定义网络链接以及接口安全等级的动态防火墙管理工具。\n\n```markdown\n我们首先需要弄明白的第一个问题是到底什么是动态防火墙。为了解答这个问题，我们先来回忆一下 iptables service 管理防火墙规则的模式：用户将新的防火墙规则添加进 /etc/sysconfig/iptables 配置文件当中，再执行命令 service iptables reload 使变更的规则生效。在这整个过程的背后，iptables service 首先对旧的防火墙规则进行了清空，然后重新完整地加载所有新的防火墙规则，而如果配置了需要 reload 内核模块的话，过程背后还会包含卸载和重新加载内核模块的动作，而不幸的是，这个动作很可能对运行中的系统产生额外的不良影响，特别是在网络非常繁忙的系统中。\n\n如果我们把这种哪怕只修改一条规则也要进行所有规则的重新载入的模式称为静态防火墙的话，那么 firewalld 所提供的模式就可以叫做动态防火墙，它的出现就是为了解决这一问题，任何规则的变更都不需要对整个防火墙规则列表进行重新加载，只需要将变更部分保存并更新到运行中的 iptables 即可。\n\n这里有必要说明一下 firewalld 和 iptables 之间的关系， firewalld 提供了一个 daemon 和 service，还有命令行和图形界面配置工具，它仅仅是替代了 iptables service 部分，其底层还是使用 iptables 作为防火墙规则管理入口。firewalld 使用 python 语言开发，在新版本中已经计划使用 c++ 重写 daemon 部分。\n```\n<!--more-->\n## firewalld区域\nfirewalld将网卡对应到不同的区域（zone），zone 默认共有9个，block dmz drop external home internal public trusted work.\n```markdown\n* drop（丢弃）\n任何接收的网络数据包都被丢弃，没有任何回复。仅能有发送出去的网络连接。\n* block（限制）\n任何接收的网络连接都被 IPv4 的 icmp-host-prohibited 信息和 IPv6 的 icmp6-adm-prohibited 信息所拒绝。\n* public（公共）\n在公共区域内使用，不能相信网络内的其他计算机不会对您的计算机造成危害，只能接收经过选取的连接。\n* external（外部）\n特别是为路由器启用了伪装功能的外部网。您不能信任来自网络的其他计算，不能相信它们不会对您的计算机造成危害，只能接收经过选择的连接。\n* dmz（非军事区）\n用于您的非军事区内的电脑，此区域内可公开访问，可以有限地进入您的内部网络，仅仅接收经过选择的连接。\n* work（工作）\n用于工作区。您可以基本相信网络内的其他电脑不会危害您的电脑。仅仅接收经过选择的连接。\n* home（家庭）\n用于家庭网络。您可以基本信任网络内的其他计算机不会危害您的计算机。仅仅接收经过选择的连接。\n* internal（内部）\n用于内部网络。您可以基本上信任网络内的其他计算机不会威胁您的计算机。仅仅接受经过选择的连接。\n* trusted（信任）\n可接受所有的网络连接。\n指定其中一个区域为默认区域是可行的。当接口连接加入了 NetworkManager，它们就被分配为默认区域。安装时，firewalld 里的默认区域被设定为公共区域。\n```\n## firewalld服务\n```markdown\n在 /usr/lib/firewalld/services/ 目录中，还保存了另外一类配置文件，每个文件对应一项具体的网络服务，如 ssh 服务等.\n与之对应的配置文件中记录了各项服务所使用的 tcp/udp 端口，在最新版本的 firewalld 中默认已经定义了 70+ 种服务供我们使用.\n当默认提供的服务不够用或者需要自定义某项服务的端口时，我们需要将 service 配置文件放置在 /etc/firewalld/services/ 目录中.\nservice 配置的好处显而易见:\n第一，通过服务名字来管理规则更加人性化，\n第二，通过服务来组织端口分组的模式更加高效，如果一个服务使用了若干个网络端口，则服务的配置文件就相当于提供了到这些端口的规则管理的批量操作快捷方式。\n```\n## firewalld配置方式\nfirewalld的配置文件以xml格式为主（主配置文件firewalld.conf例外），他们有两个存储位置\n\n``/etc/firewalld/``\n\n``/usr/lib/firewalld/``\n\n使用时的规则是这样的：当需要一个文件时firewalld会首先到第一个目录中去查找，如果可以找到，那么就直接使用，否则会继续到第二个目录中查找。\n\nfirewalld的这种配置文件结构的主要作用是这样的：在第二个目录中存放的是firewalld给提供的通用配置文件，如果我们想修改配置， 那么可以copy一份到第一个目录中，然后再进行修改。这么做有两个好处：首先我们日后可以非常清晰地看到都有哪些文件是我们自己创建或者修改过的，其 次，如果想恢复firewalld给提供的默认配置，只需要将自己在第一个目录中的配置文件删除即可\n\n## firewalld配置\n查看firewalld服务状态\n``systemctl status firewalld.service``\n启动firewalld服务\n``systemctl start firewalld.service``\n停止firewalld服务\n``systemctl stop firewalld.service``\n禁用firewalld服务\n``systemctl disable firewalld.service``\n启用firewalld服务\n``systemctl enable firewalld.service``\n如果是running/active可以通过下面的命令查看运行的服务\n``firewall-cmd --get-services``\n查看当前zone启动的服务\n``firewall-cmd --list-services``\n添加配置\n``firewall-cmd --add-port=11200/tcp --permanent``\n也可以``cat /etc/firewalld/zones/public.xml``\n","source":"_posts/build/firewalld防火墙配置.md","raw":"\n---\ntitle: centos7上firewalld防火墙配置\ndate: 2017-06-08 09:40:56\nreward: true\ncategories:\n    - build\ntags:\n    - centos7\n    - firewalld\n    - 防火墙\n---\n## firewalld介绍\nfirewalld 提供了支持网络/防火墙区域(zone)定义网络链接以及接口安全等级的动态防火墙管理工具。\n\n```markdown\n我们首先需要弄明白的第一个问题是到底什么是动态防火墙。为了解答这个问题，我们先来回忆一下 iptables service 管理防火墙规则的模式：用户将新的防火墙规则添加进 /etc/sysconfig/iptables 配置文件当中，再执行命令 service iptables reload 使变更的规则生效。在这整个过程的背后，iptables service 首先对旧的防火墙规则进行了清空，然后重新完整地加载所有新的防火墙规则，而如果配置了需要 reload 内核模块的话，过程背后还会包含卸载和重新加载内核模块的动作，而不幸的是，这个动作很可能对运行中的系统产生额外的不良影响，特别是在网络非常繁忙的系统中。\n\n如果我们把这种哪怕只修改一条规则也要进行所有规则的重新载入的模式称为静态防火墙的话，那么 firewalld 所提供的模式就可以叫做动态防火墙，它的出现就是为了解决这一问题，任何规则的变更都不需要对整个防火墙规则列表进行重新加载，只需要将变更部分保存并更新到运行中的 iptables 即可。\n\n这里有必要说明一下 firewalld 和 iptables 之间的关系， firewalld 提供了一个 daemon 和 service，还有命令行和图形界面配置工具，它仅仅是替代了 iptables service 部分，其底层还是使用 iptables 作为防火墙规则管理入口。firewalld 使用 python 语言开发，在新版本中已经计划使用 c++ 重写 daemon 部分。\n```\n<!--more-->\n## firewalld区域\nfirewalld将网卡对应到不同的区域（zone），zone 默认共有9个，block dmz drop external home internal public trusted work.\n```markdown\n* drop（丢弃）\n任何接收的网络数据包都被丢弃，没有任何回复。仅能有发送出去的网络连接。\n* block（限制）\n任何接收的网络连接都被 IPv4 的 icmp-host-prohibited 信息和 IPv6 的 icmp6-adm-prohibited 信息所拒绝。\n* public（公共）\n在公共区域内使用，不能相信网络内的其他计算机不会对您的计算机造成危害，只能接收经过选取的连接。\n* external（外部）\n特别是为路由器启用了伪装功能的外部网。您不能信任来自网络的其他计算，不能相信它们不会对您的计算机造成危害，只能接收经过选择的连接。\n* dmz（非军事区）\n用于您的非军事区内的电脑，此区域内可公开访问，可以有限地进入您的内部网络，仅仅接收经过选择的连接。\n* work（工作）\n用于工作区。您可以基本相信网络内的其他电脑不会危害您的电脑。仅仅接收经过选择的连接。\n* home（家庭）\n用于家庭网络。您可以基本信任网络内的其他计算机不会危害您的计算机。仅仅接收经过选择的连接。\n* internal（内部）\n用于内部网络。您可以基本上信任网络内的其他计算机不会威胁您的计算机。仅仅接受经过选择的连接。\n* trusted（信任）\n可接受所有的网络连接。\n指定其中一个区域为默认区域是可行的。当接口连接加入了 NetworkManager，它们就被分配为默认区域。安装时，firewalld 里的默认区域被设定为公共区域。\n```\n## firewalld服务\n```markdown\n在 /usr/lib/firewalld/services/ 目录中，还保存了另外一类配置文件，每个文件对应一项具体的网络服务，如 ssh 服务等.\n与之对应的配置文件中记录了各项服务所使用的 tcp/udp 端口，在最新版本的 firewalld 中默认已经定义了 70+ 种服务供我们使用.\n当默认提供的服务不够用或者需要自定义某项服务的端口时，我们需要将 service 配置文件放置在 /etc/firewalld/services/ 目录中.\nservice 配置的好处显而易见:\n第一，通过服务名字来管理规则更加人性化，\n第二，通过服务来组织端口分组的模式更加高效，如果一个服务使用了若干个网络端口，则服务的配置文件就相当于提供了到这些端口的规则管理的批量操作快捷方式。\n```\n## firewalld配置方式\nfirewalld的配置文件以xml格式为主（主配置文件firewalld.conf例外），他们有两个存储位置\n\n``/etc/firewalld/``\n\n``/usr/lib/firewalld/``\n\n使用时的规则是这样的：当需要一个文件时firewalld会首先到第一个目录中去查找，如果可以找到，那么就直接使用，否则会继续到第二个目录中查找。\n\nfirewalld的这种配置文件结构的主要作用是这样的：在第二个目录中存放的是firewalld给提供的通用配置文件，如果我们想修改配置， 那么可以copy一份到第一个目录中，然后再进行修改。这么做有两个好处：首先我们日后可以非常清晰地看到都有哪些文件是我们自己创建或者修改过的，其 次，如果想恢复firewalld给提供的默认配置，只需要将自己在第一个目录中的配置文件删除即可\n\n## firewalld配置\n查看firewalld服务状态\n``systemctl status firewalld.service``\n启动firewalld服务\n``systemctl start firewalld.service``\n停止firewalld服务\n``systemctl stop firewalld.service``\n禁用firewalld服务\n``systemctl disable firewalld.service``\n启用firewalld服务\n``systemctl enable firewalld.service``\n如果是running/active可以通过下面的命令查看运行的服务\n``firewall-cmd --get-services``\n查看当前zone启动的服务\n``firewall-cmd --list-services``\n添加配置\n``firewall-cmd --add-port=11200/tcp --permanent``\n也可以``cat /etc/firewalld/zones/public.xml``\n","slug":"build/firewalld防火墙配置","published":1,"updated":"2017-06-10T13:46:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr6000f9vvubvtgyfg8","content":"<h2 id=\"firewalld介绍\"><a href=\"#firewalld介绍\" class=\"headerlink\" title=\"firewalld介绍\"></a>firewalld介绍</h2><p>firewalld 提供了支持网络/防火墙区域(zone)定义网络链接以及接口安全等级的动态防火墙管理工具。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">我们首先需要弄明白的第一个问题是到底什么是动态防火墙。为了解答这个问题，我们先来回忆一下 iptables service 管理防火墙规则的模式：用户将新的防火墙规则添加进 /etc/sysconfig/iptables 配置文件当中，再执行命令 service iptables reload 使变更的规则生效。在这整个过程的背后，iptables service 首先对旧的防火墙规则进行了清空，然后重新完整地加载所有新的防火墙规则，而如果配置了需要 reload 内核模块的话，过程背后还会包含卸载和重新加载内核模块的动作，而不幸的是，这个动作很可能对运行中的系统产生额外的不良影响，特别是在网络非常繁忙的系统中。</div><div class=\"line\"></div><div class=\"line\">如果我们把这种哪怕只修改一条规则也要进行所有规则的重新载入的模式称为静态防火墙的话，那么 firewalld 所提供的模式就可以叫做动态防火墙，它的出现就是为了解决这一问题，任何规则的变更都不需要对整个防火墙规则列表进行重新加载，只需要将变更部分保存并更新到运行中的 iptables 即可。</div><div class=\"line\"></div><div class=\"line\">这里有必要说明一下 firewalld 和 iptables 之间的关系， firewalld 提供了一个 daemon 和 service，还有命令行和图形界面配置工具，它仅仅是替代了 iptables service 部分，其底层还是使用 iptables 作为防火墙规则管理入口。firewalld 使用 python 语言开发，在新版本中已经计划使用 c++ 重写 daemon 部分。</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h2 id=\"firewalld区域\"><a href=\"#firewalld区域\" class=\"headerlink\" title=\"firewalld区域\"></a>firewalld区域</h2><p>firewalld将网卡对应到不同的区域（zone），zone 默认共有9个，block dmz drop external home internal public trusted work.<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"bullet\">* </span>drop（丢弃）</div><div class=\"line\">任何接收的网络数据包都被丢弃，没有任何回复。仅能有发送出去的网络连接。</div><div class=\"line\"><span class=\"bullet\">* </span>block（限制）</div><div class=\"line\">任何接收的网络连接都被 IPv4 的 icmp-host-prohibited 信息和 IPv6 的 icmp6-adm-prohibited 信息所拒绝。</div><div class=\"line\"><span class=\"bullet\">* </span>public（公共）</div><div class=\"line\">在公共区域内使用，不能相信网络内的其他计算机不会对您的计算机造成危害，只能接收经过选取的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>external（外部）</div><div class=\"line\">特别是为路由器启用了伪装功能的外部网。您不能信任来自网络的其他计算，不能相信它们不会对您的计算机造成危害，只能接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>dmz（非军事区）</div><div class=\"line\">用于您的非军事区内的电脑，此区域内可公开访问，可以有限地进入您的内部网络，仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>work（工作）</div><div class=\"line\">用于工作区。您可以基本相信网络内的其他电脑不会危害您的电脑。仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>home（家庭）</div><div class=\"line\">用于家庭网络。您可以基本信任网络内的其他计算机不会危害您的计算机。仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>internal（内部）</div><div class=\"line\">用于内部网络。您可以基本上信任网络内的其他计算机不会威胁您的计算机。仅仅接受经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>trusted（信任）</div><div class=\"line\">可接受所有的网络连接。</div><div class=\"line\">指定其中一个区域为默认区域是可行的。当接口连接加入了 NetworkManager，它们就被分配为默认区域。安装时，firewalld 里的默认区域被设定为公共区域。</div></pre></td></tr></table></figure></p>\n<h2 id=\"firewalld服务\"><a href=\"#firewalld服务\" class=\"headerlink\" title=\"firewalld服务\"></a>firewalld服务</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">在 /usr/lib/firewalld/services/ 目录中，还保存了另外一类配置文件，每个文件对应一项具体的网络服务，如 ssh 服务等.</div><div class=\"line\">与之对应的配置文件中记录了各项服务所使用的 tcp/udp 端口，在最新版本的 firewalld 中默认已经定义了 70+ 种服务供我们使用.</div><div class=\"line\">当默认提供的服务不够用或者需要自定义某项服务的端口时，我们需要将 service 配置文件放置在 /etc/firewalld/services/ 目录中.</div><div class=\"line\">service 配置的好处显而易见:</div><div class=\"line\">第一，通过服务名字来管理规则更加人性化，</div><div class=\"line\">第二，通过服务来组织端口分组的模式更加高效，如果一个服务使用了若干个网络端口，则服务的配置文件就相当于提供了到这些端口的规则管理的批量操作快捷方式。</div></pre></td></tr></table></figure>\n<h2 id=\"firewalld配置方式\"><a href=\"#firewalld配置方式\" class=\"headerlink\" title=\"firewalld配置方式\"></a>firewalld配置方式</h2><p>firewalld的配置文件以xml格式为主（主配置文件firewalld.conf例外），他们有两个存储位置</p>\n<p><code>/etc/firewalld/</code></p>\n<p><code>/usr/lib/firewalld/</code></p>\n<p>使用时的规则是这样的：当需要一个文件时firewalld会首先到第一个目录中去查找，如果可以找到，那么就直接使用，否则会继续到第二个目录中查找。</p>\n<p>firewalld的这种配置文件结构的主要作用是这样的：在第二个目录中存放的是firewalld给提供的通用配置文件，如果我们想修改配置， 那么可以copy一份到第一个目录中，然后再进行修改。这么做有两个好处：首先我们日后可以非常清晰地看到都有哪些文件是我们自己创建或者修改过的，其 次，如果想恢复firewalld给提供的默认配置，只需要将自己在第一个目录中的配置文件删除即可</p>\n<h2 id=\"firewalld配置\"><a href=\"#firewalld配置\" class=\"headerlink\" title=\"firewalld配置\"></a>firewalld配置</h2><p>查看firewalld服务状态<br><code>systemctl status firewalld.service</code><br>启动firewalld服务<br><code>systemctl start firewalld.service</code><br>停止firewalld服务<br><code>systemctl stop firewalld.service</code><br>禁用firewalld服务<br><code>systemctl disable firewalld.service</code><br>启用firewalld服务<br><code>systemctl enable firewalld.service</code><br>如果是running/active可以通过下面的命令查看运行的服务<br><code>firewall-cmd --get-services</code><br>查看当前zone启动的服务<br><code>firewall-cmd --list-services</code><br>添加配置<br><code>firewall-cmd --add-port=11200/tcp --permanent</code><br>也可以<code>cat /etc/firewalld/zones/public.xml</code></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"firewalld介绍\"><a href=\"#firewalld介绍\" class=\"headerlink\" title=\"firewalld介绍\"></a>firewalld介绍</h2><p>firewalld 提供了支持网络/防火墙区域(zone)定义网络链接以及接口安全等级的动态防火墙管理工具。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">我们首先需要弄明白的第一个问题是到底什么是动态防火墙。为了解答这个问题，我们先来回忆一下 iptables service 管理防火墙规则的模式：用户将新的防火墙规则添加进 /etc/sysconfig/iptables 配置文件当中，再执行命令 service iptables reload 使变更的规则生效。在这整个过程的背后，iptables service 首先对旧的防火墙规则进行了清空，然后重新完整地加载所有新的防火墙规则，而如果配置了需要 reload 内核模块的话，过程背后还会包含卸载和重新加载内核模块的动作，而不幸的是，这个动作很可能对运行中的系统产生额外的不良影响，特别是在网络非常繁忙的系统中。</div><div class=\"line\"></div><div class=\"line\">如果我们把这种哪怕只修改一条规则也要进行所有规则的重新载入的模式称为静态防火墙的话，那么 firewalld 所提供的模式就可以叫做动态防火墙，它的出现就是为了解决这一问题，任何规则的变更都不需要对整个防火墙规则列表进行重新加载，只需要将变更部分保存并更新到运行中的 iptables 即可。</div><div class=\"line\"></div><div class=\"line\">这里有必要说明一下 firewalld 和 iptables 之间的关系， firewalld 提供了一个 daemon 和 service，还有命令行和图形界面配置工具，它仅仅是替代了 iptables service 部分，其底层还是使用 iptables 作为防火墙规则管理入口。firewalld 使用 python 语言开发，在新版本中已经计划使用 c++ 重写 daemon 部分。</div></pre></td></tr></table></figure>","more":"<h2 id=\"firewalld区域\"><a href=\"#firewalld区域\" class=\"headerlink\" title=\"firewalld区域\"></a>firewalld区域</h2><p>firewalld将网卡对应到不同的区域（zone），zone 默认共有9个，block dmz drop external home internal public trusted work.<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"bullet\">* </span>drop（丢弃）</div><div class=\"line\">任何接收的网络数据包都被丢弃，没有任何回复。仅能有发送出去的网络连接。</div><div class=\"line\"><span class=\"bullet\">* </span>block（限制）</div><div class=\"line\">任何接收的网络连接都被 IPv4 的 icmp-host-prohibited 信息和 IPv6 的 icmp6-adm-prohibited 信息所拒绝。</div><div class=\"line\"><span class=\"bullet\">* </span>public（公共）</div><div class=\"line\">在公共区域内使用，不能相信网络内的其他计算机不会对您的计算机造成危害，只能接收经过选取的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>external（外部）</div><div class=\"line\">特别是为路由器启用了伪装功能的外部网。您不能信任来自网络的其他计算，不能相信它们不会对您的计算机造成危害，只能接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>dmz（非军事区）</div><div class=\"line\">用于您的非军事区内的电脑，此区域内可公开访问，可以有限地进入您的内部网络，仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>work（工作）</div><div class=\"line\">用于工作区。您可以基本相信网络内的其他电脑不会危害您的电脑。仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>home（家庭）</div><div class=\"line\">用于家庭网络。您可以基本信任网络内的其他计算机不会危害您的计算机。仅仅接收经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>internal（内部）</div><div class=\"line\">用于内部网络。您可以基本上信任网络内的其他计算机不会威胁您的计算机。仅仅接受经过选择的连接。</div><div class=\"line\"><span class=\"bullet\">* </span>trusted（信任）</div><div class=\"line\">可接受所有的网络连接。</div><div class=\"line\">指定其中一个区域为默认区域是可行的。当接口连接加入了 NetworkManager，它们就被分配为默认区域。安装时，firewalld 里的默认区域被设定为公共区域。</div></pre></td></tr></table></figure></p>\n<h2 id=\"firewalld服务\"><a href=\"#firewalld服务\" class=\"headerlink\" title=\"firewalld服务\"></a>firewalld服务</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">在 /usr/lib/firewalld/services/ 目录中，还保存了另外一类配置文件，每个文件对应一项具体的网络服务，如 ssh 服务等.</div><div class=\"line\">与之对应的配置文件中记录了各项服务所使用的 tcp/udp 端口，在最新版本的 firewalld 中默认已经定义了 70+ 种服务供我们使用.</div><div class=\"line\">当默认提供的服务不够用或者需要自定义某项服务的端口时，我们需要将 service 配置文件放置在 /etc/firewalld/services/ 目录中.</div><div class=\"line\">service 配置的好处显而易见:</div><div class=\"line\">第一，通过服务名字来管理规则更加人性化，</div><div class=\"line\">第二，通过服务来组织端口分组的模式更加高效，如果一个服务使用了若干个网络端口，则服务的配置文件就相当于提供了到这些端口的规则管理的批量操作快捷方式。</div></pre></td></tr></table></figure>\n<h2 id=\"firewalld配置方式\"><a href=\"#firewalld配置方式\" class=\"headerlink\" title=\"firewalld配置方式\"></a>firewalld配置方式</h2><p>firewalld的配置文件以xml格式为主（主配置文件firewalld.conf例外），他们有两个存储位置</p>\n<p><code>/etc/firewalld/</code></p>\n<p><code>/usr/lib/firewalld/</code></p>\n<p>使用时的规则是这样的：当需要一个文件时firewalld会首先到第一个目录中去查找，如果可以找到，那么就直接使用，否则会继续到第二个目录中查找。</p>\n<p>firewalld的这种配置文件结构的主要作用是这样的：在第二个目录中存放的是firewalld给提供的通用配置文件，如果我们想修改配置， 那么可以copy一份到第一个目录中，然后再进行修改。这么做有两个好处：首先我们日后可以非常清晰地看到都有哪些文件是我们自己创建或者修改过的，其 次，如果想恢复firewalld给提供的默认配置，只需要将自己在第一个目录中的配置文件删除即可</p>\n<h2 id=\"firewalld配置\"><a href=\"#firewalld配置\" class=\"headerlink\" title=\"firewalld配置\"></a>firewalld配置</h2><p>查看firewalld服务状态<br><code>systemctl status firewalld.service</code><br>启动firewalld服务<br><code>systemctl start firewalld.service</code><br>停止firewalld服务<br><code>systemctl stop firewalld.service</code><br>禁用firewalld服务<br><code>systemctl disable firewalld.service</code><br>启用firewalld服务<br><code>systemctl enable firewalld.service</code><br>如果是running/active可以通过下面的命令查看运行的服务<br><code>firewall-cmd --get-services</code><br>查看当前zone启动的服务<br><code>firewall-cmd --list-services</code><br>添加配置<br><code>firewall-cmd --add-port=11200/tcp --permanent</code><br>也可以<code>cat /etc/firewalld/zones/public.xml</code></p>"},{"title":"jackson反序列化化无法构造实例的问题","date":"2017-06-03T14:40:56.000Z","_content":"\n今天在一个项目的前端调用后台服务出现如下的错误：\n```\nCould not read document: Can not construct instance of xxxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n\n\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of xxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: java.io.PushbackInputStream@517c5e; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])\n\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:270) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1456) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1012) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1206) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:259) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n\t... 51 more\n```\n\n无法实例化json对象，没有找到适合的构造函数。\n<!--more-->\n在进行反序列号的时候，需要要转换类是普通的pojo类，并且类中的变量都需要有setXXX的set方法，如果没有set方法或者没有“正确”的set方法，就会报无法实例化JSON对象的异常","source":"_posts/build/jackson反序列化失败.md","raw":"\n---\ntitle: jackson反序列化化无法构造实例的问题\ndate: 2017-06-03 22:40:56\ncategories:\n    - build\ntags:\n    - jackson\n    - 反序列化\n    - JsonMappingException\n---\n\n今天在一个项目的前端调用后台服务出现如下的错误：\n```\nCould not read document: Can not construct instance of xxxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n\n\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of xxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: java.io.PushbackInputStream@517c5e; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])\n\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:270) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1456) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1012) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1206) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:259) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.8.jar:2.8.8]\n\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n\t... 51 more\n```\n\n无法实例化json对象，没有找到适合的构造函数。\n<!--more-->\n在进行反序列号的时候，需要要转换类是普通的pojo类，并且类中的变量都需要有setXXX的set方法，如果没有set方法或者没有“正确”的set方法，就会报无法实例化JSON对象的异常","slug":"build/jackson反序列化失败","published":1,"updated":"2017-06-04T01:53:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr8000i9vvuety8dv2c","content":"<p>今天在一个项目的前端调用后台服务出现如下的错误：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">Could not read document: Can not construct instance of xxxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of xxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)</div><div class=\"line\"> at [Source: java.io.PushbackInputStream@517c5e; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])</div><div class=\"line\">\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:270) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1456) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1012) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1206) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:259) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]</div><div class=\"line\">\t... 51 more</div></pre></td></tr></table></figure></p>\n<p>无法实例化json对象，没有找到适合的构造函数。<br><a id=\"more\"></a><br>在进行反序列号的时候，需要要转换类是普通的pojo类，并且类中的变量都需要有setXXX的set方法，如果没有set方法或者没有“正确”的set方法，就会报无法实例化JSON对象的异常</p>\n","site":{"data":{}},"excerpt":"<p>今天在一个项目的前端调用后台服务出现如下的错误：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">Could not read document: Can not construct instance of xxxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of xxxx: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)</div><div class=\"line\"> at [Source: java.io.PushbackInputStream@517c5e; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])</div><div class=\"line\">\tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:270) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:1456) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1012) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1206) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:287) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:259) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.8.jar:2.8.8]</div><div class=\"line\">\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]</div><div class=\"line\">\t... 51 more</div></pre></td></tr></table></figure></p>\n<p>无法实例化json对象，没有找到适合的构造函数。<br>","more":"<br>在进行反序列号的时候，需要要转换类是普通的pojo类，并且类中的变量都需要有setXXX的set方法，如果没有set方法或者没有“正确”的set方法，就会报无法实例化JSON对象的异常</p>"},{"title":"logstash-forwarder安装与配置","date":"2017-06-15T16:12:25.000Z","reward":true,"_content":"\n## logstash-forwarder 安装\n首先，我们需要安装 logstash-forwarder 软件。官方都已经提供了软件仓库可用。在 Redhat 机器上只需要添加一个 /etc/yum.repos.d/logstash-forwarder.repo，内容如下：\n```markdown\n[logstash-forwarder]\nname=logstash-forwarder\nbaseurl=http://packages.elasticsearch.org/logstash-forwarder/centos\ngpgcheck=1\ngpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch\nenabled=1\n```\n然后运行安装命令即可：\n```markdown\nsudo yum install -y logstash-forwarder\n```\n<!--more-->\n## logstash-forwarder 配置\n   \nlogstash-forwarder 的配置文件是纯 JSON 格式。因为其轻量级的设计目的，所以可配置项很少。下面是一个 /etc/logstash-forwarder 配置示例：\n```markdown\n{\n  \"network\": {\n    \"servers\": [ \"10.18.10.2:5000\" ],\n      \"timeout\": 15,\n      \"ssl ca\" : \"/etc/pki/tls/certs/logstash-forwarder.crt\"\n      \"ssl key\": \"/etc/pki/tls/private/logstash-forwarder.key\"\n  },\n  \"files\": [\n    {\n      \"paths\": [\n        \"/var/log/message\",\n      \"/var/log/secure\"\n        ],\n      \"fields\": { \"type\": \"syslog\" }\n    },{\n          \"paths\": [\n            \"/var/log/nginx/error.log\"\n          ],\n          \"fields\": { \"type\": \"nginxerror\" },\n          \"fields\": { \"app\": \"test\" },\n          \"fields\": { \"ip\": \"172.16.0.1\"}\n        }, {\n          \"paths\":  [ \"/var/log/secure\" ],\n          \"fields\": {\"type\": \"secure\"},\n          \"fields\": {\"app\": \"test\"},\n          \"fields\": {\"ip\":\"10.1.2.3\"}\n         }\n  ]\n}\n```\n\n我们已完成了配置，当 sudo service logstash-forwarder start 之后，你就可以在 kibana 上看到你的日志了\n\n## logstash-forwarder 配置说明\n\n主要包括下面几个可用配置项：\n* network.servers: 用来指定远端(即 logstash indexer 角色)服务器的 IP 地址和端口。这里可以写数组，但是 logstash-forwarder 只会随机选一台作为对端发送数据，一直到对端故障，才会重选其他服务器。\n* network.ssl*: 网络交互中使用的 SSL 证书路径。\n* files.*.paths: 读取的文件路径。 logstash-forwarder 只支持两种输入，一种就是示例中用的文件方式，和 logstash 一样也支持 glob 路径，即 \"/var/log/*.log\" 这样的写法；一种是标准输入，写法为 \"paths\": [ \"-\" ]\n* files.*.fields: 给每条日志添加的固定字段，相当于 logstash 里的 add_field 参数。 注意示例中添加的是 type 字段。在 logstash-forwarder 里添加的字段是优先于 LogStash::Inputs::Lumberjack 配置里定义的字段的。所以，在本例中，即便你在 indexer 上定义 type 为 \"anything\"。事件的实际 type 依然是这里添加的 \"syslog\"。这也意味着，你在 indexer 上如果做后续判断，应该是这样：\n\n```markdown\nfilter {\n  if [type] == \"syslog\" {\n    grok {\n      match => { \"message\" => \"%{SYSLOGTIMESTAMP:syslog_timestamp} %{SYSLOGHOST:syslog_hostname} %{DATA:syslog_program}(?:\\[%{POSINT:syslog_pid}\\])?: %{GREEDYDATA:syslog_message}\" }\n    }\n  }\n}\n```\n","source":"_posts/build/logstash-forwarder安装与配置.md","raw":"\n---\ntitle: logstash-forwarder安装与配置\ndate: 2017-06-16 00:12:25\nreward: true\ncategories:\n    - build\ntags:\n    - 运维\n    - logstash-forwarder\n---\n\n## logstash-forwarder 安装\n首先，我们需要安装 logstash-forwarder 软件。官方都已经提供了软件仓库可用。在 Redhat 机器上只需要添加一个 /etc/yum.repos.d/logstash-forwarder.repo，内容如下：\n```markdown\n[logstash-forwarder]\nname=logstash-forwarder\nbaseurl=http://packages.elasticsearch.org/logstash-forwarder/centos\ngpgcheck=1\ngpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch\nenabled=1\n```\n然后运行安装命令即可：\n```markdown\nsudo yum install -y logstash-forwarder\n```\n<!--more-->\n## logstash-forwarder 配置\n   \nlogstash-forwarder 的配置文件是纯 JSON 格式。因为其轻量级的设计目的，所以可配置项很少。下面是一个 /etc/logstash-forwarder 配置示例：\n```markdown\n{\n  \"network\": {\n    \"servers\": [ \"10.18.10.2:5000\" ],\n      \"timeout\": 15,\n      \"ssl ca\" : \"/etc/pki/tls/certs/logstash-forwarder.crt\"\n      \"ssl key\": \"/etc/pki/tls/private/logstash-forwarder.key\"\n  },\n  \"files\": [\n    {\n      \"paths\": [\n        \"/var/log/message\",\n      \"/var/log/secure\"\n        ],\n      \"fields\": { \"type\": \"syslog\" }\n    },{\n          \"paths\": [\n            \"/var/log/nginx/error.log\"\n          ],\n          \"fields\": { \"type\": \"nginxerror\" },\n          \"fields\": { \"app\": \"test\" },\n          \"fields\": { \"ip\": \"172.16.0.1\"}\n        }, {\n          \"paths\":  [ \"/var/log/secure\" ],\n          \"fields\": {\"type\": \"secure\"},\n          \"fields\": {\"app\": \"test\"},\n          \"fields\": {\"ip\":\"10.1.2.3\"}\n         }\n  ]\n}\n```\n\n我们已完成了配置，当 sudo service logstash-forwarder start 之后，你就可以在 kibana 上看到你的日志了\n\n## logstash-forwarder 配置说明\n\n主要包括下面几个可用配置项：\n* network.servers: 用来指定远端(即 logstash indexer 角色)服务器的 IP 地址和端口。这里可以写数组，但是 logstash-forwarder 只会随机选一台作为对端发送数据，一直到对端故障，才会重选其他服务器。\n* network.ssl*: 网络交互中使用的 SSL 证书路径。\n* files.*.paths: 读取的文件路径。 logstash-forwarder 只支持两种输入，一种就是示例中用的文件方式，和 logstash 一样也支持 glob 路径，即 \"/var/log/*.log\" 这样的写法；一种是标准输入，写法为 \"paths\": [ \"-\" ]\n* files.*.fields: 给每条日志添加的固定字段，相当于 logstash 里的 add_field 参数。 注意示例中添加的是 type 字段。在 logstash-forwarder 里添加的字段是优先于 LogStash::Inputs::Lumberjack 配置里定义的字段的。所以，在本例中，即便你在 indexer 上定义 type 为 \"anything\"。事件的实际 type 依然是这里添加的 \"syslog\"。这也意味着，你在 indexer 上如果做后续判断，应该是这样：\n\n```markdown\nfilter {\n  if [type] == \"syslog\" {\n    grok {\n      match => { \"message\" => \"%{SYSLOGTIMESTAMP:syslog_timestamp} %{SYSLOGHOST:syslog_hostname} %{DATA:syslog_program}(?:\\[%{POSINT:syslog_pid}\\])?: %{GREEDYDATA:syslog_message}\" }\n    }\n  }\n}\n```\n","slug":"build/logstash-forwarder安装与配置","published":1,"updated":"2017-06-15T17:59:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegr9000j9vvu3crcs1gk","content":"<h2 id=\"logstash-forwarder-安装\"><a href=\"#logstash-forwarder-安装\" class=\"headerlink\" title=\"logstash-forwarder 安装\"></a>logstash-forwarder 安装</h2><p>首先，我们需要安装 logstash-forwarder 软件。官方都已经提供了软件仓库可用。在 Redhat 机器上只需要添加一个 /etc/yum.repos.d/logstash-forwarder.repo，内容如下：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[logstash-forwarder]</div><div class=\"line\">name=logstash-forwarder</div><div class=\"line\">baseurl=http://packages.elasticsearch.org/logstash-forwarder/centos</div><div class=\"line\">gpgcheck=1</div><div class=\"line\">gpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch</div><div class=\"line\">enabled=1</div></pre></td></tr></table></figure></p>\n<p>然后运行安装命令即可：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y logstash-forwarder</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h2 id=\"logstash-forwarder-配置\"><a href=\"#logstash-forwarder-配置\" class=\"headerlink\" title=\"logstash-forwarder 配置\"></a>logstash-forwarder 配置</h2><p>logstash-forwarder 的配置文件是纯 JSON 格式。因为其轻量级的设计目的，所以可配置项很少。下面是一个 /etc/logstash-forwarder 配置示例：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  \"network\": &#123;</div><div class=\"line\"><span class=\"code\">    \"servers\": [ \"10.18.10.2:5000\" ],</span></div><div class=\"line\"><span class=\"code\">      \"timeout\": 15,</span></div><div class=\"line\"><span class=\"code\">      \"ssl ca\" : \"/etc/pki/tls/certs/logstash-forwarder.crt\"</span></div><div class=\"line\"><span class=\"code\">      \"ssl key\": \"/etc/pki/tls/private/logstash-forwarder.key\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  \"files\": [</div><div class=\"line\"><span class=\"code\">    &#123;</span></div><div class=\"line\"><span class=\"code\">      \"paths\": [</span></div><div class=\"line\"><span class=\"code\">        \"/var/log/message\",</span></div><div class=\"line\"><span class=\"code\">      \"/var/log/secure\"</span></div><div class=\"line\"><span class=\"code\">        ],</span></div><div class=\"line\"><span class=\"code\">      \"fields\": &#123; \"type\": \"syslog\" &#125;</span></div><div class=\"line\"><span class=\"code\">    &#125;,&#123;</span></div><div class=\"line\"><span class=\"code\">          \"paths\": [</span></div><div class=\"line\"><span class=\"code\">            \"/var/log/nginx/error.log\"</span></div><div class=\"line\"><span class=\"code\">          ],</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"type\": \"nginxerror\" &#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"app\": \"test\" &#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"ip\": \"172.16.0.1\"&#125;</span></div><div class=\"line\"><span class=\"code\">        &#125;, &#123;</span></div><div class=\"line\"><span class=\"code\">          \"paths\":  [ \"/var/log/secure\" ],</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"type\": \"secure\"&#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"app\": \"test\"&#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"ip\":\"10.1.2.3\"&#125;</span></div><div class=\"line\"><span class=\"code\">         &#125;</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>我们已完成了配置，当 sudo service logstash-forwarder start 之后，你就可以在 kibana 上看到你的日志了</p>\n<h2 id=\"logstash-forwarder-配置说明\"><a href=\"#logstash-forwarder-配置说明\" class=\"headerlink\" title=\"logstash-forwarder 配置说明\"></a>logstash-forwarder 配置说明</h2><p>主要包括下面几个可用配置项：</p>\n<ul>\n<li>network.servers: 用来指定远端(即 logstash indexer 角色)服务器的 IP 地址和端口。这里可以写数组，但是 logstash-forwarder 只会随机选一台作为对端发送数据，一直到对端故障，才会重选其他服务器。</li>\n<li>network.ssl*: 网络交互中使用的 SSL 证书路径。</li>\n<li>files.<em>.paths: 读取的文件路径。 logstash-forwarder 只支持两种输入，一种就是示例中用的文件方式，和 logstash 一样也支持 glob 路径，即 “/var/log/</em>.log” 这样的写法；一种是标准输入，写法为 “paths”: [ “-“ ]</li>\n<li>files.*.fields: 给每条日志添加的固定字段，相当于 logstash 里的 add_field 参数。 注意示例中添加的是 type 字段。在 logstash-forwarder 里添加的字段是优先于 LogStash::Inputs::Lumberjack 配置里定义的字段的。所以，在本例中，即便你在 indexer 上定义 type 为 “anything”。事件的实际 type 依然是这里添加的 “syslog”。这也意味着，你在 indexer 上如果做后续判断，应该是这样：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">filter &#123;</div><div class=\"line\">  if [type] == \"syslog\" &#123;</div><div class=\"line\"><span class=\"code\">    grok &#123;</span></div><div class=\"line\"><span class=\"code\">      match =&gt; &#123; \"message\" =&gt; \"%&#123;SYSLOGTIMESTAMP:syslog_timestamp&#125; %&#123;SYSLOGHOST:syslog_hostname&#125; %&#123;DATA:syslog_program&#125;(?:\\[%&#123;POSINT:syslog_pid&#125;\\])?: %&#123;GREEDYDATA:syslog_message&#125;\" &#125;</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h2 id=\"logstash-forwarder-安装\"><a href=\"#logstash-forwarder-安装\" class=\"headerlink\" title=\"logstash-forwarder 安装\"></a>logstash-forwarder 安装</h2><p>首先，我们需要安装 logstash-forwarder 软件。官方都已经提供了软件仓库可用。在 Redhat 机器上只需要添加一个 /etc/yum.repos.d/logstash-forwarder.repo，内容如下：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[logstash-forwarder]</div><div class=\"line\">name=logstash-forwarder</div><div class=\"line\">baseurl=http://packages.elasticsearch.org/logstash-forwarder/centos</div><div class=\"line\">gpgcheck=1</div><div class=\"line\">gpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch</div><div class=\"line\">enabled=1</div></pre></td></tr></table></figure></p>\n<p>然后运行安装命令即可：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y logstash-forwarder</div></pre></td></tr></table></figure></p>","more":"<h2 id=\"logstash-forwarder-配置\"><a href=\"#logstash-forwarder-配置\" class=\"headerlink\" title=\"logstash-forwarder 配置\"></a>logstash-forwarder 配置</h2><p>logstash-forwarder 的配置文件是纯 JSON 格式。因为其轻量级的设计目的，所以可配置项很少。下面是一个 /etc/logstash-forwarder 配置示例：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  \"network\": &#123;</div><div class=\"line\"><span class=\"code\">    \"servers\": [ \"10.18.10.2:5000\" ],</span></div><div class=\"line\"><span class=\"code\">      \"timeout\": 15,</span></div><div class=\"line\"><span class=\"code\">      \"ssl ca\" : \"/etc/pki/tls/certs/logstash-forwarder.crt\"</span></div><div class=\"line\"><span class=\"code\">      \"ssl key\": \"/etc/pki/tls/private/logstash-forwarder.key\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  \"files\": [</div><div class=\"line\"><span class=\"code\">    &#123;</span></div><div class=\"line\"><span class=\"code\">      \"paths\": [</span></div><div class=\"line\"><span class=\"code\">        \"/var/log/message\",</span></div><div class=\"line\"><span class=\"code\">      \"/var/log/secure\"</span></div><div class=\"line\"><span class=\"code\">        ],</span></div><div class=\"line\"><span class=\"code\">      \"fields\": &#123; \"type\": \"syslog\" &#125;</span></div><div class=\"line\"><span class=\"code\">    &#125;,&#123;</span></div><div class=\"line\"><span class=\"code\">          \"paths\": [</span></div><div class=\"line\"><span class=\"code\">            \"/var/log/nginx/error.log\"</span></div><div class=\"line\"><span class=\"code\">          ],</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"type\": \"nginxerror\" &#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"app\": \"test\" &#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123; \"ip\": \"172.16.0.1\"&#125;</span></div><div class=\"line\"><span class=\"code\">        &#125;, &#123;</span></div><div class=\"line\"><span class=\"code\">          \"paths\":  [ \"/var/log/secure\" ],</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"type\": \"secure\"&#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"app\": \"test\"&#125;,</span></div><div class=\"line\"><span class=\"code\">          \"fields\": &#123;\"ip\":\"10.1.2.3\"&#125;</span></div><div class=\"line\"><span class=\"code\">         &#125;</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>我们已完成了配置，当 sudo service logstash-forwarder start 之后，你就可以在 kibana 上看到你的日志了</p>\n<h2 id=\"logstash-forwarder-配置说明\"><a href=\"#logstash-forwarder-配置说明\" class=\"headerlink\" title=\"logstash-forwarder 配置说明\"></a>logstash-forwarder 配置说明</h2><p>主要包括下面几个可用配置项：</p>\n<ul>\n<li>network.servers: 用来指定远端(即 logstash indexer 角色)服务器的 IP 地址和端口。这里可以写数组，但是 logstash-forwarder 只会随机选一台作为对端发送数据，一直到对端故障，才会重选其他服务器。</li>\n<li>network.ssl*: 网络交互中使用的 SSL 证书路径。</li>\n<li>files.<em>.paths: 读取的文件路径。 logstash-forwarder 只支持两种输入，一种就是示例中用的文件方式，和 logstash 一样也支持 glob 路径，即 “/var/log/</em>.log” 这样的写法；一种是标准输入，写法为 “paths”: [ “-“ ]</li>\n<li>files.*.fields: 给每条日志添加的固定字段，相当于 logstash 里的 add_field 参数。 注意示例中添加的是 type 字段。在 logstash-forwarder 里添加的字段是优先于 LogStash::Inputs::Lumberjack 配置里定义的字段的。所以，在本例中，即便你在 indexer 上定义 type 为 “anything”。事件的实际 type 依然是这里添加的 “syslog”。这也意味着，你在 indexer 上如果做后续判断，应该是这样：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">filter &#123;</div><div class=\"line\">  if [type] == \"syslog\" &#123;</div><div class=\"line\"><span class=\"code\">    grok &#123;</span></div><div class=\"line\"><span class=\"code\">      match =&gt; &#123; \"message\" =&gt; \"%&#123;SYSLOGTIMESTAMP:syslog_timestamp&#125; %&#123;SYSLOGHOST:syslog_hostname&#125; %&#123;DATA:syslog_program&#125;(?:\\[%&#123;POSINT:syslog_pid&#125;\\])?: %&#123;GREEDYDATA:syslog_message&#125;\" &#125;</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"title":"jetty maven plugin config","date":"2017-05-26T14:40:56.000Z","_content":"\nURL：[http/https]://hostname:port/contextPath/servletPath/pathInfo\n\n如果没有contextPath，则默认使用root上下文，root上下文的路径为\"/\"。\n\nwarName.war\n在没有XML IoC文件的情况下：\n\n* 如果WAR文件名是myapp.war，那么上下文路径是：/myapp；\n* 如果WAR文件名是ROOT.war，那么上下文路径是：/；\n* 如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。\n\n注意这个contextPath，在下面的设置中设置了url路径会发生变化。\n\n[jetty-maven-plugin-config](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)\n\n<!--more-->\n仅作记录，查字典用。此文从上述网址复制而来。\n\nThe Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.\n\n**You should use Maven 3.3+ for this plugin.**\n\nWhile the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.\n\n## Quick Start: Get Up and Running\n\nFirst, add jetty-maven-plugin to your pom.xml definition:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n</plugin>\n```\nThen, from the same directory as your root pom.xml, type:\n\n> mvn jetty:run\n\nThis starts Jetty and serves up your project on http://localhost:8080/.\n\nJetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.\n\nYou can terminate the plugin with a ctrl-c in the terminal window where it is running.\n\n Note\nThe classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.\n\n## Supported Goals\n\nThe Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.\n\nTo see a list of all goals supported by the Jetty Maven plugin, do:\n\n> mvn jetty:help\nTo see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:\n\n> mvn jetty:help -Ddetail=true -Dgoal= <goal name>\n\n## Configuring the Jetty Container\n\nThese configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:\n\n### httpConnector\nOptional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:\n\n#### port\nThe port number for the connector to listen on. By default it is 8080.\n#### host\nThe particular interface for the connector to listen on. By default, all interfaces.\n#### name\nThe name of the connector, which is useful for configuring contexts to respond only on particular connectors.\n#### idleTimeout\nMaximum idle time for a connection.\n#### soLinger\nThe socket linger time.\n\nYou could instead configure the connectors in a standard jetty xml config file and put its location into the ` jettyXml` parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.\n\n### jettyXml\nOptional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.\n### scanIntervalSeconds\nThe pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.\n### reload\nDefault value is \"automatic\", used in conjunction with a non-zero `scanIntervalSeconds` causes automatic hot redeploy when changes are detected. Set to \"manual\" instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.\n### dumpOnStart\nOptional. Default value is false. If true, then jetty will dump out the server structure on start.\n### loginServices\nOptional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.\n### requestLog\nOptional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:\n\nIn a jetty xml config file, as specified in the jettyXml parameter.\nIn a context xml config file, as specified in the contextXml parameter.\nIn the webApp element.\nSee Configuring Request Logs for more information.\n\n### server\nOptional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.\n### stopPort\nOptional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.\n### stopKey\nOptional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.\n### systemProperties\nOptional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.\n### systemPropertiesFile\nOptional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.\n### skip\nDefault is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.\n### useProvidedScope\nDefault value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as \"provided\" indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.\n### excludedGoals\nOptional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.\n\n## Configuring a Https Connector\n\nIn order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:\n\n### jetty.xml\nSets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:\n```\n    <New id=\"httpConfig\" class=\"org.eclipse.jetty.server.HttpConfiguration\">\n      <Set name=\"secureScheme\">https</Set>\n      <Set name=\"securePort\"><Property name=\"jetty.secure.port\" default=\"8443\" /></Set>\n      <Set name=\"outputBufferSize\">32768</Set>\n      <Set name=\"requestHeaderSize\">8192</Set>\n      <Set name=\"responseHeaderSize\">8192</Set>\n      <Set name=\"sendServerVersion\">true</Set>\n      <Set name=\"sendDateHeader\">false</Set>\n      <Set name=\"headerCacheSize\">512</Set>\n\n      <!-- Uncomment to enable handling of X-Forwarded- style headers\n      <Call name=\"addCustomizer\">\n        <Arg><New class=\"org.eclipse.jetty.server.ForwardedRequestCustomizer\"/></Arg>\n      </Call>\n      -->\n    </New>\n```\n\n### jetty-ssl.xml\nSet up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Base SSL configuration                                        -->\n<!-- This configuration needs to be used together with 1 or more   -->\n<!-- of jetty-https.xml or jetty-http2.xml                         -->\n<!-- ============================================================= -->\n<Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\">\n\n  <!-- =========================================================== -->\n  <!-- Add a SSL Connector with no protocol factories              -->\n  <!-- =========================================================== -->\n  <Call  name=\"addConnector\">\n    <Arg>\n      <New id=\"sslConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n        <Arg name=\"server\"><Ref refid=\"Server\" /></Arg>\n        <Arg name=\"acceptors\" type=\"int\"><Property name=\"jetty.ssl.acceptors\" deprecated=\"ssl.acceptors\" default=\"-1\"/></Arg>\n        <Arg name=\"selectors\" type=\"int\"><Property name=\"jetty.ssl.selectors\" deprecated=\"ssl.selectors\" default=\"-1\"/></Arg>\n        <Arg name=\"factories\">\n          <Array type=\"org.eclipse.jetty.server.ConnectionFactory\">\n            <!-- uncomment to support proxy protocol\n            <Item>\n              <New class=\"org.eclipse.jetty.server.ProxyConnectionFactory\"/>\n            </Item>-->\n          </Array>\n        </Arg>\n\n        <Set name=\"host\"><Property name=\"jetty.ssl.host\" deprecated=\"jetty.host\" /></Set>\n        <Set name=\"port\"><Property name=\"jetty.ssl.port\" deprecated=\"ssl.port\" default=\"8443\" /></Set>\n        <Set name=\"idleTimeout\"><Property name=\"jetty.ssl.idleTimeout\" deprecated=\"ssl.timeout\" default=\"30000\"/></Set>\n        <Set name=\"soLingerTime\"><Property name=\"jetty.ssl.soLingerTime\" deprecated=\"ssl.soLingerTime\" default=\"-1\"/></Set>\n        <Set name=\"acceptorPriorityDelta\"><Property name=\"jetty.ssl.acceptorPriorityDelta\" deprecated=\"ssl.acceptorPriorityDelta\" default=\"0\"/></Set>\n        <Set name=\"acceptQueueSize\"><Property name=\"jetty.ssl.acceptQueueSize\" deprecated=\"ssl.acceptQueueSize\" default=\"0\"/></Set>\n      </New>\n    </Arg>\n  </Call>\n\n  <!-- =========================================================== -->\n  <!-- Create a TLS specific HttpConfiguration based on the        -->\n  <!-- common HttpConfiguration defined in jetty.xml               -->\n  <!-- Add a SecureRequestCustomizer to extract certificate and    -->\n  <!-- session information                                         -->\n  <!-- =========================================================== -->\n  <New id=\"sslHttpConfig\" class=\"org.eclipse.jetty.server.HttpConfiguration\">\n    <Arg><Ref refid=\"httpConfig\"/></Arg>\n    <Call name=\"addCustomizer\">\n      <Arg>\n        <New class=\"org.eclipse.jetty.server.SecureRequestCustomizer\">\n          <Arg name=\"sniHostCheck\" type=\"boolean\"><Property name=\"jetty.ssl.sniHostCheck\" default=\"true\"/></Arg>\n          <Arg name=\"stsMaxAgeSeconds\" type=\"int\"><Property name=\"jetty.ssl.stsMaxAgeSeconds\" default=\"-1\"/></Arg>\n          <Arg name=\"stsIncludeSubdomains\" type=\"boolean\"><Property name=\"jetty.ssl.stsIncludeSubdomains\" default=\"false\"/></Arg>\n        </New>\n      </Arg>\n    </Call>\n  </New>\n\n</Configure>\n```\n\n### jetty-https.xml\nSet up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Configure a HTTPS connector.                                  -->\n<!-- This configuration must be used in conjunction with jetty.xml -->\n<!-- and jetty-ssl.xml.                                            -->\n<!-- ============================================================= -->\n<Configure id=\"sslConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n\n  <Call name=\"addIfAbsentConnectionFactory\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.server.SslConnectionFactory\">\n        <Arg name=\"next\">http/1.1</Arg>\n        <Arg name=\"sslContextFactory\"><Ref refid=\"sslContextFactory\"/></Arg>\n      </New>\n    </Arg>\n  </Call>\n\n  <Call name=\"addConnectionFactory\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.server.HttpConnectionFactory\">\n        <Arg name=\"config\"><Ref refid=\"sslHttpConfig\" /></Arg>\n        <Arg name=\"compliance\"><Call class=\"org.eclipse.jetty.http.HttpCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.http.compliance\" default=\"RFC7230\"/></Arg></Call></Arg>\n      </New>\n    </Arg>\n  </Call>\n\n</Configure>\n```\nNow you need to let the plugin know to apply the files above:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <jettyXml>jetty.xml,jetty-ssl.xml,jetty-https.xml</jettyXml>\n  </configuration>\n</plugin>\n```\n\n> Just like with an installed distribution of Jetty, the ordering of the xml files is significant.\n\nYou can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Configure the Jetty Server instance with an ID \"Server\"       -->\n<!-- by adding a HTTP connector.                                   -->\n<!-- This configuration must be used in conjunction with jetty.xml -->\n<!-- ============================================================= -->\n<Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\">\n\n  <!-- =========================================================== -->\n  <!-- Add a HTTP Connector.                                       -->\n  <!-- Configure an o.e.j.server.ServerConnector with a single     -->\n  <!-- HttpConnectionFactory instance using the common httpConfig  -->\n  <!-- instance defined in jetty.xml                               -->\n  <!--                                                             -->\n  <!-- Consult the javadoc of o.e.j.server.ServerConnector and     -->\n  <!-- o.e.j.server.HttpConnectionFactory for all configuration    -->\n  <!-- that may be set here.                                       -->\n  <!-- =========================================================== -->\n  <Call name=\"addConnector\">\n    <Arg>\n      <New id=\"httpConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n        <Arg name=\"server\"><Ref refid=\"Server\" /></Arg>\n        <Arg name=\"acceptors\" type=\"int\"><Property name=\"jetty.http.acceptors\" deprecated=\"http.acceptors\" default=\"-1\"/></Arg>\n        <Arg name=\"selectors\" type=\"int\"><Property name=\"jetty.http.selectors\" deprecated=\"http.selectors\" default=\"-1\"/></Arg>\n        <Arg name=\"factories\">\n          <Array type=\"org.eclipse.jetty.server.ConnectionFactory\">\n            <Item>\n              <New class=\"org.eclipse.jetty.server.HttpConnectionFactory\">\n                <Arg name=\"config\"><Ref refid=\"httpConfig\" /></Arg>\n                <Arg name=\"compliance\"><Call class=\"org.eclipse.jetty.http.HttpCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.http.compliance\" default=\"RFC7230\"/></Arg></Call></Arg>\n              </New>\n            </Item>\n          </Array>\n        </Arg>\n        <Set name=\"host\"><Property name=\"jetty.http.host\" deprecated=\"jetty.host\" /></Set>\n        <Set name=\"port\"><Property name=\"jetty.http.port\" deprecated=\"jetty.port\" default=\"8080\" /></Set>\n        <Set name=\"idleTimeout\"><Property name=\"jetty.http.idleTimeout\" deprecated=\"http.timeout\" default=\"30000\"/></Set>\n        <Set name=\"soLingerTime\"><Property name=\"jetty.http.soLingerTime\" deprecated=\"http.soLingerTime\" default=\"-1\"/></Set>\n        <Set name=\"acceptorPriorityDelta\"><Property name=\"jetty.http.acceptorPriorityDelta\" deprecated=\"http.acceptorPriorityDelta\" default=\"0\"/></Set>\n        <Set name=\"acceptQueueSize\"><Property name=\"jetty.http.acceptQueueSize\" deprecated=\"http.acceptQueueSize\" default=\"0\"/></Set>\n      </New>\n    </Arg>\n  </Call>\n\n</Configure>\n```\nNow we add it to the list of configs for the plugin to apply:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <jettyXml>jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml</jettyXml>\n  </configuration>\n</plugin>\n```\nAlternatively, you can use the httpConnector configuration element inside the pom instead as described above.\n\n## Configuring Your WebApp\n\nThese configuration parameters apply to your webapp. They are common to almost all goals.\n\n### webApp\nThis is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:\n\n#### contextPath\nThe context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.\n#### descriptor\nThe path to the web.xml file for your webapp.\n#### defaultsDescriptor\nThe path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.\n#### overrideDescriptor\nThe path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.\n#### tempDirectory\nThe path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.\n#### baseResource\nThe path from which Jetty serves static resources. Defaults to src/main/webapp.\n#### resourceBases\nUse instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.\n#### baseAppFirst\nDefaults to \"true\". Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.\n#### containerIncludeJarPattern\nDefaults to .*/javax.servlet-[^/]*\\.jar$|.*/servlet-api-[^/]*\\.jar$|.*javax.servlet.jsp.jstl-[^/]*\\.jar|.*taglibs-standard-impl-.*\\.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.\n#### webInfIncludeJarPattern\nDefaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.\n### contextXml\nThe path to a context xml file that is applied to your webapp AFTER the webApp element.\n\n## jetty:run\n\nThe run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:\n\n* resources in ${project.basedir}/src/main/webapp\n* classes in ${project.build.outputDirectory}\n* web.xml in ${project.basedir}/src/main/webapp/WEB-INF/\nThe plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.\n\nYou do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.\n\nHere is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\n### Configuration\n\nIn addition to the webApp element that is common to most goals, the jetty:run goal supports:\n\n#### classesDirectory\nLocation of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.\n#### testClassesDirectory\nLocation of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.\n#### useTestScope\nIf true, the classes from testClassesDirectory and dependencies of scope \"test\" are placed first on the classpath. By default this is false.\n#### webAppSourceDirectory\nBy default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.\n#### jettyEnvXml\nOptional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a ` jettyConfig` file).\n#### scanTargets\nOptional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.\n#### scanTargetPatterns\nOptional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.\n#### scanClassesPattern\nSince 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.\n#### scanTestClassesPattern\nSince 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.\nHere’s an example:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>jetty-maven-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <webAppSourceDirectory>${project.basedir}/src/staticfiles</webAppSourceDirectory>\n        <webApp>\n          <contextPath>/</contextPath>\n          <descriptor>${project.basedir}/src/over/here/web.xml</descriptor>\n          <jettyEnvXml>${project.basedir}/src/over/here/jetty-env.xml</jettyEnvXml>\n        </webApp>\n        <classesDirectory>${project.basedir}/somewhere/else</classesDirectory>\n        <scanClassesPattern>\n          <excludes>\n             <exclude>**/Foo.class</exclude>\n          </excludes>\n        </scanClassesPattern>\n        <scanTargets>\n          <scanTarget>src/mydir</scanTarget>\n          <scanTarget>src/myfile.txt</scanTarget>\n        </scanTargets>\n        <scanTargetPatterns>\n          <scanTargetPattern>\n            <directory>src/other-resources</directory>\n            <includes>\n              <include>**/*.xml</include>\n              <include>**/*.properties</include>\n            </includes>\n            <excludes>\n              <exclude>**/myspecial.xml</exclude>\n              <exclude>**/myspecial.properties</exclude>\n            </excludes>\n          </scanTargetPattern>\n        </scanTargetPatterns>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\nIf, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.\n\n## jetty:run-war\n\nThis goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.\n\n### Configuration\n\n#### war\nThe location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.\nHere’s how to set it:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>jetty-maven-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <war>${project.basedir}/target/mycustom.war</war>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:run-exploded\n\nThe run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.\n\n### Configuration\n\n#### war\nThe location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.\nHere’s how to set it:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>maven-jetty-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <war>${project.basedir}/target/myfunkywebapp</war>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:deploy-war\n\nThis is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the \"package\" phase - you may bind it to any phase to use it.\n\n### Configuration\n\n#### war\nThe location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.\n#### daemon\nIf true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.\nHere’s the configuration:\n```\n<project>\n...\n  <plugins>\n...\n  <plugin>\n    <groupId>org.eclipse.jetty</groupId>\n    <artifactId>jetty-maven-plugin</artifactId>\n    <version>9.4.5.v20170502</version>\n    <configuration>\n      <war>/opt/special/some-app.war</war>\n      <stopKey>alpha</stopKey>\n      <stopPort>9099</stopPort>\n    </configuration>\n    <executions>\n      <execution>\n        <id>start-jetty</id>\n        <phase>test-compile</phase>\n        <goals>\n          <goal>deploy-war</goal>\n        </goals>\n      </execution>\n      <execution>\n        <id>stop-jetty</id>\n        <phase>test</phase>\n        <goals>\n          <goal>stop</goal>\n        </goals>\n      </execution>\n     </executions>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:run-forked\n\nThis goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.\n\n### Configuration\n\nThe available configuration parameters - in addition to those for the jetty:run goal - are:\n\n#### jvmArgs\nOptional. A string representing arbitrary arguments to pass to the forked JVM.\n#### waitForChild\nDefault is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.\n#### maxStartupLines\nDefault is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.\nSome of the container configuration parameters are NOT available with this goal:\n\n#### scanIntervalSeconds\nNot supported. The forked jetty will not monitor and redeploy the webapp.\n#### reload\nNot supported. The forked jetty will not redeploy the webapp.\n#### httpConnector\nNot supported. To define custom connectors use a jetty xml file instead.\n#### loginServices\nNot supported. To define LoginServices use a jetty xml or context xml file instead.\n#### requestLog\nNot supported. To define a RequestLog setup, use a jetty xml or context xml file instead.\n#### systemProperties\nNot supported. Use the jvmArgs parameter to pass system properties to the forked process.\nTo deploy your unassembled web app to Jetty running in a new JVM:\n\n## mvn jetty:run-forked\nJetty continues to execute until you either:\n\nPress ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)\nUse jetty:stop to stop the forked JVM, which also stops the plugin.\n\nIf you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.\n\n## jetty:start\n\nThis goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.\n\nFor example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <stopKey>foo</stopKey>\n    <stopPort>9999</stopPort>\n  </configuration>\n  <executions>\n    <execution>\n      <id>start-jetty</id>\n      <phase>pre-integration-test</phase>\n      <goals>\n        <goal>start</goal>\n      </goals>\n      <configuration>\n        <scanIntervalSeconds>0</scanIntervalSeconds>\n      </configuration>\n    </execution>\n    <execution>\n      <id>stop-jetty</id>\n      <phase>post-integration-test</phase>\n       <goals>\n         <goal>stop</goal>\n       </goals>\n     </execution>\n  </executions>\n</plugin>\n```\n## jetty:stop\n\nThe stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.\n\n### stopPort\nA port number for Jetty to listen on to receive a stop command to cause it to shutdown.\n### stopKey\nA string value sent to the stopPort to validate the stop command.\n### stopWait\nThe maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.\nHere’s a configuration example:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <stopPort>9966</stopPort>\n    <stopKey>foo</stopKey>\n    <stopWait>10</stopWait>\n  </configuration>\n</plugin>\n```\nThen, while Jetty is running (in another window), type:\n\n## mvn jetty:stop\nThe stopPort must be free on the machine you are running on. If this is not the case, you will get an \"Address already in use\" error message after the \"Started ServerConnector …​\" message.\n\n## jetty:effective-web-xml\n\nThis goal calculates a synthetic web.xml (the \"effective web.xml\") according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml`s, `web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).\n\nThe following configuration parameters allow you to save the file:\n\n### deleteOnExit\nBy default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.\n### effectiveWebXml\nThe full path name of a file into which you would like the effective web xml generated.\nYou can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:\n```\n<listener origin=\"DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21\">\n<listener origin=\"WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22\">\n<servlet-class origin=\"FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23\">\n<servlet-class origin=\"@WebServlet(com.acme.test.TestServlet):24\">\n```\nTo generate origin informatino, use the following configuration parameters on the webApp element:\n\n### originAttribute\nThe name of the attribute that will contain the origin. By default it is origin.\n### generateOrigin\nFalse by default. If true, will force the generation of the originAttribute onto each element.\n## Using Overlaid wars\n\nIf your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.\n\n## With maven-war-plugin\n\nThe maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.\n\nSuppose your webapp depends on the following wars:\n```\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>X</artifactId>\n  <type>war</type>\n</dependency>\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>Y</artifactId>\n  <type>war</type>\n</dependency>\n```\nContaining:\n```\nWebAppX:\n\n /foo.jsp\n /bar.jsp\n /WEB-INF/web.xml\n\nWebAppY:\n\n /bar.jsp\n /baz.jsp\n /WEB-INF/web.xml\n /WEB-INF/special.xml\n ```\nThey are configured for the maven-war-plugin:\n```\n<plugin>\n  <groupId>org.apache.maven.plugins</groupId>\n  <artifactId>maven-war-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <overlays>\n      <overlay>\n        <groupId>com.acme</groupId>\n        <artifactId>X</artifactId>\n        <excludes>\n          <exclude>bar.jsp</exclude>\n        </excludes>\n      </overlay>\n      <overlay>\n        <groupId>com.acme</groupId>\n        <artifactId>Y</artifactId>\n        <excludes>\n          <exclude>baz.jsp</exclude>\n        </excludes>\n      </overlay>\n      <overlay>\n      </overlay>\n    </overlays>\n  </configuration>\n</plugin>\n```\nThen executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay/> element in the maven-war-plugin. You can either use that, or specify the <baseAppFirst>false</baseAppFirst> parameter to the jetty-maven-plugin.\n\nMoreover, due to the exclusions specified above, a request for the resource ` bar.jsp` would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.\n\n## Without maven-war-plugin\n\nThe algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseAppFirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.\n\nFor example, suppose our webapp depends on these two wars:\n```\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>X</artifactId>\n  <type>war</type>\n</dependency>\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>Y</artifactId>\n  <type>war</type>\n</dependency>\n```\nSuppose the webapps contain:\n```\nWebAppX:\n\n /foo.jsp\n /bar.jsp\n /WEB-INF/web.xml\n\nWebAppY:\n\n /bar.jsp\n /baz.jsp\n /WEB-INF/web.xml\n /WEB-INF/special.xml\n ```\nThen our webapp has available these additional resources:\n```\n/foo.jsp (X)\n/bar.jsp (X)\n/baz.jsp (Y)\n/WEB-INF/web.xml (X)\n/WEB-INF/special.xml (Y)\n```\n## Configuring Security Settings\n\nYou can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <loginServices>\n      <loginService implementation=\"org.eclipse.jetty.security.HashLoginService\">\n        <name>Test Realm</name>\n        <config>${project.basedir}/src/etc/realm.properties</config>\n      </loginService>\n    </loginServices>\n  </configuration>\n</plugin>\n```\n## Using Multiple Webapp Root Directories\n\nIf you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.\n\nHere is a configuration example:\n```\n<configuration>\n  <webApp>\n    <contextPath>/${build.finalName}</contextPath>\n    <baseResource implementation=\"org.eclipse.jetty.util.resource.ResourceCollection\">\n      <resourcesAsCSV>src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder</resourcesAsCSV>\n    </baseResource>\n  </webApp>\n</configuration>\n```\n## Running More than One Webapp\n\nYou can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contextHandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:\n\nPutting the configuration in webapp A’s pom.xml:\n\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <contextHandlers>\n      <contextHandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <war>${project.basedir}../../B.war</war>\n        <contextPath>/B</contextPath>\n      </contextHandler>\n      <contextHandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <war>${project.basedir}../../C.war</war>\n        <contextPath>/C</contextPath>\n      </contextHandler>\n    </contextHandlers>\n  </configuration>\n</plugin>\n Important\nIf the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.\n\nAlternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:\n```\n<Ref refid=\"Contexts\">\n  <Call name=\"addHandler\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <Set name=\"contextPath\">/B</Set>\n        <Set name=\"war\">../../B.war</Set>\n      </New>\n    </Arg>\n  </Call>\n  <Call>\n    <Arg>\n      <New class=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <Set name=\"contextPath\">/C</Set>\n        <Set name=\"war\">../../C.war</Set>\n      </New>\n    </Arg>\n  </Call>\n</Ref>\n```\nThen configure the location of this jetty.xml file into webapp A’s jetty plugin:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <jettyXml>src/main/etc/jetty.xml</jettyXml>\n  </configuration>\n</plugin>\n```\nFor either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.\n\n## Setting System Properties\n\nYou can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.\n\nHowever, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:\n```\n<plugin>\n  <groupId>org.codehaus.mojo</groupId>\n  <artifactId>properties-maven-plugin</artifactId>\n  <version>1.0-alpha-2</version>\n  <executions>\n    <execution>\n      <goals>\n        <goal>set-system-properties</goal>\n      </goals>\n      <configuration>\n        <properties>\n          <property>\n            <name>logback.configurationFile</name>\n            <value>${project.baseUri}/resources/logback.xml</value>\n          </property>\n        </properties>\n      </configuration>\n    </execution>\n  </executions>\n</plugin>\n```\n Note\nIf a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).\n\n## Specifying System Properties in the POM\n\nHere’s an example of how to specify System properties in the POM:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemProperties>\n      <systemProperty>\n        <name>fooprop</name>\n        <value>222</value>\n      </systemProperty>\n    </systemProperties>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nTo change the default behavior so that these system properties override those on the command line, use the <force> parameter:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemProperties>\n      <force>true</force>\n      <systemProperty>\n       <name>fooprop</name>\n       <value>222</value>\n     </systemProperty>\n    </systemProperties>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nSpecifying System Properties in a File\n\nYou can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.\n\nSuppose we have a file called mysys.props which contains the following:\n\n> fooprop=222\nThis can be configured on the plugin like so:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemPropertiesFile>${project.basedir}/mysys.props</systemPropertiesFile>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nYou can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.","source":"_posts/build/jetty-maven-plugin-config.md","raw":"\n---\ntitle: jetty maven plugin config\ndate: 2017-05-26 22:40:56\ncategories:\n    - build\ntags: \n    - jetty\n    - maven\n    - config\n---\n\nURL：[http/https]://hostname:port/contextPath/servletPath/pathInfo\n\n如果没有contextPath，则默认使用root上下文，root上下文的路径为\"/\"。\n\nwarName.war\n在没有XML IoC文件的情况下：\n\n* 如果WAR文件名是myapp.war，那么上下文路径是：/myapp；\n* 如果WAR文件名是ROOT.war，那么上下文路径是：/；\n* 如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。\n\n注意这个contextPath，在下面的设置中设置了url路径会发生变化。\n\n[jetty-maven-plugin-config](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)\n\n<!--more-->\n仅作记录，查字典用。此文从上述网址复制而来。\n\nThe Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.\n\n**You should use Maven 3.3+ for this plugin.**\n\nWhile the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.\n\n## Quick Start: Get Up and Running\n\nFirst, add jetty-maven-plugin to your pom.xml definition:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n</plugin>\n```\nThen, from the same directory as your root pom.xml, type:\n\n> mvn jetty:run\n\nThis starts Jetty and serves up your project on http://localhost:8080/.\n\nJetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.\n\nYou can terminate the plugin with a ctrl-c in the terminal window where it is running.\n\n Note\nThe classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.\n\n## Supported Goals\n\nThe Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.\n\nTo see a list of all goals supported by the Jetty Maven plugin, do:\n\n> mvn jetty:help\nTo see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:\n\n> mvn jetty:help -Ddetail=true -Dgoal= <goal name>\n\n## Configuring the Jetty Container\n\nThese configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:\n\n### httpConnector\nOptional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:\n\n#### port\nThe port number for the connector to listen on. By default it is 8080.\n#### host\nThe particular interface for the connector to listen on. By default, all interfaces.\n#### name\nThe name of the connector, which is useful for configuring contexts to respond only on particular connectors.\n#### idleTimeout\nMaximum idle time for a connection.\n#### soLinger\nThe socket linger time.\n\nYou could instead configure the connectors in a standard jetty xml config file and put its location into the ` jettyXml` parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.\n\n### jettyXml\nOptional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.\n### scanIntervalSeconds\nThe pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.\n### reload\nDefault value is \"automatic\", used in conjunction with a non-zero `scanIntervalSeconds` causes automatic hot redeploy when changes are detected. Set to \"manual\" instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.\n### dumpOnStart\nOptional. Default value is false. If true, then jetty will dump out the server structure on start.\n### loginServices\nOptional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.\n### requestLog\nOptional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:\n\nIn a jetty xml config file, as specified in the jettyXml parameter.\nIn a context xml config file, as specified in the contextXml parameter.\nIn the webApp element.\nSee Configuring Request Logs for more information.\n\n### server\nOptional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.\n### stopPort\nOptional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.\n### stopKey\nOptional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.\n### systemProperties\nOptional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.\n### systemPropertiesFile\nOptional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.\n### skip\nDefault is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.\n### useProvidedScope\nDefault value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as \"provided\" indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.\n### excludedGoals\nOptional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.\n\n## Configuring a Https Connector\n\nIn order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:\n\n### jetty.xml\nSets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:\n```\n    <New id=\"httpConfig\" class=\"org.eclipse.jetty.server.HttpConfiguration\">\n      <Set name=\"secureScheme\">https</Set>\n      <Set name=\"securePort\"><Property name=\"jetty.secure.port\" default=\"8443\" /></Set>\n      <Set name=\"outputBufferSize\">32768</Set>\n      <Set name=\"requestHeaderSize\">8192</Set>\n      <Set name=\"responseHeaderSize\">8192</Set>\n      <Set name=\"sendServerVersion\">true</Set>\n      <Set name=\"sendDateHeader\">false</Set>\n      <Set name=\"headerCacheSize\">512</Set>\n\n      <!-- Uncomment to enable handling of X-Forwarded- style headers\n      <Call name=\"addCustomizer\">\n        <Arg><New class=\"org.eclipse.jetty.server.ForwardedRequestCustomizer\"/></Arg>\n      </Call>\n      -->\n    </New>\n```\n\n### jetty-ssl.xml\nSet up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Base SSL configuration                                        -->\n<!-- This configuration needs to be used together with 1 or more   -->\n<!-- of jetty-https.xml or jetty-http2.xml                         -->\n<!-- ============================================================= -->\n<Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\">\n\n  <!-- =========================================================== -->\n  <!-- Add a SSL Connector with no protocol factories              -->\n  <!-- =========================================================== -->\n  <Call  name=\"addConnector\">\n    <Arg>\n      <New id=\"sslConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n        <Arg name=\"server\"><Ref refid=\"Server\" /></Arg>\n        <Arg name=\"acceptors\" type=\"int\"><Property name=\"jetty.ssl.acceptors\" deprecated=\"ssl.acceptors\" default=\"-1\"/></Arg>\n        <Arg name=\"selectors\" type=\"int\"><Property name=\"jetty.ssl.selectors\" deprecated=\"ssl.selectors\" default=\"-1\"/></Arg>\n        <Arg name=\"factories\">\n          <Array type=\"org.eclipse.jetty.server.ConnectionFactory\">\n            <!-- uncomment to support proxy protocol\n            <Item>\n              <New class=\"org.eclipse.jetty.server.ProxyConnectionFactory\"/>\n            </Item>-->\n          </Array>\n        </Arg>\n\n        <Set name=\"host\"><Property name=\"jetty.ssl.host\" deprecated=\"jetty.host\" /></Set>\n        <Set name=\"port\"><Property name=\"jetty.ssl.port\" deprecated=\"ssl.port\" default=\"8443\" /></Set>\n        <Set name=\"idleTimeout\"><Property name=\"jetty.ssl.idleTimeout\" deprecated=\"ssl.timeout\" default=\"30000\"/></Set>\n        <Set name=\"soLingerTime\"><Property name=\"jetty.ssl.soLingerTime\" deprecated=\"ssl.soLingerTime\" default=\"-1\"/></Set>\n        <Set name=\"acceptorPriorityDelta\"><Property name=\"jetty.ssl.acceptorPriorityDelta\" deprecated=\"ssl.acceptorPriorityDelta\" default=\"0\"/></Set>\n        <Set name=\"acceptQueueSize\"><Property name=\"jetty.ssl.acceptQueueSize\" deprecated=\"ssl.acceptQueueSize\" default=\"0\"/></Set>\n      </New>\n    </Arg>\n  </Call>\n\n  <!-- =========================================================== -->\n  <!-- Create a TLS specific HttpConfiguration based on the        -->\n  <!-- common HttpConfiguration defined in jetty.xml               -->\n  <!-- Add a SecureRequestCustomizer to extract certificate and    -->\n  <!-- session information                                         -->\n  <!-- =========================================================== -->\n  <New id=\"sslHttpConfig\" class=\"org.eclipse.jetty.server.HttpConfiguration\">\n    <Arg><Ref refid=\"httpConfig\"/></Arg>\n    <Call name=\"addCustomizer\">\n      <Arg>\n        <New class=\"org.eclipse.jetty.server.SecureRequestCustomizer\">\n          <Arg name=\"sniHostCheck\" type=\"boolean\"><Property name=\"jetty.ssl.sniHostCheck\" default=\"true\"/></Arg>\n          <Arg name=\"stsMaxAgeSeconds\" type=\"int\"><Property name=\"jetty.ssl.stsMaxAgeSeconds\" default=\"-1\"/></Arg>\n          <Arg name=\"stsIncludeSubdomains\" type=\"boolean\"><Property name=\"jetty.ssl.stsIncludeSubdomains\" default=\"false\"/></Arg>\n        </New>\n      </Arg>\n    </Call>\n  </New>\n\n</Configure>\n```\n\n### jetty-https.xml\nSet up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Configure a HTTPS connector.                                  -->\n<!-- This configuration must be used in conjunction with jetty.xml -->\n<!-- and jetty-ssl.xml.                                            -->\n<!-- ============================================================= -->\n<Configure id=\"sslConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n\n  <Call name=\"addIfAbsentConnectionFactory\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.server.SslConnectionFactory\">\n        <Arg name=\"next\">http/1.1</Arg>\n        <Arg name=\"sslContextFactory\"><Ref refid=\"sslContextFactory\"/></Arg>\n      </New>\n    </Arg>\n  </Call>\n\n  <Call name=\"addConnectionFactory\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.server.HttpConnectionFactory\">\n        <Arg name=\"config\"><Ref refid=\"sslHttpConfig\" /></Arg>\n        <Arg name=\"compliance\"><Call class=\"org.eclipse.jetty.http.HttpCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.http.compliance\" default=\"RFC7230\"/></Arg></Call></Arg>\n      </New>\n    </Arg>\n  </Call>\n\n</Configure>\n```\nNow you need to let the plugin know to apply the files above:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <jettyXml>jetty.xml,jetty-ssl.xml,jetty-https.xml</jettyXml>\n  </configuration>\n</plugin>\n```\n\n> Just like with an installed distribution of Jetty, the ordering of the xml files is significant.\n\nYou can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:\n```\n<?xml version=\"1.0\"?>\n<!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_3.dtd\">\n\n<!-- ============================================================= -->\n<!-- Configure the Jetty Server instance with an ID \"Server\"       -->\n<!-- by adding a HTTP connector.                                   -->\n<!-- This configuration must be used in conjunction with jetty.xml -->\n<!-- ============================================================= -->\n<Configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\">\n\n  <!-- =========================================================== -->\n  <!-- Add a HTTP Connector.                                       -->\n  <!-- Configure an o.e.j.server.ServerConnector with a single     -->\n  <!-- HttpConnectionFactory instance using the common httpConfig  -->\n  <!-- instance defined in jetty.xml                               -->\n  <!--                                                             -->\n  <!-- Consult the javadoc of o.e.j.server.ServerConnector and     -->\n  <!-- o.e.j.server.HttpConnectionFactory for all configuration    -->\n  <!-- that may be set here.                                       -->\n  <!-- =========================================================== -->\n  <Call name=\"addConnector\">\n    <Arg>\n      <New id=\"httpConnector\" class=\"org.eclipse.jetty.server.ServerConnector\">\n        <Arg name=\"server\"><Ref refid=\"Server\" /></Arg>\n        <Arg name=\"acceptors\" type=\"int\"><Property name=\"jetty.http.acceptors\" deprecated=\"http.acceptors\" default=\"-1\"/></Arg>\n        <Arg name=\"selectors\" type=\"int\"><Property name=\"jetty.http.selectors\" deprecated=\"http.selectors\" default=\"-1\"/></Arg>\n        <Arg name=\"factories\">\n          <Array type=\"org.eclipse.jetty.server.ConnectionFactory\">\n            <Item>\n              <New class=\"org.eclipse.jetty.server.HttpConnectionFactory\">\n                <Arg name=\"config\"><Ref refid=\"httpConfig\" /></Arg>\n                <Arg name=\"compliance\"><Call class=\"org.eclipse.jetty.http.HttpCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.http.compliance\" default=\"RFC7230\"/></Arg></Call></Arg>\n              </New>\n            </Item>\n          </Array>\n        </Arg>\n        <Set name=\"host\"><Property name=\"jetty.http.host\" deprecated=\"jetty.host\" /></Set>\n        <Set name=\"port\"><Property name=\"jetty.http.port\" deprecated=\"jetty.port\" default=\"8080\" /></Set>\n        <Set name=\"idleTimeout\"><Property name=\"jetty.http.idleTimeout\" deprecated=\"http.timeout\" default=\"30000\"/></Set>\n        <Set name=\"soLingerTime\"><Property name=\"jetty.http.soLingerTime\" deprecated=\"http.soLingerTime\" default=\"-1\"/></Set>\n        <Set name=\"acceptorPriorityDelta\"><Property name=\"jetty.http.acceptorPriorityDelta\" deprecated=\"http.acceptorPriorityDelta\" default=\"0\"/></Set>\n        <Set name=\"acceptQueueSize\"><Property name=\"jetty.http.acceptQueueSize\" deprecated=\"http.acceptQueueSize\" default=\"0\"/></Set>\n      </New>\n    </Arg>\n  </Call>\n\n</Configure>\n```\nNow we add it to the list of configs for the plugin to apply:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <jettyXml>jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml</jettyXml>\n  </configuration>\n</plugin>\n```\nAlternatively, you can use the httpConnector configuration element inside the pom instead as described above.\n\n## Configuring Your WebApp\n\nThese configuration parameters apply to your webapp. They are common to almost all goals.\n\n### webApp\nThis is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:\n\n#### contextPath\nThe context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.\n#### descriptor\nThe path to the web.xml file for your webapp.\n#### defaultsDescriptor\nThe path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.\n#### overrideDescriptor\nThe path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.\n#### tempDirectory\nThe path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.\n#### baseResource\nThe path from which Jetty serves static resources. Defaults to src/main/webapp.\n#### resourceBases\nUse instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.\n#### baseAppFirst\nDefaults to \"true\". Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.\n#### containerIncludeJarPattern\nDefaults to .*/javax.servlet-[^/]*\\.jar$|.*/servlet-api-[^/]*\\.jar$|.*javax.servlet.jsp.jstl-[^/]*\\.jar|.*taglibs-standard-impl-.*\\.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.\n#### webInfIncludeJarPattern\nDefaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.\n### contextXml\nThe path to a context xml file that is applied to your webapp AFTER the webApp element.\n\n## jetty:run\n\nThe run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:\n\n* resources in ${project.basedir}/src/main/webapp\n* classes in ${project.build.outputDirectory}\n* web.xml in ${project.basedir}/src/main/webapp/WEB-INF/\nThe plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.\n\nYou do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.\n\nHere is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\n### Configuration\n\nIn addition to the webApp element that is common to most goals, the jetty:run goal supports:\n\n#### classesDirectory\nLocation of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.\n#### testClassesDirectory\nLocation of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.\n#### useTestScope\nIf true, the classes from testClassesDirectory and dependencies of scope \"test\" are placed first on the classpath. By default this is false.\n#### webAppSourceDirectory\nBy default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.\n#### jettyEnvXml\nOptional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a ` jettyConfig` file).\n#### scanTargets\nOptional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.\n#### scanTargetPatterns\nOptional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.\n#### scanClassesPattern\nSince 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.\n#### scanTestClassesPattern\nSince 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.\nHere’s an example:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>jetty-maven-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <webAppSourceDirectory>${project.basedir}/src/staticfiles</webAppSourceDirectory>\n        <webApp>\n          <contextPath>/</contextPath>\n          <descriptor>${project.basedir}/src/over/here/web.xml</descriptor>\n          <jettyEnvXml>${project.basedir}/src/over/here/jetty-env.xml</jettyEnvXml>\n        </webApp>\n        <classesDirectory>${project.basedir}/somewhere/else</classesDirectory>\n        <scanClassesPattern>\n          <excludes>\n             <exclude>**/Foo.class</exclude>\n          </excludes>\n        </scanClassesPattern>\n        <scanTargets>\n          <scanTarget>src/mydir</scanTarget>\n          <scanTarget>src/myfile.txt</scanTarget>\n        </scanTargets>\n        <scanTargetPatterns>\n          <scanTargetPattern>\n            <directory>src/other-resources</directory>\n            <includes>\n              <include>**/*.xml</include>\n              <include>**/*.properties</include>\n            </includes>\n            <excludes>\n              <exclude>**/myspecial.xml</exclude>\n              <exclude>**/myspecial.properties</exclude>\n            </excludes>\n          </scanTargetPattern>\n        </scanTargetPatterns>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\nIf, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.\n\n## jetty:run-war\n\nThis goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.\n\n### Configuration\n\n#### war\nThe location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.\nHere’s how to set it:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>jetty-maven-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <war>${project.basedir}/target/mycustom.war</war>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:run-exploded\n\nThe run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.\n\n### Configuration\n\n#### war\nThe location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.\nHere’s how to set it:\n```\n<project>\n...\n  <plugins>\n...\n    <plugin>\n      <groupId>org.eclipse.jetty</groupId>\n      <artifactId>maven-jetty-plugin</artifactId>\n      <version>9.4.5.v20170502</version>\n      <configuration>\n        <war>${project.basedir}/target/myfunkywebapp</war>\n      </configuration>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:deploy-war\n\nThis is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the \"package\" phase - you may bind it to any phase to use it.\n\n### Configuration\n\n#### war\nThe location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.\n#### daemon\nIf true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.\nHere’s the configuration:\n```\n<project>\n...\n  <plugins>\n...\n  <plugin>\n    <groupId>org.eclipse.jetty</groupId>\n    <artifactId>jetty-maven-plugin</artifactId>\n    <version>9.4.5.v20170502</version>\n    <configuration>\n      <war>/opt/special/some-app.war</war>\n      <stopKey>alpha</stopKey>\n      <stopPort>9099</stopPort>\n    </configuration>\n    <executions>\n      <execution>\n        <id>start-jetty</id>\n        <phase>test-compile</phase>\n        <goals>\n          <goal>deploy-war</goal>\n        </goals>\n      </execution>\n      <execution>\n        <id>stop-jetty</id>\n        <phase>test</phase>\n        <goals>\n          <goal>stop</goal>\n        </goals>\n      </execution>\n     </executions>\n    </plugin>\n  </plugins>\n</project>\n```\n## jetty:run-forked\n\nThis goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.\n\n### Configuration\n\nThe available configuration parameters - in addition to those for the jetty:run goal - are:\n\n#### jvmArgs\nOptional. A string representing arbitrary arguments to pass to the forked JVM.\n#### waitForChild\nDefault is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.\n#### maxStartupLines\nDefault is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.\nSome of the container configuration parameters are NOT available with this goal:\n\n#### scanIntervalSeconds\nNot supported. The forked jetty will not monitor and redeploy the webapp.\n#### reload\nNot supported. The forked jetty will not redeploy the webapp.\n#### httpConnector\nNot supported. To define custom connectors use a jetty xml file instead.\n#### loginServices\nNot supported. To define LoginServices use a jetty xml or context xml file instead.\n#### requestLog\nNot supported. To define a RequestLog setup, use a jetty xml or context xml file instead.\n#### systemProperties\nNot supported. Use the jvmArgs parameter to pass system properties to the forked process.\nTo deploy your unassembled web app to Jetty running in a new JVM:\n\n## mvn jetty:run-forked\nJetty continues to execute until you either:\n\nPress ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)\nUse jetty:stop to stop the forked JVM, which also stops the plugin.\n\nIf you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.\n\n## jetty:start\n\nThis goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.\n\nFor example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <stopKey>foo</stopKey>\n    <stopPort>9999</stopPort>\n  </configuration>\n  <executions>\n    <execution>\n      <id>start-jetty</id>\n      <phase>pre-integration-test</phase>\n      <goals>\n        <goal>start</goal>\n      </goals>\n      <configuration>\n        <scanIntervalSeconds>0</scanIntervalSeconds>\n      </configuration>\n    </execution>\n    <execution>\n      <id>stop-jetty</id>\n      <phase>post-integration-test</phase>\n       <goals>\n         <goal>stop</goal>\n       </goals>\n     </execution>\n  </executions>\n</plugin>\n```\n## jetty:stop\n\nThe stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.\n\n### stopPort\nA port number for Jetty to listen on to receive a stop command to cause it to shutdown.\n### stopKey\nA string value sent to the stopPort to validate the stop command.\n### stopWait\nThe maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.\nHere’s a configuration example:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <stopPort>9966</stopPort>\n    <stopKey>foo</stopKey>\n    <stopWait>10</stopWait>\n  </configuration>\n</plugin>\n```\nThen, while Jetty is running (in another window), type:\n\n## mvn jetty:stop\nThe stopPort must be free on the machine you are running on. If this is not the case, you will get an \"Address already in use\" error message after the \"Started ServerConnector …​\" message.\n\n## jetty:effective-web-xml\n\nThis goal calculates a synthetic web.xml (the \"effective web.xml\") according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml`s, `web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).\n\nThe following configuration parameters allow you to save the file:\n\n### deleteOnExit\nBy default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.\n### effectiveWebXml\nThe full path name of a file into which you would like the effective web xml generated.\nYou can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:\n```\n<listener origin=\"DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21\">\n<listener origin=\"WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22\">\n<servlet-class origin=\"FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23\">\n<servlet-class origin=\"@WebServlet(com.acme.test.TestServlet):24\">\n```\nTo generate origin informatino, use the following configuration parameters on the webApp element:\n\n### originAttribute\nThe name of the attribute that will contain the origin. By default it is origin.\n### generateOrigin\nFalse by default. If true, will force the generation of the originAttribute onto each element.\n## Using Overlaid wars\n\nIf your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.\n\n## With maven-war-plugin\n\nThe maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.\n\nSuppose your webapp depends on the following wars:\n```\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>X</artifactId>\n  <type>war</type>\n</dependency>\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>Y</artifactId>\n  <type>war</type>\n</dependency>\n```\nContaining:\n```\nWebAppX:\n\n /foo.jsp\n /bar.jsp\n /WEB-INF/web.xml\n\nWebAppY:\n\n /bar.jsp\n /baz.jsp\n /WEB-INF/web.xml\n /WEB-INF/special.xml\n ```\nThey are configured for the maven-war-plugin:\n```\n<plugin>\n  <groupId>org.apache.maven.plugins</groupId>\n  <artifactId>maven-war-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <overlays>\n      <overlay>\n        <groupId>com.acme</groupId>\n        <artifactId>X</artifactId>\n        <excludes>\n          <exclude>bar.jsp</exclude>\n        </excludes>\n      </overlay>\n      <overlay>\n        <groupId>com.acme</groupId>\n        <artifactId>Y</artifactId>\n        <excludes>\n          <exclude>baz.jsp</exclude>\n        </excludes>\n      </overlay>\n      <overlay>\n      </overlay>\n    </overlays>\n  </configuration>\n</plugin>\n```\nThen executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay/> element in the maven-war-plugin. You can either use that, or specify the <baseAppFirst>false</baseAppFirst> parameter to the jetty-maven-plugin.\n\nMoreover, due to the exclusions specified above, a request for the resource ` bar.jsp` would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.\n\n## Without maven-war-plugin\n\nThe algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseAppFirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.\n\nFor example, suppose our webapp depends on these two wars:\n```\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>X</artifactId>\n  <type>war</type>\n</dependency>\n<dependency>\n  <groupId>com.acme</groupId>\n  <artifactId>Y</artifactId>\n  <type>war</type>\n</dependency>\n```\nSuppose the webapps contain:\n```\nWebAppX:\n\n /foo.jsp\n /bar.jsp\n /WEB-INF/web.xml\n\nWebAppY:\n\n /bar.jsp\n /baz.jsp\n /WEB-INF/web.xml\n /WEB-INF/special.xml\n ```\nThen our webapp has available these additional resources:\n```\n/foo.jsp (X)\n/bar.jsp (X)\n/baz.jsp (Y)\n/WEB-INF/web.xml (X)\n/WEB-INF/special.xml (Y)\n```\n## Configuring Security Settings\n\nYou can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <loginServices>\n      <loginService implementation=\"org.eclipse.jetty.security.HashLoginService\">\n        <name>Test Realm</name>\n        <config>${project.basedir}/src/etc/realm.properties</config>\n      </loginService>\n    </loginServices>\n  </configuration>\n</plugin>\n```\n## Using Multiple Webapp Root Directories\n\nIf you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.\n\nHere is a configuration example:\n```\n<configuration>\n  <webApp>\n    <contextPath>/${build.finalName}</contextPath>\n    <baseResource implementation=\"org.eclipse.jetty.util.resource.ResourceCollection\">\n      <resourcesAsCSV>src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder</resourcesAsCSV>\n    </baseResource>\n  </webApp>\n</configuration>\n```\n## Running More than One Webapp\n\nYou can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contextHandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:\n\nPutting the configuration in webapp A’s pom.xml:\n\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <contextHandlers>\n      <contextHandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <war>${project.basedir}../../B.war</war>\n        <contextPath>/B</contextPath>\n      </contextHandler>\n      <contextHandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <war>${project.basedir}../../C.war</war>\n        <contextPath>/C</contextPath>\n      </contextHandler>\n    </contextHandlers>\n  </configuration>\n</plugin>\n Important\nIf the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.\n\nAlternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:\n```\n<Ref refid=\"Contexts\">\n  <Call name=\"addHandler\">\n    <Arg>\n      <New class=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <Set name=\"contextPath\">/B</Set>\n        <Set name=\"war\">../../B.war</Set>\n      </New>\n    </Arg>\n  </Call>\n  <Call>\n    <Arg>\n      <New class=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\">\n        <Set name=\"contextPath\">/C</Set>\n        <Set name=\"war\">../../C.war</Set>\n      </New>\n    </Arg>\n  </Call>\n</Ref>\n```\nThen configure the location of this jetty.xml file into webapp A’s jetty plugin:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <version>9.4.5.v20170502</version>\n  <configuration>\n    <scanIntervalSeconds>10</scanIntervalSeconds>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n    <jettyXml>src/main/etc/jetty.xml</jettyXml>\n  </configuration>\n</plugin>\n```\nFor either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.\n\n## Setting System Properties\n\nYou can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.\n\nHowever, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:\n```\n<plugin>\n  <groupId>org.codehaus.mojo</groupId>\n  <artifactId>properties-maven-plugin</artifactId>\n  <version>1.0-alpha-2</version>\n  <executions>\n    <execution>\n      <goals>\n        <goal>set-system-properties</goal>\n      </goals>\n      <configuration>\n        <properties>\n          <property>\n            <name>logback.configurationFile</name>\n            <value>${project.baseUri}/resources/logback.xml</value>\n          </property>\n        </properties>\n      </configuration>\n    </execution>\n  </executions>\n</plugin>\n```\n Note\nIf a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).\n\n## Specifying System Properties in the POM\n\nHere’s an example of how to specify System properties in the POM:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemProperties>\n      <systemProperty>\n        <name>fooprop</name>\n        <value>222</value>\n      </systemProperty>\n    </systemProperties>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nTo change the default behavior so that these system properties override those on the command line, use the <force> parameter:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemProperties>\n      <force>true</force>\n      <systemProperty>\n       <name>fooprop</name>\n       <value>222</value>\n     </systemProperty>\n    </systemProperties>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nSpecifying System Properties in a File\n\nYou can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.\n\nSuppose we have a file called mysys.props which contains the following:\n\n> fooprop=222\nThis can be configured on the plugin like so:\n```\n<plugin>\n  <groupId>org.eclipse.jetty</groupId>\n  <artifactId>jetty-maven-plugin</artifactId>\n  <configuration>\n    <systemPropertiesFile>${project.basedir}/mysys.props</systemPropertiesFile>\n    <webApp>\n      <contextPath>/test</contextPath>\n    </webApp>\n  </configuration>\n</plugin>\n```\nYou can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.","slug":"build/jetty-maven-plugin-config","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrb000n9vvujuw39a2c","content":"<p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n<p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n<p>warName.war<br>在没有XML IoC文件的情况下：</p>\n<ul>\n<li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n<li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n<li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n</ul>\n<p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n<p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>\n<a id=\"more\"></a>\n<p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n<p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n<p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n<p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n<h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then, from the same directory as your root pom.xml, type:</p>\n<blockquote>\n<p>mvn jetty:run</p>\n</blockquote>\n<p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n<p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n<p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n<p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n<h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n<p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n<blockquote>\n<p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n<p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n</blockquote>\n<h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n<h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n<h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n<h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n<h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n<h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n<h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n<p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n<h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n<h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n<h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n<h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n<h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n<h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n<p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n<h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n<h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n<h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n<h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n<h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n<h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n<h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n<h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n<h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n<h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n</blockquote>\n<p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n<h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n<h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n<h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n<h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n<h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n<h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n<h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n<h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n<h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n<h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n<h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n<h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n<h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n<h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n<ul>\n<li>resources in ${project.basedir}/src/main/webapp</li>\n<li>classes in ${project.build.outputDirectory}</li>\n<li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n</ul>\n<p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n<p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n<h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n<h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n<h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n<h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n<h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n<h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n<h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n<h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n<h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n<h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n<h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n<h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n<h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n<h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n<h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n<h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n<h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n<h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n<h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n<h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n<h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n<h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n<h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n<h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n<h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n<p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n<p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n<h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n<p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n<h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n<h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n<h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then, while Jetty is running (in another window), type:</p>\n<h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n<h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n<p>The following configuration parameters allow you to save the file:</p>\n<h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n<h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n<p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n<h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n<h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n<h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n<h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n<p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n<p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n<p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n<h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n<p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n<p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n<h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n<p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n<p>Putting the configuration in webapp A’s pom.xml:</p>\n<p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n<p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n<p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n<h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n<p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n<h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n<p>Specifying System Properties in a File</p>\n<p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n<p>Suppose we have a file called mysys.props which contains the following:</p>\n<blockquote>\n<p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>\n","site":{"data":{}},"excerpt":"<p>URL：[http/https]://hostname:port/contextPath/servletPath/pathInfo</p>\n<p>如果没有contextPath，则默认使用root上下文，root上下文的路径为”/“。</p>\n<p>warName.war<br>在没有XML IoC文件的情况下：</p>\n<ul>\n<li>如果WAR文件名是myapp.war，那么上下文路径是：/myapp；</li>\n<li>如果WAR文件名是ROOT.war，那么上下文路径是：/；</li>\n<li>如果WAR文件名是ROOT-foobar.war，那么上下文路径是/，虚拟host是foobar。</li>\n</ul>\n<p>注意这个contextPath，在下面的设置中设置了url路径会发生变化。</p>\n<p><a href=\"http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html\" target=\"_blank\" rel=\"external\">jetty-maven-plugin-config</a></p>","more":"<p>仅作记录，查字典用。此文从上述网址复制而来。</p>\n<p>The Jetty Maven plugin is useful for rapid development and testing. You can add it to any webapp project that is structured according to the Maven defaults. The plugin can then periodically scan your project for changes and automatically redeploy the webapp if any are found. This makes the development cycle more productive by eliminating the build and deploy steps: you use your IDE to make changes to the project, and the running web container automatically picks them up, allowing you to test them straight away.</p>\n<p><strong>You should use Maven 3.3+ for this plugin.</strong></p>\n<p>While the Jetty Maven Plugin can be very useful for development we do not recommend its use in a production capacity. In order for the plugin to work it needs to leverage many internal Maven apis and Maven itself it not a production deployment tool. We recommend either the traditional distribution deployment approach or using embedded Jetty.</p>\n<h2 id=\"Quick-Start-Get-Up-and-Running\"><a href=\"#Quick-Start-Get-Up-and-Running\" class=\"headerlink\" title=\"Quick Start: Get Up and Running\"></a>Quick Start: Get Up and Running</h2><p>First, add jetty-maven-plugin to your pom.xml definition:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then, from the same directory as your root pom.xml, type:</p>\n<blockquote>\n<p>mvn jetty:run</p>\n</blockquote>\n<p>This starts Jetty and serves up your project on <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"external\">http://localhost:8080/</a>.</p>\n<p>Jetty will continue to run until you stop it. While it runs it periodically scans for changes to your project files If you save changes and recompile your class files, Jetty redeploys your webapp, and you can instantly test the changes that were just made.</p>\n<p>You can terminate the plugin with a ctrl-c in the terminal window where it is running.</p>\n<p> Note<br>The classpath of the running Jetty instance and its deployed webapp are managed by Maven, and may not be exactly what you expect. For example: a webapp’s dependent jars might be referenced via the local repository, not the WEB-INF/lib directory.</p>\n<h2 id=\"Supported-Goals\"><a href=\"#Supported-Goals\" class=\"headerlink\" title=\"Supported Goals\"></a>Supported Goals</h2><p>The Jetty Maven plugin has a number of distinct Maven goals. Arguably the most useful is the run goal which runs Jetty on an unassembled webapp. There are other goals which help you accomplish different tasks. For example, you might need to run your webapp in a forked instance of Jetty rather than within the process running Maven; or you may need finer grained control over the maven lifecycle stage in which you wish to deploy your webapp. There are different goals to accomplish these tasks, as well as several others.</p>\n<p>To see a list of all goals supported by the Jetty Maven plugin, do:</p>\n<blockquote>\n<p>mvn jetty:help<br>To see the detailed list of parameters that can be configured for a particular goal, in addition to its description, do:</p>\n<p>mvn jetty:help -Ddetail=true -Dgoal= <goal name=\"\"></goal></p>\n</blockquote>\n<h2 id=\"Configuring-the-Jetty-Container\"><a href=\"#Configuring-the-Jetty-Container\" class=\"headerlink\" title=\"Configuring the Jetty Container\"></a>Configuring the Jetty Container</h2><p>These configuration elements set up the Jetty environment in which your webapp executes. They are common to most goals:</p>\n<h3 id=\"httpConnector\"><a href=\"#httpConnector\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h3><p>Optional. If not specified, Jetty will create a ServerConnector instance listening on port 8080. You can change this default port number by using the system property jetty.http.port on the command line, for example, mvn -Djetty.http.port=9999 jetty:run. Alternatively, you can use this configuration element to set up the information for the ServerConnector. The following are the valid configuration sub-elements:</p>\n<h4 id=\"port\"><a href=\"#port\" class=\"headerlink\" title=\"port\"></a>port</h4><p>The port number for the connector to listen on. By default it is 8080.</p>\n<h4 id=\"host\"><a href=\"#host\" class=\"headerlink\" title=\"host\"></a>host</h4><p>The particular interface for the connector to listen on. By default, all interfaces.</p>\n<h4 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h4><p>The name of the connector, which is useful for configuring contexts to respond only on particular connectors.</p>\n<h4 id=\"idleTimeout\"><a href=\"#idleTimeout\" class=\"headerlink\" title=\"idleTimeout\"></a>idleTimeout</h4><p>Maximum idle time for a connection.</p>\n<h4 id=\"soLinger\"><a href=\"#soLinger\" class=\"headerlink\" title=\"soLinger\"></a>soLinger</h4><p>The socket linger time.</p>\n<p>You could instead configure the connectors in a standard jetty xml config file and put its location into the <code>jettyXml</code> parameter. Note that since jetty-9.0 it is no longer possible to configure a https connector directly in the pom.xml: you need to use jetty xml config files to do it.</p>\n<h3 id=\"jettyXml\"><a href=\"#jettyXml\" class=\"headerlink\" title=\"jettyXml\"></a>jettyXml</h3><p>Optional. A comma separated list of locations of jetty xml files to apply in addition to any plugin configuration parameters. You might use it if you have other webapps, handlers, specific types of connectors etc., to deploy, or if you have other Jetty objects that you cannot configure from the plugin.</p>\n<h3 id=\"scanIntervalSeconds\"><a href=\"#scanIntervalSeconds\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h3><p>The pause in seconds between sweeps of the webapp to check for changes and automatically hot redeploy if any are detected. By default this is 0, which disables hot deployment scanning. A number greater than 0 enables it.</p>\n<h3 id=\"reload\"><a href=\"#reload\" class=\"headerlink\" title=\"reload\"></a>reload</h3><p>Default value is “automatic”, used in conjunction with a non-zero <code>scanIntervalSeconds</code> causes automatic hot redeploy when changes are detected. Set to “manual” instead to trigger scanning by typing a linefeed in the console running the plugin. This might be useful when you are doing a series of changes that you want to ignore until you’re done. In that use, use the reload parameter.</p>\n<h3 id=\"dumpOnStart\"><a href=\"#dumpOnStart\" class=\"headerlink\" title=\"dumpOnStart\"></a>dumpOnStart</h3><p>Optional. Default value is false. If true, then jetty will dump out the server structure on start.</p>\n<h3 id=\"loginServices\"><a href=\"#loginServices\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h3><p>Optional. A list of org.eclipse.jetty.security.LoginService implementations. Note that there is no default realm. If you use a realm in your web.xml you can specify a corresponding realm here. You could instead configure the login services in a jetty xml file and add its location to the jettyXml parameter.</p>\n<h3 id=\"requestLog\"><a href=\"#requestLog\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h3><p>Optional. An implementation of the org.eclipse.jetty.server.RequestLog request log interface. An implementation that respects the NCSA format is available as org.eclipse.jetty.server.NCSARequestLog. There are three other ways to configure the RequestLog:</p>\n<p>In a jetty xml config file, as specified in the jettyXml parameter.<br>In a context xml config file, as specified in the contextXml parameter.<br>In the webApp element.<br>See Configuring Request Logs for more information.</p>\n<h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><p>Optional as of Jetty 9.3.1. This would configure an instance of the org.eclipse.jetty.server.Server for the plugin to use, however it is usually NOT necessary to configure this, as the plugin will automatically configure one for you. In particular, if you use the jettyXml element, then you generally DON’T want to define this element, as you are probably using the jettyXml file to configure up a Server with a special constructor argument, such as a custom threadpool. If you define both a server element AND use a jetty xml element which points to a config file that has a line like <configure id=\"Server\" class=\"org.eclipse.jetty.server.Server\"> then the the xml configuration will override what you configure for the server in the pom.xml.</configure></p>\n<h3 id=\"stopPort\"><a href=\"#stopPort\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>Optional. Port to listen on for stop commands. Useful to use in conjunction with the stop or run-forked goals.</p>\n<h3 id=\"stopKey\"><a href=\"#stopKey\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>Optional. Used in conjunction with stopPort for stopping jetty. Useful when used in conjunction with the stop or run-forked goals.</p>\n<h3 id=\"systemProperties\"><a href=\"#systemProperties\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h3><p>Optional. Allows you to configure System properties for the execution of the plugin. For more information, see Setting System Properties.</p>\n<h3 id=\"systemPropertiesFile\"><a href=\"#systemPropertiesFile\" class=\"headerlink\" title=\"systemPropertiesFile\"></a>systemPropertiesFile</h3><p>Optional. A file containing System properties to set for the execution of the plugin. By default, settings that you make here do not override any system properties already set on the command line, by the JVM, or in the POM via systemProperties. Read Setting System Properties for how to force overrides.</p>\n<h3 id=\"skip\"><a href=\"#skip\" class=\"headerlink\" title=\"skip\"></a>skip</h3><p>Default is false. If true, the execution of the plugin exits. Same as setting the SystemProperty -Djetty.skip on the command line. This is most useful when configuring Jetty for execution during integration testing and you want to skip the tests.</p>\n<h3 id=\"useProvidedScope\"><a href=\"#useProvidedScope\" class=\"headerlink\" title=\"useProvidedScope\"></a>useProvidedScope</h3><p>Default value is false. If true, the dependencies with <scope>provided</scope> are placed onto the container classpath. Be aware that this is NOT the webapp classpath, as “provided” indicates that these dependencies would normally be expected to be provided by the container. You should very rarely ever need to use this. Instead, you should copy the provided dependencies as explicit dependencies of the plugin instead.</p>\n<h3 id=\"excludedGoals\"><a href=\"#excludedGoals\" class=\"headerlink\" title=\"excludedGoals\"></a>excludedGoals</h3><p>Optional. A list of Jetty plugin goal names that will cause the plugin to print an informative message and exit. Useful if you want to prevent users from executing goals that you know cannot work with your project.</p>\n<h2 id=\"Configuring-a-Https-Connector\"><a href=\"#Configuring-a-Https-Connector\" class=\"headerlink\" title=\"Configuring a Https Connector\"></a>Configuring a Https Connector</h2><p>In order to configure an HTTPS connector, you need to use jetty xml configuration files. This example uses files copied directly from the jetty distribution etc/ directory, although you can of course make up your own xml file or files. We will use the following files:</p>\n<h3 id=\"jetty-xml\"><a href=\"#jetty-xml\" class=\"headerlink\" title=\"jetty.xml\"></a>jetty.xml</h3><p>Sets up various characteristics of the org.eclipse.jetty.server.Server instance for the plugin to use. Importantly, it sets up the org.eclipse.jetty.server.HttpConfiguration element that we can refer to in subsequent xml files that configure the connectors. Here’s the relevant section:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;New id=&quot;httpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">  &lt;Set name=&quot;secureScheme&quot;&gt;https&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;securePort&quot;&gt;&lt;Property name=&quot;jetty.secure.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;outputBufferSize&quot;&gt;32768&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;requestHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;responseHeaderSize&quot;&gt;8192&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendServerVersion&quot;&gt;true&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;sendDateHeader&quot;&gt;false&lt;/Set&gt;</div><div class=\"line\">  &lt;Set name=&quot;headerCacheSize&quot;&gt;512&lt;/Set&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- Uncomment to enable handling of X-Forwarded- style headers</div><div class=\"line\">  &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;New class=&quot;org.eclipse.jetty.server.ForwardedRequestCustomizer&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  --&gt;</div><div class=\"line\">&lt;/New&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"jetty-ssl-xml\"><a href=\"#jetty-ssl-xml\" class=\"headerlink\" title=\"jetty-ssl.xml\"></a>jetty-ssl.xml</h3><p>Set up ssl which will be used by the https connector. Here’s the jetty-ssl.xml file from the jetty-distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Base SSL configuration                                        --&gt;</div><div class=\"line\">&lt;!-- This configuration needs to be used together with 1 or more   --&gt;</div><div class=\"line\">&lt;!-- of jetty-https.xml or jetty-http2.xml                         --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a SSL Connector with no protocol factories              --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call  name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptors&quot; deprecated=&quot;ssl.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.selectors&quot; deprecated=&quot;ssl.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;!-- uncomment to support proxy protocol</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.ProxyConnectionFactory&quot;/&gt;</div><div class=\"line\">            &lt;/Item&gt;--&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.ssl.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.ssl.port&quot; deprecated=&quot;ssl.port&quot; default=&quot;8443&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.ssl.idleTimeout&quot; deprecated=&quot;ssl.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.ssl.soLingerTime&quot; deprecated=&quot;ssl.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptorPriorityDelta&quot; deprecated=&quot;ssl.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.ssl.acceptQueueSize&quot; deprecated=&quot;ssl.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Create a TLS specific HttpConfiguration based on the        --&gt;</div><div class=\"line\">  &lt;!-- common HttpConfiguration defined in jetty.xml               --&gt;</div><div class=\"line\">  &lt;!-- Add a SecureRequestCustomizer to extract certificate and    --&gt;</div><div class=\"line\">  &lt;!-- session information                                         --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;New id=&quot;sslHttpConfig&quot; class=&quot;org.eclipse.jetty.server.HttpConfiguration&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;&lt;Ref refid=&quot;httpConfig&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">    &lt;Call name=&quot;addCustomizer&quot;&gt;</div><div class=\"line\">      &lt;Arg&gt;</div><div class=\"line\">        &lt;New class=&quot;org.eclipse.jetty.server.SecureRequestCustomizer&quot;&gt;</div><div class=\"line\">          &lt;Arg name=&quot;sniHostCheck&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.sniHostCheck&quot; default=&quot;true&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsMaxAgeSeconds&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsMaxAgeSeconds&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">          &lt;Arg name=&quot;stsIncludeSubdomains&quot; type=&quot;boolean&quot;&gt;&lt;Property name=&quot;jetty.ssl.stsIncludeSubdomains&quot; default=&quot;false&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;/New&gt;</div><div class=\"line\">      &lt;/Arg&gt;</div><div class=\"line\">    &lt;/Call&gt;</div><div class=\"line\">  &lt;/New&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"jetty-https-xml\"><a href=\"#jetty-https-xml\" class=\"headerlink\" title=\"jetty-https.xml\"></a>jetty-https.xml</h3><p>Set up the https connector using the HttpConfiguration from jetty.xml and the ssl configuration from jetty-ssl.xml:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure a HTTPS connector.                                  --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- and jetty-ssl.xml.                                            --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;sslConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addIfAbsentConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.SslConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;next&quot;&gt;http/1.1&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;sslContextFactory&quot;&gt;&lt;Ref refid=&quot;sslContextFactory&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;Call name=&quot;addConnectionFactory&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;sslHttpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<p>Now you need to let the plugin know to apply the files above:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>Just like with an installed distribution of Jetty, the ordering of the xml files is significant.</p>\n</blockquote>\n<p>You can also use Jetty xml files to configure a http connector for the plugin to use. Here we use the same jetty-http.xml file from the Jetty distribution:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class=\"line\">&lt;!DOCTYPE Configure PUBLIC &quot;-//Jetty//Configure//EN&quot; &quot;http://www.eclipse.org/jetty/configure_9_3.dtd&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;!-- Configure the Jetty Server instance with an ID &quot;Server&quot;       --&gt;</div><div class=\"line\">&lt;!-- by adding a HTTP connector.                                   --&gt;</div><div class=\"line\">&lt;!-- This configuration must be used in conjunction with jetty.xml --&gt;</div><div class=\"line\">&lt;!-- ============================================================= --&gt;</div><div class=\"line\">&lt;Configure id=&quot;Server&quot; class=&quot;org.eclipse.jetty.server.Server&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;!-- Add a HTTP Connector.                                       --&gt;</div><div class=\"line\">  &lt;!-- Configure an o.e.j.server.ServerConnector with a single     --&gt;</div><div class=\"line\">  &lt;!-- HttpConnectionFactory instance using the common httpConfig  --&gt;</div><div class=\"line\">  &lt;!-- instance defined in jetty.xml                               --&gt;</div><div class=\"line\">  &lt;!--                                                             --&gt;</div><div class=\"line\">  &lt;!-- Consult the javadoc of o.e.j.server.ServerConnector and     --&gt;</div><div class=\"line\">  &lt;!-- o.e.j.server.HttpConnectionFactory for all configuration    --&gt;</div><div class=\"line\">  &lt;!-- that may be set here.                                       --&gt;</div><div class=\"line\">  &lt;!-- =========================================================== --&gt;</div><div class=\"line\">  &lt;Call name=&quot;addConnector&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New id=&quot;httpConnector&quot; class=&quot;org.eclipse.jetty.server.ServerConnector&quot;&gt;</div><div class=\"line\">        &lt;Arg name=&quot;server&quot;&gt;&lt;Ref refid=&quot;Server&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;acceptors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.acceptors&quot; deprecated=&quot;http.acceptors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;selectors&quot; type=&quot;int&quot;&gt;&lt;Property name=&quot;jetty.http.selectors&quot; deprecated=&quot;http.selectors&quot; default=&quot;-1&quot;/&gt;&lt;/Arg&gt;</div><div class=\"line\">        &lt;Arg name=&quot;factories&quot;&gt;</div><div class=\"line\">          &lt;Array type=&quot;org.eclipse.jetty.server.ConnectionFactory&quot;&gt;</div><div class=\"line\">            &lt;Item&gt;</div><div class=\"line\">              &lt;New class=&quot;org.eclipse.jetty.server.HttpConnectionFactory&quot;&gt;</div><div class=\"line\">                &lt;Arg name=&quot;config&quot;&gt;&lt;Ref refid=&quot;httpConfig&quot; /&gt;&lt;/Arg&gt;</div><div class=\"line\">                &lt;Arg name=&quot;compliance&quot;&gt;&lt;Call class=&quot;org.eclipse.jetty.http.HttpCompliance&quot; name=&quot;valueOf&quot;&gt;&lt;Arg&gt;&lt;Property name=&quot;jetty.http.compliance&quot; default=&quot;RFC7230&quot;/&gt;&lt;/Arg&gt;&lt;/Call&gt;&lt;/Arg&gt;</div><div class=\"line\">              &lt;/New&gt;</div><div class=\"line\">            &lt;/Item&gt;</div><div class=\"line\">          &lt;/Array&gt;</div><div class=\"line\">        &lt;/Arg&gt;</div><div class=\"line\">        &lt;Set name=&quot;host&quot;&gt;&lt;Property name=&quot;jetty.http.host&quot; deprecated=&quot;jetty.host&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;port&quot;&gt;&lt;Property name=&quot;jetty.http.port&quot; deprecated=&quot;jetty.port&quot; default=&quot;8080&quot; /&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;idleTimeout&quot;&gt;&lt;Property name=&quot;jetty.http.idleTimeout&quot; deprecated=&quot;http.timeout&quot; default=&quot;30000&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;soLingerTime&quot;&gt;&lt;Property name=&quot;jetty.http.soLingerTime&quot; deprecated=&quot;http.soLingerTime&quot; default=&quot;-1&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptorPriorityDelta&quot;&gt;&lt;Property name=&quot;jetty.http.acceptorPriorityDelta&quot; deprecated=&quot;http.acceptorPriorityDelta&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;acceptQueueSize&quot;&gt;&lt;Property name=&quot;jetty.http.acceptQueueSize&quot; deprecated=&quot;http.acceptQueueSize&quot; default=&quot;0&quot;/&gt;&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/Configure&gt;</div></pre></td></tr></table></figure></p>\n<p>Now we add it to the list of configs for the plugin to apply:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;jettyXml&gt;jetty.xml,jetty-http.xml,jetty-ssl.xml,jetty-https.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Alternatively, you can use the httpConnector configuration element inside the pom instead as described above.</p>\n<h2 id=\"Configuring-Your-WebApp\"><a href=\"#Configuring-Your-WebApp\" class=\"headerlink\" title=\"Configuring Your WebApp\"></a>Configuring Your WebApp</h2><p>These configuration parameters apply to your webapp. They are common to almost all goals.</p>\n<h3 id=\"webApp\"><a href=\"#webApp\" class=\"headerlink\" title=\"webApp\"></a>webApp</h3><p>This is an instance of org.eclipse.jetty.maven.plugin.JettyWebAppContext, which is an extension to the class org.eclipse.jetty.webapp.WebAppContext. You can use any of the setter methods on this object to configure your webapp. Here are a few of the most useful ones:</p>\n<h4 id=\"contextPath\"><a href=\"#contextPath\" class=\"headerlink\" title=\"contextPath\"></a>contextPath</h4><p>The context path for your webapp. By default, this is set to /. If using a custom value for this parameter, you probably want to include the leading /, example /mycontext.</p>\n<h4 id=\"descriptor\"><a href=\"#descriptor\" class=\"headerlink\" title=\"descriptor\"></a>descriptor</h4><p>The path to the web.xml file for your webapp.</p>\n<h4 id=\"defaultsDescriptor\"><a href=\"#defaultsDescriptor\" class=\"headerlink\" title=\"defaultsDescriptor\"></a>defaultsDescriptor</h4><p>The path to a webdefault.xml file that will be applied to your webapp before the web.xml. If you don’t supply one, Jetty uses a default file baked into the jetty-webapp.jar.</p>\n<h4 id=\"overrideDescriptor\"><a href=\"#overrideDescriptor\" class=\"headerlink\" title=\"overrideDescriptor\"></a>overrideDescriptor</h4><p>The path to a web.xml file that Jetty applies after reading your web.xml. You can use this to replace or add configuration.</p>\n<h4 id=\"tempDirectory\"><a href=\"#tempDirectory\" class=\"headerlink\" title=\"tempDirectory\"></a>tempDirectory</h4><p>The path to a dir that Jetty can use to expand or copy jars and jsp compiles when your webapp is running. The default is ${project.build.outputDirectory}/tmp.</p>\n<h4 id=\"baseResource\"><a href=\"#baseResource\" class=\"headerlink\" title=\"baseResource\"></a>baseResource</h4><p>The path from which Jetty serves static resources. Defaults to src/main/webapp.</p>\n<h4 id=\"resourceBases\"><a href=\"#resourceBases\" class=\"headerlink\" title=\"resourceBases\"></a>resourceBases</h4><p>Use instead of baseResource if you have multiple directories from which you want to serve static content. This is an array of directory names.</p>\n<h4 id=\"baseAppFirst\"><a href=\"#baseAppFirst\" class=\"headerlink\" title=\"baseAppFirst\"></a>baseAppFirst</h4><p>Defaults to “true”. Controls whether any overlaid wars are added before or after the original base resource(s) of the webapp. See the section on overlaid wars for more information.</p>\n<h4 id=\"containerIncludeJarPattern\"><a href=\"#containerIncludeJarPattern\" class=\"headerlink\" title=\"containerIncludeJarPattern\"></a>containerIncludeJarPattern</h4><p>Defaults to .<em>/javax.servlet-[^/]</em>.jar$|.<em>/servlet-api-[^/]</em>.jar$|.<em>javax.servlet.jsp.jstl-[^/]</em>.jar|.<em>taglibs-standard-impl-.</em>.jar. This is a pattern that is applied to the names of the jars on the container’s classpath (ie the classpath of the plugin, not that of the webapp) that should be scanned for fragments, tlds, annotations etc. This is analogous to the context attribute org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern that is documented here. You can define extra patterns of jars that will be included in the scan.</p>\n<h4 id=\"webInfIncludeJarPattern\"><a href=\"#webInfIncludeJarPattern\" class=\"headerlink\" title=\"webInfIncludeJarPattern\"></a>webInfIncludeJarPattern</h4><p>Defaults to matching all of the dependency jars for the webapp (ie the equivalent of WEB-INF/lib). You can make this pattern more restrictive to only match certain jars by using this setter. This is analogous to the context attribute org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern that is documented here.</p>\n<h3 id=\"contextXml\"><a href=\"#contextXml\" class=\"headerlink\" title=\"contextXml\"></a>contextXml</h3><p>The path to a context xml file that is applied to your webapp AFTER the webApp element.</p>\n<h2 id=\"jetty-run\"><a href=\"#jetty-run\" class=\"headerlink\" title=\"jetty:run\"></a>jetty:run</h2><p>The run goal runs on a webapp that does not have to be built into a WAR. Instead, Jetty deploys the webapp from its sources. It looks for the constituent parts of a webapp in the Maven default project locations, although you can override these in the plugin configuration. For example, by default it looks for:</p>\n<ul>\n<li>resources in ${project.basedir}/src/main/webapp</li>\n<li>classes in ${project.build.outputDirectory}</li>\n<li>web.xml in ${project.basedir}/src/main/webapp/WEB-INF/<br>The plugin automatically ensures the classes are rebuilt and up-to-date before deployment. If you change the source of a class and your IDE automatically compiles it in the background, the plugin picks up the changed class.</li>\n</ul>\n<p>You do not need to assemble the webapp into a WAR, saving time during the development cycle. Once invoked, you can configure the plugin to run continuously, scanning for changes in the project and automatically performing a hot redeploy when necessary. Any changes you make are immediately reflected in the running instance of Jetty, letting you quickly jump from coding to testing, rather than going through the cycle of: code, compile, reassemble, redeploy, test.</p>\n<p>Here is an example, which turns on scanning for changes every ten seconds, and sets the webapp context path to /test:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>In addition to the webApp element that is common to most goals, the jetty:run goal supports:</p>\n<h4 id=\"classesDirectory\"><a href=\"#classesDirectory\" class=\"headerlink\" title=\"classesDirectory\"></a>classesDirectory</h4><p>Location of your compiled classes for the webapp. You should rarely need to set this parameter. Instead, you should set build outputDirectory in your pom.xml.</p>\n<h4 id=\"testClassesDirectory\"><a href=\"#testClassesDirectory\" class=\"headerlink\" title=\"testClassesDirectory\"></a>testClassesDirectory</h4><p>Location of the compiled test classes for your webapp. By default this is ${project.build.testOutputDirectory}.</p>\n<h4 id=\"useTestScope\"><a href=\"#useTestScope\" class=\"headerlink\" title=\"useTestScope\"></a>useTestScope</h4><p>If true, the classes from testClassesDirectory and dependencies of scope “test” are placed first on the classpath. By default this is false.</p>\n<h4 id=\"webAppSourceDirectory\"><a href=\"#webAppSourceDirectory\" class=\"headerlink\" title=\"webAppSourceDirectory\"></a>webAppSourceDirectory</h4><p>By default, this is set to ${project.basedir}/src/main/webapp. If your static sources are in a different location, set this parameter accordingly.</p>\n<h4 id=\"jettyEnvXml\"><a href=\"#jettyEnvXml\" class=\"headerlink\" title=\"jettyEnvXml\"></a>jettyEnvXml</h4><p>Optional. Location of a jetty-env.xml file, which allows you to make JNDI bindings that satisfy env-entry, resource-env-ref, and resource-ref linkages in the web.xml that are scoped only to the webapp and not shared with other webapps that you might be deploying at the same time (for example, by using a <code>jettyConfig</code> file).</p>\n<h4 id=\"scanTargets\"><a href=\"#scanTargets\" class=\"headerlink\" title=\"scanTargets\"></a>scanTargets</h4><p>Optional. A list of files and directories to periodically scan in addition to those the plugin automatically scans.</p>\n<h4 id=\"scanTargetPatterns\"><a href=\"#scanTargetPatterns\" class=\"headerlink\" title=\"scanTargetPatterns\"></a>scanTargetPatterns</h4><p>Optional. If you have a long list of extra files you want scanned, it is more convenient to use pattern matching expressions to specify them instead of enumerating them with the scanTargetsList of scanTargetPatterns, each consisting of a directory, and including and/or excluding parameters to specify the file matching patterns.</p>\n<h4 id=\"scanClassesPattern\"><a href=\"#scanClassesPattern\" class=\"headerlink\" title=\"scanClassesPattern\"></a>scanClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the classesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.</p>\n<h4 id=\"scanTestClassesPattern\"><a href=\"#scanTestClassesPattern\" class=\"headerlink\" title=\"scanTestClassesPattern\"></a>scanTestClassesPattern</h4><p>Since 9.3.0. Optional. Include and exclude patterns that can be applied to the testClassesDirectory for the purposes of scanning, it does not affect the classpath. If a file or directory is excluded by the patterns then a change in that file (or subtree in the case of a directory) is ignored and will not cause the webapp to redeploy. Patterns are specified as a relative path using a glob-like syntax as described in the javadoc for FileSystem.getPathMatcher.<br>Here’s an example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;webAppSourceDirectory&gt;$&#123;project.basedir&#125;/src/staticfiles&lt;/webAppSourceDirectory&gt;</div><div class=\"line\">        &lt;webApp&gt;</div><div class=\"line\">          &lt;contextPath&gt;/&lt;/contextPath&gt;</div><div class=\"line\">          &lt;descriptor&gt;$&#123;project.basedir&#125;/src/over/here/web.xml&lt;/descriptor&gt;</div><div class=\"line\">          &lt;jettyEnvXml&gt;$&#123;project.basedir&#125;/src/over/here/jetty-env.xml&lt;/jettyEnvXml&gt;</div><div class=\"line\">        &lt;/webApp&gt;</div><div class=\"line\">        &lt;classesDirectory&gt;$&#123;project.basedir&#125;/somewhere/else&lt;/classesDirectory&gt;</div><div class=\"line\">        &lt;scanClassesPattern&gt;</div><div class=\"line\">          &lt;excludes&gt;</div><div class=\"line\">             &lt;exclude&gt;**/Foo.class&lt;/exclude&gt;</div><div class=\"line\">          &lt;/excludes&gt;</div><div class=\"line\">        &lt;/scanClassesPattern&gt;</div><div class=\"line\">        &lt;scanTargets&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/mydir&lt;/scanTarget&gt;</div><div class=\"line\">          &lt;scanTarget&gt;src/myfile.txt&lt;/scanTarget&gt;</div><div class=\"line\">        &lt;/scanTargets&gt;</div><div class=\"line\">        &lt;scanTargetPatterns&gt;</div><div class=\"line\">          &lt;scanTargetPattern&gt;</div><div class=\"line\">            &lt;directory&gt;src/other-resources&lt;/directory&gt;</div><div class=\"line\">            &lt;includes&gt;</div><div class=\"line\">              &lt;include&gt;**/*.xml&lt;/include&gt;</div><div class=\"line\">              &lt;include&gt;**/*.properties&lt;/include&gt;</div><div class=\"line\">            &lt;/includes&gt;</div><div class=\"line\">            &lt;excludes&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.xml&lt;/exclude&gt;</div><div class=\"line\">              &lt;exclude&gt;**/myspecial.properties&lt;/exclude&gt;</div><div class=\"line\">            &lt;/excludes&gt;</div><div class=\"line\">          &lt;/scanTargetPattern&gt;</div><div class=\"line\">        &lt;/scanTargetPatterns&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<p>If, for whatever reason, you cannot run on an unassembled webapp, the goals run-war and run-exploded work on unassembled webapps.</p>\n<h2 id=\"jetty-run-war\"><a href=\"#jetty-run-war\" class=\"headerlink\" title=\"jetty:run-war\"></a>jetty:run-war</h2><p>This goal first packages your webapp as a WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml and the WAR file; if either changes, it redeploys the war.</p>\n<h3 id=\"Configuration-1\"><a href=\"#Configuration-1\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war\"><a href=\"#war\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the built WAR file. This defaults to ${project.build.directory}/${project.build.finalName}.war. If this is not sufficient, set it to your custom location.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/mycustom.war&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-run-exploded\"><a href=\"#jetty-run-exploded\" class=\"headerlink\" title=\"jetty:run-exploded\"></a>jetty:run-exploded</h2><p>The run-exploded goal first assembles your webapp into an exploded WAR file and then deploys it to Jetty. If you set a non-zero scanInterval, Jetty watches your pom.xml,`WEB-INF/lib, WEB-INF/ and WEB-INF/web.xml for changes and redeploys when necessary.</p>\n<h3 id=\"Configuration-2\"><a href=\"#Configuration-2\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-1\"><a href=\"#war-1\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the exploded WAR. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.<br>Here’s how to set it:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">    &lt;plugin&gt;</div><div class=\"line\">      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">      &lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;</div><div class=\"line\">      &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;war&gt;$&#123;project.basedir&#125;/target/myfunkywebapp&lt;/war&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-deploy-war\"><a href=\"#jetty-deploy-war\" class=\"headerlink\" title=\"jetty:deploy-war\"></a>jetty:deploy-war</h2><p>This is basically the same as jetty:run-war, but without assembling the WAR of the current module - you can nominate the location of any war to run. Unlike run-war, the phase in which this plugin executes is not bound to the “package” phase - you may bind it to any phase to use it.</p>\n<h3 id=\"Configuration-3\"><a href=\"#Configuration-3\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><h4 id=\"war-2\"><a href=\"#war-2\" class=\"headerlink\" title=\"war\"></a>war</h4><p>The location of the WAR file. This defaults to ${project.build.directory}/${project.build.finalName}, but you can override the default by setting this parameter.</p>\n<h4 id=\"daemon\"><a href=\"#daemon\" class=\"headerlink\" title=\"daemon\"></a>daemon</h4><p>If true, this plugin will start Jetty but let the build continue. This is useful if you want to start jetty as an execution binding in a particular phase and then stop it in another. Alternatively, you can set this parameter to false, in which case Jetty will block and you will need to use a ctrl-c to stop it.<br>Here’s the configuration:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;project&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugins&gt;</div><div class=\"line\">...</div><div class=\"line\">  &lt;plugin&gt;</div><div class=\"line\">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">    &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">    &lt;configuration&gt;</div><div class=\"line\">      &lt;war&gt;/opt/special/some-app.war&lt;/war&gt;</div><div class=\"line\">      &lt;stopKey&gt;alpha&lt;/stopKey&gt;</div><div class=\"line\">      &lt;stopPort&gt;9099&lt;/stopPort&gt;</div><div class=\"line\">    &lt;/configuration&gt;</div><div class=\"line\">    &lt;executions&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test-compile&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;deploy-war&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">      &lt;execution&gt;</div><div class=\"line\">        &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">        &lt;phase&gt;test&lt;/phase&gt;</div><div class=\"line\">        &lt;goals&gt;</div><div class=\"line\">          &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">        &lt;/goals&gt;</div><div class=\"line\">      &lt;/execution&gt;</div><div class=\"line\">     &lt;/executions&gt;</div><div class=\"line\">    &lt;/plugin&gt;</div><div class=\"line\">  &lt;/plugins&gt;</div><div class=\"line\">&lt;/project&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-run-forked\"><a href=\"#jetty-run-forked\" class=\"headerlink\" title=\"jetty:run-forked\"></a>jetty:run-forked</h2><p>This goal allows you to start the webapp in a new JVM, optionally passing arguments to that new JVM. This goal supports the same configuration parameters as the jetty:run goal with a couple of extras to help configure the forked process.</p>\n<h3 id=\"Configuration-4\"><a href=\"#Configuration-4\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The available configuration parameters - in addition to those for the jetty:run goal - are:</p>\n<h4 id=\"jvmArgs\"><a href=\"#jvmArgs\" class=\"headerlink\" title=\"jvmArgs\"></a>jvmArgs</h4><p>Optional. A string representing arbitrary arguments to pass to the forked JVM.</p>\n<h4 id=\"waitForChild\"><a href=\"#waitForChild\" class=\"headerlink\" title=\"waitForChild\"></a>waitForChild</h4><p>Default is true. This causes the parent process to wait for the forked process to exit. In this case you can use ctrl-c to terminate both processes. It is more useful to set it to false, in which case the parent process terminates whilst leaving the child process running. You use the jetty:stop goal to stop the child process.</p>\n<h4 id=\"maxStartupLines\"><a href=\"#maxStartupLines\" class=\"headerlink\" title=\"maxStartupLines\"></a>maxStartupLines</h4><p>Default is 50. This is maximum number of lines the parent process reads from the child process to receive an indication that the child has started. If the child process produces an excessive amount of output on stdout you may need to increase this number.<br>Some of the container configuration parameters are NOT available with this goal:</p>\n<h4 id=\"scanIntervalSeconds-1\"><a href=\"#scanIntervalSeconds-1\" class=\"headerlink\" title=\"scanIntervalSeconds\"></a>scanIntervalSeconds</h4><p>Not supported. The forked jetty will not monitor and redeploy the webapp.</p>\n<h4 id=\"reload-1\"><a href=\"#reload-1\" class=\"headerlink\" title=\"reload\"></a>reload</h4><p>Not supported. The forked jetty will not redeploy the webapp.</p>\n<h4 id=\"httpConnector-1\"><a href=\"#httpConnector-1\" class=\"headerlink\" title=\"httpConnector\"></a>httpConnector</h4><p>Not supported. To define custom connectors use a jetty xml file instead.</p>\n<h4 id=\"loginServices-1\"><a href=\"#loginServices-1\" class=\"headerlink\" title=\"loginServices\"></a>loginServices</h4><p>Not supported. To define LoginServices use a jetty xml or context xml file instead.</p>\n<h4 id=\"requestLog-1\"><a href=\"#requestLog-1\" class=\"headerlink\" title=\"requestLog\"></a>requestLog</h4><p>Not supported. To define a RequestLog setup, use a jetty xml or context xml file instead.</p>\n<h4 id=\"systemProperties-1\"><a href=\"#systemProperties-1\" class=\"headerlink\" title=\"systemProperties\"></a>systemProperties</h4><p>Not supported. Use the jvmArgs parameter to pass system properties to the forked process.<br>To deploy your unassembled web app to Jetty running in a new JVM:</p>\n<h2 id=\"mvn-jetty-run-forked\"><a href=\"#mvn-jetty-run-forked\" class=\"headerlink\" title=\"mvn jetty:run-forked\"></a>mvn jetty:run-forked</h2><p>Jetty continues to execute until you either:</p>\n<p>Press ctrl-c in the terminal window to stop the plugin, which also stops the forked JVM (only if you started with waitForChild=true)<br>Use jetty:stop to stop the forked JVM, which also stops the plugin.</p>\n<p>If you want to set a custom port for the Jetty connector you need to specify it in a jetty xml file rather than setting the connector and port tags. You can specify the location of the jetty.xml using the jettyXml parameter.</p>\n<h2 id=\"jetty-start\"><a href=\"#jetty-start\" class=\"headerlink\" title=\"jetty:start\"></a>jetty:start</h2><p>This goal is for use with an execution binding in your pom.xml. It is similar to the jetty:run goal, however it does NOT first execute the build up until the test-compile phase to ensure that all necessary classes and files of the webapp have been generated. This is most useful when you want to control the start and stop of Jetty via execution bindings in your pom.xml.</p>\n<p>For example, you can configure the plugin to start your webapp at the beginning of your unit tests and stop at the end. To do this, you need to set up a couple of execution scenarios for the Jetty plugin. You use the pre-integration-test and post-integration-test Maven build phases to trigger the execution and termination of Jetty:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopPort&gt;9999&lt;/stopPort&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;start-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;pre-integration-test&lt;/phase&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;start&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;id&gt;stop-jetty&lt;/id&gt;</div><div class=\"line\">      &lt;phase&gt;post-integration-test&lt;/phase&gt;</div><div class=\"line\">       &lt;goals&gt;</div><div class=\"line\">         &lt;goal&gt;stop&lt;/goal&gt;</div><div class=\"line\">       &lt;/goals&gt;</div><div class=\"line\">     &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"jetty-stop\"><a href=\"#jetty-stop\" class=\"headerlink\" title=\"jetty:stop\"></a>jetty:stop</h2><p>The stop goal stops a running instance of Jetty. To use it, you need to configure the plugin with a special port number and key. That same port number and key will also be used by the other goals that start jetty.</p>\n<h3 id=\"stopPort-1\"><a href=\"#stopPort-1\" class=\"headerlink\" title=\"stopPort\"></a>stopPort</h3><p>A port number for Jetty to listen on to receive a stop command to cause it to shutdown.</p>\n<h3 id=\"stopKey-1\"><a href=\"#stopKey-1\" class=\"headerlink\" title=\"stopKey\"></a>stopKey</h3><p>A string value sent to the stopPort to validate the stop command.</p>\n<h3 id=\"stopWait\"><a href=\"#stopWait\" class=\"headerlink\" title=\"stopWait\"></a>stopWait</h3><p>The maximum time in seconds that the plugin will wait for confirmation that Jetty has stopped. If false or not specified, the plugin does not wait for confirmation but exits after issuing the stop command.<br>Here’s a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;stopPort&gt;9966&lt;/stopPort&gt;</div><div class=\"line\">    &lt;stopKey&gt;foo&lt;/stopKey&gt;</div><div class=\"line\">    &lt;stopWait&gt;10&lt;/stopWait&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then, while Jetty is running (in another window), type:</p>\n<h2 id=\"mvn-jetty-stop\"><a href=\"#mvn-jetty-stop\" class=\"headerlink\" title=\"mvn jetty:stop\"></a>mvn jetty:stop</h2><p>The stopPort must be free on the machine you are running on. If this is not the case, you will get an “Address already in use” error message after the “Started ServerConnector …​” message.</p>\n<h2 id=\"jetty-effective-web-xml\"><a href=\"#jetty-effective-web-xml\" class=\"headerlink\" title=\"jetty:effective-web-xml\"></a>jetty:effective-web-xml</h2><p>This goal calculates a synthetic web.xml (the “effective web.xml”) according to the rules of the Servlet Specification taking into account all sources of discoverable configuration of web components in your application: descriptors (webdefault.xml, web.xml, web-fragment.xml<code>s,</code>web-override.xml) and discovered annotations (@WebServlet, @WebFilter, @WebListener). Note that no programmatic declarations of servlets, filters and listeners can be taken into account. The effective web.xml from these combined sources is generated and displayed as maven log output. Other useful information about your webapp that is produced as part of the analysis is also stored as context parameters in the effective-web.xml. The effective-web.xml can be used in conjunction with the Quickstart feature to quickly start your webapp (note that Quickstart is not appropriate for the mvn jetty goals).</p>\n<p>The following configuration parameters allow you to save the file:</p>\n<h3 id=\"deleteOnExit\"><a href=\"#deleteOnExit\" class=\"headerlink\" title=\"deleteOnExit\"></a>deleteOnExit</h3><p>By default this is true. If set to false, the effective web.xml is generated into a file called effective-web.xml in the build target directory.</p>\n<h3 id=\"effectiveWebXml\"><a href=\"#effectiveWebXml\" class=\"headerlink\" title=\"effectiveWebXml\"></a>effectiveWebXml</h3><p>The full path name of a file into which you would like the effective web xml generated.<br>You can also generate the origin of each element into the effective web.xml file. The origin is either a descriptor eg web.xml,web-fragment.xml,override-web.xml file, or an annotation eg @WebServlet. Some examples of elements with origin attribute information are:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;listener origin=&quot;DefaultsDescriptor(file:///path/to/distro/etc/webdefault.xml):21&quot;&gt;</div><div class=\"line\">&lt;listener origin=&quot;WebDescriptor(file:///path/to/base/webapps/test-spec/WEB-INF/web.xml):22&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;FragmentDescriptor(jar:file:///path/to/base/webapps/test-spec/WEB-INF/lib/test-web-fragment.jar!/META-INF/web-fragment.xml):23&quot;&gt;</div><div class=\"line\">&lt;servlet-class origin=&quot;@WebServlet(com.acme.test.TestServlet):24&quot;&gt;</div></pre></td></tr></table></figure></p>\n<p>To generate origin informatino, use the following configuration parameters on the webApp element:</p>\n<h3 id=\"originAttribute\"><a href=\"#originAttribute\" class=\"headerlink\" title=\"originAttribute\"></a>originAttribute</h3><p>The name of the attribute that will contain the origin. By default it is origin.</p>\n<h3 id=\"generateOrigin\"><a href=\"#generateOrigin\" class=\"headerlink\" title=\"generateOrigin\"></a>generateOrigin</h3><p>False by default. If true, will force the generation of the originAttribute onto each element.</p>\n<h2 id=\"Using-Overlaid-wars\"><a href=\"#Using-Overlaid-wars\" class=\"headerlink\" title=\"Using Overlaid wars\"></a>Using Overlaid wars</h2><p>If your webapp depends on other war files, thejetty:run and jetty:run-forked goals are able to merge resources from all of them. It can do so based on the settings of the maven-war-plugin, or if your project does not use the maven-war-plugin to handle the overlays, it can fall back to a simple algorithm to determine the ordering of resources.</p>\n<h2 id=\"With-maven-war-plugin\"><a href=\"#With-maven-war-plugin\" class=\"headerlink\" title=\"With maven-war-plugin\"></a>With maven-war-plugin</h2><p>The maven-war-plugin has a rich set of capabilities for merging resources. The jetty:run and jetty:run-forked goals are able to interpret most of them and apply them during execution of your unassembled webapp. This is probably best seen by looking at a concrete example.</p>\n<p>Suppose your webapp depends on the following wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<p>Containing:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n<p>They are configured for the maven-war-plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;overlays&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;bar.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">        &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">        &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">        &lt;excludes&gt;</div><div class=\"line\">          &lt;exclude&gt;baz.jsp&lt;/exclude&gt;</div><div class=\"line\">        &lt;/excludes&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">      &lt;overlay&gt;</div><div class=\"line\">      &lt;/overlay&gt;</div><div class=\"line\">    &lt;/overlays&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>Then executing jetty:run would yield the following ordering of resources: com.acme.X.war : com.acme.Y.war: ${project.basedir}/src/main/webapp. Note that the current project’s resources are placed last in the ordering due to the empty <overlay> element in the maven-war-plugin. You can either use that, or specify the <baseappfirst>false</baseappfirst> parameter to the jetty-maven-plugin.</overlay></p>\n<p>Moreover, due to the exclusions specified above, a request for the resource <code>bar.jsp</code> would only be satisfied from com.acme.Y.war. Similarly as baz.jsp is excluded, a request for it would result in a 404 error.</p>\n<h2 id=\"Without-maven-war-plugin\"><a href=\"#Without-maven-war-plugin\" class=\"headerlink\" title=\"Without maven-war-plugin\"></a>Without maven-war-plugin</h2><p>The algorithm is fairly simple, is based on the ordering of declaration of the dependent wars, and does not support exclusions. The configuration parameter <baseappfirst> (see the section on Configuring Your Webapp for more information) can be used to control whether your webapp’s resources are placed first or last on the resource path at runtime.</baseappfirst></p>\n<p>For example, suppose our webapp depends on these two wars:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;X&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.acme&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;Y&lt;/artifactId&gt;</div><div class=\"line\">  &lt;type&gt;war&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<p>Suppose the webapps contain:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">WebAppX:</div><div class=\"line\"></div><div class=\"line\"> /foo.jsp</div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"></div><div class=\"line\">WebAppY:</div><div class=\"line\"></div><div class=\"line\"> /bar.jsp</div><div class=\"line\"> /baz.jsp</div><div class=\"line\"> /WEB-INF/web.xml</div><div class=\"line\"> /WEB-INF/special.xml</div></pre></td></tr></table></figure></p>\n<p>Then our webapp has available these additional resources:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/foo.jsp (X)</div><div class=\"line\">/bar.jsp (X)</div><div class=\"line\">/baz.jsp (Y)</div><div class=\"line\">/WEB-INF/web.xml (X)</div><div class=\"line\">/WEB-INF/special.xml (Y)</div></pre></td></tr></table></figure></p>\n<h2 id=\"Configuring-Security-Settings\"><a href=\"#Configuring-Security-Settings\" class=\"headerlink\" title=\"Configuring Security Settings\"></a>Configuring Security Settings</h2><p>You can configure LoginServices in the plugin. Here’s an example of setting up the HashLoginService for a webapp:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;loginServices&gt;</div><div class=\"line\">      &lt;loginService implementation=&quot;org.eclipse.jetty.security.HashLoginService&quot;&gt;</div><div class=\"line\">        &lt;name&gt;Test Realm&lt;/name&gt;</div><div class=\"line\">        &lt;config&gt;$&#123;project.basedir&#125;/src/etc/realm.properties&lt;/config&gt;</div><div class=\"line\">      &lt;/loginService&gt;</div><div class=\"line\">    &lt;/loginServices&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"Using-Multiple-Webapp-Root-Directories\"><a href=\"#Using-Multiple-Webapp-Root-Directories\" class=\"headerlink\" title=\"Using Multiple Webapp Root Directories\"></a>Using Multiple Webapp Root Directories</h2><p>If you have external resources that you want to incorporate in the execution of a webapp, but which are not assembled into war files, you can’t use the overlaid wars method described above, but you can tell Jetty the directories in which these external resources are located. At runtime, when Jetty receives a request for a resource, it searches all the locations to retrieve the resource. It’s a lot like the overlaid war situation, but without the war.</p>\n<p>Here is a configuration example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;configuration&gt;</div><div class=\"line\">  &lt;webApp&gt;</div><div class=\"line\">    &lt;contextPath&gt;/$&#123;build.finalName&#125;&lt;/contextPath&gt;</div><div class=\"line\">    &lt;baseResource implementation=&quot;org.eclipse.jetty.util.resource.ResourceCollection&quot;&gt;</div><div class=\"line\">      &lt;resourcesAsCSV&gt;src/main/webapp,/home/johndoe/path/to/my/other/source,/yet/another/folder&lt;/resourcesAsCSV&gt;</div><div class=\"line\">    &lt;/baseResource&gt;</div><div class=\"line\">  &lt;/webApp&gt;</div><div class=\"line\">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"Running-More-than-One-Webapp\"><a href=\"#Running-More-than-One-Webapp\" class=\"headerlink\" title=\"Running More than One Webapp\"></a>Running More than One Webapp</h2><p>You can use either a jetty.xml file to configure extra (pre-compiled) webapps that you want to deploy, or you can use the <contexthandlers> configuration element to do so. If you want to deploy webapp A, and webapps B and C in the same Jetty instance:</contexthandlers></p>\n<p>Putting the configuration in webapp A’s pom.xml:</p>\n<p><plugin><br>  <groupid>org.eclipse.jetty</groupid><br>  <artifactid>jetty-maven-plugin</artifactid><br>  <version>9.4.5.v20170502</version><br>  <configuration><br>    <scanintervalseconds>10</scanintervalseconds><br>    <webapp><br>      <contextpath>/test</contextpath><br>    </webapp><br>    <contexthandlers><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../B.war</war><br>        <contextpath>/B</contextpath><br>      </contexthandler><br>      <contexthandler implementation=\"org.eclipse.jetty.maven.plugin.JettyWebAppContext\"><br>        <war>${project.basedir}../../C.war</war><br>        <contextpath>/C</contextpath><br>      </contexthandler><br>    </contexthandlers><br>  </configuration><br></plugin><br> Important<br>If the ContextHandler you are deploying is a webapp, it is essential that you use an org.eclipse.jetty.maven.plugin.JettyWebAppContext instance rather than a standard org.eclipse.jetty.webapp.WebAppContext instance. Only the former will allow the webapp to function correctly in the maven environment.</p>\n<p>Alternatively, add a jetty.xml file to webapp A. Copy the jetty.xml file from the Jetty distribution, and then add WebAppContexts for the other 2 webapps:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Ref refid=&quot;Contexts&quot;&gt;</div><div class=\"line\">  &lt;Call name=&quot;addHandler&quot;&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/B&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../B.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">  &lt;Call&gt;</div><div class=\"line\">    &lt;Arg&gt;</div><div class=\"line\">      &lt;New class=&quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&quot;&gt;</div><div class=\"line\">        &lt;Set name=&quot;contextPath&quot;&gt;/C&lt;/Set&gt;</div><div class=\"line\">        &lt;Set name=&quot;war&quot;&gt;../../C.war&lt;/Set&gt;</div><div class=\"line\">      &lt;/New&gt;</div><div class=\"line\">    &lt;/Arg&gt;</div><div class=\"line\">  &lt;/Call&gt;</div><div class=\"line\">&lt;/Ref&gt;</div></pre></td></tr></table></figure></p>\n<p>Then configure the location of this jetty.xml file into webapp A’s jetty plugin:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;9.4.5.v20170502&lt;/version&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">    &lt;jettyXml&gt;src/main/etc/jetty.xml&lt;/jettyXml&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>For either of these solutions, the other webapps must already have been built, and they are not automatically monitored for changes. You can refer either to the packed WAR file of the pre-built webapps or to their expanded equivalents.</p>\n<h2 id=\"Setting-System-Properties\"><a href=\"#Setting-System-Properties\" class=\"headerlink\" title=\"Setting System Properties\"></a>Setting System Properties</h2><p>You can specify property name/value pairs that Jetty sets as System properties for the execution of the plugin. This feature is useful to tidy up the command line and save a lot of typing.</p>\n<p>However, sometimes it is not possible to use this feature to set System properties - sometimes the software component using the System property is already initialized by the time that maven runs (in which case you will need to provide the System property on the command line), or by the time that Jetty runs. In the latter case, you can use the maven properties plugin to define the system properties instead. Here’s an example that configures the logback logging system as the Jetty logger:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;1.0-alpha-2&lt;/version&gt;</div><div class=\"line\">  &lt;executions&gt;</div><div class=\"line\">    &lt;execution&gt;</div><div class=\"line\">      &lt;goals&gt;</div><div class=\"line\">        &lt;goal&gt;set-system-properties&lt;/goal&gt;</div><div class=\"line\">      &lt;/goals&gt;</div><div class=\"line\">      &lt;configuration&gt;</div><div class=\"line\">        &lt;properties&gt;</div><div class=\"line\">          &lt;property&gt;</div><div class=\"line\">            &lt;name&gt;logback.configurationFile&lt;/name&gt;</div><div class=\"line\">            &lt;value&gt;$&#123;project.baseUri&#125;/resources/logback.xml&lt;/value&gt;</div><div class=\"line\">          &lt;/property&gt;</div><div class=\"line\">        &lt;/properties&gt;</div><div class=\"line\">      &lt;/configuration&gt;</div><div class=\"line\">    &lt;/execution&gt;</div><div class=\"line\">  &lt;/executions&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p> Note<br>If a System property is already set (for example, from the command line or by the JVM itself), then by default these configured properties DO NOT override them (see below for use of the <force> parameter).</force></p>\n<h2 id=\"Specifying-System-Properties-in-the-POM\"><a href=\"#Specifying-System-Properties-in-the-POM\" class=\"headerlink\" title=\"Specifying System Properties in the POM\"></a>Specifying System Properties in the POM</h2><p>Here’s an example of how to specify System properties in the POM:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">        &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">        &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">      &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n<p>To change the default behavior so that these system properties override those on the command line, use the <force> parameter:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemProperties&gt;</div><div class=\"line\">      &lt;force&gt;true&lt;/force&gt;</div><div class=\"line\">      &lt;systemProperty&gt;</div><div class=\"line\">       &lt;name&gt;fooprop&lt;/name&gt;</div><div class=\"line\">       &lt;value&gt;222&lt;/value&gt;</div><div class=\"line\">     &lt;/systemProperty&gt;</div><div class=\"line\">    &lt;/systemProperties&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></force></p>\n<p>Specifying System Properties in a File</p>\n<p>You can also specify your System properties in a file. System properties you specify in this way do not override System properties that set on the command line, by the JVM, or directly in the POM via systemProperties.</p>\n<p>Suppose we have a file called mysys.props which contains the following:</p>\n<blockquote>\n<p>fooprop=222<br>This can be configured on the plugin like so:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;plugin&gt;</div><div class=\"line\">  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</div><div class=\"line\">  &lt;configuration&gt;</div><div class=\"line\">    &lt;systemPropertiesFile&gt;$&#123;project.basedir&#125;/mysys.props&lt;/systemPropertiesFile&gt;</div><div class=\"line\">    &lt;webApp&gt;</div><div class=\"line\">      &lt;contextPath&gt;/test&lt;/contextPath&gt;</div><div class=\"line\">    &lt;/webApp&gt;</div><div class=\"line\">  &lt;/configuration&gt;</div><div class=\"line\">&lt;/plugin&gt;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>You can instead specify the file by setting the System property jetty.systemPropertiesFile on the command line.</p>"},{"title":"NexT主题前端资源CDN加速","date":"2017-05-22T05:40:46.000Z","reward":true,"_content":"\n为NexT主题设置第三方CDN加速的资源库，提高博客加载效率\n<!--more-->\n```\nvendors:\n  # Internal path prefix. Please do not edit it.\n  _internal: lib\n\n  # Internal version: 2.1.3\n  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js\n\n  # Internal version: 2.1.5\n  # See: http://fancyapps.com/fancybox/\n  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js\n  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css\n\n  # Internal version: 1.0.6\n  # See: https://github.com/ftlabs/fastclick\n  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js\n\n  # Internal version: 1.9.7\n  # See: https://github.com/tuupola/jquery_lazyload\n  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js\n\n  # Internal version: 0.7.9\n  # See: https://faisalman.github.io/ua-parser-js/\n  ua_parser:\n\n  # Internal version: 4.6.2\n  # See: http://fontawesome.io/\n  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css\n\n  # Internal version: 1\n  # https://www.algolia.com\n  algolia_instant_js:\n  algolia_instant_css:\n\n  # Internal version: 1.0.0\n  # https://github.com/hustcc/canvas-nest.js\n  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js\n\n  # three\n  three: //cdn.staticfile.org/three.js/r83/three.min.js\n\n  # three_waves\n  # https://github.com/jjandxa/three_waves\n  three_waves:\n\n  # three_waves\n  # https://github.com/jjandxa/canvas_lines\n  canvas_lines:\n\n  # three_waves\n  # https://github.com/jjandxa/canvas_sphere\n  canvas_sphere:\n\n  # Internal version: 1.0.0\n  # https://github.com/zproo/canvas-ribbon\n  canvas_ribbon:\n\n  # Internal version: 3.3.0\n  # https://github.com/ethantw/Han\n  han: //cdn.staticfile.org/Han/3.3.0/han.min.js\n\n```","source":"_posts/build/next主题前端资源CDN加速.md","raw":"\n---\ntitle: NexT主题前端资源CDN加速\ndate: 2017-05-22 13:40:46\nreward: true\ncategories:\n    - build\ntags: \n    - Hexo\n    - NexT\n---\n\n为NexT主题设置第三方CDN加速的资源库，提高博客加载效率\n<!--more-->\n```\nvendors:\n  # Internal path prefix. Please do not edit it.\n  _internal: lib\n\n  # Internal version: 2.1.3\n  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js\n\n  # Internal version: 2.1.5\n  # See: http://fancyapps.com/fancybox/\n  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js\n  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css\n\n  # Internal version: 1.0.6\n  # See: https://github.com/ftlabs/fastclick\n  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js\n\n  # Internal version: 1.9.7\n  # See: https://github.com/tuupola/jquery_lazyload\n  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js\n\n  # Internal version: 0.7.9\n  # See: https://faisalman.github.io/ua-parser-js/\n  ua_parser:\n\n  # Internal version: 4.6.2\n  # See: http://fontawesome.io/\n  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css\n\n  # Internal version: 1\n  # https://www.algolia.com\n  algolia_instant_js:\n  algolia_instant_css:\n\n  # Internal version: 1.0.0\n  # https://github.com/hustcc/canvas-nest.js\n  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js\n\n  # three\n  three: //cdn.staticfile.org/three.js/r83/three.min.js\n\n  # three_waves\n  # https://github.com/jjandxa/three_waves\n  three_waves:\n\n  # three_waves\n  # https://github.com/jjandxa/canvas_lines\n  canvas_lines:\n\n  # three_waves\n  # https://github.com/jjandxa/canvas_sphere\n  canvas_sphere:\n\n  # Internal version: 1.0.0\n  # https://github.com/zproo/canvas-ribbon\n  canvas_ribbon:\n\n  # Internal version: 3.3.0\n  # https://github.com/ethantw/Han\n  han: //cdn.staticfile.org/Han/3.3.0/han.min.js\n\n```","slug":"build/next主题前端资源CDN加速","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrc000q9vvu05cm2o0a","content":"<p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<p>为NexT主题设置第三方CDN加速的资源库，提高博客加载效率<br>","more":"<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">vendors:</div><div class=\"line\">  # Internal path prefix. Please do not edit it.</div><div class=\"line\">  _internal: lib</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.3</div><div class=\"line\">  jquery: //cdn.staticfile.org/jquery/2.1.3/jquery.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 2.1.5</div><div class=\"line\">  # See: http://fancyapps.com/fancybox/</div><div class=\"line\">  fancybox: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.js</div><div class=\"line\">  fancybox_css: //cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.6</div><div class=\"line\">  # See: https://github.com/ftlabs/fastclick</div><div class=\"line\">  fastclick: //cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.9.7</div><div class=\"line\">  # See: https://github.com/tuupola/jquery_lazyload</div><div class=\"line\">  lazyload: //cdn.staticfile.org/jquery_lazyload/1.9.7/jquery.lazyload.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity: //cdn.staticfile.org/velocity/1.2.1/velocity.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.2.1</div><div class=\"line\">  # See: http://VelocityJS.org</div><div class=\"line\">  velocity_ui: //cdn.staticfile.org/velocity/1.2.1/velocity.ui.min.js</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 0.7.9</div><div class=\"line\">  # See: https://faisalman.github.io/ua-parser-js/</div><div class=\"line\">  ua_parser:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 4.6.2</div><div class=\"line\">  # See: http://fontawesome.io/</div><div class=\"line\">  fontawesome: //cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1</div><div class=\"line\">  # https://www.algolia.com</div><div class=\"line\">  algolia_instant_js:</div><div class=\"line\">  algolia_instant_css:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/hustcc/canvas-nest.js</div><div class=\"line\">  canvas_nest: //cdn.staticfile.org/canvas-nest.js/1.0.0/canvas-nest.min.js</div><div class=\"line\"></div><div class=\"line\">  # three</div><div class=\"line\">  three: //cdn.staticfile.org/three.js/r83/three.min.js</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/three_waves</div><div class=\"line\">  three_waves:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_lines</div><div class=\"line\">  canvas_lines:</div><div class=\"line\"></div><div class=\"line\">  # three_waves</div><div class=\"line\">  # https://github.com/jjandxa/canvas_sphere</div><div class=\"line\">  canvas_sphere:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 1.0.0</div><div class=\"line\">  # https://github.com/zproo/canvas-ribbon</div><div class=\"line\">  canvas_ribbon:</div><div class=\"line\"></div><div class=\"line\">  # Internal version: 3.3.0</div><div class=\"line\">  # https://github.com/ethantw/Han</div><div class=\"line\">  han: //cdn.staticfile.org/Han/3.3.0/han.min.js</div></pre></td></tr></table></figure></p>"},{"title":"全站HTTPS之路","date":"2017-06-15T14:12:25.000Z","reward":true,"_content":"\n## 什么是HTTPS？\nHTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。现在它被广泛用于互联网上安全敏感的通讯，例如交易支付等。\n\n采用HTTPS的服务器必须从CA （Certificate Authority）申请一个用于证明服务器用途类型的证书。该证书只有用于对应的服务器的时候，客户端才信任此主机。所以所有的银行系统网站，关键部分应用都是HTTPS的。客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。这一点对局域网对内提供服务处的服务器没有任何意义。局域网中的服务器，采用的证书不管是自己发布的还是从公众的地方发布的，其客户端都是自己人，所以该局域网中的客户端也就肯定信任该服务器。\n\n## 启用HTTPS\n有不少网站只通过HTTPS对外提供服务，但用户在访问某个网站的时候，在浏览器里却往往直接输入网站域名（例如www.example.com），而不是输入完整的URL（例如https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作\n![强制全站https](http://static.xcoder.ren/public/resource/http-https.png)\n\n以nginx为例配置\n```markdown\nserver{\n    listen 80;\n    server_name www.example.com;\n    rewrite ^(.*)$  https://$host$1 permanent;\n}\n\n或者\nserver{\n    listen 80;\n    server_name www.example.com;\n    return 301 https://www.example.com;\n}\n\n```\n<!--more-->\nnginx的HTTPS配置\n```markdown\nserver {\n        #开启 SPDY 和 HTTP2 支持，借助多路复用提升传输性能。\n        listen   443  ssl http2 default_server;\n        server_name  www.example.com;\n\n        #charset koi8-r;\n        #配置HSTS\n        add_header Strict-Transport-Security \"max-age=15552000; includeSubdomains; preload\" always;\n        add_header X-Frame-Options \"DENY\";\n\n        #access_log  logs/host.access.log  main;\n        ssl on;\n        ##crt后缀或者pem后缀为证书公钥文件,key为证书私钥文件，一般证书服务商提供\n        ssl_certificate  /usr/nginx/ssl/example.com.crt;\n        ssl_certificate_key  /usr/nginx/ssl/example.com.key;\n        ssl_session_timeout 5m;\n        #不使用SSLv2,SSLv3等不安全协议\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n        ssl_prefer_server_ciphers on;\n        \n        ssl_dhparam /path/to/dhparam.pem;\n        \n        location / {\n            proxy_pass http://127.0.0.1:8080;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n}\n```\n通常情况下，我们将用户的 HTTP 请求 301或302 跳转到 HTTPS，这会存在两个问题：\n* 不够安全，302 跳转会暴露用户访问站点，也容易被劫持\n![http跳转中被劫持](http://static.xcoder.ren/public/resource/http-unsafe.png)\n* 拖慢访问速度，302 跳转需要一个 RTT（The role of packet loss and round-trip time），浏览器执行跳转也需要时间\n\n## HSTS解决跳转不安全的问题\nHSTS的全称是HTTP Strict-Transport-Security，它是一个Web安全策略机制（web security policy mechanism）。\n302跳转是由浏览器触发的，服务器无法完全控制，这个需求导致了 HSTS(HTTP Strict Transport Security)的诞生。\nHSTS就是添加 header 头（add_header Strict-Transport-Security max-age=15768000;includeSubDomains），告诉浏览器网站使用 HTTPS 访问，支持HSTS的浏览器（Chrome, firefox, ie 都支持了 HSTS（http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到 HTTPS。在 Chrome 中会看到浏览器自己会有个 307 Internal Redirect 的内部重定向。在一段时间内也就是max-age定义的时间，不管用户输入www.example.com还是http://www.example.com，都会默认将请求内部跳转到https://www.example.com。\nHSTS最早于2015年被纳入到ThoughtWorks技术雷达，并且目前在“采用（Adopt）“阶段，这意味着ThoughtWorks强烈主张业界积极采用这项安全防御措施，并且ThoughtWorks已经将其应用于自己的项目。\nHSTS Header的语法如下：\n\n```\nStrict-Transport-Security: <max-age=>[; includeSubDomains][; preload]\n```\n其中：\n\n* max-age是必选参数，是一个以秒为单位的数值，它代表着HSTS Header的过期时间，通常设置为1年，即31536000秒。\n* includeSubDomains是可选参数，如果包含它，则意味着当前域名及其子域名均开启HSTS保护。\n* preload是可选参数，只有当你申请将自己的域名加入到浏览器内置列表的时候才需要使用到它。关于浏览器内置列表，下文有详细介绍。\n\nApache上启用HSTS\n```markdown\n# Optionally load the headers module:\nLoadModule headers_module modules/mod_headers.so\n \n<VirtualHost 0.0.0.0:443>\n    Header always set Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\"\n</VirtualHost>\n```\n\nNginx上启用HSTS\n```markdown\nadd_header Strict-Transport-Security \"max-age=300; includeSubdomains; preload\";\nadd_header X-Frame-Options \"DENY\";\n```\nLighttpd上启用HSTS\n```markdown\nserver.modules += ( \"mod_setenv\" )\n$HTTP[\"scheme\"] == \"https\" {\n    setenv.add-response-header  = ( \"Strict-Transport-Security\" => \"max-age=63072000; includeSubdomains; preload\")\n}\n```\n\n在生产环境下使用HSTS应当特别谨慎，因为一旦浏览器接收到HSTS Header（假如有效期是1年），但是网站的证书又恰好出了问题，那么用户将在接下来的1年时间内都无法访问到你的网站，直到证书错误被修复，或者用户主动清除浏览器缓存。因此，建议在生产环境开启HSTS的时候，先将max-age的值设置小一些，例如5分钟，然后检查HSTS是否能正常工作，网站能否正常访问，之后再逐步将时间延长，例如1周、1个月，并在这个时间范围内继续检查HSTS是否正常工作，最后才改到1年。\n\n## 全站HTTPS必须解决的问题\n\n然而，HTTPS并非“想上就上”，正式启用之前，必须解决至少三个方面的大问题。\n\n首先是性能，这也主要分三点。\n\n* HTTPS需要多次握手，因此网络耗时变长，用户从HTTP跳转到HTTPS需要一些时间；\n\n* HTTPS要做RSA校验，这会影响到设备性能；\n\n* 所有CDN节点要支持HTTPS，而且需要有极其复杂的解决方案来面对DDoS的挑战。\n\n其次，兼容性及周边。\n\n* 页面里所有嵌入的资源(图片/附件/js/css/视频等)都要改成HTTPS的,否则浏览器就会报警(静态资源的URL，采用 // 引用资源，表示遵从当前页面的协议，浏览器会进行自动补全).\n\n* 移动客户端（APP）也需要适配HTTPS，所以必须做调整修改；\n\n* 解决第三方网站看不到Referer的问题；\n\n* 所有的开发、测试环境都要做HTTPS的升级；\n\n最后，为保证上线时的顺利切换，需要提前准备大量的预案，以应对各种可能出现的情况。\n\n## 全站HTTPS还可以做的更多\n\n### 配置X-Frame-Options\nX-Frame-Options头部添加到HTTPS站点，确保不会嵌入到frame 或 iframe，避免点击劫持，以确保网站的内容不会嵌入到其他网站。\n\nApache配置\n```markdown\nHeader always set X-Frame-Options DENY\n```\n\nNginx配置\n```markdown\nadd_header X-Frame-Options \"DENY\";\n```\nLighttpd配置\n```markdown\nserver.modules += ( \"mod_setenv\" )\n$HTTP[\"scheme\"] == \"https\" {\n    setenv.add-response-header  = ( \"X-Frame-Options\" => \"DENY\")\n}\n```\n\n设置``listen   443  ssl http2 default_server;``最好将openssl和nginx升级到当前版本的最新版本\n\n```markdown\nyum update nginx\nyum update openssl\n```\n\n### 配置赫尔曼密钥\n\n```markdown\nopenssl dhparam -out dhparam.pem 2048 // 在 ssh 运行， openssl 生成 2048 位的密钥而不是当作参数写入 nginx.conf 文件。\n\nssl_dhparam /path/to/dhparam.pem; //在 .conf 中配置\n```\n\n\n\n最后，盗张阿里的图\n![阿里HTTPS](http://static.xcoder.ren/public/resource/alibaba-https.jpeg)","source":"_posts/build/全站HTTPS之路.md","raw":"\n---\ntitle: 全站HTTPS之路\ndate: 2017-06-15 22:12:25\nreward: true\ncategories:\n    - build\ntags:\n    - 运维\n    - HTTPS\n---\n\n## 什么是HTTPS？\nHTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。现在它被广泛用于互联网上安全敏感的通讯，例如交易支付等。\n\n采用HTTPS的服务器必须从CA （Certificate Authority）申请一个用于证明服务器用途类型的证书。该证书只有用于对应的服务器的时候，客户端才信任此主机。所以所有的银行系统网站，关键部分应用都是HTTPS的。客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。这一点对局域网对内提供服务处的服务器没有任何意义。局域网中的服务器，采用的证书不管是自己发布的还是从公众的地方发布的，其客户端都是自己人，所以该局域网中的客户端也就肯定信任该服务器。\n\n## 启用HTTPS\n有不少网站只通过HTTPS对外提供服务，但用户在访问某个网站的时候，在浏览器里却往往直接输入网站域名（例如www.example.com），而不是输入完整的URL（例如https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作\n![强制全站https](http://static.xcoder.ren/public/resource/http-https.png)\n\n以nginx为例配置\n```markdown\nserver{\n    listen 80;\n    server_name www.example.com;\n    rewrite ^(.*)$  https://$host$1 permanent;\n}\n\n或者\nserver{\n    listen 80;\n    server_name www.example.com;\n    return 301 https://www.example.com;\n}\n\n```\n<!--more-->\nnginx的HTTPS配置\n```markdown\nserver {\n        #开启 SPDY 和 HTTP2 支持，借助多路复用提升传输性能。\n        listen   443  ssl http2 default_server;\n        server_name  www.example.com;\n\n        #charset koi8-r;\n        #配置HSTS\n        add_header Strict-Transport-Security \"max-age=15552000; includeSubdomains; preload\" always;\n        add_header X-Frame-Options \"DENY\";\n\n        #access_log  logs/host.access.log  main;\n        ssl on;\n        ##crt后缀或者pem后缀为证书公钥文件,key为证书私钥文件，一般证书服务商提供\n        ssl_certificate  /usr/nginx/ssl/example.com.crt;\n        ssl_certificate_key  /usr/nginx/ssl/example.com.key;\n        ssl_session_timeout 5m;\n        #不使用SSLv2,SSLv3等不安全协议\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n        ssl_prefer_server_ciphers on;\n        \n        ssl_dhparam /path/to/dhparam.pem;\n        \n        location / {\n            proxy_pass http://127.0.0.1:8080;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n}\n```\n通常情况下，我们将用户的 HTTP 请求 301或302 跳转到 HTTPS，这会存在两个问题：\n* 不够安全，302 跳转会暴露用户访问站点，也容易被劫持\n![http跳转中被劫持](http://static.xcoder.ren/public/resource/http-unsafe.png)\n* 拖慢访问速度，302 跳转需要一个 RTT（The role of packet loss and round-trip time），浏览器执行跳转也需要时间\n\n## HSTS解决跳转不安全的问题\nHSTS的全称是HTTP Strict-Transport-Security，它是一个Web安全策略机制（web security policy mechanism）。\n302跳转是由浏览器触发的，服务器无法完全控制，这个需求导致了 HSTS(HTTP Strict Transport Security)的诞生。\nHSTS就是添加 header 头（add_header Strict-Transport-Security max-age=15768000;includeSubDomains），告诉浏览器网站使用 HTTPS 访问，支持HSTS的浏览器（Chrome, firefox, ie 都支持了 HSTS（http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到 HTTPS。在 Chrome 中会看到浏览器自己会有个 307 Internal Redirect 的内部重定向。在一段时间内也就是max-age定义的时间，不管用户输入www.example.com还是http://www.example.com，都会默认将请求内部跳转到https://www.example.com。\nHSTS最早于2015年被纳入到ThoughtWorks技术雷达，并且目前在“采用（Adopt）“阶段，这意味着ThoughtWorks强烈主张业界积极采用这项安全防御措施，并且ThoughtWorks已经将其应用于自己的项目。\nHSTS Header的语法如下：\n\n```\nStrict-Transport-Security: <max-age=>[; includeSubDomains][; preload]\n```\n其中：\n\n* max-age是必选参数，是一个以秒为单位的数值，它代表着HSTS Header的过期时间，通常设置为1年，即31536000秒。\n* includeSubDomains是可选参数，如果包含它，则意味着当前域名及其子域名均开启HSTS保护。\n* preload是可选参数，只有当你申请将自己的域名加入到浏览器内置列表的时候才需要使用到它。关于浏览器内置列表，下文有详细介绍。\n\nApache上启用HSTS\n```markdown\n# Optionally load the headers module:\nLoadModule headers_module modules/mod_headers.so\n \n<VirtualHost 0.0.0.0:443>\n    Header always set Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\"\n</VirtualHost>\n```\n\nNginx上启用HSTS\n```markdown\nadd_header Strict-Transport-Security \"max-age=300; includeSubdomains; preload\";\nadd_header X-Frame-Options \"DENY\";\n```\nLighttpd上启用HSTS\n```markdown\nserver.modules += ( \"mod_setenv\" )\n$HTTP[\"scheme\"] == \"https\" {\n    setenv.add-response-header  = ( \"Strict-Transport-Security\" => \"max-age=63072000; includeSubdomains; preload\")\n}\n```\n\n在生产环境下使用HSTS应当特别谨慎，因为一旦浏览器接收到HSTS Header（假如有效期是1年），但是网站的证书又恰好出了问题，那么用户将在接下来的1年时间内都无法访问到你的网站，直到证书错误被修复，或者用户主动清除浏览器缓存。因此，建议在生产环境开启HSTS的时候，先将max-age的值设置小一些，例如5分钟，然后检查HSTS是否能正常工作，网站能否正常访问，之后再逐步将时间延长，例如1周、1个月，并在这个时间范围内继续检查HSTS是否正常工作，最后才改到1年。\n\n## 全站HTTPS必须解决的问题\n\n然而，HTTPS并非“想上就上”，正式启用之前，必须解决至少三个方面的大问题。\n\n首先是性能，这也主要分三点。\n\n* HTTPS需要多次握手，因此网络耗时变长，用户从HTTP跳转到HTTPS需要一些时间；\n\n* HTTPS要做RSA校验，这会影响到设备性能；\n\n* 所有CDN节点要支持HTTPS，而且需要有极其复杂的解决方案来面对DDoS的挑战。\n\n其次，兼容性及周边。\n\n* 页面里所有嵌入的资源(图片/附件/js/css/视频等)都要改成HTTPS的,否则浏览器就会报警(静态资源的URL，采用 // 引用资源，表示遵从当前页面的协议，浏览器会进行自动补全).\n\n* 移动客户端（APP）也需要适配HTTPS，所以必须做调整修改；\n\n* 解决第三方网站看不到Referer的问题；\n\n* 所有的开发、测试环境都要做HTTPS的升级；\n\n最后，为保证上线时的顺利切换，需要提前准备大量的预案，以应对各种可能出现的情况。\n\n## 全站HTTPS还可以做的更多\n\n### 配置X-Frame-Options\nX-Frame-Options头部添加到HTTPS站点，确保不会嵌入到frame 或 iframe，避免点击劫持，以确保网站的内容不会嵌入到其他网站。\n\nApache配置\n```markdown\nHeader always set X-Frame-Options DENY\n```\n\nNginx配置\n```markdown\nadd_header X-Frame-Options \"DENY\";\n```\nLighttpd配置\n```markdown\nserver.modules += ( \"mod_setenv\" )\n$HTTP[\"scheme\"] == \"https\" {\n    setenv.add-response-header  = ( \"X-Frame-Options\" => \"DENY\")\n}\n```\n\n设置``listen   443  ssl http2 default_server;``最好将openssl和nginx升级到当前版本的最新版本\n\n```markdown\nyum update nginx\nyum update openssl\n```\n\n### 配置赫尔曼密钥\n\n```markdown\nopenssl dhparam -out dhparam.pem 2048 // 在 ssh 运行， openssl 生成 2048 位的密钥而不是当作参数写入 nginx.conf 文件。\n\nssl_dhparam /path/to/dhparam.pem; //在 .conf 中配置\n```\n\n\n\n最后，盗张阿里的图\n![阿里HTTPS](http://static.xcoder.ren/public/resource/alibaba-https.jpeg)","slug":"build/全站HTTPS之路","published":1,"updated":"2017-06-16T03:53:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegre000v9vvuuh4n6f7t","content":"<h2 id=\"什么是HTTPS？\"><a href=\"#什么是HTTPS？\" class=\"headerlink\" title=\"什么是HTTPS？\"></a>什么是HTTPS？</h2><p>HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。现在它被广泛用于互联网上安全敏感的通讯，例如交易支付等。</p>\n<p>采用HTTPS的服务器必须从CA （Certificate Authority）申请一个用于证明服务器用途类型的证书。该证书只有用于对应的服务器的时候，客户端才信任此主机。所以所有的银行系统网站，关键部分应用都是HTTPS的。客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。这一点对局域网对内提供服务处的服务器没有任何意义。局域网中的服务器，采用的证书不管是自己发布的还是从公众的地方发布的，其客户端都是自己人，所以该局域网中的客户端也就肯定信任该服务器。</p>\n<h2 id=\"启用HTTPS\"><a href=\"#启用HTTPS\" class=\"headerlink\" title=\"启用HTTPS\"></a>启用HTTPS</h2><p>有不少网站只通过HTTPS对外提供服务，但用户在访问某个网站的时候，在浏览器里却往往直接输入网站域名（例如www.example.com），而不是输入完整的URL（例如<a href=\"https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作\" target=\"_blank\" rel=\"external\">https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作</a><br><img src=\"http://static.xcoder.ren/public/resource/http-https.png\" alt=\"强制全站https\"></p>\n<p>以nginx为例配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">server&#123;</div><div class=\"line\"><span class=\"code\">    listen 80;</span></div><div class=\"line\"><span class=\"code\">    server_name www.example.com;</span></div><div class=\"line\"><span class=\"code\">    rewrite ^(.*)$  https://$host$1 permanent;</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">或者</div><div class=\"line\">server&#123;</div><div class=\"line\"><span class=\"code\">    listen 80;</span></div><div class=\"line\"><span class=\"code\">    server_name www.example.com;</span></div><div class=\"line\"><span class=\"code\">    return 301 https://www.example.com;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>nginx的HTTPS配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">server &#123;</div><div class=\"line\"><span class=\"code\">        #开启 SPDY 和 HTTP2 支持，借助多路复用提升传输性能。</span></div><div class=\"line\"><span class=\"code\">        listen   443  ssl http2 default_server;</span></div><div class=\"line\"><span class=\"code\">        server_name  www.example.com;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #charset koi8-r;</span></div><div class=\"line\"><span class=\"code\">        #配置HSTS</span></div><div class=\"line\"><span class=\"code\">        add_header Strict-Transport-Security \"max-age=15552000; includeSubdomains; preload\" always;</span></div><div class=\"line\"><span class=\"code\">        add_header X-Frame-Options \"DENY\";</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #access_log  logs/host.access.log  main;</span></div><div class=\"line\"><span class=\"code\">        ssl on;</span></div><div class=\"line\"><span class=\"code\">        ##crt后缀或者pem后缀为证书公钥文件,key为证书私钥文件，一般证书服务商提供</span></div><div class=\"line\"><span class=\"code\">        ssl_certificate  /usr/nginx/ssl/example.com.crt;</span></div><div class=\"line\"><span class=\"code\">        ssl_certificate_key  /usr/nginx/ssl/example.com.key;</span></div><div class=\"line\"><span class=\"code\">        ssl_session_timeout 5m;</span></div><div class=\"line\"><span class=\"code\">        #不使用SSLv2,SSLv3等不安全协议</span></div><div class=\"line\"><span class=\"code\">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span></div><div class=\"line\"><span class=\"code\">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span></div><div class=\"line\"><span class=\"code\">        ssl_prefer_server_ciphers on;</span></div><div class=\"line\"><span class=\"code\">        </span></div><div class=\"line\"><span class=\"code\">        ssl_dhparam /path/to/dhparam.pem;</span></div><div class=\"line\"><span class=\"code\">        </span></div><div class=\"line\"><span class=\"code\">        location / &#123;</span></div><div class=\"line\"><span class=\"code\">            proxy_pass http://127.0.0.1:8080;</span></div><div class=\"line\"><span class=\"code\">        &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #error_page  404              /404.html;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        # redirect server error pages to the static page /50x.html</span></div><div class=\"line\"><span class=\"code\">        #</span></div><div class=\"line\"><span class=\"code\">        error_page   500 502 503 504  /50x.html;</span></div><div class=\"line\"><span class=\"code\">        location = /50x.html &#123;</span></div><div class=\"line\"><span class=\"code\">            root   html;</span></div><div class=\"line\"><span class=\"code\">        &#125;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>通常情况下，我们将用户的 HTTP 请求 301或302 跳转到 HTTPS，这会存在两个问题：</p>\n<ul>\n<li>不够安全，302 跳转会暴露用户访问站点，也容易被劫持<br><img src=\"http://static.xcoder.ren/public/resource/http-unsafe.png\" alt=\"http跳转中被劫持\"></li>\n<li>拖慢访问速度，302 跳转需要一个 RTT（The role of packet loss and round-trip time），浏览器执行跳转也需要时间</li>\n</ul>\n<h2 id=\"HSTS解决跳转不安全的问题\"><a href=\"#HSTS解决跳转不安全的问题\" class=\"headerlink\" title=\"HSTS解决跳转不安全的问题\"></a>HSTS解决跳转不安全的问题</h2><p>HSTS的全称是HTTP Strict-Transport-Security，它是一个Web安全策略机制（web security policy mechanism）。<br>302跳转是由浏览器触发的，服务器无法完全控制，这个需求导致了 HSTS(HTTP Strict Transport Security)的诞生。<br>HSTS就是添加 header 头（add_header Strict-Transport-Security max-age=15768000;includeSubDomains），告诉浏览器网站使用 HTTPS 访问，支持HSTS的浏览器（Chrome, firefox, ie 都支持了 HSTS（<a href=\"http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到\" target=\"_blank\" rel=\"external\">http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到</a> HTTPS。在 Chrome 中会看到浏览器自己会有个 307 Internal Redirect 的内部重定向。在一段时间内也就是max-age定义的时间，不管用户输入www.example.com还是<a href=\"http://www.example.com，都会默认将请求内部跳转到https://www.example.com。\" target=\"_blank\" rel=\"external\">http://www.example.com，都会默认将请求内部跳转到https://www.example.com。</a><br>HSTS最早于2015年被纳入到ThoughtWorks技术雷达，并且目前在“采用（Adopt）“阶段，这意味着ThoughtWorks强烈主张业界积极采用这项安全防御措施，并且ThoughtWorks已经将其应用于自己的项目。<br>HSTS Header的语法如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Strict-Transport-Security: &lt;max-age=&gt;[; includeSubDomains][; preload]</div></pre></td></tr></table></figure>\n<p>其中：</p>\n<ul>\n<li>max-age是必选参数，是一个以秒为单位的数值，它代表着HSTS Header的过期时间，通常设置为1年，即31536000秒。</li>\n<li>includeSubDomains是可选参数，如果包含它，则意味着当前域名及其子域名均开启HSTS保护。</li>\n<li>preload是可选参数，只有当你申请将自己的域名加入到浏览器内置列表的时候才需要使用到它。关于浏览器内置列表，下文有详细介绍。</li>\n</ul>\n<p>Apache上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"># Optionally load the headers module:</span></div><div class=\"line\">LoadModule headers<span class=\"emphasis\">_module modules/mod_</span>headers.so</div><div class=\"line\"> </div><div class=\"line\">&lt;VirtualHost 0.0.0.0:443&gt;</div><div class=\"line\"><span class=\"code\">    Header always set Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\"</span></div><div class=\"line\">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure></p>\n<p>Nginx上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">add_header Strict-Transport-Security \"max-age=300; includeSubdomains; preload\";</div><div class=\"line\">add_header X-Frame-Options \"DENY\";</div></pre></td></tr></table></figure></p>\n<p>Lighttpd上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.modules += ( \"mod_setenv\" )</div><div class=\"line\">$HTTP[\"scheme\"] == \"https\" &#123;</div><div class=\"line\"><span class=\"code\">    setenv.add-response-header  = ( \"Strict-Transport-Security\" =&gt; \"max-age=63072000; includeSubdomains; preload\")</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>在生产环境下使用HSTS应当特别谨慎，因为一旦浏览器接收到HSTS Header（假如有效期是1年），但是网站的证书又恰好出了问题，那么用户将在接下来的1年时间内都无法访问到你的网站，直到证书错误被修复，或者用户主动清除浏览器缓存。因此，建议在生产环境开启HSTS的时候，先将max-age的值设置小一些，例如5分钟，然后检查HSTS是否能正常工作，网站能否正常访问，之后再逐步将时间延长，例如1周、1个月，并在这个时间范围内继续检查HSTS是否正常工作，最后才改到1年。</p>\n<h2 id=\"全站HTTPS必须解决的问题\"><a href=\"#全站HTTPS必须解决的问题\" class=\"headerlink\" title=\"全站HTTPS必须解决的问题\"></a>全站HTTPS必须解决的问题</h2><p>然而，HTTPS并非“想上就上”，正式启用之前，必须解决至少三个方面的大问题。</p>\n<p>首先是性能，这也主要分三点。</p>\n<ul>\n<li><p>HTTPS需要多次握手，因此网络耗时变长，用户从HTTP跳转到HTTPS需要一些时间；</p>\n</li>\n<li><p>HTTPS要做RSA校验，这会影响到设备性能；</p>\n</li>\n<li><p>所有CDN节点要支持HTTPS，而且需要有极其复杂的解决方案来面对DDoS的挑战。</p>\n</li>\n</ul>\n<p>其次，兼容性及周边。</p>\n<ul>\n<li><p>页面里所有嵌入的资源(图片/附件/js/css/视频等)都要改成HTTPS的,否则浏览器就会报警(静态资源的URL，采用 // 引用资源，表示遵从当前页面的协议，浏览器会进行自动补全).</p>\n</li>\n<li><p>移动客户端（APP）也需要适配HTTPS，所以必须做调整修改；</p>\n</li>\n<li><p>解决第三方网站看不到Referer的问题；</p>\n</li>\n<li><p>所有的开发、测试环境都要做HTTPS的升级；</p>\n</li>\n</ul>\n<p>最后，为保证上线时的顺利切换，需要提前准备大量的预案，以应对各种可能出现的情况。</p>\n<h2 id=\"全站HTTPS还可以做的更多\"><a href=\"#全站HTTPS还可以做的更多\" class=\"headerlink\" title=\"全站HTTPS还可以做的更多\"></a>全站HTTPS还可以做的更多</h2><h3 id=\"配置X-Frame-Options\"><a href=\"#配置X-Frame-Options\" class=\"headerlink\" title=\"配置X-Frame-Options\"></a>配置X-Frame-Options</h3><p>X-Frame-Options头部添加到HTTPS站点，确保不会嵌入到frame 或 iframe，避免点击劫持，以确保网站的内容不会嵌入到其他网站。</p>\n<p>Apache配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Header always set X-Frame-Options DENY</div></pre></td></tr></table></figure></p>\n<p>Nginx配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">add_header X-Frame-Options \"DENY\";</div></pre></td></tr></table></figure></p>\n<p>Lighttpd配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.modules += ( \"mod_setenv\" )</div><div class=\"line\">$HTTP[\"scheme\"] == \"https\" &#123;</div><div class=\"line\"><span class=\"code\">    setenv.add-response-header  = ( \"X-Frame-Options\" =&gt; \"DENY\")</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>设置<code>listen   443  ssl http2 default_server;</code>最好将openssl和nginx升级到当前版本的最新版本</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum update nginx</div><div class=\"line\">yum update openssl</div></pre></td></tr></table></figure>\n<h3 id=\"配置赫尔曼密钥\"><a href=\"#配置赫尔曼密钥\" class=\"headerlink\" title=\"配置赫尔曼密钥\"></a>配置赫尔曼密钥</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">openssl dhparam -out dhparam.pem 2048 // 在 ssh 运行， openssl 生成 2048 位的密钥而不是当作参数写入 nginx.conf 文件。</div><div class=\"line\"></div><div class=\"line\">ssl_dhparam /path/to/dhparam.pem; //在 .conf 中配置</div></pre></td></tr></table></figure>\n<p>最后，盗张阿里的图<br><img src=\"http://static.xcoder.ren/public/resource/alibaba-https.jpeg\" alt=\"阿里HTTPS\"></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"什么是HTTPS？\"><a href=\"#什么是HTTPS？\" class=\"headerlink\" title=\"什么是HTTPS？\"></a>什么是HTTPS？</h2><p>HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。现在它被广泛用于互联网上安全敏感的通讯，例如交易支付等。</p>\n<p>采用HTTPS的服务器必须从CA （Certificate Authority）申请一个用于证明服务器用途类型的证书。该证书只有用于对应的服务器的时候，客户端才信任此主机。所以所有的银行系统网站，关键部分应用都是HTTPS的。客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。这一点对局域网对内提供服务处的服务器没有任何意义。局域网中的服务器，采用的证书不管是自己发布的还是从公众的地方发布的，其客户端都是自己人，所以该局域网中的客户端也就肯定信任该服务器。</p>\n<h2 id=\"启用HTTPS\"><a href=\"#启用HTTPS\" class=\"headerlink\" title=\"启用HTTPS\"></a>启用HTTPS</h2><p>有不少网站只通过HTTPS对外提供服务，但用户在访问某个网站的时候，在浏览器里却往往直接输入网站域名（例如www.example.com），而不是输入完整的URL（例如<a href=\"https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作\" target=\"_blank\" rel=\"external\">https://www.example.com），不过浏览器依然能正确的使用HTTPS发起请求。这背后多亏了服务器和浏览器的协作</a><br><img src=\"http://static.xcoder.ren/public/resource/http-https.png\" alt=\"强制全站https\"></p>\n<p>以nginx为例配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">server&#123;</div><div class=\"line\"><span class=\"code\">    listen 80;</span></div><div class=\"line\"><span class=\"code\">    server_name www.example.com;</span></div><div class=\"line\"><span class=\"code\">    rewrite ^(.*)$  https://$host$1 permanent;</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">或者</div><div class=\"line\">server&#123;</div><div class=\"line\"><span class=\"code\">    listen 80;</span></div><div class=\"line\"><span class=\"code\">    server_name www.example.com;</span></div><div class=\"line\"><span class=\"code\">    return 301 https://www.example.com;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>","more":"<p>nginx的HTTPS配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">server &#123;</div><div class=\"line\"><span class=\"code\">        #开启 SPDY 和 HTTP2 支持，借助多路复用提升传输性能。</span></div><div class=\"line\"><span class=\"code\">        listen   443  ssl http2 default_server;</span></div><div class=\"line\"><span class=\"code\">        server_name  www.example.com;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #charset koi8-r;</span></div><div class=\"line\"><span class=\"code\">        #配置HSTS</span></div><div class=\"line\"><span class=\"code\">        add_header Strict-Transport-Security \"max-age=15552000; includeSubdomains; preload\" always;</span></div><div class=\"line\"><span class=\"code\">        add_header X-Frame-Options \"DENY\";</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #access_log  logs/host.access.log  main;</span></div><div class=\"line\"><span class=\"code\">        ssl on;</span></div><div class=\"line\"><span class=\"code\">        ##crt后缀或者pem后缀为证书公钥文件,key为证书私钥文件，一般证书服务商提供</span></div><div class=\"line\"><span class=\"code\">        ssl_certificate  /usr/nginx/ssl/example.com.crt;</span></div><div class=\"line\"><span class=\"code\">        ssl_certificate_key  /usr/nginx/ssl/example.com.key;</span></div><div class=\"line\"><span class=\"code\">        ssl_session_timeout 5m;</span></div><div class=\"line\"><span class=\"code\">        #不使用SSLv2,SSLv3等不安全协议</span></div><div class=\"line\"><span class=\"code\">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span></div><div class=\"line\"><span class=\"code\">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span></div><div class=\"line\"><span class=\"code\">        ssl_prefer_server_ciphers on;</span></div><div class=\"line\"><span class=\"code\">        </span></div><div class=\"line\"><span class=\"code\">        ssl_dhparam /path/to/dhparam.pem;</span></div><div class=\"line\"><span class=\"code\">        </span></div><div class=\"line\"><span class=\"code\">        location / &#123;</span></div><div class=\"line\"><span class=\"code\">            proxy_pass http://127.0.0.1:8080;</span></div><div class=\"line\"><span class=\"code\">        &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        #error_page  404              /404.html;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        # redirect server error pages to the static page /50x.html</span></div><div class=\"line\"><span class=\"code\">        #</span></div><div class=\"line\"><span class=\"code\">        error_page   500 502 503 504  /50x.html;</span></div><div class=\"line\"><span class=\"code\">        location = /50x.html &#123;</span></div><div class=\"line\"><span class=\"code\">            root   html;</span></div><div class=\"line\"><span class=\"code\">        &#125;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>通常情况下，我们将用户的 HTTP 请求 301或302 跳转到 HTTPS，这会存在两个问题：</p>\n<ul>\n<li>不够安全，302 跳转会暴露用户访问站点，也容易被劫持<br><img src=\"http://static.xcoder.ren/public/resource/http-unsafe.png\" alt=\"http跳转中被劫持\"></li>\n<li>拖慢访问速度，302 跳转需要一个 RTT（The role of packet loss and round-trip time），浏览器执行跳转也需要时间</li>\n</ul>\n<h2 id=\"HSTS解决跳转不安全的问题\"><a href=\"#HSTS解决跳转不安全的问题\" class=\"headerlink\" title=\"HSTS解决跳转不安全的问题\"></a>HSTS解决跳转不安全的问题</h2><p>HSTS的全称是HTTP Strict-Transport-Security，它是一个Web安全策略机制（web security policy mechanism）。<br>302跳转是由浏览器触发的，服务器无法完全控制，这个需求导致了 HSTS(HTTP Strict Transport Security)的诞生。<br>HSTS就是添加 header 头（add_header Strict-Transport-Security max-age=15768000;includeSubDomains），告诉浏览器网站使用 HTTPS 访问，支持HSTS的浏览器（Chrome, firefox, ie 都支持了 HSTS（<a href=\"http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到\" target=\"_blank\" rel=\"external\">http://caniuse.com/#feat=stricttransportsecurity））就会在后面的请求中直接切换到</a> HTTPS。在 Chrome 中会看到浏览器自己会有个 307 Internal Redirect 的内部重定向。在一段时间内也就是max-age定义的时间，不管用户输入www.example.com还是<a href=\"http://www.example.com，都会默认将请求内部跳转到https://www.example.com。\" target=\"_blank\" rel=\"external\">http://www.example.com，都会默认将请求内部跳转到https://www.example.com。</a><br>HSTS最早于2015年被纳入到ThoughtWorks技术雷达，并且目前在“采用（Adopt）“阶段，这意味着ThoughtWorks强烈主张业界积极采用这项安全防御措施，并且ThoughtWorks已经将其应用于自己的项目。<br>HSTS Header的语法如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Strict-Transport-Security: &lt;max-age=&gt;[; includeSubDomains][; preload]</div></pre></td></tr></table></figure>\n<p>其中：</p>\n<ul>\n<li>max-age是必选参数，是一个以秒为单位的数值，它代表着HSTS Header的过期时间，通常设置为1年，即31536000秒。</li>\n<li>includeSubDomains是可选参数，如果包含它，则意味着当前域名及其子域名均开启HSTS保护。</li>\n<li>preload是可选参数，只有当你申请将自己的域名加入到浏览器内置列表的时候才需要使用到它。关于浏览器内置列表，下文有详细介绍。</li>\n</ul>\n<p>Apache上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"># Optionally load the headers module:</span></div><div class=\"line\">LoadModule headers<span class=\"emphasis\">_module modules/mod_</span>headers.so</div><div class=\"line\"> </div><div class=\"line\">&lt;VirtualHost 0.0.0.0:443&gt;</div><div class=\"line\"><span class=\"code\">    Header always set Strict-Transport-Security \"max-age=63072000; includeSubdomains; preload\"</span></div><div class=\"line\">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure></p>\n<p>Nginx上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">add_header Strict-Transport-Security \"max-age=300; includeSubdomains; preload\";</div><div class=\"line\">add_header X-Frame-Options \"DENY\";</div></pre></td></tr></table></figure></p>\n<p>Lighttpd上启用HSTS<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.modules += ( \"mod_setenv\" )</div><div class=\"line\">$HTTP[\"scheme\"] == \"https\" &#123;</div><div class=\"line\"><span class=\"code\">    setenv.add-response-header  = ( \"Strict-Transport-Security\" =&gt; \"max-age=63072000; includeSubdomains; preload\")</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>在生产环境下使用HSTS应当特别谨慎，因为一旦浏览器接收到HSTS Header（假如有效期是1年），但是网站的证书又恰好出了问题，那么用户将在接下来的1年时间内都无法访问到你的网站，直到证书错误被修复，或者用户主动清除浏览器缓存。因此，建议在生产环境开启HSTS的时候，先将max-age的值设置小一些，例如5分钟，然后检查HSTS是否能正常工作，网站能否正常访问，之后再逐步将时间延长，例如1周、1个月，并在这个时间范围内继续检查HSTS是否正常工作，最后才改到1年。</p>\n<h2 id=\"全站HTTPS必须解决的问题\"><a href=\"#全站HTTPS必须解决的问题\" class=\"headerlink\" title=\"全站HTTPS必须解决的问题\"></a>全站HTTPS必须解决的问题</h2><p>然而，HTTPS并非“想上就上”，正式启用之前，必须解决至少三个方面的大问题。</p>\n<p>首先是性能，这也主要分三点。</p>\n<ul>\n<li><p>HTTPS需要多次握手，因此网络耗时变长，用户从HTTP跳转到HTTPS需要一些时间；</p>\n</li>\n<li><p>HTTPS要做RSA校验，这会影响到设备性能；</p>\n</li>\n<li><p>所有CDN节点要支持HTTPS，而且需要有极其复杂的解决方案来面对DDoS的挑战。</p>\n</li>\n</ul>\n<p>其次，兼容性及周边。</p>\n<ul>\n<li><p>页面里所有嵌入的资源(图片/附件/js/css/视频等)都要改成HTTPS的,否则浏览器就会报警(静态资源的URL，采用 // 引用资源，表示遵从当前页面的协议，浏览器会进行自动补全).</p>\n</li>\n<li><p>移动客户端（APP）也需要适配HTTPS，所以必须做调整修改；</p>\n</li>\n<li><p>解决第三方网站看不到Referer的问题；</p>\n</li>\n<li><p>所有的开发、测试环境都要做HTTPS的升级；</p>\n</li>\n</ul>\n<p>最后，为保证上线时的顺利切换，需要提前准备大量的预案，以应对各种可能出现的情况。</p>\n<h2 id=\"全站HTTPS还可以做的更多\"><a href=\"#全站HTTPS还可以做的更多\" class=\"headerlink\" title=\"全站HTTPS还可以做的更多\"></a>全站HTTPS还可以做的更多</h2><h3 id=\"配置X-Frame-Options\"><a href=\"#配置X-Frame-Options\" class=\"headerlink\" title=\"配置X-Frame-Options\"></a>配置X-Frame-Options</h3><p>X-Frame-Options头部添加到HTTPS站点，确保不会嵌入到frame 或 iframe，避免点击劫持，以确保网站的内容不会嵌入到其他网站。</p>\n<p>Apache配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Header always set X-Frame-Options DENY</div></pre></td></tr></table></figure></p>\n<p>Nginx配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">add_header X-Frame-Options \"DENY\";</div></pre></td></tr></table></figure></p>\n<p>Lighttpd配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.modules += ( \"mod_setenv\" )</div><div class=\"line\">$HTTP[\"scheme\"] == \"https\" &#123;</div><div class=\"line\"><span class=\"code\">    setenv.add-response-header  = ( \"X-Frame-Options\" =&gt; \"DENY\")</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>设置<code>listen   443  ssl http2 default_server;</code>最好将openssl和nginx升级到当前版本的最新版本</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum update nginx</div><div class=\"line\">yum update openssl</div></pre></td></tr></table></figure>\n<h3 id=\"配置赫尔曼密钥\"><a href=\"#配置赫尔曼密钥\" class=\"headerlink\" title=\"配置赫尔曼密钥\"></a>配置赫尔曼密钥</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">openssl dhparam -out dhparam.pem 2048 // 在 ssh 运行， openssl 生成 2048 位的密钥而不是当作参数写入 nginx.conf 文件。</div><div class=\"line\"></div><div class=\"line\">ssl_dhparam /path/to/dhparam.pem; //在 .conf 中配置</div></pre></td></tr></table></figure>\n<p>最后，盗张阿里的图<br><img src=\"http://static.xcoder.ren/public/resource/alibaba-https.jpeg\" alt=\"阿里HTTPS\"></p>"},{"title":"安装升级Node.js","date":"2017-05-20T08:40:56.000Z","reward":true,"_content":"\n推荐使用[nodesource-nodejs-and-iojs-binary-distributions](https://github.com/nodesource/distributions)提供的方式安装\n对于**CentOS**系统，可以用下面的命令来快速安装最新的Node.js\n\n```\ncurl -sL https://deb.nodesource.com/setup_7.x | bash -\nyum -y install nodejs\n```\n\n## 升级Node\n<!--more-->\n\n### 全局安装n模块\n\n[n模块](https://github.com/tj/n)是tj大神维护的一个node模块，用来做node多版本管理用的.\n用它来升级node很方便，一行代码搞定全局安装n模块\n\n```\nnpm install -g n\n停止node进程\nn stable\nn latest\nn 7.8.0\n```\n\nn stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本\n\n**如果更新安装过程中失败，提示类似以下信息**\n\n```\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory\n```\n\n此时请输入\n```\nn\n```\n会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行\n\n```\nn - 7.10.0\n```\n删除此失败版本\n\n再重复上面的动作\n\n## 升级PM2和NPM\n\n因为会用到PM2，之前PM2是全局安装的\n\n```\nnpm install pm2 -g\n所以升级PM2和NPM很简单，只需要\nnpm update -g\n```\n\n```\nnpm -v          #显示版本，检查npm 是否正确安装。\nnpm install express   #安装express模块\nnpm install -g express  #全局安装express模块 \nnpm list         #列出已安装模块 \nnpm show express     #显示模块详情\nnpm update        #升级当前目录下的项目的所有模块\nnpm update express    #升级当前目录下的项目的指定模块\nnpm update -g express  #升级全局安装的express模块\nnpm uninstall express  #删除指定的模块\n```\n\n其他相关命令\n\n## 去掉express框架设置的x-power-by\n``app.disable('x-powered-by');``\n\n","source":"_posts/build/安装升级Node.js.md","raw":"\n---\ntitle: 安装升级Node.js\ndate: 2017-05-20 16:40:56\nreward: true\ncategories:\n    - build\ntags:\n    - Node.js\n    - pm2\n---\n\n推荐使用[nodesource-nodejs-and-iojs-binary-distributions](https://github.com/nodesource/distributions)提供的方式安装\n对于**CentOS**系统，可以用下面的命令来快速安装最新的Node.js\n\n```\ncurl -sL https://deb.nodesource.com/setup_7.x | bash -\nyum -y install nodejs\n```\n\n## 升级Node\n<!--more-->\n\n### 全局安装n模块\n\n[n模块](https://github.com/tj/n)是tj大神维护的一个node模块，用来做node多版本管理用的.\n用它来升级node很方便，一行代码搞定全局安装n模块\n\n```\nnpm install -g n\n停止node进程\nn stable\nn latest\nn 7.8.0\n```\n\nn stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本\n\n**如果更新安装过程中失败，提示类似以下信息**\n\n```\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory\ncp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory\n```\n\n此时请输入\n```\nn\n```\n会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行\n\n```\nn - 7.10.0\n```\n删除此失败版本\n\n再重复上面的动作\n\n## 升级PM2和NPM\n\n因为会用到PM2，之前PM2是全局安装的\n\n```\nnpm install pm2 -g\n所以升级PM2和NPM很简单，只需要\nnpm update -g\n```\n\n```\nnpm -v          #显示版本，检查npm 是否正确安装。\nnpm install express   #安装express模块\nnpm install -g express  #全局安装express模块 \nnpm list         #列出已安装模块 \nnpm show express     #显示模块详情\nnpm update        #升级当前目录下的项目的所有模块\nnpm update express    #升级当前目录下的项目的指定模块\nnpm update -g express  #升级全局安装的express模块\nnpm uninstall express  #删除指定的模块\n```\n\n其他相关命令\n\n## 去掉express框架设置的x-power-by\n``app.disable('x-powered-by');``\n\n","slug":"build/安装升级Node.js","published":1,"updated":"2017-06-15T18:06:34.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrf000y9vvu2hhp0qog","content":"<p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n<h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2><a id=\"more\"></a>\n<h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n<p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n<p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n<p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n<p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n<p>删除此失败版本</p>\n<p>再重复上面的动作</p>\n<h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n<p>其他相关命令</p>\n<h2 id=\"去掉express框架设置的x-power-by\"><a href=\"#去掉express框架设置的x-power-by\" class=\"headerlink\" title=\"去掉express框架设置的x-power-by\"></a>去掉express框架设置的x-power-by</h2><p><code>app.disable(&#39;x-powered-by&#39;);</code></p>\n","site":{"data":{}},"excerpt":"<p>推荐使用<a href=\"https://github.com/nodesource/distributions\" target=\"_blank\" rel=\"external\">nodesource-nodejs-and-iojs-binary-distributions</a>提供的方式安装<br>对于<strong>CentOS</strong>系统，可以用下面的命令来快速安装最新的Node.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sL https://deb.nodesource.com/setup_7.x | bash -</div><div class=\"line\">yum -y install nodejs</div></pre></td></tr></table></figure>\n<h2 id=\"升级Node\"><a href=\"#升级Node\" class=\"headerlink\" title=\"升级Node\"></a>升级Node</h2>","more":"<h3 id=\"全局安装n模块\"><a href=\"#全局安装n模块\" class=\"headerlink\" title=\"全局安装n模块\"></a>全局安装n模块</h3><p><a href=\"https://github.com/tj/n\" target=\"_blank\" rel=\"external\">n模块</a>是tj大神维护的一个node模块，用来做node多版本管理用的.<br>用它来升级node很方便，一行代码搞定全局安装n模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install -g n</div><div class=\"line\">停止node进程</div><div class=\"line\">n stable</div><div class=\"line\">n latest</div><div class=\"line\">n 7.8.0</div></pre></td></tr></table></figure>\n<p>n stable是安装最新Node稳定版，n latest是安装最新版，n 版本号，安装指定Node版本</p>\n<p><strong>如果更新安装过程中失败，提示类似以下信息</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/lib’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/include’: No such file or directory</div><div class=\"line\">cp: cannot stat ‘/usr/local/n/versions/node/7.10.0/share’: No such file or directory</div></pre></td></tr></table></figure>\n<p>此时请输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n</div></pre></td></tr></table></figure></p>\n<p>会列出刚刚试图安装并且失败的版本号，这里是7.10.0，然后执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">n - 7.10.0</div></pre></td></tr></table></figure>\n<p>删除此失败版本</p>\n<p>再重复上面的动作</p>\n<h2 id=\"升级PM2和NPM\"><a href=\"#升级PM2和NPM\" class=\"headerlink\" title=\"升级PM2和NPM\"></a>升级PM2和NPM</h2><p>因为会用到PM2，之前PM2是全局安装的</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install pm2 -g</div><div class=\"line\">所以升级PM2和NPM很简单，只需要</div><div class=\"line\">npm update -g</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm -v          #显示版本，检查npm 是否正确安装。</div><div class=\"line\">npm install express   #安装express模块</div><div class=\"line\">npm install -g express  #全局安装express模块 </div><div class=\"line\">npm list         #列出已安装模块 </div><div class=\"line\">npm show express     #显示模块详情</div><div class=\"line\">npm update        #升级当前目录下的项目的所有模块</div><div class=\"line\">npm update express    #升级当前目录下的项目的指定模块</div><div class=\"line\">npm update -g express  #升级全局安装的express模块</div><div class=\"line\">npm uninstall express  #删除指定的模块</div></pre></td></tr></table></figure>\n<p>其他相关命令</p>\n<h2 id=\"去掉express框架设置的x-power-by\"><a href=\"#去掉express框架设置的x-power-by\" class=\"headerlink\" title=\"去掉express框架设置的x-power-by\"></a>去掉express框架设置的x-power-by</h2><p><code>app.disable(&#39;x-powered-by&#39;);</code></p>"},{"title":"Java8 Stream使用总结","date":"2017-06-10T13:51:56.000Z","reward":true,"_content":"\n\n### List转Map\n原来的代码\n```markdown\nMap<String,Worker> mapWorkers = new HashMap<>();\nfor(Worker worker:workers){\n    if(worker.getBill()!=null && !worker.getWorkers().isEmpty()){\n        mapWorkers.put(worker.getKey(),worker);\n    }\n}\n```\nStream代码\n```markdown\nMap<String,Worker> mapWorkers = workers.parallelStream().filter(item->!item.getWorkers().isEmpty() && item.getBill()!=null)\n                .collect(Collectors.toMap(Worker::getKey, Function.identity(), (key1, key2) -> key2));        \n\n\npublic static <T, K, U>\n    Collector<T, ?, Map<K,U>> toMap(Function<? super T, ? extends K> keyMapper,\n                                    Function<? super T, ? extends U> valueMapper,\n                                    BinaryOperator<U> mergeFunction) {\n        return toMap(keyMapper, valueMapper, mergeFunction, HashMap::new);\n    }\n                  \n```\n\n### List再加工\n```markdown\nList<AgentSettles> settles = source.parallelStream().filter(item->item.hasId() && item.getCorp()!=null)\n                        .collect(ArrayList::new,(list,item)->{\n                            List<SrvItems> srvItems = item.SrvItems();\n                            if(srvItems!=null && !srvItems.isEmpty()){\n                                List<AgentSettles> subSettles = srvItems.parallelStream().filter(srvItem->srvItem.hasId())\n                                        .collect(ArrayList::new,(subList,srvItem)->subList.add(transferSub(item,srvItem,newId,user).orElse(null)),(subList1,subList2)->subList1.addAll(subList2));\n\n                                list.addAll(subSettles);\n                            }\n                        },(list1,list2)->list1.addAll(list2));\n\n<R> R collect(Supplier<R> supplier,\n                  BiConsumer<R, ? super T> accumulator,\n                  BiConsumer<R, R> combiner);\n                  \n\n这就是toList\n    Collector<T, ?, List<T>> toList() {\n        return new CollectorImpl<>((Supplier<List<T>>) ArrayList::new, List::add,\n                                   (left, right) -> { left.addAll(right); return left; },\n                                   CH_ID);\n    }\n\n```\n\n### 分组\n比如有个主子表，因为业务逻辑有批量操作，需要按主表id取出所有子表数据后再装配以提高效率\n代码是这样子的\n```markdown\nList<SrvRequests> srvRequests = buildSourceChilds(parameter.getBills(),tenant).orElse(new ArrayList<>());\n//形成表体分组\nMap<Long,List<SrvRequests>> childs = srvRequests.parallelStream().filter(item->item.hasId())\n        .collect(Collectors.groupingBy(SrvRequests::getMainid));\n```\n\n### 求和\n比如对集合中满足一定条件的所有对象求和\n```markdown\nDouble settleMoney = entity.parallelStream().filter(item->item.hasId() && item.getCorp()!=null)\n                .mapToDouble(item->{\n                    if(item.getAgentmoney()==null){\n                        return 0;\n                    }\n                    return item.getAgentmoney().doubleValue();\n                })\n                .sum();\n```\n\n\n\n\n\n\n","source":"_posts/language/Java8 Stream操作总结.md","raw":"\n---\ntitle: Java8 Stream使用总结\ndate: 2017-06-10 21:51:56\nreward: true\ncategories:\n    - language\ntags:\n    - JAVA\n    - Stream\n---\n\n\n### List转Map\n原来的代码\n```markdown\nMap<String,Worker> mapWorkers = new HashMap<>();\nfor(Worker worker:workers){\n    if(worker.getBill()!=null && !worker.getWorkers().isEmpty()){\n        mapWorkers.put(worker.getKey(),worker);\n    }\n}\n```\nStream代码\n```markdown\nMap<String,Worker> mapWorkers = workers.parallelStream().filter(item->!item.getWorkers().isEmpty() && item.getBill()!=null)\n                .collect(Collectors.toMap(Worker::getKey, Function.identity(), (key1, key2) -> key2));        \n\n\npublic static <T, K, U>\n    Collector<T, ?, Map<K,U>> toMap(Function<? super T, ? extends K> keyMapper,\n                                    Function<? super T, ? extends U> valueMapper,\n                                    BinaryOperator<U> mergeFunction) {\n        return toMap(keyMapper, valueMapper, mergeFunction, HashMap::new);\n    }\n                  \n```\n\n### List再加工\n```markdown\nList<AgentSettles> settles = source.parallelStream().filter(item->item.hasId() && item.getCorp()!=null)\n                        .collect(ArrayList::new,(list,item)->{\n                            List<SrvItems> srvItems = item.SrvItems();\n                            if(srvItems!=null && !srvItems.isEmpty()){\n                                List<AgentSettles> subSettles = srvItems.parallelStream().filter(srvItem->srvItem.hasId())\n                                        .collect(ArrayList::new,(subList,srvItem)->subList.add(transferSub(item,srvItem,newId,user).orElse(null)),(subList1,subList2)->subList1.addAll(subList2));\n\n                                list.addAll(subSettles);\n                            }\n                        },(list1,list2)->list1.addAll(list2));\n\n<R> R collect(Supplier<R> supplier,\n                  BiConsumer<R, ? super T> accumulator,\n                  BiConsumer<R, R> combiner);\n                  \n\n这就是toList\n    Collector<T, ?, List<T>> toList() {\n        return new CollectorImpl<>((Supplier<List<T>>) ArrayList::new, List::add,\n                                   (left, right) -> { left.addAll(right); return left; },\n                                   CH_ID);\n    }\n\n```\n\n### 分组\n比如有个主子表，因为业务逻辑有批量操作，需要按主表id取出所有子表数据后再装配以提高效率\n代码是这样子的\n```markdown\nList<SrvRequests> srvRequests = buildSourceChilds(parameter.getBills(),tenant).orElse(new ArrayList<>());\n//形成表体分组\nMap<Long,List<SrvRequests>> childs = srvRequests.parallelStream().filter(item->item.hasId())\n        .collect(Collectors.groupingBy(SrvRequests::getMainid));\n```\n\n### 求和\n比如对集合中满足一定条件的所有对象求和\n```markdown\nDouble settleMoney = entity.parallelStream().filter(item->item.hasId() && item.getCorp()!=null)\n                .mapToDouble(item->{\n                    if(item.getAgentmoney()==null){\n                        return 0;\n                    }\n                    return item.getAgentmoney().doubleValue();\n                })\n                .sum();\n```\n\n\n\n\n\n\n","slug":"language/Java8 Stream操作总结","published":1,"updated":"2017-06-13T16:01:01.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrh00119vvuan704k5l","content":"<h3 id=\"List转Map\"><a href=\"#List转Map\" class=\"headerlink\" title=\"List转Map\"></a>List转Map</h3><p>原来的代码<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String,Worker&gt; mapWorkers = new HashMap&lt;&gt;();</div><div class=\"line\">for(Worker worker:workers)&#123;</div><div class=\"line\"><span class=\"code\">    if(worker.getBill()!=null &amp;&amp; !worker.getWorkers().isEmpty())&#123;</span></div><div class=\"line\"><span class=\"code\">        mapWorkers.put(worker.getKey(),worker);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Stream代码<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String,Worker&gt; mapWorkers = workers.parallelStream().filter(item-&gt;!item.getWorkers().isEmpty() &amp;&amp; item.getBill()!=null)</div><div class=\"line\"><span class=\"code\">                .collect(Collectors.toMap(Worker::getKey, Function.identity(), (key1, key2) -&gt; key2));        </span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">public static &lt;T, K, U&gt;</div><div class=\"line\"><span class=\"code\">    Collector&lt;T, ?, Map&lt;K,U&gt;&gt; toMap(Function&lt;? super T, ? extends K&gt; keyMapper,</span></div><div class=\"line\"><span class=\"code\">                                    Function&lt;? super T, ? extends U&gt; valueMapper,</span></div><div class=\"line\"><span class=\"code\">                                    BinaryOperator&lt;U&gt; mergeFunction) &#123;</span></div><div class=\"line\"><span class=\"code\">        return toMap(keyMapper, valueMapper, mergeFunction, HashMap::new);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"List再加工\"><a href=\"#List再加工\" class=\"headerlink\" title=\"List再加工\"></a>List再加工</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;AgentSettles&gt; settles = source.parallelStream().filter(item-&gt;item.hasId() &amp;&amp; item.getCorp()!=null)</div><div class=\"line\"><span class=\"code\">                        .collect(ArrayList::new,(list,item)-&gt;&#123;</span></div><div class=\"line\"><span class=\"code\">                            List&lt;SrvItems&gt; srvItems = item.SrvItems();</span></div><div class=\"line\"><span class=\"code\">                            if(srvItems!=null &amp;&amp; !srvItems.isEmpty())&#123;</span></div><div class=\"line\"><span class=\"code\">                                List&lt;AgentSettles&gt; subSettles = srvItems.parallelStream().filter(srvItem-&gt;srvItem.hasId())</span></div><div class=\"line\"><span class=\"code\">                                        .collect(ArrayList::new,(subList,srvItem)-&gt;subList.add(transferSub(item,srvItem,newId,user).orElse(null)),(subList1,subList2)-&gt;subList1.addAll(subList2));</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">                                list.addAll(subSettles);</span></div><div class=\"line\"><span class=\"code\">                            &#125;</span></div><div class=\"line\"><span class=\"code\">                        &#125;,(list1,list2)-&gt;list1.addAll(list2));</span></div><div class=\"line\"></div><div class=\"line\">&lt;R&gt; R collect(Supplier&lt;R&gt; supplier,</div><div class=\"line\"><span class=\"code\">                  BiConsumer&lt;R, ? super T&gt; accumulator,</span></div><div class=\"line\"><span class=\"code\">                  BiConsumer&lt;R, R&gt; combiner);</span></div><div class=\"line\"><span class=\"code\">                  </span></div><div class=\"line\"></div><div class=\"line\">这就是toList</div><div class=\"line\"><span class=\"code\">    Collector&lt;T, ?, List&lt;T&gt;&gt; toList() &#123;</span></div><div class=\"line\"><span class=\"code\">        return new CollectorImpl&lt;&gt;((Supplier&lt;List&lt;T&gt;&gt;) ArrayList::new, List::add,</span></div><div class=\"line\"><span class=\"code\">                                   (left, right) -&gt; &#123; left.addAll(right); return left; &#125;,</span></div><div class=\"line\"><span class=\"code\">                                   CH_ID);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div></pre></td></tr></table></figure>\n<h3 id=\"分组\"><a href=\"#分组\" class=\"headerlink\" title=\"分组\"></a>分组</h3><p>比如有个主子表，因为业务逻辑有批量操作，需要按主表id取出所有子表数据后再装配以提高效率<br>代码是这样子的<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;SrvRequests&gt; srvRequests = buildSourceChilds(parameter.getBills(),tenant).orElse(new ArrayList&lt;&gt;());</div><div class=\"line\">//形成表体分组</div><div class=\"line\">Map&lt;Long,List&lt;SrvRequests&gt;&gt; childs = srvRequests.parallelStream().filter(item-&gt;item.hasId())</div><div class=\"line\"><span class=\"code\">        .collect(Collectors.groupingBy(SrvRequests::getMainid));</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"求和\"><a href=\"#求和\" class=\"headerlink\" title=\"求和\"></a>求和</h3><p>比如对集合中满足一定条件的所有对象求和<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Double settleMoney = entity.parallelStream().filter(item-&gt;item.hasId() &amp;&amp; item.getCorp()!=null)</div><div class=\"line\"><span class=\"code\">                .mapToDouble(item-&gt;&#123;</span></div><div class=\"line\"><span class=\"code\">                    if(item.getAgentmoney()==null)&#123;</span></div><div class=\"line\"><span class=\"code\">                        return 0;</span></div><div class=\"line\"><span class=\"code\">                    &#125;</span></div><div class=\"line\"><span class=\"code\">                    return item.getAgentmoney().doubleValue();</span></div><div class=\"line\"><span class=\"code\">                &#125;)</span></div><div class=\"line\"><span class=\"code\">                .sum();</span></div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"List转Map\"><a href=\"#List转Map\" class=\"headerlink\" title=\"List转Map\"></a>List转Map</h3><p>原来的代码<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String,Worker&gt; mapWorkers = new HashMap&lt;&gt;();</div><div class=\"line\">for(Worker worker:workers)&#123;</div><div class=\"line\"><span class=\"code\">    if(worker.getBill()!=null &amp;&amp; !worker.getWorkers().isEmpty())&#123;</span></div><div class=\"line\"><span class=\"code\">        mapWorkers.put(worker.getKey(),worker);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Stream代码<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String,Worker&gt; mapWorkers = workers.parallelStream().filter(item-&gt;!item.getWorkers().isEmpty() &amp;&amp; item.getBill()!=null)</div><div class=\"line\"><span class=\"code\">                .collect(Collectors.toMap(Worker::getKey, Function.identity(), (key1, key2) -&gt; key2));        </span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">public static &lt;T, K, U&gt;</div><div class=\"line\"><span class=\"code\">    Collector&lt;T, ?, Map&lt;K,U&gt;&gt; toMap(Function&lt;? super T, ? extends K&gt; keyMapper,</span></div><div class=\"line\"><span class=\"code\">                                    Function&lt;? super T, ? extends U&gt; valueMapper,</span></div><div class=\"line\"><span class=\"code\">                                    BinaryOperator&lt;U&gt; mergeFunction) &#123;</span></div><div class=\"line\"><span class=\"code\">        return toMap(keyMapper, valueMapper, mergeFunction, HashMap::new);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"List再加工\"><a href=\"#List再加工\" class=\"headerlink\" title=\"List再加工\"></a>List再加工</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;AgentSettles&gt; settles = source.parallelStream().filter(item-&gt;item.hasId() &amp;&amp; item.getCorp()!=null)</div><div class=\"line\"><span class=\"code\">                        .collect(ArrayList::new,(list,item)-&gt;&#123;</span></div><div class=\"line\"><span class=\"code\">                            List&lt;SrvItems&gt; srvItems = item.SrvItems();</span></div><div class=\"line\"><span class=\"code\">                            if(srvItems!=null &amp;&amp; !srvItems.isEmpty())&#123;</span></div><div class=\"line\"><span class=\"code\">                                List&lt;AgentSettles&gt; subSettles = srvItems.parallelStream().filter(srvItem-&gt;srvItem.hasId())</span></div><div class=\"line\"><span class=\"code\">                                        .collect(ArrayList::new,(subList,srvItem)-&gt;subList.add(transferSub(item,srvItem,newId,user).orElse(null)),(subList1,subList2)-&gt;subList1.addAll(subList2));</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">                                list.addAll(subSettles);</span></div><div class=\"line\"><span class=\"code\">                            &#125;</span></div><div class=\"line\"><span class=\"code\">                        &#125;,(list1,list2)-&gt;list1.addAll(list2));</span></div><div class=\"line\"></div><div class=\"line\">&lt;R&gt; R collect(Supplier&lt;R&gt; supplier,</div><div class=\"line\"><span class=\"code\">                  BiConsumer&lt;R, ? super T&gt; accumulator,</span></div><div class=\"line\"><span class=\"code\">                  BiConsumer&lt;R, R&gt; combiner);</span></div><div class=\"line\"><span class=\"code\">                  </span></div><div class=\"line\"></div><div class=\"line\">这就是toList</div><div class=\"line\"><span class=\"code\">    Collector&lt;T, ?, List&lt;T&gt;&gt; toList() &#123;</span></div><div class=\"line\"><span class=\"code\">        return new CollectorImpl&lt;&gt;((Supplier&lt;List&lt;T&gt;&gt;) ArrayList::new, List::add,</span></div><div class=\"line\"><span class=\"code\">                                   (left, right) -&gt; &#123; left.addAll(right); return left; &#125;,</span></div><div class=\"line\"><span class=\"code\">                                   CH_ID);</span></div><div class=\"line\"><span class=\"code\">    &#125;</span></div></pre></td></tr></table></figure>\n<h3 id=\"分组\"><a href=\"#分组\" class=\"headerlink\" title=\"分组\"></a>分组</h3><p>比如有个主子表，因为业务逻辑有批量操作，需要按主表id取出所有子表数据后再装配以提高效率<br>代码是这样子的<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;SrvRequests&gt; srvRequests = buildSourceChilds(parameter.getBills(),tenant).orElse(new ArrayList&lt;&gt;());</div><div class=\"line\">//形成表体分组</div><div class=\"line\">Map&lt;Long,List&lt;SrvRequests&gt;&gt; childs = srvRequests.parallelStream().filter(item-&gt;item.hasId())</div><div class=\"line\"><span class=\"code\">        .collect(Collectors.groupingBy(SrvRequests::getMainid));</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"求和\"><a href=\"#求和\" class=\"headerlink\" title=\"求和\"></a>求和</h3><p>比如对集合中满足一定条件的所有对象求和<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Double settleMoney = entity.parallelStream().filter(item-&gt;item.hasId() &amp;&amp; item.getCorp()!=null)</div><div class=\"line\"><span class=\"code\">                .mapToDouble(item-&gt;&#123;</span></div><div class=\"line\"><span class=\"code\">                    if(item.getAgentmoney()==null)&#123;</span></div><div class=\"line\"><span class=\"code\">                        return 0;</span></div><div class=\"line\"><span class=\"code\">                    &#125;</span></div><div class=\"line\"><span class=\"code\">                    return item.getAgentmoney().doubleValue();</span></div><div class=\"line\"><span class=\"code\">                &#125;)</span></div><div class=\"line\"><span class=\"code\">                .sum();</span></div></pre></td></tr></table></figure></p>\n"},{"title":"java keytool证书工具","date":"2017-05-23T12:45:56.000Z","_content":"\nKeytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.\n<!--more-->\nJDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:\n\n-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)\n-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写\n-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)\n-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)\n-validity 指定创建的证书有效期多少天(默认 90)\n-keysize 指定密钥长度 （默认 1024）\n-storepass 指定密钥库的密码(获取keystore信息所需的密码)\n-keypass 指定别名条目的密码(私钥的密码)\n-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”\n-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码\n-v 显示密钥库中的证书详细信息\n-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码\n-file 参数指定导出到文件的文件名\n-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码\n-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt\n-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage\n-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)\n-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书\n\n\n更改后需要重启JAVA服务生效","source":"_posts/language/JAVA keytool证书工具.md","raw":"\n---\ntitle: java keytool证书工具\ndate: 2017-05-23 20:45:56\ncategories:\n    - language\ntags:\n    - JAVA\n    - keytool\n---\n\nKeytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.\n<!--more-->\nJDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:\n\n-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)\n-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写\n-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)\n-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)\n-validity 指定创建的证书有效期多少天(默认 90)\n-keysize 指定密钥长度 （默认 1024）\n-storepass 指定密钥库的密码(获取keystore信息所需的密码)\n-keypass 指定别名条目的密码(私钥的密码)\n-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”\n-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码\n-v 显示密钥库中的证书详细信息\n-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码\n-file 参数指定导出到文件的文件名\n-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码\n-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt\n-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage\n-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)\n-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书\n\n\n更改后需要重启JAVA服务生效","slug":"language/JAVA keytool证书工具","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrh00149vvu5844024p","content":"<p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br><a id=\"more\"></a><br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n<p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n<p>更改后需要重启JAVA服务生效</p>\n","site":{"data":{}},"excerpt":"<p>Keytool 是一个Java数据证书的管理工具 ,Keytool将密钥（key）和证书（certificates）存在一个称为keystore的文件中在keystore里，包含两种数据:密钥实体（Key entity）-密钥（secret key）或者是私钥和配对公钥（采用非对称加密）可信任的证书实体（trusted certificate entries）-只包含公钥.<br>","more":"<br>JDK中keytool常用参数说明（不同版本有差异，详细可参见【附录】中的官方文档链接）:</p>\n<p>-genkey 在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书(在没有指定生成位置的情况下,keystore会存在用户系统默认目录)<br>-alias 产生别名 每个keystore都关联这一个独一无二的alias，这个alias通常不区分大小写<br>-keystore 指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg 指定密钥的算法 (如 RSA DSA，默认值为：DSA)<br>-validity 指定创建的证书有效期多少天(默认 90)<br>-keysize 指定密钥长度 （默认 1024）<br>-storepass 指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass 指定别名条目的密码(私钥的密码)<br>-dname 指定证书发行者信息 其中： “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名 称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list 显示密钥库中的证书信息 keytool -list -v -keystore 指定keystore -storepass 密码<br>-v 显示密钥库中的证书详细信息<br>-export 将别名指定的证书导出到文件 keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file 参数指定导出到文件的文件名<br>-delete 删除密钥库中某条目 keytool -delete -alias 指定需删除的别 -keystore 指定keystore – storepass 密码<br>-printcert 查看导出的证书信息 keytool -printcert -file g:\\sso\\michael.crt<br>-keypasswd 修改密钥库中指定条目口令 keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new 新密码 -storepass keystore密码 -keystore sage<br>-storepasswd 修改keystore口令 keytool -storepasswd -keystore g:\\sso\\michael.keystore(需修改口令的keystore) -storepass pwdold(原始密码) -new pwdnew(新密码)<br>-import 将已签名数字证书导入密钥库 keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>\n<p>更改后需要重启JAVA服务生效</p>"},{"title":"Memcached总结","date":"2017-06-05T14:40:56.000Z","reward":true,"_content":"\n## memcached相关命令\n\n### 安装memcached\n\n```markdown\nyum clean all\nyum -y update\nyum -y install memcached\n```\n\n### 启动memcached\n\n```\n/usr/local/bin/memcached -d -m 10 -u root -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid\n```\n-d选项是启动一个守护进程， \n-m是分配给Memcache使用的内存数量，单位是MB，我这里是10MB， \n-u是运行Memcache的用户，我这里是root， \n-l是监听的服务器IP地址，如果有多个地址的话，我这里指定了服务器的IP地址192.168.0.200， \n-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口， \n-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定， \n-P是设置保存Memcache的pid文件，我这里是保存在 /tmp/memcached.pid，\n\n### 结束Memcached进程\n```\nkill `cat /tmp/memcached.pid`\n```\n<!--more-->\n## 适用memcached的业务场景\n\n* 如果网站包含了访问量很大的动态网页，因而数据库的负载将会很高。由于大部分数据库请求都是读操作，那么memcached可以显著地减小数据库负载。\n\n* 如果数据库服务器的负载比较低但CPU使用率很高，这时可以缓存计算好的结果（ computed objects ）和渲染后的网页模板（enderred templates）。\n\n* 利用memcached可以缓存session数据、临时数据以减少对他们的数据库写操作。\n\n* 缓存一些很小但是被频繁访问的文件。\n\n* 缓存Web 'services'（非IBM宣扬的Web Services，译者注）或RSS feeds的结果。\n\n## 不适用memcached的业务场景\n\n### 缓存对象的大小大于1MB\n\nMemcached本身就不是为了处理庞大的多媒体（large media）和巨大的二进制块（streaming huge blobs）而设计的。\n\n### 虚拟主机不让运行memcached服务\n\n如果应用本身托管在低端的虚拟私有服务器上，像vmware, xen这类虚拟化技术并不适合运行memcached。Memcached需要接管和控制大块的内存，如果memcached管理      的内存被OS或 hypervisor交换出去，memcached的性能将大打折扣。\n\n### 应用运行在不安全的环境中\n\nMemcached为提供任何安全策略，仅仅通过telnet就可以访问到memcached。如果应用运行在共享的系统上，需要着重考虑安全问题。\n\n### 业务本身需要的是持久化数据或者说需要的应该是database\n\n### 不能能够遍历memcached中所有的item\n\n这个操作的速度相对缓慢且阻塞其他的操作（这里的缓慢时相比memcached其他的命令）。memcached所有非调试（non-debug）命令，例如add, set, get, fulsh等无论\n\nmemcached中存储了多少数据，它们的执行都只消耗常量时间。任何遍历所有item的命令执行所消耗的时间，将随着memcached中数据量的增加而增加。当其他命令因为等待（遍历所有item的命令执行完毕）而不能得到执行，因而阻塞将发生。\n\n### memcached能接受的key的最大长度是250个字符\nmemcached能接受的key的最大长度是250个字符。需要注意的是，250是memcached服务器端内部的限制。如果使用的Memcached客户端支持\"key的前缀\"或类似特性，那么key（前缀+原始key）的最大长度是可以超过250个字符的。推荐使用较短的key，这样可以节省内存和带宽。\n\n### 单个item的大小被限制在1M byte之内\nMemcached存储单个item最大数据是在1MB内，如果数据超过1M,存取set和get是都是返回false，而且引起性能的问题。\n\n所以Memcahce不适合缓存大数据，超过1MB的数据，可以考虑在客户端压缩或拆分到多个key中。大的数据在进行load和uppack到内存的时候需要花很长时间，从而降低服务器的性能。\n\nMemcached支持最大的存储对象为1M。这个值由其内存分配机制决定的。\n\nmemcached默认情况下采用了名为Slab Allocator的机制分配、管理内存。在该机制出现以前，内存的分配是通过对所有记录简单地进行malloc和free来进行的。但是，这种方式会导致内存碎片，加重操作系统内存管理器的负担，最坏的情况下，会导致操作系统比memcached进程本身还慢。Slab Allocator就是为解决该问题而诞生的。Slab Allocator的基本原理是按照预先规定的大小，将分配的内存分割成特定长度的块，以完全解决内存碎片问题.\n\nMemcached的内存存储引擎，使用slabs来管理内存。内存被分成大小不等的slabs chunks（先分成大小相等的slabs，然后每个slab被分成大小相等chunks，不同slab的chunk大小是不相等的）。chunk的大小依次从一个最小数开始，按某个因子增长，直到达到最大的可能值。如果最小值为400B，最大值是1MB，因子是1.20，各个slab的chunk的大小依次是：\n\nslab1 - 400B；slab2 - 480B；slab3 - 576B ...slab中chunk越大，它和前面的slab之间的间隙就越大。因此，最大值越大，内存利用率越低。Memcached必须为每个slab预先分配内存，因此如果设置了较小的因子和较大的最大值，会需要为Memcached提供更多的内存。\n\n不要尝试向memcached中存取很大的数据，例如把巨大的网页放到mencached中。因为将大数据load和unpack到内存中需要花费很长的时间，从而导致系统的性能反而不好。如果确实需要存储大于1MB的数据，可以修改slabs.c：POWER_BLOCK的值，然后重新编译memcached；或者使用低效的malloc/free。另外，可以使用数据库、MogileFS等方案代替Memcached系统。\n\n## memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？\n实际上，这是一个编译时选项。默认会使用内部的slab分配器，而且确实应该使用内建的slab分配器。最早的时候，memcached只使用malloc/free来管理内存。然而，这种方式不能与OS的内存管理以前很好地工作。反复地malloc/free造成了内存碎片，OS最终花费大量的时间去查找连续的内存块来满足malloc的请求，而不是运行memcached进程。slab分配器就是为了解决这个问题而生的。内存被分配并划分成chunks，一直被重复使用。因为内存被划分成大小不等的slabs，如果item的大小与被选择存放它的slab不是很合适的话，就会浪费一些内存。\n\n## memcached对item的过期时间有什么限制？\n\nitem对象的过期时间最长可以达到30天。memcached把传入的过期时间（时间段）解释成时间点后，一旦到了这个时间点，memcached就把item置为失效状态，这是一个简单但obscure的机制。\n\n## 什么是二进制协议，是否需要关注？\n\n二进制协议尝试为端提供一个更有效的、可靠的协议，减少客户端/服务器端因处理协议而产生的CPU时间。根据Facebook的测试，解析ASCII协议是memcached中消耗CPU时间最多的环节。\n\n## memcached是原子的吗？\n\n所有的被发送到memcached的单个命令是完全原子的。如果您针对同一份数据同时发送了一个set命令和一个get命令，它们不会影响对方。它们将被串行化、先后执行。即使在多线程模式，所有的命令都是原子的。然是，命令序列不是原子的。如果首先通过get命令获取了一个item，修改了它，然后再把它set回memcached，系统不保证这个item没有被其他进程（process，未必是操作系统中的进程）操作过。memcached 1.2.5以及更高版本，提供了gets和cas命令，它们可以解决上面的问题。如果使用gets命令查询某个key的item，memcached会返回该item当前值的唯一标识。如果客户端程序覆写了这个item并想把它写回到memcached中，可以通过cas命令把那个唯一标识一起发送给memcached。如果该item存放在memcached中的唯一标识与您提供的一致，写操作将会成功。如果另一个进程在这期间也修改了这个item，那么该item存放在memcached中的唯一标识将会改变，写操作就会\n\n失败。\n\n\n详细了解Memcached的内存分配机制：\n\nhttp://cjjwzs.javaeye.com/blog/762453\n\n[Memcache存储大数据的问题](http://blog.csdn.net/hguisu/article/details/6163621)","source":"_posts/language/Memcached总结.md","raw":"\n---\ntitle: Memcached总结\ndate: 2017-06-05 22:40:56\nreward: true\ncategories:\n    - language\ntags:\n    - memcached\n    - 缓存\n---\n\n## memcached相关命令\n\n### 安装memcached\n\n```markdown\nyum clean all\nyum -y update\nyum -y install memcached\n```\n\n### 启动memcached\n\n```\n/usr/local/bin/memcached -d -m 10 -u root -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid\n```\n-d选项是启动一个守护进程， \n-m是分配给Memcache使用的内存数量，单位是MB，我这里是10MB， \n-u是运行Memcache的用户，我这里是root， \n-l是监听的服务器IP地址，如果有多个地址的话，我这里指定了服务器的IP地址192.168.0.200， \n-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口， \n-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定， \n-P是设置保存Memcache的pid文件，我这里是保存在 /tmp/memcached.pid，\n\n### 结束Memcached进程\n```\nkill `cat /tmp/memcached.pid`\n```\n<!--more-->\n## 适用memcached的业务场景\n\n* 如果网站包含了访问量很大的动态网页，因而数据库的负载将会很高。由于大部分数据库请求都是读操作，那么memcached可以显著地减小数据库负载。\n\n* 如果数据库服务器的负载比较低但CPU使用率很高，这时可以缓存计算好的结果（ computed objects ）和渲染后的网页模板（enderred templates）。\n\n* 利用memcached可以缓存session数据、临时数据以减少对他们的数据库写操作。\n\n* 缓存一些很小但是被频繁访问的文件。\n\n* 缓存Web 'services'（非IBM宣扬的Web Services，译者注）或RSS feeds的结果。\n\n## 不适用memcached的业务场景\n\n### 缓存对象的大小大于1MB\n\nMemcached本身就不是为了处理庞大的多媒体（large media）和巨大的二进制块（streaming huge blobs）而设计的。\n\n### 虚拟主机不让运行memcached服务\n\n如果应用本身托管在低端的虚拟私有服务器上，像vmware, xen这类虚拟化技术并不适合运行memcached。Memcached需要接管和控制大块的内存，如果memcached管理      的内存被OS或 hypervisor交换出去，memcached的性能将大打折扣。\n\n### 应用运行在不安全的环境中\n\nMemcached为提供任何安全策略，仅仅通过telnet就可以访问到memcached。如果应用运行在共享的系统上，需要着重考虑安全问题。\n\n### 业务本身需要的是持久化数据或者说需要的应该是database\n\n### 不能能够遍历memcached中所有的item\n\n这个操作的速度相对缓慢且阻塞其他的操作（这里的缓慢时相比memcached其他的命令）。memcached所有非调试（non-debug）命令，例如add, set, get, fulsh等无论\n\nmemcached中存储了多少数据，它们的执行都只消耗常量时间。任何遍历所有item的命令执行所消耗的时间，将随着memcached中数据量的增加而增加。当其他命令因为等待（遍历所有item的命令执行完毕）而不能得到执行，因而阻塞将发生。\n\n### memcached能接受的key的最大长度是250个字符\nmemcached能接受的key的最大长度是250个字符。需要注意的是，250是memcached服务器端内部的限制。如果使用的Memcached客户端支持\"key的前缀\"或类似特性，那么key（前缀+原始key）的最大长度是可以超过250个字符的。推荐使用较短的key，这样可以节省内存和带宽。\n\n### 单个item的大小被限制在1M byte之内\nMemcached存储单个item最大数据是在1MB内，如果数据超过1M,存取set和get是都是返回false，而且引起性能的问题。\n\n所以Memcahce不适合缓存大数据，超过1MB的数据，可以考虑在客户端压缩或拆分到多个key中。大的数据在进行load和uppack到内存的时候需要花很长时间，从而降低服务器的性能。\n\nMemcached支持最大的存储对象为1M。这个值由其内存分配机制决定的。\n\nmemcached默认情况下采用了名为Slab Allocator的机制分配、管理内存。在该机制出现以前，内存的分配是通过对所有记录简单地进行malloc和free来进行的。但是，这种方式会导致内存碎片，加重操作系统内存管理器的负担，最坏的情况下，会导致操作系统比memcached进程本身还慢。Slab Allocator就是为解决该问题而诞生的。Slab Allocator的基本原理是按照预先规定的大小，将分配的内存分割成特定长度的块，以完全解决内存碎片问题.\n\nMemcached的内存存储引擎，使用slabs来管理内存。内存被分成大小不等的slabs chunks（先分成大小相等的slabs，然后每个slab被分成大小相等chunks，不同slab的chunk大小是不相等的）。chunk的大小依次从一个最小数开始，按某个因子增长，直到达到最大的可能值。如果最小值为400B，最大值是1MB，因子是1.20，各个slab的chunk的大小依次是：\n\nslab1 - 400B；slab2 - 480B；slab3 - 576B ...slab中chunk越大，它和前面的slab之间的间隙就越大。因此，最大值越大，内存利用率越低。Memcached必须为每个slab预先分配内存，因此如果设置了较小的因子和较大的最大值，会需要为Memcached提供更多的内存。\n\n不要尝试向memcached中存取很大的数据，例如把巨大的网页放到mencached中。因为将大数据load和unpack到内存中需要花费很长的时间，从而导致系统的性能反而不好。如果确实需要存储大于1MB的数据，可以修改slabs.c：POWER_BLOCK的值，然后重新编译memcached；或者使用低效的malloc/free。另外，可以使用数据库、MogileFS等方案代替Memcached系统。\n\n## memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？\n实际上，这是一个编译时选项。默认会使用内部的slab分配器，而且确实应该使用内建的slab分配器。最早的时候，memcached只使用malloc/free来管理内存。然而，这种方式不能与OS的内存管理以前很好地工作。反复地malloc/free造成了内存碎片，OS最终花费大量的时间去查找连续的内存块来满足malloc的请求，而不是运行memcached进程。slab分配器就是为了解决这个问题而生的。内存被分配并划分成chunks，一直被重复使用。因为内存被划分成大小不等的slabs，如果item的大小与被选择存放它的slab不是很合适的话，就会浪费一些内存。\n\n## memcached对item的过期时间有什么限制？\n\nitem对象的过期时间最长可以达到30天。memcached把传入的过期时间（时间段）解释成时间点后，一旦到了这个时间点，memcached就把item置为失效状态，这是一个简单但obscure的机制。\n\n## 什么是二进制协议，是否需要关注？\n\n二进制协议尝试为端提供一个更有效的、可靠的协议，减少客户端/服务器端因处理协议而产生的CPU时间。根据Facebook的测试，解析ASCII协议是memcached中消耗CPU时间最多的环节。\n\n## memcached是原子的吗？\n\n所有的被发送到memcached的单个命令是完全原子的。如果您针对同一份数据同时发送了一个set命令和一个get命令，它们不会影响对方。它们将被串行化、先后执行。即使在多线程模式，所有的命令都是原子的。然是，命令序列不是原子的。如果首先通过get命令获取了一个item，修改了它，然后再把它set回memcached，系统不保证这个item没有被其他进程（process，未必是操作系统中的进程）操作过。memcached 1.2.5以及更高版本，提供了gets和cas命令，它们可以解决上面的问题。如果使用gets命令查询某个key的item，memcached会返回该item当前值的唯一标识。如果客户端程序覆写了这个item并想把它写回到memcached中，可以通过cas命令把那个唯一标识一起发送给memcached。如果该item存放在memcached中的唯一标识与您提供的一致，写操作将会成功。如果另一个进程在这期间也修改了这个item，那么该item存放在memcached中的唯一标识将会改变，写操作就会\n\n失败。\n\n\n详细了解Memcached的内存分配机制：\n\nhttp://cjjwzs.javaeye.com/blog/762453\n\n[Memcache存储大数据的问题](http://blog.csdn.net/hguisu/article/details/6163621)","slug":"language/Memcached总结","published":1,"updated":"2017-06-16T04:57:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrj00179vvu73b9063v","content":"<h2 id=\"memcached相关命令\"><a href=\"#memcached相关命令\" class=\"headerlink\" title=\"memcached相关命令\"></a>memcached相关命令</h2><h3 id=\"安装memcached\"><a href=\"#安装memcached\" class=\"headerlink\" title=\"安装memcached\"></a>安装memcached</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum clean all</div><div class=\"line\">yum -y update</div><div class=\"line\">yum -y install memcached</div></pre></td></tr></table></figure>\n<h3 id=\"启动memcached\"><a href=\"#启动memcached\" class=\"headerlink\" title=\"启动memcached\"></a>启动memcached</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">/usr/local/bin/memcached -d -m 10 -u root -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid</div></pre></td></tr></table></figure>\n<p>-d选项是启动一个守护进程，<br>-m是分配给Memcache使用的内存数量，单位是MB，我这里是10MB，<br>-u是运行Memcache的用户，我这里是root，<br>-l是监听的服务器IP地址，如果有多个地址的话，我这里指定了服务器的IP地址192.168.0.200，<br>-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口，<br>-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定，<br>-P是设置保存Memcache的pid文件，我这里是保存在 /tmp/memcached.pid，</p>\n<h3 id=\"结束Memcached进程\"><a href=\"#结束Memcached进程\" class=\"headerlink\" title=\"结束Memcached进程\"></a>结束Memcached进程</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kill `cat /tmp/memcached.pid`</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h2 id=\"适用memcached的业务场景\"><a href=\"#适用memcached的业务场景\" class=\"headerlink\" title=\"适用memcached的业务场景\"></a>适用memcached的业务场景</h2><ul>\n<li><p>如果网站包含了访问量很大的动态网页，因而数据库的负载将会很高。由于大部分数据库请求都是读操作，那么memcached可以显著地减小数据库负载。</p>\n</li>\n<li><p>如果数据库服务器的负载比较低但CPU使用率很高，这时可以缓存计算好的结果（ computed objects ）和渲染后的网页模板（enderred templates）。</p>\n</li>\n<li><p>利用memcached可以缓存session数据、临时数据以减少对他们的数据库写操作。</p>\n</li>\n<li><p>缓存一些很小但是被频繁访问的文件。</p>\n</li>\n<li><p>缓存Web ‘services’（非IBM宣扬的Web Services，译者注）或RSS feeds的结果。</p>\n</li>\n</ul>\n<h2 id=\"不适用memcached的业务场景\"><a href=\"#不适用memcached的业务场景\" class=\"headerlink\" title=\"不适用memcached的业务场景\"></a>不适用memcached的业务场景</h2><h3 id=\"缓存对象的大小大于1MB\"><a href=\"#缓存对象的大小大于1MB\" class=\"headerlink\" title=\"缓存对象的大小大于1MB\"></a>缓存对象的大小大于1MB</h3><p>Memcached本身就不是为了处理庞大的多媒体（large media）和巨大的二进制块（streaming huge blobs）而设计的。</p>\n<h3 id=\"虚拟主机不让运行memcached服务\"><a href=\"#虚拟主机不让运行memcached服务\" class=\"headerlink\" title=\"虚拟主机不让运行memcached服务\"></a>虚拟主机不让运行memcached服务</h3><p>如果应用本身托管在低端的虚拟私有服务器上，像vmware, xen这类虚拟化技术并不适合运行memcached。Memcached需要接管和控制大块的内存，如果memcached管理      的内存被OS或 hypervisor交换出去，memcached的性能将大打折扣。</p>\n<h3 id=\"应用运行在不安全的环境中\"><a href=\"#应用运行在不安全的环境中\" class=\"headerlink\" title=\"应用运行在不安全的环境中\"></a>应用运行在不安全的环境中</h3><p>Memcached为提供任何安全策略，仅仅通过telnet就可以访问到memcached。如果应用运行在共享的系统上，需要着重考虑安全问题。</p>\n<h3 id=\"业务本身需要的是持久化数据或者说需要的应该是database\"><a href=\"#业务本身需要的是持久化数据或者说需要的应该是database\" class=\"headerlink\" title=\"业务本身需要的是持久化数据或者说需要的应该是database\"></a>业务本身需要的是持久化数据或者说需要的应该是database</h3><h3 id=\"不能能够遍历memcached中所有的item\"><a href=\"#不能能够遍历memcached中所有的item\" class=\"headerlink\" title=\"不能能够遍历memcached中所有的item\"></a>不能能够遍历memcached中所有的item</h3><p>这个操作的速度相对缓慢且阻塞其他的操作（这里的缓慢时相比memcached其他的命令）。memcached所有非调试（non-debug）命令，例如add, set, get, fulsh等无论</p>\n<p>memcached中存储了多少数据，它们的执行都只消耗常量时间。任何遍历所有item的命令执行所消耗的时间，将随着memcached中数据量的增加而增加。当其他命令因为等待（遍历所有item的命令执行完毕）而不能得到执行，因而阻塞将发生。</p>\n<h3 id=\"memcached能接受的key的最大长度是250个字符\"><a href=\"#memcached能接受的key的最大长度是250个字符\" class=\"headerlink\" title=\"memcached能接受的key的最大长度是250个字符\"></a>memcached能接受的key的最大长度是250个字符</h3><p>memcached能接受的key的最大长度是250个字符。需要注意的是，250是memcached服务器端内部的限制。如果使用的Memcached客户端支持”key的前缀”或类似特性，那么key（前缀+原始key）的最大长度是可以超过250个字符的。推荐使用较短的key，这样可以节省内存和带宽。</p>\n<h3 id=\"单个item的大小被限制在1M-byte之内\"><a href=\"#单个item的大小被限制在1M-byte之内\" class=\"headerlink\" title=\"单个item的大小被限制在1M byte之内\"></a>单个item的大小被限制在1M byte之内</h3><p>Memcached存储单个item最大数据是在1MB内，如果数据超过1M,存取set和get是都是返回false，而且引起性能的问题。</p>\n<p>所以Memcahce不适合缓存大数据，超过1MB的数据，可以考虑在客户端压缩或拆分到多个key中。大的数据在进行load和uppack到内存的时候需要花很长时间，从而降低服务器的性能。</p>\n<p>Memcached支持最大的存储对象为1M。这个值由其内存分配机制决定的。</p>\n<p>memcached默认情况下采用了名为Slab Allocator的机制分配、管理内存。在该机制出现以前，内存的分配是通过对所有记录简单地进行malloc和free来进行的。但是，这种方式会导致内存碎片，加重操作系统内存管理器的负担，最坏的情况下，会导致操作系统比memcached进程本身还慢。Slab Allocator就是为解决该问题而诞生的。Slab Allocator的基本原理是按照预先规定的大小，将分配的内存分割成特定长度的块，以完全解决内存碎片问题.</p>\n<p>Memcached的内存存储引擎，使用slabs来管理内存。内存被分成大小不等的slabs chunks（先分成大小相等的slabs，然后每个slab被分成大小相等chunks，不同slab的chunk大小是不相等的）。chunk的大小依次从一个最小数开始，按某个因子增长，直到达到最大的可能值。如果最小值为400B，最大值是1MB，因子是1.20，各个slab的chunk的大小依次是：</p>\n<p>slab1 - 400B；slab2 - 480B；slab3 - 576B …slab中chunk越大，它和前面的slab之间的间隙就越大。因此，最大值越大，内存利用率越低。Memcached必须为每个slab预先分配内存，因此如果设置了较小的因子和较大的最大值，会需要为Memcached提供更多的内存。</p>\n<p>不要尝试向memcached中存取很大的数据，例如把巨大的网页放到mencached中。因为将大数据load和unpack到内存中需要花费很长的时间，从而导致系统的性能反而不好。如果确实需要存储大于1MB的数据，可以修改slabs.c：POWER_BLOCK的值，然后重新编译memcached；或者使用低效的malloc/free。另外，可以使用数据库、MogileFS等方案代替Memcached系统。</p>\n<h2 id=\"memcached的内存分配器是如何工作的？为什么不适用malloc-free！？为何要使用slabs？\"><a href=\"#memcached的内存分配器是如何工作的？为什么不适用malloc-free！？为何要使用slabs？\" class=\"headerlink\" title=\"memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？\"></a>memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？</h2><p>实际上，这是一个编译时选项。默认会使用内部的slab分配器，而且确实应该使用内建的slab分配器。最早的时候，memcached只使用malloc/free来管理内存。然而，这种方式不能与OS的内存管理以前很好地工作。反复地malloc/free造成了内存碎片，OS最终花费大量的时间去查找连续的内存块来满足malloc的请求，而不是运行memcached进程。slab分配器就是为了解决这个问题而生的。内存被分配并划分成chunks，一直被重复使用。因为内存被划分成大小不等的slabs，如果item的大小与被选择存放它的slab不是很合适的话，就会浪费一些内存。</p>\n<h2 id=\"memcached对item的过期时间有什么限制？\"><a href=\"#memcached对item的过期时间有什么限制？\" class=\"headerlink\" title=\"memcached对item的过期时间有什么限制？\"></a>memcached对item的过期时间有什么限制？</h2><p>item对象的过期时间最长可以达到30天。memcached把传入的过期时间（时间段）解释成时间点后，一旦到了这个时间点，memcached就把item置为失效状态，这是一个简单但obscure的机制。</p>\n<h2 id=\"什么是二进制协议，是否需要关注？\"><a href=\"#什么是二进制协议，是否需要关注？\" class=\"headerlink\" title=\"什么是二进制协议，是否需要关注？\"></a>什么是二进制协议，是否需要关注？</h2><p>二进制协议尝试为端提供一个更有效的、可靠的协议，减少客户端/服务器端因处理协议而产生的CPU时间。根据Facebook的测试，解析ASCII协议是memcached中消耗CPU时间最多的环节。</p>\n<h2 id=\"memcached是原子的吗？\"><a href=\"#memcached是原子的吗？\" class=\"headerlink\" title=\"memcached是原子的吗？\"></a>memcached是原子的吗？</h2><p>所有的被发送到memcached的单个命令是完全原子的。如果您针对同一份数据同时发送了一个set命令和一个get命令，它们不会影响对方。它们将被串行化、先后执行。即使在多线程模式，所有的命令都是原子的。然是，命令序列不是原子的。如果首先通过get命令获取了一个item，修改了它，然后再把它set回memcached，系统不保证这个item没有被其他进程（process，未必是操作系统中的进程）操作过。memcached 1.2.5以及更高版本，提供了gets和cas命令，它们可以解决上面的问题。如果使用gets命令查询某个key的item，memcached会返回该item当前值的唯一标识。如果客户端程序覆写了这个item并想把它写回到memcached中，可以通过cas命令把那个唯一标识一起发送给memcached。如果该item存放在memcached中的唯一标识与您提供的一致，写操作将会成功。如果另一个进程在这期间也修改了这个item，那么该item存放在memcached中的唯一标识将会改变，写操作就会</p>\n<p>失败。</p>\n<p>详细了解Memcached的内存分配机制：</p>\n<p><a href=\"http://cjjwzs.javaeye.com/blog/762453\" target=\"_blank\" rel=\"external\">http://cjjwzs.javaeye.com/blog/762453</a></p>\n<p><a href=\"http://blog.csdn.net/hguisu/article/details/6163621\" target=\"_blank\" rel=\"external\">Memcache存储大数据的问题</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"memcached相关命令\"><a href=\"#memcached相关命令\" class=\"headerlink\" title=\"memcached相关命令\"></a>memcached相关命令</h2><h3 id=\"安装memcached\"><a href=\"#安装memcached\" class=\"headerlink\" title=\"安装memcached\"></a>安装memcached</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum clean all</div><div class=\"line\">yum -y update</div><div class=\"line\">yum -y install memcached</div></pre></td></tr></table></figure>\n<h3 id=\"启动memcached\"><a href=\"#启动memcached\" class=\"headerlink\" title=\"启动memcached\"></a>启动memcached</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">/usr/local/bin/memcached -d -m 10 -u root -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid</div></pre></td></tr></table></figure>\n<p>-d选项是启动一个守护进程，<br>-m是分配给Memcache使用的内存数量，单位是MB，我这里是10MB，<br>-u是运行Memcache的用户，我这里是root，<br>-l是监听的服务器IP地址，如果有多个地址的话，我这里指定了服务器的IP地址192.168.0.200，<br>-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口，<br>-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定，<br>-P是设置保存Memcache的pid文件，我这里是保存在 /tmp/memcached.pid，</p>\n<h3 id=\"结束Memcached进程\"><a href=\"#结束Memcached进程\" class=\"headerlink\" title=\"结束Memcached进程\"></a>结束Memcached进程</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kill `cat /tmp/memcached.pid`</div></pre></td></tr></table></figure>","more":"<h2 id=\"适用memcached的业务场景\"><a href=\"#适用memcached的业务场景\" class=\"headerlink\" title=\"适用memcached的业务场景\"></a>适用memcached的业务场景</h2><ul>\n<li><p>如果网站包含了访问量很大的动态网页，因而数据库的负载将会很高。由于大部分数据库请求都是读操作，那么memcached可以显著地减小数据库负载。</p>\n</li>\n<li><p>如果数据库服务器的负载比较低但CPU使用率很高，这时可以缓存计算好的结果（ computed objects ）和渲染后的网页模板（enderred templates）。</p>\n</li>\n<li><p>利用memcached可以缓存session数据、临时数据以减少对他们的数据库写操作。</p>\n</li>\n<li><p>缓存一些很小但是被频繁访问的文件。</p>\n</li>\n<li><p>缓存Web ‘services’（非IBM宣扬的Web Services，译者注）或RSS feeds的结果。</p>\n</li>\n</ul>\n<h2 id=\"不适用memcached的业务场景\"><a href=\"#不适用memcached的业务场景\" class=\"headerlink\" title=\"不适用memcached的业务场景\"></a>不适用memcached的业务场景</h2><h3 id=\"缓存对象的大小大于1MB\"><a href=\"#缓存对象的大小大于1MB\" class=\"headerlink\" title=\"缓存对象的大小大于1MB\"></a>缓存对象的大小大于1MB</h3><p>Memcached本身就不是为了处理庞大的多媒体（large media）和巨大的二进制块（streaming huge blobs）而设计的。</p>\n<h3 id=\"虚拟主机不让运行memcached服务\"><a href=\"#虚拟主机不让运行memcached服务\" class=\"headerlink\" title=\"虚拟主机不让运行memcached服务\"></a>虚拟主机不让运行memcached服务</h3><p>如果应用本身托管在低端的虚拟私有服务器上，像vmware, xen这类虚拟化技术并不适合运行memcached。Memcached需要接管和控制大块的内存，如果memcached管理      的内存被OS或 hypervisor交换出去，memcached的性能将大打折扣。</p>\n<h3 id=\"应用运行在不安全的环境中\"><a href=\"#应用运行在不安全的环境中\" class=\"headerlink\" title=\"应用运行在不安全的环境中\"></a>应用运行在不安全的环境中</h3><p>Memcached为提供任何安全策略，仅仅通过telnet就可以访问到memcached。如果应用运行在共享的系统上，需要着重考虑安全问题。</p>\n<h3 id=\"业务本身需要的是持久化数据或者说需要的应该是database\"><a href=\"#业务本身需要的是持久化数据或者说需要的应该是database\" class=\"headerlink\" title=\"业务本身需要的是持久化数据或者说需要的应该是database\"></a>业务本身需要的是持久化数据或者说需要的应该是database</h3><h3 id=\"不能能够遍历memcached中所有的item\"><a href=\"#不能能够遍历memcached中所有的item\" class=\"headerlink\" title=\"不能能够遍历memcached中所有的item\"></a>不能能够遍历memcached中所有的item</h3><p>这个操作的速度相对缓慢且阻塞其他的操作（这里的缓慢时相比memcached其他的命令）。memcached所有非调试（non-debug）命令，例如add, set, get, fulsh等无论</p>\n<p>memcached中存储了多少数据，它们的执行都只消耗常量时间。任何遍历所有item的命令执行所消耗的时间，将随着memcached中数据量的增加而增加。当其他命令因为等待（遍历所有item的命令执行完毕）而不能得到执行，因而阻塞将发生。</p>\n<h3 id=\"memcached能接受的key的最大长度是250个字符\"><a href=\"#memcached能接受的key的最大长度是250个字符\" class=\"headerlink\" title=\"memcached能接受的key的最大长度是250个字符\"></a>memcached能接受的key的最大长度是250个字符</h3><p>memcached能接受的key的最大长度是250个字符。需要注意的是，250是memcached服务器端内部的限制。如果使用的Memcached客户端支持”key的前缀”或类似特性，那么key（前缀+原始key）的最大长度是可以超过250个字符的。推荐使用较短的key，这样可以节省内存和带宽。</p>\n<h3 id=\"单个item的大小被限制在1M-byte之内\"><a href=\"#单个item的大小被限制在1M-byte之内\" class=\"headerlink\" title=\"单个item的大小被限制在1M byte之内\"></a>单个item的大小被限制在1M byte之内</h3><p>Memcached存储单个item最大数据是在1MB内，如果数据超过1M,存取set和get是都是返回false，而且引起性能的问题。</p>\n<p>所以Memcahce不适合缓存大数据，超过1MB的数据，可以考虑在客户端压缩或拆分到多个key中。大的数据在进行load和uppack到内存的时候需要花很长时间，从而降低服务器的性能。</p>\n<p>Memcached支持最大的存储对象为1M。这个值由其内存分配机制决定的。</p>\n<p>memcached默认情况下采用了名为Slab Allocator的机制分配、管理内存。在该机制出现以前，内存的分配是通过对所有记录简单地进行malloc和free来进行的。但是，这种方式会导致内存碎片，加重操作系统内存管理器的负担，最坏的情况下，会导致操作系统比memcached进程本身还慢。Slab Allocator就是为解决该问题而诞生的。Slab Allocator的基本原理是按照预先规定的大小，将分配的内存分割成特定长度的块，以完全解决内存碎片问题.</p>\n<p>Memcached的内存存储引擎，使用slabs来管理内存。内存被分成大小不等的slabs chunks（先分成大小相等的slabs，然后每个slab被分成大小相等chunks，不同slab的chunk大小是不相等的）。chunk的大小依次从一个最小数开始，按某个因子增长，直到达到最大的可能值。如果最小值为400B，最大值是1MB，因子是1.20，各个slab的chunk的大小依次是：</p>\n<p>slab1 - 400B；slab2 - 480B；slab3 - 576B …slab中chunk越大，它和前面的slab之间的间隙就越大。因此，最大值越大，内存利用率越低。Memcached必须为每个slab预先分配内存，因此如果设置了较小的因子和较大的最大值，会需要为Memcached提供更多的内存。</p>\n<p>不要尝试向memcached中存取很大的数据，例如把巨大的网页放到mencached中。因为将大数据load和unpack到内存中需要花费很长的时间，从而导致系统的性能反而不好。如果确实需要存储大于1MB的数据，可以修改slabs.c：POWER_BLOCK的值，然后重新编译memcached；或者使用低效的malloc/free。另外，可以使用数据库、MogileFS等方案代替Memcached系统。</p>\n<h2 id=\"memcached的内存分配器是如何工作的？为什么不适用malloc-free！？为何要使用slabs？\"><a href=\"#memcached的内存分配器是如何工作的？为什么不适用malloc-free！？为何要使用slabs？\" class=\"headerlink\" title=\"memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？\"></a>memcached的内存分配器是如何工作的？为什么不适用malloc/free！？为何要使用slabs？</h2><p>实际上，这是一个编译时选项。默认会使用内部的slab分配器，而且确实应该使用内建的slab分配器。最早的时候，memcached只使用malloc/free来管理内存。然而，这种方式不能与OS的内存管理以前很好地工作。反复地malloc/free造成了内存碎片，OS最终花费大量的时间去查找连续的内存块来满足malloc的请求，而不是运行memcached进程。slab分配器就是为了解决这个问题而生的。内存被分配并划分成chunks，一直被重复使用。因为内存被划分成大小不等的slabs，如果item的大小与被选择存放它的slab不是很合适的话，就会浪费一些内存。</p>\n<h2 id=\"memcached对item的过期时间有什么限制？\"><a href=\"#memcached对item的过期时间有什么限制？\" class=\"headerlink\" title=\"memcached对item的过期时间有什么限制？\"></a>memcached对item的过期时间有什么限制？</h2><p>item对象的过期时间最长可以达到30天。memcached把传入的过期时间（时间段）解释成时间点后，一旦到了这个时间点，memcached就把item置为失效状态，这是一个简单但obscure的机制。</p>\n<h2 id=\"什么是二进制协议，是否需要关注？\"><a href=\"#什么是二进制协议，是否需要关注？\" class=\"headerlink\" title=\"什么是二进制协议，是否需要关注？\"></a>什么是二进制协议，是否需要关注？</h2><p>二进制协议尝试为端提供一个更有效的、可靠的协议，减少客户端/服务器端因处理协议而产生的CPU时间。根据Facebook的测试，解析ASCII协议是memcached中消耗CPU时间最多的环节。</p>\n<h2 id=\"memcached是原子的吗？\"><a href=\"#memcached是原子的吗？\" class=\"headerlink\" title=\"memcached是原子的吗？\"></a>memcached是原子的吗？</h2><p>所有的被发送到memcached的单个命令是完全原子的。如果您针对同一份数据同时发送了一个set命令和一个get命令，它们不会影响对方。它们将被串行化、先后执行。即使在多线程模式，所有的命令都是原子的。然是，命令序列不是原子的。如果首先通过get命令获取了一个item，修改了它，然后再把它set回memcached，系统不保证这个item没有被其他进程（process，未必是操作系统中的进程）操作过。memcached 1.2.5以及更高版本，提供了gets和cas命令，它们可以解决上面的问题。如果使用gets命令查询某个key的item，memcached会返回该item当前值的唯一标识。如果客户端程序覆写了这个item并想把它写回到memcached中，可以通过cas命令把那个唯一标识一起发送给memcached。如果该item存放在memcached中的唯一标识与您提供的一致，写操作将会成功。如果另一个进程在这期间也修改了这个item，那么该item存放在memcached中的唯一标识将会改变，写操作就会</p>\n<p>失败。</p>\n<p>详细了解Memcached的内存分配机制：</p>\n<p><a href=\"http://cjjwzs.javaeye.com/blog/762453\" target=\"_blank\" rel=\"external\">http://cjjwzs.javaeye.com/blog/762453</a></p>\n<p><a href=\"http://blog.csdn.net/hguisu/article/details/6163621\" target=\"_blank\" rel=\"external\">Memcache存储大数据的问题</a></p>"},{"title":"YAML使用","date":"2017-05-20T12:40:56.000Z","reward":true,"_content":"\n![img](http://static.xcoder.ren/public/images/timg.png)\n\nYAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。\n\n## YAML vs XML\n\n与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在\n> **优势:**\n\n> -  YAML的可读性好\n> - YAML和脚本语言的交互性好\n> - YAML使用实现语言的数据类型\n> - YAML有一个一致的信息模型\n> - YAML易于实现\n\n上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：\n\n> - YAML可以基于流来处理\n> - YAML表达能力强，扩展性好\n\nYAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。\n<!--more-->\n## YAML vs JSON\n\nJSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：*进阶资料形态*、*关系锚点*、*字串不需要引号*、*映射资料形态会储存键值的顺序*等。\n\n## YAML用途\n\n### 脚本语言\n\n由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。\n\n### 序列化\n\nYAML比较适合做序列化。因为它是宿主语言数据类型直转的。\n\n### 配置文件\n\nYAML做配置文件也不错。写YAML要比写XML快得多(**无需关注标签或引号**)，并且比ini文档功能更强。\n\n### 调试\n\n由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。\n\n## YAML缺陷与不足\n\nYAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。\n\n## YAML语法与范例\n\n> - YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16\n> - 使用**空白字符**（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐\n> - 单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置\n> - 每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始\n> - 每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值\n> - 杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值\n> - 字串一般不使用引号，但必要的时候可以用引号框住\n> - 使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义\n> - 区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>></kbd>）两种方式\n> - 在单一档案中，可用连续三个连字号（<kbd>---</kbd>）区分多个档案\n> - 可选择性的连续三个点号（<kbd>...</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)\n> - 重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&</kbd>）\n> - 指定格式可以使用两个惊叹号 ( !! )，后面接上名称\n\n```\nreceipt:     Oz-Ware Purchase Invoice\ndate:        2007-08-06\ncustomer:\n    given:   Dorothy\n    family:  Gale\nitems:\n    - part_no:   A4786\n      descrip:   Water Bucket (Filled)\n      price:     1.47\n      quantity:  4\n    - part_no:   E1628\n      descrip:   High Heeled \"Ruby\" Slippers \n      price:     100.27\n      quantity:  1\nbill-to:  &id001\n    street: | \n            123 Tornado Alley\n            Suite 16\n    city:   East Westville\n    state:  KS\nship-to:  *id001   \nspecialDelivery:  >\n    Follow the Yellow Brick\n    Road to the Emerald City.\n    Pay no attention to the \n    man behind the curtain.\n...\n```\n这个文件的的顶层由七个键值组成：其中一个键值\"items\"，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。\n文件中重复的部分处理方式：使用锚点（&）和参考（*）标签将\"bill-to\"杂凑表的内容复制到\"ship-to\"杂凑表。也可以在文件中加入选择性的空行，以增加可读性。\n\n## YAML的JavaScript实现\n\n[阮一峰的网络日志](http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt)\n\n## YAML的JAVA实现\n\nYAML已经有了多种语言不少实现，详见[YAML官网](http://yaml.org/)。\n一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：\n```\nname: John Smith\nage: 37\nchildren:\n    - name: Jimmy Smith\n      age: 15\n    - name: Jenny Smith\n      age: 12\nspouse:\n    name: Jane Smith\n    age: 25\n```\n\n> 由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。\n对John.yaml进行java描述，抽象出一个Person类，如下：\n```\npublic class Person {\n    private String name;\n    private int age;\n    private Person sponse;\n    private Person[] children;\n    // setXXX, getXXX方法略.\n}\n```\n现在我们使用java装配一个Jone：\n```\n    Person john = new Person();\n    john.setAge(37);\n    john.setName(\"John Smith\");\n    Person sponse = new Person();\n    sponse.setName(\"Jane Smith\");\n    sponse.setAge(25);\n    john.setSponse(sponse);\n    Person[] children = {new Person(), new Person()};\n    children[0].setName(\"Jimmy Smith\");\n    children[0].setAge(15);\n    children[1].setName(\"Jenny Smith\");\n    children[1].setAge(12);\n    john.setChildren(children);\n```\n\n### 使用SnakeYAML实现\n\n项目主页：http://code.google.com/p/snakeyaml/\n使用手册：https://code.google.com/p/snakeyaml/wiki/Documentation\nSnakeYAML是一个标准的YAML的java实现，它有以下特点：\n> - 完全支持YAML 1.1，可以跑通规范中的所有示例\n> - 支持YAML的所有类型\n> - 支持UTF-8/UTF-16的输入和输出\n> - 提供了本地java对象的序列化和反序列化的高层API\n> - 提供相对合理的错误提示信息\n\n使用SnakeYAML将john dump出来，**如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&</kbd>和<kbd>*</kbd>进行锚点和引用**：\n```\nDumperOptions options = new DumperOptions();\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\nYaml yaml = new Yaml(options);\n//Yaml yaml = new Yaml();\nString dump = yaml.dump(john);\nSystem.out.println(dump);\n```\n内容如下：\n```\n!!Person\nage: 37\nchildren:\n- age: 15\n  children: null\n  name: Jimmy Smith\n  sponse: null\n- age: 12\n  children: null\n  name: Jenny Smith\n  sponse: null\nname: John Smith\nsponse:\n  age: 25\n  children: null\n  name: Jane Smith\n  sponse: null\n```\n现在用SnakeYAML把yaml load进来，**如果yaml文件中使用了<kbd>&</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值**：\n```\nYaml yaml = new Yaml();\nObject load = yaml.load(new FileInputStream(new File(\"jhon.yaml\")));\nSystem.out.println(load.getClass());\nSystem.out.println(yaml.dump(load));\n```\n或\n```\nYaml yaml = new Yaml(options);\nPerson person = yaml.loadAs(inputStream, Person.class);\nSystem.out.println(person.getSponse().getChildren().length);\n```\n如果一个yaml文件中有多个文档，由<kbd>---</kbd>分割，解析如下：\n```\nYaml yaml = new Yaml();\n        int counter = 0;\n        for (Object data : yaml.loadAll(input)) {\n            System.out.println(data);\n            counter++;\n        }\n```\n保存一个Map对象：\n```\nMap<String, Object> data = new HashMap<String, Object>();\n        data.put(\"name\", \"Silenthand Olleander\");\n        data.put(\"race\", \"Human\");\n        data.put(\"traits\", new String[] { \"ONE_HAND\", \"ONE_EYE\" });\n        Yaml yaml = new Yaml();\n        String output = yaml.dump(data);\n        System.out.println(output);\n    // or\n    StringWriter writer = new StringWriter();\n    yaml.dump(data, writer);\n    System.out.println(writer.toString());\n```\n将多个文档dump出到同一个yaml文件中去：\n```\nList<Integer> docs = new LinkedList<Integer>();\n    for (int i = 1; i < 4; i++) {\n        docs.add(i);\n    }\n    DumperOptions options = new DumperOptions();\n    //options.setCanonical(true);\n    options.explicitStart(true);\n    Yaml yaml = new Yaml(options);\n    System.out.println(yaml.dump(docs));\n    System.out.println(yaml.dumpAll(docs.iterator()));\n```\n```\n--- [1, 2, 3]\n\n--- 1\n--- 2\n--- 3\n```\nYAML与java类型对照表：\nYAML     | JAVA\n-------- | -------\n!null     |null\n!!bool     |Boolean\n!!int     |Integer, Long, BigInteger\n!!float     |Double\n!!binary     |String\n!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp\n!!omap, !!pairs     |List of Object[]\n!!set     |Set\n!!str     |String\n!!seq     |List\n!!map     |Map\n\n集合的默认实现是：\n> - List:  ArrayList\n> - Map:  LinkedHashMap\n\n### YAML转MAP\n\n> YAML数据\n\n```\ndata1: AAA\ndata2:\n  - aaa\n  - bbb\n  - ccc\ndata3:\n  zzz: ZZZ\n  yyy: YYY\n  xxx: XXX\n```\n\n> JAVA代码\n\n```\nYaml sYaml = new Yaml();\n        @SuppressWarnings(\"unchecked\")\n        Map<String, Object> yaml = (Map<String, Object>) sYaml.load(yamlString);\n\n        assertThat((String) yaml.get(\"data1\"), is(\"AAA\"));\n\n        @SuppressWarnings(\"unchecked\")\n        List<String> data2 = (List<String>) yaml.get(\"data2\");\n        assertThat(data2.get(0), is(\"aaa\"));\n        assertThat(data2.get(1), is(\"bbb\"));\n        assertThat(data2.get(2), is(\"ccc\"));\n\n        @SuppressWarnings(\"unchecked\")\n        Map<String, String> data3 = (Map<String, String>) yaml.get(\"data3\");\n        assertThat(data3.get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(data3.get(\"yyy\"), is(\"YYY\"));\n        assertThat(data3.get(\"xxx\"), is(\"XXX\"));\n```\n\n## YAML转Bean\n\n```\n!!com.YamlBean\ndata1: AAA\ndata2:\n  - aaa\n  - bbb\n  - ccc\ndata3:\n  zzz: ZZZ\n  yyy: YYY\n  xxx: XXX\n```\n\n\n```\npackage com;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic class YamlBean {\n\n    private String data1;\n    private List<String> data2;\n    private Map<String, String> data3;\n\n    public String getData1() {\n        return data1;\n    }\n\n    public void setData1(String data1) {\n        this.data1 = data1;\n    }\n\n    public List<String> getData2() {\n        return data2;\n    }\n\n    public void setData2(List<String> data2) {\n        this.data2 = data2;\n    }\n\n    public Map<String, String> getData3() {\n        return data3;\n    }\n\n    public void setData3(Map<String, String> data3) {\n        this.data3 = data3;\n    }\n}\n```\n\n```\n Yaml yaml = new Yaml();\n        YamlBean yamlBean = (YamlBean) yaml.load(yamlString);\n\n        assertThat(yamlBean.getData1(), is(\"AAA\"));\n        assertThat(yamlBean.getData2().get(0), is(\"aaa\"));\n        assertThat(yamlBean.getData2().get(1), is(\"bbb\"));\n        assertThat(yamlBean.getData2().get(2), is(\"ccc\"));\n        assertThat(yamlBean.getData3().get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(yamlBean.getData3().get(\"yyy\"), is(\"YYY\"));\n        assertThat(yamlBean.getData3().get(\"xxx\"), is(\"XXX\"));\n```\n\n\n```\nYaml yaml = new Yaml();\n        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);\n\n        assertThat(yamlBean.getData1(), is(\"AAA\"));\n        assertThat(yamlBean.getData2().get(0), is(\"aaa\"));\n        assertThat(yamlBean.getData2().get(1), is(\"bbb\"));\n        assertThat(yamlBean.getData2().get(2), is(\"ccc\"));\n        assertThat(yamlBean.getData3().get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(yamlBean.getData3().get(\"yyy\"), is(\"YYY\"));\n        assertThat(yamlBean.getData3().get(\"xxx\"), is(\"XXX\"));\n```","source":"_posts/language/YAML使用.md","raw":"\n---\ntitle: YAML使用\ndate: 2017-05-20 20:40:56\nreward: true\ncategories:\n    - language\ntags:\n    - YAML\n    - yml\n---\n\n![img](http://static.xcoder.ren/public/images/timg.png)\n\nYAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。\n\n## YAML vs XML\n\n与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在\n> **优势:**\n\n> -  YAML的可读性好\n> - YAML和脚本语言的交互性好\n> - YAML使用实现语言的数据类型\n> - YAML有一个一致的信息模型\n> - YAML易于实现\n\n上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：\n\n> - YAML可以基于流来处理\n> - YAML表达能力强，扩展性好\n\nYAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。\n<!--more-->\n## YAML vs JSON\n\nJSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：*进阶资料形态*、*关系锚点*、*字串不需要引号*、*映射资料形态会储存键值的顺序*等。\n\n## YAML用途\n\n### 脚本语言\n\n由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。\n\n### 序列化\n\nYAML比较适合做序列化。因为它是宿主语言数据类型直转的。\n\n### 配置文件\n\nYAML做配置文件也不错。写YAML要比写XML快得多(**无需关注标签或引号**)，并且比ini文档功能更强。\n\n### 调试\n\n由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。\n\n## YAML缺陷与不足\n\nYAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。\n\n## YAML语法与范例\n\n> - YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16\n> - 使用**空白字符**（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐\n> - 单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置\n> - 每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始\n> - 每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值\n> - 杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值\n> - 字串一般不使用引号，但必要的时候可以用引号框住\n> - 使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义\n> - 区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>></kbd>）两种方式\n> - 在单一档案中，可用连续三个连字号（<kbd>---</kbd>）区分多个档案\n> - 可选择性的连续三个点号（<kbd>...</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)\n> - 重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&</kbd>）\n> - 指定格式可以使用两个惊叹号 ( !! )，后面接上名称\n\n```\nreceipt:     Oz-Ware Purchase Invoice\ndate:        2007-08-06\ncustomer:\n    given:   Dorothy\n    family:  Gale\nitems:\n    - part_no:   A4786\n      descrip:   Water Bucket (Filled)\n      price:     1.47\n      quantity:  4\n    - part_no:   E1628\n      descrip:   High Heeled \"Ruby\" Slippers \n      price:     100.27\n      quantity:  1\nbill-to:  &id001\n    street: | \n            123 Tornado Alley\n            Suite 16\n    city:   East Westville\n    state:  KS\nship-to:  *id001   \nspecialDelivery:  >\n    Follow the Yellow Brick\n    Road to the Emerald City.\n    Pay no attention to the \n    man behind the curtain.\n...\n```\n这个文件的的顶层由七个键值组成：其中一个键值\"items\"，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。\n文件中重复的部分处理方式：使用锚点（&）和参考（*）标签将\"bill-to\"杂凑表的内容复制到\"ship-to\"杂凑表。也可以在文件中加入选择性的空行，以增加可读性。\n\n## YAML的JavaScript实现\n\n[阮一峰的网络日志](http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt)\n\n## YAML的JAVA实现\n\nYAML已经有了多种语言不少实现，详见[YAML官网](http://yaml.org/)。\n一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：\n```\nname: John Smith\nage: 37\nchildren:\n    - name: Jimmy Smith\n      age: 15\n    - name: Jenny Smith\n      age: 12\nspouse:\n    name: Jane Smith\n    age: 25\n```\n\n> 由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。\n对John.yaml进行java描述，抽象出一个Person类，如下：\n```\npublic class Person {\n    private String name;\n    private int age;\n    private Person sponse;\n    private Person[] children;\n    // setXXX, getXXX方法略.\n}\n```\n现在我们使用java装配一个Jone：\n```\n    Person john = new Person();\n    john.setAge(37);\n    john.setName(\"John Smith\");\n    Person sponse = new Person();\n    sponse.setName(\"Jane Smith\");\n    sponse.setAge(25);\n    john.setSponse(sponse);\n    Person[] children = {new Person(), new Person()};\n    children[0].setName(\"Jimmy Smith\");\n    children[0].setAge(15);\n    children[1].setName(\"Jenny Smith\");\n    children[1].setAge(12);\n    john.setChildren(children);\n```\n\n### 使用SnakeYAML实现\n\n项目主页：http://code.google.com/p/snakeyaml/\n使用手册：https://code.google.com/p/snakeyaml/wiki/Documentation\nSnakeYAML是一个标准的YAML的java实现，它有以下特点：\n> - 完全支持YAML 1.1，可以跑通规范中的所有示例\n> - 支持YAML的所有类型\n> - 支持UTF-8/UTF-16的输入和输出\n> - 提供了本地java对象的序列化和反序列化的高层API\n> - 提供相对合理的错误提示信息\n\n使用SnakeYAML将john dump出来，**如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&</kbd>和<kbd>*</kbd>进行锚点和引用**：\n```\nDumperOptions options = new DumperOptions();\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\nYaml yaml = new Yaml(options);\n//Yaml yaml = new Yaml();\nString dump = yaml.dump(john);\nSystem.out.println(dump);\n```\n内容如下：\n```\n!!Person\nage: 37\nchildren:\n- age: 15\n  children: null\n  name: Jimmy Smith\n  sponse: null\n- age: 12\n  children: null\n  name: Jenny Smith\n  sponse: null\nname: John Smith\nsponse:\n  age: 25\n  children: null\n  name: Jane Smith\n  sponse: null\n```\n现在用SnakeYAML把yaml load进来，**如果yaml文件中使用了<kbd>&</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值**：\n```\nYaml yaml = new Yaml();\nObject load = yaml.load(new FileInputStream(new File(\"jhon.yaml\")));\nSystem.out.println(load.getClass());\nSystem.out.println(yaml.dump(load));\n```\n或\n```\nYaml yaml = new Yaml(options);\nPerson person = yaml.loadAs(inputStream, Person.class);\nSystem.out.println(person.getSponse().getChildren().length);\n```\n如果一个yaml文件中有多个文档，由<kbd>---</kbd>分割，解析如下：\n```\nYaml yaml = new Yaml();\n        int counter = 0;\n        for (Object data : yaml.loadAll(input)) {\n            System.out.println(data);\n            counter++;\n        }\n```\n保存一个Map对象：\n```\nMap<String, Object> data = new HashMap<String, Object>();\n        data.put(\"name\", \"Silenthand Olleander\");\n        data.put(\"race\", \"Human\");\n        data.put(\"traits\", new String[] { \"ONE_HAND\", \"ONE_EYE\" });\n        Yaml yaml = new Yaml();\n        String output = yaml.dump(data);\n        System.out.println(output);\n    // or\n    StringWriter writer = new StringWriter();\n    yaml.dump(data, writer);\n    System.out.println(writer.toString());\n```\n将多个文档dump出到同一个yaml文件中去：\n```\nList<Integer> docs = new LinkedList<Integer>();\n    for (int i = 1; i < 4; i++) {\n        docs.add(i);\n    }\n    DumperOptions options = new DumperOptions();\n    //options.setCanonical(true);\n    options.explicitStart(true);\n    Yaml yaml = new Yaml(options);\n    System.out.println(yaml.dump(docs));\n    System.out.println(yaml.dumpAll(docs.iterator()));\n```\n```\n--- [1, 2, 3]\n\n--- 1\n--- 2\n--- 3\n```\nYAML与java类型对照表：\nYAML     | JAVA\n-------- | -------\n!null     |null\n!!bool     |Boolean\n!!int     |Integer, Long, BigInteger\n!!float     |Double\n!!binary     |String\n!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp\n!!omap, !!pairs     |List of Object[]\n!!set     |Set\n!!str     |String\n!!seq     |List\n!!map     |Map\n\n集合的默认实现是：\n> - List:  ArrayList\n> - Map:  LinkedHashMap\n\n### YAML转MAP\n\n> YAML数据\n\n```\ndata1: AAA\ndata2:\n  - aaa\n  - bbb\n  - ccc\ndata3:\n  zzz: ZZZ\n  yyy: YYY\n  xxx: XXX\n```\n\n> JAVA代码\n\n```\nYaml sYaml = new Yaml();\n        @SuppressWarnings(\"unchecked\")\n        Map<String, Object> yaml = (Map<String, Object>) sYaml.load(yamlString);\n\n        assertThat((String) yaml.get(\"data1\"), is(\"AAA\"));\n\n        @SuppressWarnings(\"unchecked\")\n        List<String> data2 = (List<String>) yaml.get(\"data2\");\n        assertThat(data2.get(0), is(\"aaa\"));\n        assertThat(data2.get(1), is(\"bbb\"));\n        assertThat(data2.get(2), is(\"ccc\"));\n\n        @SuppressWarnings(\"unchecked\")\n        Map<String, String> data3 = (Map<String, String>) yaml.get(\"data3\");\n        assertThat(data3.get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(data3.get(\"yyy\"), is(\"YYY\"));\n        assertThat(data3.get(\"xxx\"), is(\"XXX\"));\n```\n\n## YAML转Bean\n\n```\n!!com.YamlBean\ndata1: AAA\ndata2:\n  - aaa\n  - bbb\n  - ccc\ndata3:\n  zzz: ZZZ\n  yyy: YYY\n  xxx: XXX\n```\n\n\n```\npackage com;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic class YamlBean {\n\n    private String data1;\n    private List<String> data2;\n    private Map<String, String> data3;\n\n    public String getData1() {\n        return data1;\n    }\n\n    public void setData1(String data1) {\n        this.data1 = data1;\n    }\n\n    public List<String> getData2() {\n        return data2;\n    }\n\n    public void setData2(List<String> data2) {\n        this.data2 = data2;\n    }\n\n    public Map<String, String> getData3() {\n        return data3;\n    }\n\n    public void setData3(Map<String, String> data3) {\n        this.data3 = data3;\n    }\n}\n```\n\n```\n Yaml yaml = new Yaml();\n        YamlBean yamlBean = (YamlBean) yaml.load(yamlString);\n\n        assertThat(yamlBean.getData1(), is(\"AAA\"));\n        assertThat(yamlBean.getData2().get(0), is(\"aaa\"));\n        assertThat(yamlBean.getData2().get(1), is(\"bbb\"));\n        assertThat(yamlBean.getData2().get(2), is(\"ccc\"));\n        assertThat(yamlBean.getData3().get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(yamlBean.getData3().get(\"yyy\"), is(\"YYY\"));\n        assertThat(yamlBean.getData3().get(\"xxx\"), is(\"XXX\"));\n```\n\n\n```\nYaml yaml = new Yaml();\n        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);\n\n        assertThat(yamlBean.getData1(), is(\"AAA\"));\n        assertThat(yamlBean.getData2().get(0), is(\"aaa\"));\n        assertThat(yamlBean.getData2().get(1), is(\"bbb\"));\n        assertThat(yamlBean.getData2().get(2), is(\"ccc\"));\n        assertThat(yamlBean.getData3().get(\"zzz\"), is(\"ZZZ\"));\n        assertThat(yamlBean.getData3().get(\"yyy\"), is(\"YYY\"));\n        assertThat(yamlBean.getData3().get(\"xxx\"), is(\"XXX\"));\n```","slug":"language/YAML使用","published":1,"updated":"2017-06-10T13:45:04.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrk001a9vvutzpj1md2","content":"<p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n<p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n<h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n<blockquote>\n<p><strong>优势:</strong></p>\n<ul>\n<li>YAML的可读性好</li>\n<li>YAML和脚本语言的交互性好</li>\n<li>YAML使用实现语言的数据类型</li>\n<li>YAML有一个一致的信息模型</li>\n<li>YAML易于实现</li>\n</ul>\n</blockquote>\n<p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n<blockquote>\n<ul>\n<li>YAML可以基于流来处理</li>\n<li>YAML表达能力强，扩展性好</li>\n</ul>\n</blockquote>\n<p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br><a id=\"more\"></a></p>\n<h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n<h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n<h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n<h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n<h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n<h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n<ul>\n<li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n<li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n<li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n<li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n<li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n<li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n<li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n<li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n<li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n<li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n<li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n<li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n<li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n</ul>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n<h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n<h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n<h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n<blockquote>\n<ul>\n<li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n<li>支持YAML的所有类型</li>\n<li>支持UTF-8/UTF-16的输入和输出</li>\n<li>提供了本地java对象的序列化和反序列化的高层API</li>\n<li>提供相对合理的错误提示信息</li>\n</ul>\n</blockquote>\n<p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n<p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n<p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n<p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n<p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n<p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n<p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n<p>集合的默认实现是：</p>\n<blockquote>\n<ul>\n<li>List:  ArrayList</li>\n<li>Map:  LinkedHashMap</li>\n</ul>\n</blockquote>\n<h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n<p>YAML数据</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n<blockquote>\n<p>JAVA代码</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n<h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p><img src=\"http://static.xcoder.ren/public/images/timg.png\" alt=\"img\"></p>\n<p>YAML是“另一种标记语言”的外语缩写，但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。它是一种直观的能够被电脑识别的数据序列化格式，是一个可读性高并且容易被人类阅读，容易和脚本语言交互，用来表达资料序列的编程语言。它是类似于标准通用标记语言的子集XML的数据描述语言，语法比XML简单很多。</p>\n<h2 id=\"YAML-vs-XML\"><a href=\"#YAML-vs-XML\" class=\"headerlink\" title=\"YAML vs XML\"></a>YAML vs XML</h2><p>与YAML相似的数据格式定义语言是XML，YAML比XML优越性表现在</p>\n<blockquote>\n<p><strong>优势:</strong></p>\n<ul>\n<li>YAML的可读性好</li>\n<li>YAML和脚本语言的交互性好</li>\n<li>YAML使用实现语言的数据类型</li>\n<li>YAML有一个一致的信息模型</li>\n<li>YAML易于实现</li>\n</ul>\n</blockquote>\n<p>上面5条是XML不足的地方，同时，YAML也具有XML的下列优点：</p>\n<blockquote>\n<ul>\n<li>YAML可以基于流来处理</li>\n<li>YAML表达能力强，扩展性好</li>\n</ul>\n</blockquote>\n<p>YAML类似于XML的数据描述语言，语法比XML简单很多，YAML试图用一种比XML更敏捷的方式，来完成XML所完成的任务。<br>","more":"</p>\n<h2 id=\"YAML-vs-JSON\"><a href=\"#YAML-vs-JSON\" class=\"headerlink\" title=\"YAML vs JSON\"></a>YAML vs JSON</h2><p>JSON的语法其实是YAML的子集，大部分的JSON文件都可以被YAML的剖析器剖析。虽然大部分的数据分层形式也可以使用类似JSON的格式，不过YAML并不建议这样使用，除非这样编写能让文件可读性增加，更重要的是，YAML的许多扩展在JSON是找不到的，如：<em>进阶资料形态</em>、<em>关系锚点</em>、<em>字串不需要引号</em>、<em>映射资料形态会储存键值的顺序</em>等。</p>\n<h2 id=\"YAML用途\"><a href=\"#YAML用途\" class=\"headerlink\" title=\"YAML用途\"></a>YAML用途</h2><h3 id=\"脚本语言\"><a href=\"#脚本语言\" class=\"headerlink\" title=\"脚本语言\"></a>脚本语言</h3><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，除了Java，其他都是脚本语言。</p>\n<h3 id=\"序列化\"><a href=\"#序列化\" class=\"headerlink\" title=\"序列化\"></a>序列化</h3><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>YAML做配置文件也不错。写YAML要比写XML快得多(<strong>无需关注标签或引号</strong>)，并且比ini文档功能更强。</p>\n<h3 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h3><p>由于其很强的阅读性，用于调试过程中dump出信息供分析也是一种比较方便的做法。</p>\n<h2 id=\"YAML缺陷与不足\"><a href=\"#YAML缺陷与不足\" class=\"headerlink\" title=\"YAML缺陷与不足\"></a>YAML缺陷与不足</h2><p>YAML没有自己的数据类型的定义，而是使用实现语言的数据类型。一个YAML文件，在不同语言中解析后得到的数据类型可能会不同，由于其兼容性问题，不同语言间的数据流转不建议使用YAML。</p>\n<h2 id=\"YAML语法与范例\"><a href=\"#YAML语法与范例\" class=\"headerlink\" title=\"YAML语法与范例\"></a>YAML语法与范例</h2><blockquote>\n<ul>\n<li>YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16</li>\n<li>使用<strong>空白字符</strong>（不能使用<kbd>Tab</kbd>）分层，同层元素左侧对齐</li>\n<li>单行注解由井字号（<kbd> #</kbd> ）开始，可以出现在行中任何位置</li>\n<li>每个清单成员以单行表示，并用短杠+空白（<kbd>-  </kbd>）起始</li>\n<li>每个杂凑表的成员用冒号+空白（<kbd>:  </kbd>）分开键和值</li>\n<li>杂凑表的键值可以用问号 (<kbd>?</kbd>)起始，表示多个词汇组成的键值</li>\n<li>字串一般不使用引号，但必要的时候可以用引号框住</li>\n<li>使用双引号表示字串时，可用倒斜线（<kbd>\\</kbd>）进行特殊字符转义</li>\n<li>区块的字串用缩排和修饰词（非必要）来和其他资料分隔，有新行保留（使用符号<kbd>|</kbd>）或新行折叠（使用符号<kbd>&gt;</kbd>）两种方式</li>\n<li>在单一档案中，可用连续三个连字号（<kbd>—</kbd>）区分多个档案</li>\n<li>可选择性的连续三个点号（<kbd>…</kbd>）用来表示档案结尾(在流式传输时非常有用，不需要关闭流即可知道到达结尾处)</li>\n<li>重复的内容可使从参考标记星号 (<kbd>*</kbd>)复制到锚点标记（<kbd>&amp;</kbd>）</li>\n<li>指定格式可以使用两个惊叹号 ( !! )，后面接上名称</li>\n</ul>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">receipt:     Oz-Ware Purchase Invoice</div><div class=\"line\">date:        2007-08-06</div><div class=\"line\">customer:</div><div class=\"line\">    given:   Dorothy</div><div class=\"line\">    family:  Gale</div><div class=\"line\">items:</div><div class=\"line\">    - part_no:   A4786</div><div class=\"line\">      descrip:   Water Bucket (Filled)</div><div class=\"line\">      price:     1.47</div><div class=\"line\">      quantity:  4</div><div class=\"line\">    - part_no:   E1628</div><div class=\"line\">      descrip:   High Heeled &quot;Ruby&quot; Slippers </div><div class=\"line\">      price:     100.27</div><div class=\"line\">      quantity:  1</div><div class=\"line\">bill-to:  &amp;id001</div><div class=\"line\">    street: | </div><div class=\"line\">            123 Tornado Alley</div><div class=\"line\">            Suite 16</div><div class=\"line\">    city:   East Westville</div><div class=\"line\">    state:  KS</div><div class=\"line\">ship-to:  *id001   </div><div class=\"line\">specialDelivery:  &gt;</div><div class=\"line\">    Follow the Yellow Brick</div><div class=\"line\">    Road to the Emerald City.</div><div class=\"line\">    Pay no attention to the </div><div class=\"line\">    man behind the curtain.</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>这个文件的的顶层由七个键值组成：其中一个键值”items”，是个两个元素构成的清单，清单中的两个元素同时也是包含了四个键值的杂凑表。<br>文件中重复的部分处理方式：使用锚点（&amp;）和参考（*）标签将”bill-to”杂凑表的内容复制到”ship-to”杂凑表。也可以在文件中加入选择性的空行，以增加可读性。</p>\n<h2 id=\"YAML的JavaScript实现\"><a href=\"#YAML的JavaScript实现\" class=\"headerlink\" title=\"YAML的JavaScript实现\"></a>YAML的JavaScript实现</h2><p><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt\" target=\"_blank\" rel=\"external\">阮一峰的网络日志</a></p>\n<h2 id=\"YAML的JAVA实现\"><a href=\"#YAML的JAVA实现\" class=\"headerlink\" title=\"YAML的JAVA实现\"></a>YAML的JAVA实现</h2><p>YAML已经有了多种语言不少实现，详见<a href=\"http://yaml.org/\" target=\"_blank\" rel=\"external\">YAML官网</a>。<br>一般YAML文件扩展名为.yaml，比如John.yaml，其内容为：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">name: John Smith</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">    - name: Jimmy Smith</div><div class=\"line\">      age: 15</div><div class=\"line\">    - name: Jenny Smith</div><div class=\"line\">      age: 12</div><div class=\"line\">spouse:</div><div class=\"line\">    name: Jane Smith</div><div class=\"line\">    age: 25</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>由于yaml的超强可读性，我们了解到：John今年37岁，两个孩子Jimmy 和Jenny活泼可爱，妻子Jane年轻美貌，而且年仅25岁，一个幸福的四口之家。<br>对John.yaml进行java描述，抽象出一个Person类，如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Person &#123;</div><div class=\"line\">    private String name;</div><div class=\"line\">    private int age;</div><div class=\"line\">    private Person sponse;</div><div class=\"line\">    private Person[] children;</div><div class=\"line\">    // setXXX, getXXX方法略.</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>现在我们使用java装配一个Jone：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person john = new Person();</div><div class=\"line\">john.setAge(37);</div><div class=\"line\">john.setName(&quot;John Smith&quot;);</div><div class=\"line\">Person sponse = new Person();</div><div class=\"line\">sponse.setName(&quot;Jane Smith&quot;);</div><div class=\"line\">sponse.setAge(25);</div><div class=\"line\">john.setSponse(sponse);</div><div class=\"line\">Person[] children = &#123;new Person(), new Person()&#125;;</div><div class=\"line\">children[0].setName(&quot;Jimmy Smith&quot;);</div><div class=\"line\">children[0].setAge(15);</div><div class=\"line\">children[1].setName(&quot;Jenny Smith&quot;);</div><div class=\"line\">children[1].setAge(12);</div><div class=\"line\">john.setChildren(children);</div></pre></td></tr></table></figure></p>\n<h3 id=\"使用SnakeYAML实现\"><a href=\"#使用SnakeYAML实现\" class=\"headerlink\" title=\"使用SnakeYAML实现\"></a>使用SnakeYAML实现</h3><p>项目主页：<a href=\"http://code.google.com/p/snakeyaml/\" target=\"_blank\" rel=\"external\">http://code.google.com/p/snakeyaml/</a><br>使用手册：<a href=\"https://code.google.com/p/snakeyaml/wiki/Documentation\" target=\"_blank\" rel=\"external\">https://code.google.com/p/snakeyaml/wiki/Documentation</a><br>SnakeYAML是一个标准的YAML的java实现，它有以下特点：</p>\n<blockquote>\n<ul>\n<li>完全支持YAML 1.1，可以跑通规范中的所有示例</li>\n<li>支持YAML的所有类型</li>\n<li>支持UTF-8/UTF-16的输入和输出</li>\n<li>提供了本地java对象的序列化和反序列化的高层API</li>\n<li>提供相对合理的错误提示信息</li>\n</ul>\n</blockquote>\n<p>使用SnakeYAML将john dump出来，<strong>如果有引用相同对象，则dump出到yaml文件会自动使用<kbd>&amp;</kbd>和<kbd>*</kbd>进行锚点和引用</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">DumperOptions options = new DumperOptions();</div><div class=\"line\">options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);</div><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">//Yaml yaml = new Yaml();</div><div class=\"line\">String dump = yaml.dump(john);</div><div class=\"line\">System.out.println(dump);</div></pre></td></tr></table></figure></p>\n<p>内容如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!Person</div><div class=\"line\">age: 37</div><div class=\"line\">children:</div><div class=\"line\">- age: 15</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jimmy Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">- age: 12</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jenny Smith</div><div class=\"line\">  sponse: null</div><div class=\"line\">name: John Smith</div><div class=\"line\">sponse:</div><div class=\"line\">  age: 25</div><div class=\"line\">  children: null</div><div class=\"line\">  name: Jane Smith</div><div class=\"line\">  sponse: null</div></pre></td></tr></table></figure></p>\n<p>现在用SnakeYAML把yaml load进来，<strong>如果yaml文件中使用了<kbd>&amp;</kbd>和<kbd>*</kbd>，则会自动对load出来的对象赋相同的值</strong>：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">Object load = yaml.load(new FileInputStream(new File(&quot;jhon.yaml&quot;)));</div><div class=\"line\">System.out.println(load.getClass());</div><div class=\"line\">System.out.println(yaml.dump(load));</div></pre></td></tr></table></figure></p>\n<p>或<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml(options);</div><div class=\"line\">Person person = yaml.loadAs(inputStream, Person.class);</div><div class=\"line\">System.out.println(person.getSponse().getChildren().length);</div></pre></td></tr></table></figure></p>\n<p>如果一个yaml文件中有多个文档，由<kbd>—</kbd>分割，解析如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        int counter = 0;</div><div class=\"line\">        for (Object data : yaml.loadAll(input)) &#123;</div><div class=\"line\">            System.out.println(data);</div><div class=\"line\">            counter++;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<p>保存一个Map对象：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</div><div class=\"line\">        data.put(&quot;name&quot;, &quot;Silenthand Olleander&quot;);</div><div class=\"line\">        data.put(&quot;race&quot;, &quot;Human&quot;);</div><div class=\"line\">        data.put(&quot;traits&quot;, new String[] &#123; &quot;ONE_HAND&quot;, &quot;ONE_EYE&quot; &#125;);</div><div class=\"line\">        Yaml yaml = new Yaml();</div><div class=\"line\">        String output = yaml.dump(data);</div><div class=\"line\">        System.out.println(output);</div><div class=\"line\">    // or</div><div class=\"line\">    StringWriter writer = new StringWriter();</div><div class=\"line\">    yaml.dump(data, writer);</div><div class=\"line\">    System.out.println(writer.toString());</div></pre></td></tr></table></figure></p>\n<p>将多个文档dump出到同一个yaml文件中去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;Integer&gt; docs = new LinkedList&lt;Integer&gt;();</div><div class=\"line\">    for (int i = 1; i &lt; 4; i++) &#123;</div><div class=\"line\">        docs.add(i);</div><div class=\"line\">    &#125;</div><div class=\"line\">    DumperOptions options = new DumperOptions();</div><div class=\"line\">    //options.setCanonical(true);</div><div class=\"line\">    options.explicitStart(true);</div><div class=\"line\">    Yaml yaml = new Yaml(options);</div><div class=\"line\">    System.out.println(yaml.dump(docs));</div><div class=\"line\">    System.out.println(yaml.dumpAll(docs.iterator()));</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">--- [1, 2, 3]</div><div class=\"line\"></div><div class=\"line\">--- 1</div><div class=\"line\">--- 2</div><div class=\"line\">--- 3</div></pre></td></tr></table></figure>\n<p>YAML与java类型对照表：<br>YAML     | JAVA<br>——– | ——-<br>!null     |null<br>!!bool     |Boolean<br>!!int     |Integer, Long, BigInteger<br>!!float     |Double<br>!!binary     |String<br>!!timestamp     |java.util.Date, java.sql.Date, java.sql.Timestamp<br>!!omap, !!pairs     |List of Object[]<br>!!set     |Set<br>!!str     |String<br>!!seq     |List<br>!!map     |Map</p>\n<p>集合的默认实现是：</p>\n<blockquote>\n<ul>\n<li>List:  ArrayList</li>\n<li>Map:  LinkedHashMap</li>\n</ul>\n</blockquote>\n<h3 id=\"YAML转MAP\"><a href=\"#YAML转MAP\" class=\"headerlink\" title=\"YAML转MAP\"></a>YAML转MAP</h3><blockquote>\n<p>YAML数据</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n<blockquote>\n<p>JAVA代码</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml sYaml = new Yaml();</div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, Object&gt; yaml = (Map&lt;String, Object&gt;) sYaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">        assertThat((String) yaml.get(&quot;data1&quot;), is(&quot;AAA&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        List&lt;String&gt; data2 = (List&lt;String&gt;) yaml.get(&quot;data2&quot;);</div><div class=\"line\">        assertThat(data2.get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(data2.get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(data2.get(2), is(&quot;ccc&quot;));</div><div class=\"line\"></div><div class=\"line\">        @SuppressWarnings(&quot;unchecked&quot;)</div><div class=\"line\">        Map&lt;String, String&gt; data3 = (Map&lt;String, String&gt;) yaml.get(&quot;data3&quot;);</div><div class=\"line\">        assertThat(data3.get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(data3.get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n<h2 id=\"YAML转Bean\"><a href=\"#YAML转Bean\" class=\"headerlink\" title=\"YAML转Bean\"></a>YAML转Bean</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">!!com.YamlBean</div><div class=\"line\">data1: AAA</div><div class=\"line\">data2:</div><div class=\"line\">  - aaa</div><div class=\"line\">  - bbb</div><div class=\"line\">  - ccc</div><div class=\"line\">data3:</div><div class=\"line\">  zzz: ZZZ</div><div class=\"line\">  yyy: YYY</div><div class=\"line\">  xxx: XXX</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com;</div><div class=\"line\"></div><div class=\"line\">import java.util.List;</div><div class=\"line\">import java.util.Map;</div><div class=\"line\"></div><div class=\"line\">public class YamlBean &#123;</div><div class=\"line\"></div><div class=\"line\">    private String data1;</div><div class=\"line\">    private List&lt;String&gt; data2;</div><div class=\"line\">    private Map&lt;String, String&gt; data3;</div><div class=\"line\"></div><div class=\"line\">    public String getData1() &#123;</div><div class=\"line\">        return data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData1(String data1) &#123;</div><div class=\"line\">        this.data1 = data1;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public List&lt;String&gt; getData2() &#123;</div><div class=\"line\">        return data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData2(List&lt;String&gt; data2) &#123;</div><div class=\"line\">        this.data2 = data2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public Map&lt;String, String&gt; getData3() &#123;</div><div class=\"line\">        return data3;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    public void setData3(Map&lt;String, String&gt; data3) &#123;</div><div class=\"line\">        this.data3 = data3;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">       YamlBean yamlBean = (YamlBean) yaml.load(yamlString);</div><div class=\"line\"></div><div class=\"line\">       assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">       assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Yaml yaml = new Yaml();</div><div class=\"line\">        YamlBean yamlBean = yaml.loadAs(yamlString, YamlBean.class);</div><div class=\"line\"></div><div class=\"line\">        assertThat(yamlBean.getData1(), is(&quot;AAA&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(0), is(&quot;aaa&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(1), is(&quot;bbb&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData2().get(2), is(&quot;ccc&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;zzz&quot;), is(&quot;ZZZ&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;yyy&quot;), is(&quot;YYY&quot;));</div><div class=\"line\">        assertThat(yamlBean.getData3().get(&quot;xxx&quot;), is(&quot;XXX&quot;));</div></pre></td></tr></table></figure>"},{"title":"mysql查询事务/死锁相关命令","date":"2017-06-04T04:40:56.000Z","reward":true,"_content":"* 查询innodb 死锁\n```\nshow engine innodeb status;\n```\n拷贝status里面的内容到文本编辑器，查看LATEST DETECTED DEADLOCK块即为之前死锁的记录\n\n```\nSEMAPHORES\n主要显示系统的当前的信号等待信息及各种等待信号的统计信息，这部分对调整innodb_thread_concurrency参数有非常大的帮助。当等待信号量非常大的时候，可能就需要禁用并发线程检测设置innodb_thread_concurrency=0;\n\nTRANSACTIONS\n主要展示系统的锁等待信息和当前活动事务信息，通过这部分，可以追踪到死锁的详细信息。\n\nFILE I/O\n文件I/O相关信息，主要是IO等待信息。\n\nINSERTBUFFER AND ADAPTIVE HASH INDEX\n显示插入缓存当前状态信息及自适应hash index的状态\n\nLOG\nInnodb 事务日志相关信息，包括当前的日志序列号（Log sequence number），已经刷新同步到那个序列号，最近的check point到那个序列号了。除此之外，还显示了系统从启动到现在已经做了多少次check point，多少次日志刷新。\n\nBUFFER POOLAND MEMORY\n主要显示innodbbuffer pool相关的各种统计信息，以及其他一些内存使用情况。\n\nROWOPERATIONS\n主要显示的是与客户端的请求query和query所影响的记录统计信息\n```\n<!--more-->\n* 查询是否锁表\n``show OPEN TABLES where In_use > 0;``\n\n* 查询当前进程\n\n``show processlist;``\n\n``select * from `information_schema`.processlist;``\n\n有super权限可以看到所有线程，否则只能看到当前用户线程\n\nselect的语句可以方便排序搜索\n\n* kill阻塞进程\n\n从查询的进程列表中``kill id``即可\n\n* 查询当前事务\n\n``SELECT * FROM `information_schema`.innodb_trx;``\n\n```markdown\n+----------------------------+---------------------+------+-----+---------------------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+----------------------------+---------------------+------+-----+---------------------+-------+\n| trx_id | varchar(18) | NO | | | |#事务ID\n| trx_state | varchar(13) | NO | | | |#事务状态：\n| trx_started | datetime | NO | | 0000-00-00 00:00:00 | |#事务开始时间；\n| trx_requested_lock_id | varchar(81) | YES | | NULL | |#innodb_locks.lock_id\n| trx_wait_started | datetime | YES | | NULL | |#事务开始等待的时间\n| trx_weight | bigint(21) unsigned | NO | | 0 | |#\n| trx_mysql_thread_id | bigint(21) unsigned | NO | | 0 | |#事务线程ID\n| trx_query | varchar(1024) | YES | | NULL | |#具体SQL语句\n| trx_operation_state | varchar(64) | YES | | NULL | |#事务当前操作状态\n| trx_tables_in_use | bigint(21) unsigned | NO | | 0 | |#事务中有多少个表被使用\n| trx_tables_locked | bigint(21) unsigned | NO | | 0 | |#事务拥有多少个锁\n| trx_lock_structs | bigint(21) unsigned | NO | | 0 | |#\n| trx_lock_memory_bytes | bigint(21) unsigned | NO | | 0 | |#事务锁住的内存大小（B）\n| trx_rows_locked | bigint(21) unsigned | NO | | 0 | |#事务锁住的行数\n| trx_rows_modified | bigint(21) unsigned | NO | | 0 | |#事务更改的行数\n| trx_concurrency_tickets | bigint(21) unsigned | NO | | 0 | |#事务并发票数\n| trx_isolation_level | varchar(16) | NO | | | |#事务隔离级别\n| trx_unique_checks | int(1) | NO | | 0 | |#是否唯一性检查\n| trx_foreign_key_checks | int(1) | NO | | 0 | |#是否外键检查\n| trx_last_foreign_key_error | varchar(256) | YES | | NULL | |#最后的外键错误\n| trx_adaptive_hash_latched | int(1) | NO | | 0 | |#\n| trx_adaptive_hash_timeout | bigint(21) unsigned | NO | | 0 | |#\n+----------------------------+---------------------+------+-----+---------------------+-------+\n```\n\n* 查询当前锁定事务\n\n``SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;``\n\n这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id\n\n```markdown\n+-------------+---------------------+------+-----+---------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+-------------+---------------------+------+-----+---------+-------+\n| lock_id | varchar(81) | NO | | | |#锁ID\n| lock_trx_id | varchar(18) | NO | | | |#拥有锁的事务ID\n| lock_mode | varchar(32) | NO | | | |#锁模式\n| lock_type | varchar(32) | NO | | | |#锁类型\n| lock_table | varchar(1024) | NO | | | |#被锁的表\n| lock_index | varchar(1024) | YES | | NULL | |#被锁的索引\n| lock_space | bigint(21) unsigned | YES | | NULL | |#被锁的表空间号\n| lock_page | bigint(21) unsigned | YES | | NULL | |#被锁的页号\n| lock_rec | bigint(21) unsigned | YES | | NULL | |#被锁的记录号\n| lock_data | varchar(8192) | YES | | NULL | |#被锁的数据\n+-------------+---------------------+------+-----+---------+-------+\n```\n\n\n* 查询当前等待的事务\n\n``SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;``\n这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id\n```markdown\n+-------------------+-------------+------+-----+---------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+-------------------+-------------+------+-----+---------+-------+\n| requesting_trx_id | varchar(18) | NO | | | |#请求锁的事务ID\n| requested_lock_id | varchar(81) | NO | | | |#请求锁的锁ID\n| blocking_trx_id | varchar(18) | NO | | | |#当前拥有锁的事务ID\n| blocking_lock_id | varchar(81) | NO | | | |#当前拥有锁的锁ID\n+-------------------+-------------+------+-----+---------+-------+\n```\n\n### \"Lock wait timeout exceeded; try restarting transaction\"\n\nselect @@autocommit;\n\n如果为0会导致原来的update语句如果没有commit的话，你再重新执行update语句，就会等待锁定，当等待时间过长的时候，就会报ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction的错误。\n\ncommit刚才执行的update语句，之后 set global autocommit=1;\n\n","source":"_posts/language/mysql查询事务死锁相关命令.md","raw":"\n---\ntitle: mysql查询事务/死锁相关命令\ndate: 2017-06-04 12:40:56\nreward: true\ncategories:\n    - language\ntags:\n    - mysql\n    - 死锁\n    - 事务\n---\n* 查询innodb 死锁\n```\nshow engine innodeb status;\n```\n拷贝status里面的内容到文本编辑器，查看LATEST DETECTED DEADLOCK块即为之前死锁的记录\n\n```\nSEMAPHORES\n主要显示系统的当前的信号等待信息及各种等待信号的统计信息，这部分对调整innodb_thread_concurrency参数有非常大的帮助。当等待信号量非常大的时候，可能就需要禁用并发线程检测设置innodb_thread_concurrency=0;\n\nTRANSACTIONS\n主要展示系统的锁等待信息和当前活动事务信息，通过这部分，可以追踪到死锁的详细信息。\n\nFILE I/O\n文件I/O相关信息，主要是IO等待信息。\n\nINSERTBUFFER AND ADAPTIVE HASH INDEX\n显示插入缓存当前状态信息及自适应hash index的状态\n\nLOG\nInnodb 事务日志相关信息，包括当前的日志序列号（Log sequence number），已经刷新同步到那个序列号，最近的check point到那个序列号了。除此之外，还显示了系统从启动到现在已经做了多少次check point，多少次日志刷新。\n\nBUFFER POOLAND MEMORY\n主要显示innodbbuffer pool相关的各种统计信息，以及其他一些内存使用情况。\n\nROWOPERATIONS\n主要显示的是与客户端的请求query和query所影响的记录统计信息\n```\n<!--more-->\n* 查询是否锁表\n``show OPEN TABLES where In_use > 0;``\n\n* 查询当前进程\n\n``show processlist;``\n\n``select * from `information_schema`.processlist;``\n\n有super权限可以看到所有线程，否则只能看到当前用户线程\n\nselect的语句可以方便排序搜索\n\n* kill阻塞进程\n\n从查询的进程列表中``kill id``即可\n\n* 查询当前事务\n\n``SELECT * FROM `information_schema`.innodb_trx;``\n\n```markdown\n+----------------------------+---------------------+------+-----+---------------------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+----------------------------+---------------------+------+-----+---------------------+-------+\n| trx_id | varchar(18) | NO | | | |#事务ID\n| trx_state | varchar(13) | NO | | | |#事务状态：\n| trx_started | datetime | NO | | 0000-00-00 00:00:00 | |#事务开始时间；\n| trx_requested_lock_id | varchar(81) | YES | | NULL | |#innodb_locks.lock_id\n| trx_wait_started | datetime | YES | | NULL | |#事务开始等待的时间\n| trx_weight | bigint(21) unsigned | NO | | 0 | |#\n| trx_mysql_thread_id | bigint(21) unsigned | NO | | 0 | |#事务线程ID\n| trx_query | varchar(1024) | YES | | NULL | |#具体SQL语句\n| trx_operation_state | varchar(64) | YES | | NULL | |#事务当前操作状态\n| trx_tables_in_use | bigint(21) unsigned | NO | | 0 | |#事务中有多少个表被使用\n| trx_tables_locked | bigint(21) unsigned | NO | | 0 | |#事务拥有多少个锁\n| trx_lock_structs | bigint(21) unsigned | NO | | 0 | |#\n| trx_lock_memory_bytes | bigint(21) unsigned | NO | | 0 | |#事务锁住的内存大小（B）\n| trx_rows_locked | bigint(21) unsigned | NO | | 0 | |#事务锁住的行数\n| trx_rows_modified | bigint(21) unsigned | NO | | 0 | |#事务更改的行数\n| trx_concurrency_tickets | bigint(21) unsigned | NO | | 0 | |#事务并发票数\n| trx_isolation_level | varchar(16) | NO | | | |#事务隔离级别\n| trx_unique_checks | int(1) | NO | | 0 | |#是否唯一性检查\n| trx_foreign_key_checks | int(1) | NO | | 0 | |#是否外键检查\n| trx_last_foreign_key_error | varchar(256) | YES | | NULL | |#最后的外键错误\n| trx_adaptive_hash_latched | int(1) | NO | | 0 | |#\n| trx_adaptive_hash_timeout | bigint(21) unsigned | NO | | 0 | |#\n+----------------------------+---------------------+------+-----+---------------------+-------+\n```\n\n* 查询当前锁定事务\n\n``SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;``\n\n这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id\n\n```markdown\n+-------------+---------------------+------+-----+---------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+-------------+---------------------+------+-----+---------+-------+\n| lock_id | varchar(81) | NO | | | |#锁ID\n| lock_trx_id | varchar(18) | NO | | | |#拥有锁的事务ID\n| lock_mode | varchar(32) | NO | | | |#锁模式\n| lock_type | varchar(32) | NO | | | |#锁类型\n| lock_table | varchar(1024) | NO | | | |#被锁的表\n| lock_index | varchar(1024) | YES | | NULL | |#被锁的索引\n| lock_space | bigint(21) unsigned | YES | | NULL | |#被锁的表空间号\n| lock_page | bigint(21) unsigned | YES | | NULL | |#被锁的页号\n| lock_rec | bigint(21) unsigned | YES | | NULL | |#被锁的记录号\n| lock_data | varchar(8192) | YES | | NULL | |#被锁的数据\n+-------------+---------------------+------+-----+---------+-------+\n```\n\n\n* 查询当前等待的事务\n\n``SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;``\n这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id\n```markdown\n+-------------------+-------------+------+-----+---------+-------+\n| Field | Type | Null | Key | Default | Extra |\n+-------------------+-------------+------+-----+---------+-------+\n| requesting_trx_id | varchar(18) | NO | | | |#请求锁的事务ID\n| requested_lock_id | varchar(81) | NO | | | |#请求锁的锁ID\n| blocking_trx_id | varchar(18) | NO | | | |#当前拥有锁的事务ID\n| blocking_lock_id | varchar(81) | NO | | | |#当前拥有锁的锁ID\n+-------------------+-------------+------+-----+---------+-------+\n```\n\n### \"Lock wait timeout exceeded; try restarting transaction\"\n\nselect @@autocommit;\n\n如果为0会导致原来的update语句如果没有commit的话，你再重新执行update语句，就会等待锁定，当等待时间过长的时候，就会报ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction的错误。\n\ncommit刚才执行的update语句，之后 set global autocommit=1;\n\n","slug":"language/mysql查询事务死锁相关命令","published":1,"updated":"2017-06-13T16:08:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrn001e9vvu7vc1kvm8","content":"<ul>\n<li>查询innodb 死锁<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">show engine innodeb status;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>拷贝status里面的内容到文本编辑器，查看LATEST DETECTED DEADLOCK块即为之前死锁的记录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">SEMAPHORES</div><div class=\"line\">主要显示系统的当前的信号等待信息及各种等待信号的统计信息，这部分对调整innodb_thread_concurrency参数有非常大的帮助。当等待信号量非常大的时候，可能就需要禁用并发线程检测设置innodb_thread_concurrency=0;</div><div class=\"line\"></div><div class=\"line\">TRANSACTIONS</div><div class=\"line\">主要展示系统的锁等待信息和当前活动事务信息，通过这部分，可以追踪到死锁的详细信息。</div><div class=\"line\"></div><div class=\"line\">FILE I/O</div><div class=\"line\">文件I/O相关信息，主要是IO等待信息。</div><div class=\"line\"></div><div class=\"line\">INSERTBUFFER AND ADAPTIVE HASH INDEX</div><div class=\"line\">显示插入缓存当前状态信息及自适应hash index的状态</div><div class=\"line\"></div><div class=\"line\">LOG</div><div class=\"line\">Innodb 事务日志相关信息，包括当前的日志序列号（Log sequence number），已经刷新同步到那个序列号，最近的check point到那个序列号了。除此之外，还显示了系统从启动到现在已经做了多少次check point，多少次日志刷新。</div><div class=\"line\"></div><div class=\"line\">BUFFER POOLAND MEMORY</div><div class=\"line\">主要显示innodbbuffer pool相关的各种统计信息，以及其他一些内存使用情况。</div><div class=\"line\"></div><div class=\"line\">ROWOPERATIONS</div><div class=\"line\">主要显示的是与客户端的请求query和query所影响的记录统计信息</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<ul>\n<li><p>查询是否锁表<br><code>show OPEN TABLES where In_use &gt; 0;</code></p>\n</li>\n<li><p>查询当前进程</p>\n</li>\n</ul>\n<p><code>show processlist;</code></p>\n<p><code>select * from `information_schema`.processlist;</code></p>\n<p>有super权限可以看到所有线程，否则只能看到当前用户线程</p>\n<p>select的语句可以方便排序搜索</p>\n<ul>\n<li>kill阻塞进程</li>\n</ul>\n<p>从查询的进程列表中<code>kill id</code>即可</p>\n<ul>\n<li>查询当前事务</li>\n</ul>\n<p><code>SELECT * FROM `information_schema`.innodb_trx;</code></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div><div class=\"line\">| trx_id | varchar(18) | NO | | | |#事务ID</div><div class=\"line\">| trx_state | varchar(13) | NO | | | |#事务状态：</div><div class=\"line\">| trx_started | datetime | NO | | 0000-00-00 00:00:00 | |#事务开始时间；</div><div class=\"line\">| trx<span class=\"emphasis\">_requested_</span>lock<span class=\"emphasis\">_id | varchar(81) | YES | | NULL | |#innodb_</span>locks.lock_id</div><div class=\"line\">| trx<span class=\"emphasis\">_wait_</span>started | datetime | YES | | NULL | |#事务开始等待的时间</div><div class=\"line\">| trx_weight | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_mysql_</span>thread_id | bigint(21) unsigned | NO | | 0 | |#事务线程ID</div><div class=\"line\">| trx_query | varchar(1024) | YES | | NULL | |#具体SQL语句</div><div class=\"line\">| trx<span class=\"emphasis\">_operation_</span>state | varchar(64) | YES | | NULL | |#事务当前操作状态</div><div class=\"line\">| trx<span class=\"emphasis\">_tables_</span>in_use | bigint(21) unsigned | NO | | 0 | |#事务中有多少个表被使用</div><div class=\"line\">| trx<span class=\"emphasis\">_tables_</span>locked | bigint(21) unsigned | NO | | 0 | |#事务拥有多少个锁</div><div class=\"line\">| trx<span class=\"emphasis\">_lock_</span>structs | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_lock_</span>memory_bytes | bigint(21) unsigned | NO | | 0 | |#事务锁住的内存大小（B）</div><div class=\"line\">| trx<span class=\"emphasis\">_rows_</span>locked | bigint(21) unsigned | NO | | 0 | |#事务锁住的行数</div><div class=\"line\">| trx<span class=\"emphasis\">_rows_</span>modified | bigint(21) unsigned | NO | | 0 | |#事务更改的行数</div><div class=\"line\">| trx<span class=\"emphasis\">_concurrency_</span>tickets | bigint(21) unsigned | NO | | 0 | |#事务并发票数</div><div class=\"line\">| trx<span class=\"emphasis\">_isolation_</span>level | varchar(16) | NO | | | |#事务隔离级别</div><div class=\"line\">| trx<span class=\"emphasis\">_unique_</span>checks | int(1) | NO | | 0 | |#是否唯一性检查</div><div class=\"line\">| trx<span class=\"emphasis\">_foreign_</span>key_checks | int(1) | NO | | 0 | |#是否外键检查</div><div class=\"line\">| trx<span class=\"emphasis\">_last_</span>foreign<span class=\"emphasis\">_key_</span>error | varchar(256) | YES | | NULL | |#最后的外键错误</div><div class=\"line\">| trx<span class=\"emphasis\">_adaptive_</span>hash_latched | int(1) | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_adaptive_</span>hash_timeout | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div></pre></td></tr></table></figure>\n<ul>\n<li>查询当前锁定事务</li>\n</ul>\n<p><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;</code></p>\n<p>这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div><div class=\"line\">| lock_id | varchar(81) | NO | | | |#锁ID</div><div class=\"line\">| lock<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#拥有锁的事务ID</div><div class=\"line\">| lock_mode | varchar(32) | NO | | | |#锁模式</div><div class=\"line\">| lock_type | varchar(32) | NO | | | |#锁类型</div><div class=\"line\">| lock_table | varchar(1024) | NO | | | |#被锁的表</div><div class=\"line\">| lock_index | varchar(1024) | YES | | NULL | |#被锁的索引</div><div class=\"line\">| lock_space | bigint(21) unsigned | YES | | NULL | |#被锁的表空间号</div><div class=\"line\">| lock_page | bigint(21) unsigned | YES | | NULL | |#被锁的页号</div><div class=\"line\">| lock_rec | bigint(21) unsigned | YES | | NULL | |#被锁的记录号</div><div class=\"line\">| lock_data | varchar(8192) | YES | | NULL | |#被锁的数据</div><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div></pre></td></tr></table></figure>\n<ul>\n<li>查询当前等待的事务</li>\n</ul>\n<p><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;</code><br>这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div><div class=\"line\">| requesting<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#请求锁的事务ID</div><div class=\"line\">| requested<span class=\"emphasis\">_lock_</span>id | varchar(81) | NO | | | |#请求锁的锁ID</div><div class=\"line\">| blocking<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#当前拥有锁的事务ID</div><div class=\"line\">| blocking<span class=\"emphasis\">_lock_</span>id | varchar(81) | NO | | | |#当前拥有锁的锁ID</div><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div></pre></td></tr></table></figure></p>\n<h3 id=\"“Lock-wait-timeout-exceeded-try-restarting-transaction”\"><a href=\"#“Lock-wait-timeout-exceeded-try-restarting-transaction”\" class=\"headerlink\" title=\"“Lock wait timeout exceeded; try restarting transaction”\"></a>“Lock wait timeout exceeded; try restarting transaction”</h3><p>select @@autocommit;</p>\n<p>如果为0会导致原来的update语句如果没有commit的话，你再重新执行update语句，就会等待锁定，当等待时间过长的时候，就会报ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction的错误。</p>\n<p>commit刚才执行的update语句，之后 set global autocommit=1;</p>\n","site":{"data":{}},"excerpt":"<ul>\n<li>查询innodb 死锁<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">show engine innodeb status;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>拷贝status里面的内容到文本编辑器，查看LATEST DETECTED DEADLOCK块即为之前死锁的记录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">SEMAPHORES</div><div class=\"line\">主要显示系统的当前的信号等待信息及各种等待信号的统计信息，这部分对调整innodb_thread_concurrency参数有非常大的帮助。当等待信号量非常大的时候，可能就需要禁用并发线程检测设置innodb_thread_concurrency=0;</div><div class=\"line\"></div><div class=\"line\">TRANSACTIONS</div><div class=\"line\">主要展示系统的锁等待信息和当前活动事务信息，通过这部分，可以追踪到死锁的详细信息。</div><div class=\"line\"></div><div class=\"line\">FILE I/O</div><div class=\"line\">文件I/O相关信息，主要是IO等待信息。</div><div class=\"line\"></div><div class=\"line\">INSERTBUFFER AND ADAPTIVE HASH INDEX</div><div class=\"line\">显示插入缓存当前状态信息及自适应hash index的状态</div><div class=\"line\"></div><div class=\"line\">LOG</div><div class=\"line\">Innodb 事务日志相关信息，包括当前的日志序列号（Log sequence number），已经刷新同步到那个序列号，最近的check point到那个序列号了。除此之外，还显示了系统从启动到现在已经做了多少次check point，多少次日志刷新。</div><div class=\"line\"></div><div class=\"line\">BUFFER POOLAND MEMORY</div><div class=\"line\">主要显示innodbbuffer pool相关的各种统计信息，以及其他一些内存使用情况。</div><div class=\"line\"></div><div class=\"line\">ROWOPERATIONS</div><div class=\"line\">主要显示的是与客户端的请求query和query所影响的记录统计信息</div></pre></td></tr></table></figure>","more":"<ul>\n<li><p>查询是否锁表<br><code>show OPEN TABLES where In_use &gt; 0;</code></p>\n</li>\n<li><p>查询当前进程</p>\n</li>\n</ul>\n<p><code>show processlist;</code></p>\n<p><code>select * from `information_schema`.processlist;</code></p>\n<p>有super权限可以看到所有线程，否则只能看到当前用户线程</p>\n<p>select的语句可以方便排序搜索</p>\n<ul>\n<li>kill阻塞进程</li>\n</ul>\n<p>从查询的进程列表中<code>kill id</code>即可</p>\n<ul>\n<li>查询当前事务</li>\n</ul>\n<p><code>SELECT * FROM `information_schema`.innodb_trx;</code></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div><div class=\"line\">| trx_id | varchar(18) | NO | | | |#事务ID</div><div class=\"line\">| trx_state | varchar(13) | NO | | | |#事务状态：</div><div class=\"line\">| trx_started | datetime | NO | | 0000-00-00 00:00:00 | |#事务开始时间；</div><div class=\"line\">| trx<span class=\"emphasis\">_requested_</span>lock<span class=\"emphasis\">_id | varchar(81) | YES | | NULL | |#innodb_</span>locks.lock_id</div><div class=\"line\">| trx<span class=\"emphasis\">_wait_</span>started | datetime | YES | | NULL | |#事务开始等待的时间</div><div class=\"line\">| trx_weight | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_mysql_</span>thread_id | bigint(21) unsigned | NO | | 0 | |#事务线程ID</div><div class=\"line\">| trx_query | varchar(1024) | YES | | NULL | |#具体SQL语句</div><div class=\"line\">| trx<span class=\"emphasis\">_operation_</span>state | varchar(64) | YES | | NULL | |#事务当前操作状态</div><div class=\"line\">| trx<span class=\"emphasis\">_tables_</span>in_use | bigint(21) unsigned | NO | | 0 | |#事务中有多少个表被使用</div><div class=\"line\">| trx<span class=\"emphasis\">_tables_</span>locked | bigint(21) unsigned | NO | | 0 | |#事务拥有多少个锁</div><div class=\"line\">| trx<span class=\"emphasis\">_lock_</span>structs | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_lock_</span>memory_bytes | bigint(21) unsigned | NO | | 0 | |#事务锁住的内存大小（B）</div><div class=\"line\">| trx<span class=\"emphasis\">_rows_</span>locked | bigint(21) unsigned | NO | | 0 | |#事务锁住的行数</div><div class=\"line\">| trx<span class=\"emphasis\">_rows_</span>modified | bigint(21) unsigned | NO | | 0 | |#事务更改的行数</div><div class=\"line\">| trx<span class=\"emphasis\">_concurrency_</span>tickets | bigint(21) unsigned | NO | | 0 | |#事务并发票数</div><div class=\"line\">| trx<span class=\"emphasis\">_isolation_</span>level | varchar(16) | NO | | | |#事务隔离级别</div><div class=\"line\">| trx<span class=\"emphasis\">_unique_</span>checks | int(1) | NO | | 0 | |#是否唯一性检查</div><div class=\"line\">| trx<span class=\"emphasis\">_foreign_</span>key_checks | int(1) | NO | | 0 | |#是否外键检查</div><div class=\"line\">| trx<span class=\"emphasis\">_last_</span>foreign<span class=\"emphasis\">_key_</span>error | varchar(256) | YES | | NULL | |#最后的外键错误</div><div class=\"line\">| trx<span class=\"emphasis\">_adaptive_</span>hash_latched | int(1) | NO | | 0 | |#</div><div class=\"line\">| trx<span class=\"emphasis\">_adaptive_</span>hash_timeout | bigint(21) unsigned | NO | | 0 | |#</div><div class=\"line\">+----------------------------+---------------------+------+-----+---------------------+-------+</div></pre></td></tr></table></figure>\n<ul>\n<li>查询当前锁定事务</li>\n</ul>\n<p><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;</code></p>\n<p>这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div><div class=\"line\">| lock_id | varchar(81) | NO | | | |#锁ID</div><div class=\"line\">| lock<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#拥有锁的事务ID</div><div class=\"line\">| lock_mode | varchar(32) | NO | | | |#锁模式</div><div class=\"line\">| lock_type | varchar(32) | NO | | | |#锁类型</div><div class=\"line\">| lock_table | varchar(1024) | NO | | | |#被锁的表</div><div class=\"line\">| lock_index | varchar(1024) | YES | | NULL | |#被锁的索引</div><div class=\"line\">| lock_space | bigint(21) unsigned | YES | | NULL | |#被锁的表空间号</div><div class=\"line\">| lock_page | bigint(21) unsigned | YES | | NULL | |#被锁的页号</div><div class=\"line\">| lock_rec | bigint(21) unsigned | YES | | NULL | |#被锁的记录号</div><div class=\"line\">| lock_data | varchar(8192) | YES | | NULL | |#被锁的数据</div><div class=\"line\">+-------------+---------------------+------+-----+---------+-------+</div></pre></td></tr></table></figure>\n<ul>\n<li>查询当前等待的事务</li>\n</ul>\n<p><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;</code><br>这个表的trx_id即为innodb_trx表的主键,trx_mysql_thread_id即为processlist表的id<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div><div class=\"line\">| Field | Type | Null | Key | Default | Extra |</div><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div><div class=\"line\">| requesting<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#请求锁的事务ID</div><div class=\"line\">| requested<span class=\"emphasis\">_lock_</span>id | varchar(81) | NO | | | |#请求锁的锁ID</div><div class=\"line\">| blocking<span class=\"emphasis\">_trx_</span>id | varchar(18) | NO | | | |#当前拥有锁的事务ID</div><div class=\"line\">| blocking<span class=\"emphasis\">_lock_</span>id | varchar(81) | NO | | | |#当前拥有锁的锁ID</div><div class=\"line\">+-------------------+-------------+------+-----+---------+-------+</div></pre></td></tr></table></figure></p>\n<h3 id=\"“Lock-wait-timeout-exceeded-try-restarting-transaction”\"><a href=\"#“Lock-wait-timeout-exceeded-try-restarting-transaction”\" class=\"headerlink\" title=\"“Lock wait timeout exceeded; try restarting transaction”\"></a>“Lock wait timeout exceeded; try restarting transaction”</h3><p>select @@autocommit;</p>\n<p>如果为0会导致原来的update语句如果没有commit的话，你再重新执行update语句，就会等待锁定，当等待时间过长的时候，就会报ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction的错误。</p>\n<p>commit刚才执行的update语句，之后 set global autocommit=1;</p>"},{"title":"2B和2C站点的区别","date":"2017-05-25T10:40:56.000Z","reward":false,"_content":"\n一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的\n![img](http://static.xcoder.ren/public/images/2B&2C.png)\n数据很有意思","source":"_posts/life/2B和2C站点的区别.md","raw":"---\ntitle: 2B和2C站点的区别\ndate: 2017-05-25 18:40:56\nreward: false\ncategories:\n    - life\ntags:\n    - 2B\n    - 2C\n---\n\n一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的\n![img](http://static.xcoder.ren/public/images/2B&2C.png)\n数据很有意思","slug":"life/2B和2C站点的区别","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegro001i9vvuhj11mms2","content":"<p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n","site":{"data":{}},"excerpt":"","more":"<p>一篇博客的IP访问量和一个B2B站点的IP访问量相当，2B和2C是不一样的<br><img src=\"http://static.xcoder.ren/public/images/2B&amp;2C.png\" alt=\"img\"><br>数据很有意思</p>\n"},{"title":"领域元数据建模","date":"2017-05-19T08:40:56.000Z","reward":true,"_content":"\n## 意义\n元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。\n<!--more-->\n## 举例\n在进行我们的例子之前，我们要进行一些基础数据的准备\n> ### 数据类型定义\n我们会有一个基础数据类型描述的xml\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components>\n  <references/>\n  <component name=\"lang\" moduleName=\"java\" title=\"系统类型组件\" id=\"JAVA-BASE-COMPONENT\">\n    <datatype name=\"Integer\" title=\"整数\" id=\"BS001\"/>\n    <datatype name=\"Byte\" title=\"字节\" id=\"BS002\"/>\n    <datatype name=\"Short\" title=\"短整数\" id=\"BS003\"/>\n    <datatype name=\"Long\" title=\"长整数\" id=\"BS004\"/>\n    <datatype name=\"Decimal\" title=\"十进制数\" id=\"BS005\" />\n    <datatype name=\"Boolean\" title=\"布尔\" id=\"BS011\" />\n    <datatype name=\"Date\" title=\"日期\" id=\"BS012\" />\n    <datatype name=\"DateTime\" title=\"日期时间\" id=\"BS013\" />\n    <datatype name=\"Time\" title=\"时间\" id=\"BS014\" />\n    <datatype name=\"Double\" title=\"浮点\" id=\"BS015\" />\n    <datatype name=\"String\" title=\"字符串\" id=\"BS020\"/>\n    <datatype name=\"Text\" title=\"文本\" id=\"BS021\"/>\n    <datatype name=\"Binary\" title=\"二进制\" id=\"BS022\"/>\n    <!--<datatype name=\"Custom\" title=\"自定义项\" id=\"BS031\"/>\n    <datatype name=\"CustomItem\" title=\"自由项\" id=\"BS032\"/>\n    <datatype name=\"Memo\" title=\"备注\" id=\"BS041\"/>\n    <datatype name=\"I18N\" title=\"多语文本\" id=\"BS042\"/>-->\n    <datatype name=\"T\" title=\"泛型\" id=\"BS101\"/>\n  </component>\n</components>\n```\n\n数据类型的元数据描述为我们描述了系统支持的基础数据结构\n\n **> xml中节点和属性的具体描述我们会在下面各节中体现** \n\n\n> ### 基础数据结构定义\n\n我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components xmlns=\"http://www.metadata.org/meta\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\"/>\n    </references>\n    <component name=\"itf\" moduleName=\"base\" title=\"接口组件\">\n        <interface name=\"IAuditInfo\" title=\"审计信息\">\n            <attributes>\n                <attribute name=\"createTime\" columnName=\"create_time\" title=\"创建时间\" type=\"DateTime\"/>\n                <attribute name=\"modifyTime\" columnName=\"modify_time\" title=\"修改时间\" type=\"DateTime\"/>\n                <attribute name=\"creator\" title=\"创建人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"modifier\" title=\"修改人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n            </attributes>\n        </interface>\n        <interface name=\"IArchive\" title=\"档案相关\">\n            <attributes>\n                <attribute name=\"name\" columnName=\"name\" title=\"档案名称\" type=\"String\" isMultiLang=\"true\" iLength=\"100\"/>\n                <attribute name=\"code\" columnName=\"code\" title=\"档案编码\" type=\"String\" iLength=\"40\"/>\n                <attribute name=\"isAvailable\" columnName=\"is_available\" title=\"是否有效\" type=\"Boolean\" defaultValue=\"true\"/>\n            </attributes>\n        </interface>\n        <interface name=\"ITree\" title=\"树型结构\">\n            <attributes>\n                <attribute name=\"parent\" columnName=\"parent_id\" title=\"上级分类\" type=\"Long\"/>\n                <attribute name=\"level\" columnName=\"level\" title=\"层级\" type=\"Integer\"/>\n                <attribute name=\"path\" columnName=\"path\" title=\"路径\" type=\"String\" iLength=\"255\"/>\n                <attribute name=\"sort\" columnName=\"sort_num\" title=\"排序号\" type=\"Integer\"/>\n                <attribute name=\"lastNode\" columnName=\"last_node\" title=\"是否末级节点\" type=\"Boolean\" defaultValue=\"true\"/>\n            </attributes>\n        </interface>\n        <interface name=\"IDeleted\" title=\"删除标记\">\n            <attributes>\n                <attribute name=\"isDeleted\" columnName=\"is_deleted\" title=\"是否删除\" type=\"Boolean\" defaultValue=\"false\" isRequired=\"true\" />\n            </attributes>\n        </interface>\n        <interface name=\"IAuditFlow\" title=\"审批信息\">\n            <attributes>\n                <attribute name=\"auditor\" title=\"审批人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"auditTime\" columnName=\"audit_time\" title=\"审批时间\" type=\"DateTime\"/>\n                <attribute name=\"status\" title=\"状态\" type=\"AuditStatus\" defaultValue=\"1\" note=\"默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。\"/>\n                <attribute name=\"opinion\" title=\"审核意见\" type=\"String\" iLength=\"255\"/>\n            </attributes>\n        </interface>\n    </component>\n    <component name=\"entity\" moduleName=\"base\" title=\"公用实体组建\">\n        <class name=\"BizModel\" title=\"基类\">\n            <attributes>\n                <attribute name=\"id\" title=\"ID\" type=\"Long\" isKey=\"true\"/>\n                <attribute name=\"pubts\" columnName=\"pubts\" title=\"时间戳\" type=\"DateTime\" isSyncKey=\"true\"/>\n            </attributes>\n        </class>\n        <class name=\"OrgModel\" title=\"组织\">\n            <attributes>\n                <attribute name=\"org\" columnName=\"org_id\" title=\"组织机构\" type=\"credit.org.Org\" isRequired=\"true\" />\n            </attributes>\n        </class>\n        <class name=\"Vouch\" title=\"单据\">\n            <attributes>\n                <attribute name=\"voucherNo\" columnName=\"voucher_no\" title=\"单据编号\" type=\"String\" iLength=\"100\" isRequired=\"true\" />\n                <attribute name=\"voucherDate\" columnName=\"voucher_date\" title=\"单据日期\" type=\"Date\" />\n                <attribute name=\"maker\" title=\"制单人\" type=\"String\" iLength=\"20\" />\n                <attribute name=\"outSysKey\" columnName=\"outsys_key\" title=\"外部系统单据号\" type=\"String\" iLength=\"100\" />\n                <attribute name=\"isVerifyDone\" columnName=\"is_verifydone\" title=\"是否已核销完\" type=\"Boolean\" defaultValue=\"false\" />\n            </attributes>\n        </class>\n        <generalizations>\n            <generalization parent=\"BizModel\" child=\"OrgModel\" />\n            <generalization parent=\"OrgModel\" child=\"Voucher\" />\n        </generalizations>\n    </component>\n</components>\n```\n\n如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。\n定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构\n![包依赖关系](http://static.xcoder.ren/public/images/orderpackage.png \"包依赖关系\")\n例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。\n![类之间关系](http://static.xcoder.ren/public/images/ordermeta.png \"类之间关系\")\n上图中描述的关系，我们通过下面的xml来描述\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components xmlns=\"http://www.metadata.org/meta\"\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\" />\n        <reference file=\"base.xml\" />\n    </references>\n    <component name=\"user\" moduleName=\"aa\" title=\"用户\">\n        <enum name=\"Sex\" title=\"性别\">\n            <item name=\"Male\" title=\"男\" value=\"1\"/>\n            <item name=\"Female\" title=\"女\" value=\"2\"/>\n            <item name=\"Secret\" title=\"保密\" value=\"3\"/>\n        </enum>\n        <class name=\"User\" title=\"用户\" tableName=\"cr_user_User\" note=\"所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0\">\n            <attributes>\n                <attribute name=\"phone\" title=\"手机号\" type=\"String\" iLength=\"11\" validate=\"Phone\" isUnique=\"true\" note=\"登录账号，唯一\"/>\n                <attribute name=\"password\" title=\"密码\" type=\"String\" iLength=\"32\" note=\"32位MD5加密\"/>\n                <attribute name=\"salt\" title=\"盐\" type=\"String\" iLength=\"40\" note=\"每个用户都单独生成自己的盐\" isUnique=\"true\"/>\n                <attribute name=\"isEnabled\" columnName=\"is_enabled\" title=\"是否启用\" type=\"Boolean\" note=\"仅影响是否能登录，1真0假，全系统统一约定\"/>\n                <attribute name=\"nickName\" columnName=\"nick_name\" title=\"昵称\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"sex\" columnName=\"sex\" title=\"性别\" type=\"Sex\"/>\n            </attributes>\n        </class>\n        <realizations>\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"User\"/>\n        </realizations>\n        <generalizations>\n            <generalization parent=\"base.entity.OrgModel\" child=\"User\"/>\n        </generalizations>\n    </component>\n    <component name=\"voucher\" moduleName=\"sa\" title=\"单据\">\n        <enum name=\"VoucherType\" title=\"单据类型\">\n            <item name=\"PreOrder\" title=\"销售预定单\" value=\"1\" />\n            <item name=\"Order\" title=\"销售订单\" value=\"2\" />\n        </enum>\n        <class name=\"Order\" title=\"销售订单\" tableName=\"sa_voucher_order\">\n            <attributes>\n                <attribute name=\"type\" title=\"订单类型\" type=\"VoucherType\" />\n                <attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n                <attribute name=\"totalMoney\" columnName=\"totalmoney\" title=\"订单金额\" type=\"Decimal\" />\n            </attributes>\n        </class>\n        <class name=\"OrderDetail\" title=\"销售订单子表\" tableName=\"sa_voucher_orderdetail\">\n            <attributes>\n                <attribute name=\"order\" columnName=\"order_id\" title=\"所属订单\" type=\"Order\" />\n                <attribute name=\"goods\" columnName=\"goods_id\" title=\"包含商品\" type=\"aa.goods.Goods\" />\n            </attributes>\n        </class>\n        <realizations>\n            <realization supplier=\"base.itf.IAuditFlow\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"OrderDetail\" />\n        </realizations>\n        <generalizations>\n            <generalization parent=\"base.entity.Vouch\" child=\"Order\" />\n            <generalization parent=\"base.entity.BizModel\" child=\"OrderDetail\" />\n        </generalizations>\n        <associations>\n            <association type=\"composition\" roleB=\"order\" typeB=\"Order\" roleA=\"details\" typeA=\"OrderDetail\" roleAMulti=\"1..n\" />\n        </associations>\n    </component>\n</components>\n```\n\n## 领域模型和元数据映射\n\n| UML领域元素        | 元数据元素           | 示例  |\n| ------------- |:-------------:| -----:|\n| 包      | Component | sm.order |\n| 包间依赖      | Component.dependencies      |    |\n| 基础类型 | DataType      |    Integer,DateTime,String |\n| 枚举类型 | Enumeration   |    OrderStatus |\n| 类型    | Entity        |    Order,OrderDetail,User,Vouch |\n| 接口    | Interface     |    IAuditFlow,IAuditInfo,IDeleted,IArchive |\n| 组合关系 | Association  | 组合  |\n| 关联关系 | Association  | 关联  | \n| 继承关系 | Generalization | 继承 |\n| 实现关系 | Realization  | 实现 |\n| 属性 | Property | code,status,order,details |\n| 方法 | Operation | submit,unSubmit |\n| 方法参数 | Parameter |            |\n\n## 元数据结构\n\n![元数据结构](http://static.xcoder.ren/public/images/metastruct.png \"元数据结构\")\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <components xmlns=\"http://www.metadata.org/meta\"\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\" />\n        <reference file=\"base.xml\" />\n    </references>\n    <component></component>\n    ...\n    <component></component>\n  </components>\n```\n\n  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包\n\n## 包\n\n我们把具有同一类特性的类/表放到一起称为一个组件/包。\n\n```\n<component name=\"voucher\" moduleName=\"sa\" title=\"单据\">\n    <enum></enum>\n    <class></class>\n    ...\n    <class></class>\n    ...\n    <realizations>\n        <realization></realization>\n        ...\n        <realization></realization>\n    </realizations>\n    <generalizations>\n        <generalization></generalization>\n        ...\n        <generalization></generalization>\n    </generalizations>\n    <associations>\n        <association></association>\n        ...\n    </associations>\n</component>\n```\n\n一个包定义了\n包名``name``\n模块名``moduleName``\n标题``title``\n包含至少一个类型``<class></class>``\n可能包含一些枚举``<enum/>``\n包含类型实现了哪些接口``<realizations/>``\n类型继承自哪些基类``<generalizations/>``\n类型之间的组合关系``<associations/>``\n\n## 类型\n\n一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据\n\n```\n<class name=\"Order\" title=\"销售订单\" tableName=\"sa_voucher_order\">\n            <attributes>\n                <attribute name=\"status\" title=\"订单状态\" type=\"OrderStatus\" />\n                <attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n                <attribute name=\"totalMoney\" columnName=\"totalmoney\" title=\"订单金额\" type=\"Decimal\" />\n                ...\n                <attribute />\n            </attributes>\n        </class>\n```\n\n一个类型定义了\n类型名``name``\n类型标题``title``\n类型对应的数据表名``tableName``\n\n类型的数据表名``tableName``需要遵循如下规范``moduleName_``+``包名_``+``类型名``\n\n一个类型自己的业务属性（字段）``attribute``\n\n一个属性定义如下结构：\n\n属性名``name``代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构\n\n数据库字段名``columnName``代表数据库的字段名，如果和``name``一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如``user_id``\n\n数据库字段描述信息``title``代表数据库字段的描述信息\n\n字段类型``type``代表字段类型，如为String，则需要指定``iLength``，即指定字段长度，如该字段代表关联表，type为``moduleName``.包名(``component.name``).类型名(``class.name``)（如``aa.user.User``),如在同一个包中可只指定类型名（如``type=\"OrderStatus\"``)\n\n**需要特别注意的是一个类型并不只有``attributes``节点中的``attribute``集合，还会包括包中``<realizations/>``和``<generalizations/>``节点的相应描述**\n\n## 枚举\n\n```\n<enum name=\"VoucherType\" title=\"单据类型\">\n            <item name=\"ApVouch\" title=\"应收单\" value=\"1\" />\n            <item name=\"Receipt\" title=\"收款单\" value=\"2\" />\n        </enum>\n```\n\n枚举包括枚举名称``name``,标题``title``以及枚举项``<item/>``\n\n枚举项包括枚举项名称``name``，描述``title``，枚举值``value``\n\n\n## 组合\n\n![组合关系描述](http://static.xcoder.ren/public/images/association.png \"组合关系描述\")\n如上，订单和订单子表是一对多的关系\n\n```\n<association type=\"composition\" roleB=\"order\" typeB=\"Order\" roleA=\"orderdetails\" typeA=\"OrderDetail\" roleAMulti=\"1..n\" />\n```\n\nroleAMulti=\"0..n\"零对多(子表可空);\nroleAMulti=\"1..n\"一对多;\nroleAMulti=\"1\"一对一\n\n最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。\n\n## 关联\n\n```\n<attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n```\n\nOrder对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在``association``中描述\n\n\n## 接口\n\n```\n<interface name=\"IAuditInfo\" title=\"审计信息\">\n            <attributes>\n                <attribute name=\"createTime\" columnName=\"create_time\" title=\"创建时间\" type=\"DateTime\"/>\n                <attribute name=\"modifyTime\" columnName=\"modify_time\" title=\"修改时间\" type=\"DateTime\"/>\n                <attribute name=\"creator\" title=\"创建人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"modifier\" title=\"修改人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n            </attributes>\n        </interface>\n```\n\n**一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段**\n\n\n## 实现\n\n```\n<realizations>\n            <realization supplier=\"base.itf.IAuditFlow\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"OrderDetail\" />\n        </realizations>\n```\n\n上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段``creatTime``，相应的Order表``sa_voucher_order``会有``create_time``字段\n\n同时Order对象还会具备``IAuditFlow``审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为\n\n\n## 继承\n\n```\n<generalizations>\n            <generalization parent=\"base.entity.Vouch\" child=\"Order\" />\n            <generalization parent=\"base.entity.BizModel\" child=\"OrderDetail\" />\n        </generalizations>\n```\n\n上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到\n\n```\n<generalizations>\n            <generalization parent=\"BizModel\" child=\"OrgModel\" />\n            <generalization parent=\"OrgModel\" child=\"Voucher\" />\n        </generalizations>\n```\nVouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段\n\n## 数据表\n\n按照元数据描述会生成如下的数据表信息\n\n```\nDROP TABLE IF EXISTS `sa_vouch_order`;\n\nCREATE TABLE `sa_vouch_order` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '时间戳',\n  `org_id` bigint(20) NOT NULL COMMENT '公司信息',\n  `create_time` datetime DEFAULT NULL COMMENT '创建时间',\n  `creator` varchar(255) DEFAULT NULL COMMENT '创建人',\n  `user_id` bigint(20) DEFAULT NULL COMMENT '提交人',\n  `modifier` varchar(255) DEFAULT NULL COMMENT '修改人',\n  `modify_time` datetime DEFAULT NULL COMMENT '修改时间',\n  `maker` varchar(40) DEFAULT '' COMMENT '制单人',\n  `outsys_key` varchar(100) DEFAULT '' COMMENT '外部系统编码',\n  `voucher_date` datetime DEFAULT NULL COMMENT '单据日期',\n  `voucher_no` varchar(100) NOT NULL DEFAULT '' COMMENT '单据编号',\n  `audit_time` datetime DEFAULT NULL COMMENT '审批时间',\n  `auditor` varchar(255) DEFAULT NULL COMMENT '审批人',\n  `opinion` varchar(255) DEFAULT NULL COMMENT '审核意见',\n  `status` smallint(6) DEFAULT NULL COMMENT '状态',\n  `type` smallint(6) DEFAULT NULL COMMENT '订单类型',\n  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT '订单金额',\n  PRIMARY KEY (`id`),\n  KEY `org_org_id_index` (`org_id`),\n  KEY `order_user_id_index` (`user_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n```\n\n","source":"_posts/metadata/领域元数据建模.md","raw":"\n---\ntitle: 领域元数据建模\ndate: 2017-05-19 16:40:56\nreward: true\ncategories:\n    - metadata\ntags:\n    - 领域元数据\n    - 建模\n---\n\n## 意义\n元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。\n<!--more-->\n## 举例\n在进行我们的例子之前，我们要进行一些基础数据的准备\n> ### 数据类型定义\n我们会有一个基础数据类型描述的xml\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components>\n  <references/>\n  <component name=\"lang\" moduleName=\"java\" title=\"系统类型组件\" id=\"JAVA-BASE-COMPONENT\">\n    <datatype name=\"Integer\" title=\"整数\" id=\"BS001\"/>\n    <datatype name=\"Byte\" title=\"字节\" id=\"BS002\"/>\n    <datatype name=\"Short\" title=\"短整数\" id=\"BS003\"/>\n    <datatype name=\"Long\" title=\"长整数\" id=\"BS004\"/>\n    <datatype name=\"Decimal\" title=\"十进制数\" id=\"BS005\" />\n    <datatype name=\"Boolean\" title=\"布尔\" id=\"BS011\" />\n    <datatype name=\"Date\" title=\"日期\" id=\"BS012\" />\n    <datatype name=\"DateTime\" title=\"日期时间\" id=\"BS013\" />\n    <datatype name=\"Time\" title=\"时间\" id=\"BS014\" />\n    <datatype name=\"Double\" title=\"浮点\" id=\"BS015\" />\n    <datatype name=\"String\" title=\"字符串\" id=\"BS020\"/>\n    <datatype name=\"Text\" title=\"文本\" id=\"BS021\"/>\n    <datatype name=\"Binary\" title=\"二进制\" id=\"BS022\"/>\n    <!--<datatype name=\"Custom\" title=\"自定义项\" id=\"BS031\"/>\n    <datatype name=\"CustomItem\" title=\"自由项\" id=\"BS032\"/>\n    <datatype name=\"Memo\" title=\"备注\" id=\"BS041\"/>\n    <datatype name=\"I18N\" title=\"多语文本\" id=\"BS042\"/>-->\n    <datatype name=\"T\" title=\"泛型\" id=\"BS101\"/>\n  </component>\n</components>\n```\n\n数据类型的元数据描述为我们描述了系统支持的基础数据结构\n\n **> xml中节点和属性的具体描述我们会在下面各节中体现** \n\n\n> ### 基础数据结构定义\n\n我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components xmlns=\"http://www.metadata.org/meta\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\"/>\n    </references>\n    <component name=\"itf\" moduleName=\"base\" title=\"接口组件\">\n        <interface name=\"IAuditInfo\" title=\"审计信息\">\n            <attributes>\n                <attribute name=\"createTime\" columnName=\"create_time\" title=\"创建时间\" type=\"DateTime\"/>\n                <attribute name=\"modifyTime\" columnName=\"modify_time\" title=\"修改时间\" type=\"DateTime\"/>\n                <attribute name=\"creator\" title=\"创建人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"modifier\" title=\"修改人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n            </attributes>\n        </interface>\n        <interface name=\"IArchive\" title=\"档案相关\">\n            <attributes>\n                <attribute name=\"name\" columnName=\"name\" title=\"档案名称\" type=\"String\" isMultiLang=\"true\" iLength=\"100\"/>\n                <attribute name=\"code\" columnName=\"code\" title=\"档案编码\" type=\"String\" iLength=\"40\"/>\n                <attribute name=\"isAvailable\" columnName=\"is_available\" title=\"是否有效\" type=\"Boolean\" defaultValue=\"true\"/>\n            </attributes>\n        </interface>\n        <interface name=\"ITree\" title=\"树型结构\">\n            <attributes>\n                <attribute name=\"parent\" columnName=\"parent_id\" title=\"上级分类\" type=\"Long\"/>\n                <attribute name=\"level\" columnName=\"level\" title=\"层级\" type=\"Integer\"/>\n                <attribute name=\"path\" columnName=\"path\" title=\"路径\" type=\"String\" iLength=\"255\"/>\n                <attribute name=\"sort\" columnName=\"sort_num\" title=\"排序号\" type=\"Integer\"/>\n                <attribute name=\"lastNode\" columnName=\"last_node\" title=\"是否末级节点\" type=\"Boolean\" defaultValue=\"true\"/>\n            </attributes>\n        </interface>\n        <interface name=\"IDeleted\" title=\"删除标记\">\n            <attributes>\n                <attribute name=\"isDeleted\" columnName=\"is_deleted\" title=\"是否删除\" type=\"Boolean\" defaultValue=\"false\" isRequired=\"true\" />\n            </attributes>\n        </interface>\n        <interface name=\"IAuditFlow\" title=\"审批信息\">\n            <attributes>\n                <attribute name=\"auditor\" title=\"审批人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"auditTime\" columnName=\"audit_time\" title=\"审批时间\" type=\"DateTime\"/>\n                <attribute name=\"status\" title=\"状态\" type=\"AuditStatus\" defaultValue=\"1\" note=\"默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。\"/>\n                <attribute name=\"opinion\" title=\"审核意见\" type=\"String\" iLength=\"255\"/>\n            </attributes>\n        </interface>\n    </component>\n    <component name=\"entity\" moduleName=\"base\" title=\"公用实体组建\">\n        <class name=\"BizModel\" title=\"基类\">\n            <attributes>\n                <attribute name=\"id\" title=\"ID\" type=\"Long\" isKey=\"true\"/>\n                <attribute name=\"pubts\" columnName=\"pubts\" title=\"时间戳\" type=\"DateTime\" isSyncKey=\"true\"/>\n            </attributes>\n        </class>\n        <class name=\"OrgModel\" title=\"组织\">\n            <attributes>\n                <attribute name=\"org\" columnName=\"org_id\" title=\"组织机构\" type=\"credit.org.Org\" isRequired=\"true\" />\n            </attributes>\n        </class>\n        <class name=\"Vouch\" title=\"单据\">\n            <attributes>\n                <attribute name=\"voucherNo\" columnName=\"voucher_no\" title=\"单据编号\" type=\"String\" iLength=\"100\" isRequired=\"true\" />\n                <attribute name=\"voucherDate\" columnName=\"voucher_date\" title=\"单据日期\" type=\"Date\" />\n                <attribute name=\"maker\" title=\"制单人\" type=\"String\" iLength=\"20\" />\n                <attribute name=\"outSysKey\" columnName=\"outsys_key\" title=\"外部系统单据号\" type=\"String\" iLength=\"100\" />\n                <attribute name=\"isVerifyDone\" columnName=\"is_verifydone\" title=\"是否已核销完\" type=\"Boolean\" defaultValue=\"false\" />\n            </attributes>\n        </class>\n        <generalizations>\n            <generalization parent=\"BizModel\" child=\"OrgModel\" />\n            <generalization parent=\"OrgModel\" child=\"Voucher\" />\n        </generalizations>\n    </component>\n</components>\n```\n\n如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。\n定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构\n![包依赖关系](http://static.xcoder.ren/public/images/orderpackage.png \"包依赖关系\")\n例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。\n![类之间关系](http://static.xcoder.ren/public/images/ordermeta.png \"类之间关系\")\n上图中描述的关系，我们通过下面的xml来描述\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<components xmlns=\"http://www.metadata.org/meta\"\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\" />\n        <reference file=\"base.xml\" />\n    </references>\n    <component name=\"user\" moduleName=\"aa\" title=\"用户\">\n        <enum name=\"Sex\" title=\"性别\">\n            <item name=\"Male\" title=\"男\" value=\"1\"/>\n            <item name=\"Female\" title=\"女\" value=\"2\"/>\n            <item name=\"Secret\" title=\"保密\" value=\"3\"/>\n        </enum>\n        <class name=\"User\" title=\"用户\" tableName=\"cr_user_User\" note=\"所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0\">\n            <attributes>\n                <attribute name=\"phone\" title=\"手机号\" type=\"String\" iLength=\"11\" validate=\"Phone\" isUnique=\"true\" note=\"登录账号，唯一\"/>\n                <attribute name=\"password\" title=\"密码\" type=\"String\" iLength=\"32\" note=\"32位MD5加密\"/>\n                <attribute name=\"salt\" title=\"盐\" type=\"String\" iLength=\"40\" note=\"每个用户都单独生成自己的盐\" isUnique=\"true\"/>\n                <attribute name=\"isEnabled\" columnName=\"is_enabled\" title=\"是否启用\" type=\"Boolean\" note=\"仅影响是否能登录，1真0假，全系统统一约定\"/>\n                <attribute name=\"nickName\" columnName=\"nick_name\" title=\"昵称\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"sex\" columnName=\"sex\" title=\"性别\" type=\"Sex\"/>\n            </attributes>\n        </class>\n        <realizations>\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"User\"/>\n        </realizations>\n        <generalizations>\n            <generalization parent=\"base.entity.OrgModel\" child=\"User\"/>\n        </generalizations>\n    </component>\n    <component name=\"voucher\" moduleName=\"sa\" title=\"单据\">\n        <enum name=\"VoucherType\" title=\"单据类型\">\n            <item name=\"PreOrder\" title=\"销售预定单\" value=\"1\" />\n            <item name=\"Order\" title=\"销售订单\" value=\"2\" />\n        </enum>\n        <class name=\"Order\" title=\"销售订单\" tableName=\"sa_voucher_order\">\n            <attributes>\n                <attribute name=\"type\" title=\"订单类型\" type=\"VoucherType\" />\n                <attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n                <attribute name=\"totalMoney\" columnName=\"totalmoney\" title=\"订单金额\" type=\"Decimal\" />\n            </attributes>\n        </class>\n        <class name=\"OrderDetail\" title=\"销售订单子表\" tableName=\"sa_voucher_orderdetail\">\n            <attributes>\n                <attribute name=\"order\" columnName=\"order_id\" title=\"所属订单\" type=\"Order\" />\n                <attribute name=\"goods\" columnName=\"goods_id\" title=\"包含商品\" type=\"aa.goods.Goods\" />\n            </attributes>\n        </class>\n        <realizations>\n            <realization supplier=\"base.itf.IAuditFlow\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"OrderDetail\" />\n        </realizations>\n        <generalizations>\n            <generalization parent=\"base.entity.Vouch\" child=\"Order\" />\n            <generalization parent=\"base.entity.BizModel\" child=\"OrderDetail\" />\n        </generalizations>\n        <associations>\n            <association type=\"composition\" roleB=\"order\" typeB=\"Order\" roleA=\"details\" typeA=\"OrderDetail\" roleAMulti=\"1..n\" />\n        </associations>\n    </component>\n</components>\n```\n\n## 领域模型和元数据映射\n\n| UML领域元素        | 元数据元素           | 示例  |\n| ------------- |:-------------:| -----:|\n| 包      | Component | sm.order |\n| 包间依赖      | Component.dependencies      |    |\n| 基础类型 | DataType      |    Integer,DateTime,String |\n| 枚举类型 | Enumeration   |    OrderStatus |\n| 类型    | Entity        |    Order,OrderDetail,User,Vouch |\n| 接口    | Interface     |    IAuditFlow,IAuditInfo,IDeleted,IArchive |\n| 组合关系 | Association  | 组合  |\n| 关联关系 | Association  | 关联  | \n| 继承关系 | Generalization | 继承 |\n| 实现关系 | Realization  | 实现 |\n| 属性 | Property | code,status,order,details |\n| 方法 | Operation | submit,unSubmit |\n| 方法参数 | Parameter |            |\n\n## 元数据结构\n\n![元数据结构](http://static.xcoder.ren/public/images/metastruct.png \"元数据结构\")\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <components xmlns=\"http://www.metadata.org/meta\"\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n            xsi:schemaLocation=\"http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd\">\n    <references>\n        <reference file=\"java.xml\" />\n        <reference file=\"base.xml\" />\n    </references>\n    <component></component>\n    ...\n    <component></component>\n  </components>\n```\n\n  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包\n\n## 包\n\n我们把具有同一类特性的类/表放到一起称为一个组件/包。\n\n```\n<component name=\"voucher\" moduleName=\"sa\" title=\"单据\">\n    <enum></enum>\n    <class></class>\n    ...\n    <class></class>\n    ...\n    <realizations>\n        <realization></realization>\n        ...\n        <realization></realization>\n    </realizations>\n    <generalizations>\n        <generalization></generalization>\n        ...\n        <generalization></generalization>\n    </generalizations>\n    <associations>\n        <association></association>\n        ...\n    </associations>\n</component>\n```\n\n一个包定义了\n包名``name``\n模块名``moduleName``\n标题``title``\n包含至少一个类型``<class></class>``\n可能包含一些枚举``<enum/>``\n包含类型实现了哪些接口``<realizations/>``\n类型继承自哪些基类``<generalizations/>``\n类型之间的组合关系``<associations/>``\n\n## 类型\n\n一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据\n\n```\n<class name=\"Order\" title=\"销售订单\" tableName=\"sa_voucher_order\">\n            <attributes>\n                <attribute name=\"status\" title=\"订单状态\" type=\"OrderStatus\" />\n                <attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n                <attribute name=\"totalMoney\" columnName=\"totalmoney\" title=\"订单金额\" type=\"Decimal\" />\n                ...\n                <attribute />\n            </attributes>\n        </class>\n```\n\n一个类型定义了\n类型名``name``\n类型标题``title``\n类型对应的数据表名``tableName``\n\n类型的数据表名``tableName``需要遵循如下规范``moduleName_``+``包名_``+``类型名``\n\n一个类型自己的业务属性（字段）``attribute``\n\n一个属性定义如下结构：\n\n属性名``name``代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构\n\n数据库字段名``columnName``代表数据库的字段名，如果和``name``一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如``user_id``\n\n数据库字段描述信息``title``代表数据库字段的描述信息\n\n字段类型``type``代表字段类型，如为String，则需要指定``iLength``，即指定字段长度，如该字段代表关联表，type为``moduleName``.包名(``component.name``).类型名(``class.name``)（如``aa.user.User``),如在同一个包中可只指定类型名（如``type=\"OrderStatus\"``)\n\n**需要特别注意的是一个类型并不只有``attributes``节点中的``attribute``集合，还会包括包中``<realizations/>``和``<generalizations/>``节点的相应描述**\n\n## 枚举\n\n```\n<enum name=\"VoucherType\" title=\"单据类型\">\n            <item name=\"ApVouch\" title=\"应收单\" value=\"1\" />\n            <item name=\"Receipt\" title=\"收款单\" value=\"2\" />\n        </enum>\n```\n\n枚举包括枚举名称``name``,标题``title``以及枚举项``<item/>``\n\n枚举项包括枚举项名称``name``，描述``title``，枚举值``value``\n\n\n## 组合\n\n![组合关系描述](http://static.xcoder.ren/public/images/association.png \"组合关系描述\")\n如上，订单和订单子表是一对多的关系\n\n```\n<association type=\"composition\" roleB=\"order\" typeB=\"Order\" roleA=\"orderdetails\" typeA=\"OrderDetail\" roleAMulti=\"1..n\" />\n```\n\nroleAMulti=\"0..n\"零对多(子表可空);\nroleAMulti=\"1..n\"一对多;\nroleAMulti=\"1\"一对一\n\n最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。\n\n## 关联\n\n```\n<attribute name=\"user\" columnName=\"user_id\" title=\"提交人\" type=\"aa.user.User\" />\n```\n\nOrder对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在``association``中描述\n\n\n## 接口\n\n```\n<interface name=\"IAuditInfo\" title=\"审计信息\">\n            <attributes>\n                <attribute name=\"createTime\" columnName=\"create_time\" title=\"创建时间\" type=\"DateTime\"/>\n                <attribute name=\"modifyTime\" columnName=\"modify_time\" title=\"修改时间\" type=\"DateTime\"/>\n                <attribute name=\"creator\" title=\"创建人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n                <attribute name=\"modifier\" title=\"修改人\" type=\"String\" isMultiLang=\"true\" iLength=\"20\"/>\n            </attributes>\n        </interface>\n```\n\n**一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段**\n\n\n## 实现\n\n```\n<realizations>\n            <realization supplier=\"base.itf.IAuditFlow\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"Order\" />\n            <realization supplier=\"base.itf.IAuditInfo\" client=\"OrderDetail\" />\n        </realizations>\n```\n\n上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段``creatTime``，相应的Order表``sa_voucher_order``会有``create_time``字段\n\n同时Order对象还会具备``IAuditFlow``审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为\n\n\n## 继承\n\n```\n<generalizations>\n            <generalization parent=\"base.entity.Vouch\" child=\"Order\" />\n            <generalization parent=\"base.entity.BizModel\" child=\"OrderDetail\" />\n        </generalizations>\n```\n\n上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到\n\n```\n<generalizations>\n            <generalization parent=\"BizModel\" child=\"OrgModel\" />\n            <generalization parent=\"OrgModel\" child=\"Voucher\" />\n        </generalizations>\n```\nVouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段\n\n## 数据表\n\n按照元数据描述会生成如下的数据表信息\n\n```\nDROP TABLE IF EXISTS `sa_vouch_order`;\n\nCREATE TABLE `sa_vouch_order` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '时间戳',\n  `org_id` bigint(20) NOT NULL COMMENT '公司信息',\n  `create_time` datetime DEFAULT NULL COMMENT '创建时间',\n  `creator` varchar(255) DEFAULT NULL COMMENT '创建人',\n  `user_id` bigint(20) DEFAULT NULL COMMENT '提交人',\n  `modifier` varchar(255) DEFAULT NULL COMMENT '修改人',\n  `modify_time` datetime DEFAULT NULL COMMENT '修改时间',\n  `maker` varchar(40) DEFAULT '' COMMENT '制单人',\n  `outsys_key` varchar(100) DEFAULT '' COMMENT '外部系统编码',\n  `voucher_date` datetime DEFAULT NULL COMMENT '单据日期',\n  `voucher_no` varchar(100) NOT NULL DEFAULT '' COMMENT '单据编号',\n  `audit_time` datetime DEFAULT NULL COMMENT '审批时间',\n  `auditor` varchar(255) DEFAULT NULL COMMENT '审批人',\n  `opinion` varchar(255) DEFAULT NULL COMMENT '审核意见',\n  `status` smallint(6) DEFAULT NULL COMMENT '状态',\n  `type` smallint(6) DEFAULT NULL COMMENT '订单类型',\n  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT '订单金额',\n  PRIMARY KEY (`id`),\n  KEY `org_org_id_index` (`org_id`),\n  KEY `order_user_id_index` (`user_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n```\n\n","slug":"metadata/领域元数据建模","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrq001m9vvuvfr1edau","content":"<h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br><a id=\"more\"></a></p>\n<h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n<blockquote>\n<h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n<p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n<blockquote>\n<h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n<p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n<p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n<thead>\n<tr>\n<th>UML领域元素</th>\n<th style=\"text-align:center\">元数据元素</th>\n<th style=\"text-align:right\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>包</td>\n<td style=\"text-align:center\">Component</td>\n<td style=\"text-align:right\">sm.order</td>\n</tr>\n<tr>\n<td>包间依赖</td>\n<td style=\"text-align:center\">Component.dependencies</td>\n<td style=\"text-align:right\"></td>\n</tr>\n<tr>\n<td>基础类型</td>\n<td style=\"text-align:center\">DataType</td>\n<td style=\"text-align:right\">Integer,DateTime,String</td>\n</tr>\n<tr>\n<td>枚举类型</td>\n<td style=\"text-align:center\">Enumeration</td>\n<td style=\"text-align:right\">OrderStatus</td>\n</tr>\n<tr>\n<td>类型</td>\n<td style=\"text-align:center\">Entity</td>\n<td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n</tr>\n<tr>\n<td>接口</td>\n<td style=\"text-align:center\">Interface</td>\n<td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n</tr>\n<tr>\n<td>组合关系</td>\n<td style=\"text-align:center\">Association</td>\n<td style=\"text-align:right\">组合</td>\n</tr>\n<tr>\n<td>关联关系</td>\n<td style=\"text-align:center\">Association</td>\n<td style=\"text-align:right\">关联</td>\n</tr>\n<tr>\n<td>继承关系</td>\n<td style=\"text-align:center\">Generalization</td>\n<td style=\"text-align:right\">继承</td>\n</tr>\n<tr>\n<td>实现关系</td>\n<td style=\"text-align:center\">Realization</td>\n<td style=\"text-align:right\">实现</td>\n</tr>\n<tr>\n<td>属性</td>\n<td style=\"text-align:center\">Property</td>\n<td style=\"text-align:right\">code,status,order,details</td>\n</tr>\n<tr>\n<td>方法</td>\n<td style=\"text-align:center\">Operation</td>\n<td style=\"text-align:right\">submit,unSubmit</td>\n</tr>\n<tr>\n<td>方法参数</td>\n<td style=\"text-align:center\">Parameter</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n<p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n<h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n<p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n<h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n<p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n<p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n<p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n<p>一个属性定义如下结构：</p>\n<p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n<p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n<p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n<p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n<p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n<h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n<p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n<p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n<h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n<p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n<h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n<h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n<p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n<p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n<p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n<h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n<p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n<p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n<h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h2 id=\"意义\"><a href=\"#意义\" class=\"headerlink\" title=\"意义\"></a>意义</h2><p>元数据是描述业务模型的数据，是对业务代码的抽象。规范的元数据模型对于业务设计,扩展,重构都有指导性意义，能够提高系统的可维护性。<br>","more":"</p>\n<h2 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h2><p>在进行我们的例子之前，我们要进行一些基础数据的准备</p>\n<blockquote>\n<h3 id=\"数据类型定义\"><a href=\"#数据类型定义\" class=\"headerlink\" title=\"数据类型定义\"></a>数据类型定义</h3><p>我们会有一个基础数据类型描述的xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components&gt;</div><div class=\"line\">  &lt;references/&gt;</div><div class=\"line\">  &lt;component name=&quot;lang&quot; moduleName=&quot;java&quot; title=&quot;系统类型组件&quot; id=&quot;JAVA-BASE-COMPONENT&quot;&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Integer&quot; title=&quot;整数&quot; id=&quot;BS001&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Byte&quot; title=&quot;字节&quot; id=&quot;BS002&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Short&quot; title=&quot;短整数&quot; id=&quot;BS003&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Long&quot; title=&quot;长整数&quot; id=&quot;BS004&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Decimal&quot; title=&quot;十进制数&quot; id=&quot;BS005&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Boolean&quot; title=&quot;布尔&quot; id=&quot;BS011&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Date&quot; title=&quot;日期&quot; id=&quot;BS012&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;DateTime&quot; title=&quot;日期时间&quot; id=&quot;BS013&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Time&quot; title=&quot;时间&quot; id=&quot;BS014&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Double&quot; title=&quot;浮点&quot; id=&quot;BS015&quot; /&gt;</div><div class=\"line\">    &lt;datatype name=&quot;String&quot; title=&quot;字符串&quot; id=&quot;BS020&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Text&quot; title=&quot;文本&quot; id=&quot;BS021&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Binary&quot; title=&quot;二进制&quot; id=&quot;BS022&quot;/&gt;</div><div class=\"line\">    &lt;!--&lt;datatype name=&quot;Custom&quot; title=&quot;自定义项&quot; id=&quot;BS031&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;CustomItem&quot; title=&quot;自由项&quot; id=&quot;BS032&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;Memo&quot; title=&quot;备注&quot; id=&quot;BS041&quot;/&gt;</div><div class=\"line\">    &lt;datatype name=&quot;I18N&quot; title=&quot;多语文本&quot; id=&quot;BS042&quot;/&gt;--&gt;</div><div class=\"line\">    &lt;datatype name=&quot;T&quot; title=&quot;泛型&quot; id=&quot;BS101&quot;/&gt;</div><div class=\"line\">  &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>数据类型的元数据描述为我们描述了系统支持的基础数据结构</p>\n<p> <strong>&gt; xml中节点和属性的具体描述我们会在下面各节中体现</strong> </p>\n<blockquote>\n<h3 id=\"基础数据结构定义\"><a href=\"#基础数据结构定义\" class=\"headerlink\" title=\"基础数据结构定义\"></a>基础数据结构定义</h3></blockquote>\n<p>我们还会定义一个公共的包含系统基础数据结构和接口的元数据描述</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">    xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot;/&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;itf&quot; moduleName=&quot;base&quot; title=&quot;接口组件&quot;&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IArchive&quot; title=&quot;档案相关&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;name&quot; columnName=&quot;name&quot; title=&quot;档案名称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;100&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;code&quot; columnName=&quot;code&quot; title=&quot;档案编码&quot; type=&quot;String&quot; iLength=&quot;40&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isAvailable&quot; columnName=&quot;is_available&quot; title=&quot;是否有效&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;ITree&quot; title=&quot;树型结构&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;parent&quot; columnName=&quot;parent_id&quot; title=&quot;上级分类&quot; type=&quot;Long&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;level&quot; columnName=&quot;level&quot; title=&quot;层级&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;path&quot; columnName=&quot;path&quot; title=&quot;路径&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sort&quot; columnName=&quot;sort_num&quot; title=&quot;排序号&quot; type=&quot;Integer&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;lastNode&quot; columnName=&quot;last_node&quot; title=&quot;是否末级节点&quot; type=&quot;Boolean&quot; defaultValue=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IDeleted&quot; title=&quot;删除标记&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isDeleted&quot; columnName=&quot;is_deleted&quot; title=&quot;是否删除&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">        &lt;interface name=&quot;IAuditFlow&quot; title=&quot;审批信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditor&quot; title=&quot;审批人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;auditTime&quot; columnName=&quot;audit_time&quot; title=&quot;审批时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;状态&quot; type=&quot;AuditStatus&quot; defaultValue=&quot;1&quot; note=&quot;默认未审核,审核状态为“审核不通过”时，允许修改该行记录，修改记录后自动将审核状态更新为空值。允许重新进行审核。&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;opinion&quot; title=&quot;审核意见&quot; type=&quot;String&quot; iLength=&quot;255&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;entity&quot; moduleName=&quot;base&quot; title=&quot;公用实体组建&quot;&gt;</div><div class=\"line\">        &lt;class name=&quot;BizModel&quot; title=&quot;基类&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;id&quot; title=&quot;ID&quot; type=&quot;Long&quot; isKey=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;pubts&quot; columnName=&quot;pubts&quot; title=&quot;时间戳&quot; type=&quot;DateTime&quot; isSyncKey=&quot;true&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrgModel&quot; title=&quot;组织&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;org&quot; columnName=&quot;org_id&quot; title=&quot;组织机构&quot; type=&quot;credit.org.Org&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;Vouch&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherNo&quot; columnName=&quot;voucher_no&quot; title=&quot;单据编号&quot; type=&quot;String&quot; iLength=&quot;100&quot; isRequired=&quot;true&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;voucherDate&quot; columnName=&quot;voucher_date&quot; title=&quot;单据日期&quot; type=&quot;Date&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;maker&quot; title=&quot;制单人&quot; type=&quot;String&quot; iLength=&quot;20&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;outSysKey&quot; columnName=&quot;outsys_key&quot; title=&quot;外部系统单据号&quot; type=&quot;String&quot; iLength=&quot;100&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isVerifyDone&quot; columnName=&quot;is_verifydone&quot; title=&quot;是否已核销完&quot; type=&quot;Boolean&quot; defaultValue=&quot;false&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n<p>如上，我们定义了三个基类，BizModel/OrgModel/Vouch,用来描述基础数据类型，定义了一些接口，用来描述数据所表现出来的不同行为。请注意是行为！比如审批行为，比如审计行为，比如可存档行为。<br>定义这些基类和基础行为接口方便我们在具体数据结构中复用并清晰描述数据结构<br><img src=\"http://static.xcoder.ren/public/images/orderpackage.png\" alt=\"包依赖关系\" title=\"包依赖关系\"><br>例如上图销售订单包依赖系统用户包，基础单据包和商品档案包。包的依赖关系在xml中不体现，而是通过更细粒度的类中的关系来体现。<br><img src=\"http://static.xcoder.ren/public/images/ordermeta.png\" alt=\"类之间关系\" title=\"类之间关系\"><br>上图中描述的关系，我们通过下面的xml来描述</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component name=&quot;user&quot; moduleName=&quot;aa&quot; title=&quot;用户&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;Sex&quot; title=&quot;性别&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;Male&quot; title=&quot;男&quot; value=&quot;1&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Female&quot; title=&quot;女&quot; value=&quot;2&quot;/&gt;</div><div class=\"line\">            &lt;item name=&quot;Secret&quot; title=&quot;保密&quot; value=&quot;3&quot;/&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;User&quot; title=&quot;用户&quot; tableName=&quot;cr_user_User&quot; note=&quot;所有用户都放在这一个表，咨询公司的数据存的时候让org_id为0&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;phone&quot; title=&quot;手机号&quot; type=&quot;String&quot; iLength=&quot;11&quot; validate=&quot;Phone&quot; isUnique=&quot;true&quot; note=&quot;登录账号，唯一&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;password&quot; title=&quot;密码&quot; type=&quot;String&quot; iLength=&quot;32&quot; note=&quot;32位MD5加密&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;salt&quot; title=&quot;盐&quot; type=&quot;String&quot; iLength=&quot;40&quot; note=&quot;每个用户都单独生成自己的盐&quot; isUnique=&quot;true&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;isEnabled&quot; columnName=&quot;is_enabled&quot; title=&quot;是否启用&quot; type=&quot;Boolean&quot; note=&quot;仅影响是否能登录，1真0假，全系统统一约定&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;nickName&quot; columnName=&quot;nick_name&quot; title=&quot;昵称&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;sex&quot; columnName=&quot;sex&quot; title=&quot;性别&quot; type=&quot;Sex&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.OrgModel&quot; child=&quot;User&quot;/&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">    &lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">        &lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;PreOrder&quot; title=&quot;销售预定单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Order&quot; title=&quot;销售订单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div><div class=\"line\">        &lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;type&quot; title=&quot;订单类型&quot; type=&quot;VoucherType&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;class name=&quot;OrderDetail&quot; title=&quot;销售订单子表&quot; tableName=&quot;sa_voucher_orderdetail&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;order&quot; columnName=&quot;order_id&quot; title=&quot;所属订单&quot; type=&quot;Order&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;goods&quot; columnName=&quot;goods_id&quot; title=&quot;包含商品&quot; type=&quot;aa.goods.Goods&quot; /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div><div class=\"line\">        &lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div><div class=\"line\">        &lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div><div class=\"line\">        &lt;associations&gt;</div><div class=\"line\">            &lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;details&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div><div class=\"line\">        &lt;/associations&gt;</div><div class=\"line\">    &lt;/component&gt;</div><div class=\"line\">&lt;/components&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"领域模型和元数据映射\"><a href=\"#领域模型和元数据映射\" class=\"headerlink\" title=\"领域模型和元数据映射\"></a>领域模型和元数据映射</h2><table>\n<thead>\n<tr>\n<th>UML领域元素</th>\n<th style=\"text-align:center\">元数据元素</th>\n<th style=\"text-align:right\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>包</td>\n<td style=\"text-align:center\">Component</td>\n<td style=\"text-align:right\">sm.order</td>\n</tr>\n<tr>\n<td>包间依赖</td>\n<td style=\"text-align:center\">Component.dependencies</td>\n<td style=\"text-align:right\"></td>\n</tr>\n<tr>\n<td>基础类型</td>\n<td style=\"text-align:center\">DataType</td>\n<td style=\"text-align:right\">Integer,DateTime,String</td>\n</tr>\n<tr>\n<td>枚举类型</td>\n<td style=\"text-align:center\">Enumeration</td>\n<td style=\"text-align:right\">OrderStatus</td>\n</tr>\n<tr>\n<td>类型</td>\n<td style=\"text-align:center\">Entity</td>\n<td style=\"text-align:right\">Order,OrderDetail,User,Vouch</td>\n</tr>\n<tr>\n<td>接口</td>\n<td style=\"text-align:center\">Interface</td>\n<td style=\"text-align:right\">IAuditFlow,IAuditInfo,IDeleted,IArchive</td>\n</tr>\n<tr>\n<td>组合关系</td>\n<td style=\"text-align:center\">Association</td>\n<td style=\"text-align:right\">组合</td>\n</tr>\n<tr>\n<td>关联关系</td>\n<td style=\"text-align:center\">Association</td>\n<td style=\"text-align:right\">关联</td>\n</tr>\n<tr>\n<td>继承关系</td>\n<td style=\"text-align:center\">Generalization</td>\n<td style=\"text-align:right\">继承</td>\n</tr>\n<tr>\n<td>实现关系</td>\n<td style=\"text-align:center\">Realization</td>\n<td style=\"text-align:right\">实现</td>\n</tr>\n<tr>\n<td>属性</td>\n<td style=\"text-align:center\">Property</td>\n<td style=\"text-align:right\">code,status,order,details</td>\n</tr>\n<tr>\n<td>方法</td>\n<td style=\"text-align:center\">Operation</td>\n<td style=\"text-align:right\">submit,unSubmit</td>\n</tr>\n<tr>\n<td>方法参数</td>\n<td style=\"text-align:center\">Parameter</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"元数据结构\"><a href=\"#元数据结构\" class=\"headerlink\" title=\"元数据结构\"></a>元数据结构</h2><p><img src=\"http://static.xcoder.ren/public/images/metastruct.png\" alt=\"元数据结构\" title=\"元数据结构\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">  &lt;components xmlns=&quot;http://www.metadata.org/meta&quot;</div><div class=\"line\">            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class=\"line\">            xsi:schemaLocation=&quot;http://www.metadata.org/meta https://raw.githubusercontent.com/zhaoyin/MetaData/master/meta.xsd&quot;&gt;</div><div class=\"line\">    &lt;references&gt;</div><div class=\"line\">        &lt;reference file=&quot;java.xml&quot; /&gt;</div><div class=\"line\">        &lt;reference file=&quot;base.xml&quot; /&gt;</div><div class=\"line\">    &lt;/references&gt;</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;component&gt;&lt;/component&gt;</div><div class=\"line\">  &lt;/components&gt;</div></pre></td></tr></table></figure>\n<p>  如上，一个元数据描述xml就是一组包描述的集合,同时还定义了这些包引用的一些其他包</p>\n<h2 id=\"包\"><a href=\"#包\" class=\"headerlink\" title=\"包\"></a>包</h2><p>我们把具有同一类特性的类/表放到一起称为一个组件/包。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;component name=&quot;voucher&quot; moduleName=&quot;sa&quot; title=&quot;单据&quot;&gt;</div><div class=\"line\">    &lt;enum&gt;&lt;/enum&gt;</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;class&gt;&lt;/class&gt;</div><div class=\"line\">    ...</div><div class=\"line\">    &lt;realizations&gt;</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;realization&gt;&lt;/realization&gt;</div><div class=\"line\">    &lt;/realizations&gt;</div><div class=\"line\">    &lt;generalizations&gt;</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">        ...</div><div class=\"line\">        &lt;generalization&gt;&lt;/generalization&gt;</div><div class=\"line\">    &lt;/generalizations&gt;</div><div class=\"line\">    &lt;associations&gt;</div><div class=\"line\">        &lt;association&gt;&lt;/association&gt;</div><div class=\"line\">        ...</div><div class=\"line\">    &lt;/associations&gt;</div><div class=\"line\">&lt;/component&gt;</div></pre></td></tr></table></figure>\n<p>一个包定义了<br>包名<code>name</code><br>模块名<code>moduleName</code><br>标题<code>title</code><br>包含至少一个类型<code>&lt;class&gt;&lt;/class&gt;</code><br>可能包含一些枚举<code>&lt;enum/&gt;</code><br>包含类型实现了哪些接口<code>&lt;realizations/&gt;</code><br>类型继承自哪些基类<code>&lt;generalizations/&gt;</code><br>类型之间的组合关系<code>&lt;associations/&gt;</code></p>\n<h2 id=\"类型\"><a href=\"#类型\" class=\"headerlink\" title=\"类型\"></a>类型</h2><p>一个类型简单理解代表数据库的一个表，即具有原子性的基础数据类型，用来描述业务的原子数据</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;class name=&quot;Order&quot; title=&quot;销售订单&quot; tableName=&quot;sa_voucher_order&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;status&quot; title=&quot;订单状态&quot; type=&quot;OrderStatus&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div><div class=\"line\">                &lt;attribute name=&quot;totalMoney&quot; columnName=&quot;totalmoney&quot; title=&quot;订单金额&quot; type=&quot;Decimal&quot; /&gt;</div><div class=\"line\">                ...</div><div class=\"line\">                &lt;attribute /&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/class&gt;</div></pre></td></tr></table></figure>\n<p>一个类型定义了<br>类型名<code>name</code><br>类型标题<code>title</code><br>类型对应的数据表名<code>tableName</code></p>\n<p>类型的数据表名<code>tableName</code>需要遵循如下规范<code>moduleName_</code>+<code>包名_</code>+<code>类型名</code></p>\n<p>一个类型自己的业务属性（字段）<code>attribute</code></p>\n<p>一个属性定义如下结构：</p>\n<p>属性名<code>name</code>代表UI表现层的名称（如果返回JSON数据，代表JSON数据的名称），name使用驼峰结构</p>\n<p>数据库字段名<code>columnName</code>代表数据库的字段名，如果和<code>name</code>一致则可以不写，如果type定义为其他关联表，则columnName为表名_id，如<code>user_id</code></p>\n<p>数据库字段描述信息<code>title</code>代表数据库字段的描述信息</p>\n<p>字段类型<code>type</code>代表字段类型，如为String，则需要指定<code>iLength</code>，即指定字段长度，如该字段代表关联表，type为<code>moduleName</code>.包名(<code>component.name</code>).类型名(<code>class.name</code>)（如<code>aa.user.User</code>),如在同一个包中可只指定类型名（如<code>type=&quot;OrderStatus&quot;</code>)</p>\n<p><strong>需要特别注意的是一个类型并不只有<code>attributes</code>节点中的<code>attribute</code>集合，还会包括包中<code>&lt;realizations/&gt;</code>和<code>&lt;generalizations/&gt;</code>节点的相应描述</strong></p>\n<h2 id=\"枚举\"><a href=\"#枚举\" class=\"headerlink\" title=\"枚举\"></a>枚举</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;enum name=&quot;VoucherType&quot; title=&quot;单据类型&quot;&gt;</div><div class=\"line\">            &lt;item name=&quot;ApVouch&quot; title=&quot;应收单&quot; value=&quot;1&quot; /&gt;</div><div class=\"line\">            &lt;item name=&quot;Receipt&quot; title=&quot;收款单&quot; value=&quot;2&quot; /&gt;</div><div class=\"line\">        &lt;/enum&gt;</div></pre></td></tr></table></figure>\n<p>枚举包括枚举名称<code>name</code>,标题<code>title</code>以及枚举项<code>&lt;item/&gt;</code></p>\n<p>枚举项包括枚举项名称<code>name</code>，描述<code>title</code>，枚举值<code>value</code></p>\n<h2 id=\"组合\"><a href=\"#组合\" class=\"headerlink\" title=\"组合\"></a>组合</h2><p><img src=\"http://static.xcoder.ren/public/images/association.png\" alt=\"组合关系描述\" title=\"组合关系描述\"><br>如上，订单和订单子表是一对多的关系</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;association type=&quot;composition&quot; roleB=&quot;order&quot; typeB=&quot;Order&quot; roleA=&quot;orderdetails&quot; typeA=&quot;OrderDetail&quot; roleAMulti=&quot;1..n&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>roleAMulti=”0..n”零对多(子表可空);<br>roleAMulti=”1..n”一对多;<br>roleAMulti=”1”一对一</p>\n<p>最直接的区别：组合关系删主表时，子表必然级联删除，由主决定子的生命周期。</p>\n<h2 id=\"关联\"><a href=\"#关联\" class=\"headerlink\" title=\"关联\"></a>关联</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;attribute name=&quot;user&quot; columnName=&quot;user_id&quot; title=&quot;提交人&quot; type=&quot;aa.user.User&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>Order对象需要关联User对象，即订单上有订单提交人字段，用来描述提交人的信息，会关联User表的id，我们可以通过上面的节点来描述这种关系，其实关联关系也是组合关系的一种，只是它是一种一对一的关系，这种关系我们可以不在<code>association</code>中描述</p>\n<h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;interface name=&quot;IAuditInfo&quot; title=&quot;审计信息&quot;&gt;</div><div class=\"line\">            &lt;attributes&gt;</div><div class=\"line\">                &lt;attribute name=&quot;createTime&quot; columnName=&quot;create_time&quot; title=&quot;创建时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifyTime&quot; columnName=&quot;modify_time&quot; title=&quot;修改时间&quot; type=&quot;DateTime&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;creator&quot; title=&quot;创建人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">                &lt;attribute name=&quot;modifier&quot; title=&quot;修改人&quot; type=&quot;String&quot; isMultiLang=&quot;true&quot; iLength=&quot;20&quot;/&gt;</div><div class=\"line\">            &lt;/attributes&gt;</div><div class=\"line\">        &lt;/interface&gt;</div></pre></td></tr></table></figure>\n<p><strong>一个接口定义如上，和类型很类型，它定义了一种行为，如果一个类型实现了这个接口，也即这个类型具有了这种行为，相应的它就具有了这个接口的所有字段</strong></p>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;realizations&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditFlow&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;realization supplier=&quot;base.itf.IAuditInfo&quot; client=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/realizations&gt;</div></pre></td></tr></table></figure>\n<p>上面的例子说明订单对象会实现审计接口和审核接口。意味着Order对象会有审计接口的字段<code>creatTime</code>，相应的Order表<code>sa_voucher_order</code>会有<code>create_time</code>字段</p>\n<p>同时Order对象还会具备<code>IAuditFlow</code>审批流所应具备的submit(),unSubmit(),audit(),unAudit()接口，即具有提交，回退，审批，弃审行为</p>\n<h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.Vouch&quot; child=&quot;Order&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;base.entity.BizModel&quot; child=&quot;OrderDetail&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n<p>上面的例子说明订单对象是来自base包的Vouch对象，从base包中可以看到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;generalizations&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;BizModel&quot; child=&quot;OrgModel&quot; /&gt;</div><div class=\"line\">            &lt;generalization parent=&quot;OrgModel&quot; child=&quot;Voucher&quot; /&gt;</div><div class=\"line\">        &lt;/generalizations&gt;</div></pre></td></tr></table></figure>\n<p>Vouch对象继承自OrgModel对象，OrgModel对象又继承自BizModel对象，则Order类型自然具备BizModel的id字段和pubts字段，同时也具备OrgModel的org字段，还具有Vouch的voucherNo，maker等字段</p>\n<h2 id=\"数据表\"><a href=\"#数据表\" class=\"headerlink\" title=\"数据表\"></a>数据表</h2><p>按照元数据描述会生成如下的数据表信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DROP TABLE IF EXISTS `sa_vouch_order`;</div><div class=\"line\"></div><div class=\"line\">CREATE TABLE `sa_vouch_order` (</div><div class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</div><div class=\"line\">  `pubts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &apos;时间戳&apos;,</div><div class=\"line\">  `org_id` bigint(20) NOT NULL COMMENT &apos;公司信息&apos;,</div><div class=\"line\">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</div><div class=\"line\">  `creator` varchar(255) DEFAULT NULL COMMENT &apos;创建人&apos;,</div><div class=\"line\">  `user_id` bigint(20) DEFAULT NULL COMMENT &apos;提交人&apos;,</div><div class=\"line\">  `modifier` varchar(255) DEFAULT NULL COMMENT &apos;修改人&apos;,</div><div class=\"line\">  `modify_time` datetime DEFAULT NULL COMMENT &apos;修改时间&apos;,</div><div class=\"line\">  `maker` varchar(40) DEFAULT &apos;&apos; COMMENT &apos;制单人&apos;,</div><div class=\"line\">  `outsys_key` varchar(100) DEFAULT &apos;&apos; COMMENT &apos;外部系统编码&apos;,</div><div class=\"line\">  `voucher_date` datetime DEFAULT NULL COMMENT &apos;单据日期&apos;,</div><div class=\"line\">  `voucher_no` varchar(100) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;单据编号&apos;,</div><div class=\"line\">  `audit_time` datetime DEFAULT NULL COMMENT &apos;审批时间&apos;,</div><div class=\"line\">  `auditor` varchar(255) DEFAULT NULL COMMENT &apos;审批人&apos;,</div><div class=\"line\">  `opinion` varchar(255) DEFAULT NULL COMMENT &apos;审核意见&apos;,</div><div class=\"line\">  `status` smallint(6) DEFAULT NULL COMMENT &apos;状态&apos;,</div><div class=\"line\">  `type` smallint(6) DEFAULT NULL COMMENT &apos;订单类型&apos;,</div><div class=\"line\">  `totalmoney` decimal(19,2) DEFAULT NULL COMMENT &apos;订单金额&apos;,</div><div class=\"line\">  PRIMARY KEY (`id`),</div><div class=\"line\">  KEY `org_org_id_index` (`org_id`),</div><div class=\"line\">  KEY `order_user_id_index` (`user_id`)</div><div class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></pre></td></tr></table></figure>"},{"title":"IntelliJ IDEA使用总结","date":"2017-05-26T12:50:56.000Z","reward":true,"_content":"\n今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。\n  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:\n  <!--more-->\n  ![stackoverflow-eclipse-4.7-M7](http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png)\n\n```\nEclipse Oxygen is still under development and won't be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release. \n```\n我原来安装的版本就是最新的。\n\n索性就不用了，直接换最近很火的JetBrains那货的IDE吧。\n\n说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。\n\n装上之后我就激动了，谁用谁知道。\n\nEclipse有的咱就不说了，说点实用的\n\n## 查找\n* Alt+F12打开终端（不用切换窗口谁用谁知道）\n* 双击shift \n    在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来\n* command+f \n    当前文件查找特定内容\n* command+shift+f\n    当前项目查找包含特定内容的文件\n* command+n \n    java类上是查找，其他文件或者包上是新建菜单\n* command+shift+n\n    查找文件\n* command+e \n    最近的文件\n* alt+F7\n    非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方\n## 显示\n* command+M\n    最小化\n\n## 编辑\n* shift+enter\n    另起一行\n* command+r\n    当前文件替换特定内容\n* command+shift+r\n    当前项目替换特定内容\n* shift+F6\n    非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容，当然也可以重命名文件\n* command+d\n    复制当前行到下一行\n* command+x\n    剪切当前行\n* command+c \\ command+v \n    不讲都知道\n* command+z\n    撤销\n* command+shift+z\n    取消撤销\n* alt+enter\n    等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果\n    如果有引用的类没导入也使用此快捷键\n    各种checkstyle\n* command+alt+L\n    自动格式化代码\n* ctr+shift+U\n  大小写转化--命令static常量很有用 \n* ctrl+alt+O\n    去除没有用到的import\n* command+F1\n    各种建议\n    ![优化建议](http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png)\n\n参考了这位小哥[码农往事](http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html)的文章，在此谢过！\n\n","source":"_posts/tools/IntelliJ IDEA使用总结.md","raw":"\n---\ntitle: IntelliJ IDEA使用总结\ndate: 2017-05-26 20:50:56\nreward: true\ncategories:\n    - tools\ntags:\n    - JetBrains\n    - IntelliJ Idea\n    - IDE\n---\n\n今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。\n  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:\n  <!--more-->\n  ![stackoverflow-eclipse-4.7-M7](http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png)\n\n```\nEclipse Oxygen is still under development and won't be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release. \n```\n我原来安装的版本就是最新的。\n\n索性就不用了，直接换最近很火的JetBrains那货的IDE吧。\n\n说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。\n\n装上之后我就激动了，谁用谁知道。\n\nEclipse有的咱就不说了，说点实用的\n\n## 查找\n* Alt+F12打开终端（不用切换窗口谁用谁知道）\n* 双击shift \n    在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来\n* command+f \n    当前文件查找特定内容\n* command+shift+f\n    当前项目查找包含特定内容的文件\n* command+n \n    java类上是查找，其他文件或者包上是新建菜单\n* command+shift+n\n    查找文件\n* command+e \n    最近的文件\n* alt+F7\n    非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方\n## 显示\n* command+M\n    最小化\n\n## 编辑\n* shift+enter\n    另起一行\n* command+r\n    当前文件替换特定内容\n* command+shift+r\n    当前项目替换特定内容\n* shift+F6\n    非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容，当然也可以重命名文件\n* command+d\n    复制当前行到下一行\n* command+x\n    剪切当前行\n* command+c \\ command+v \n    不讲都知道\n* command+z\n    撤销\n* command+shift+z\n    取消撤销\n* alt+enter\n    等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果\n    如果有引用的类没导入也使用此快捷键\n    各种checkstyle\n* command+alt+L\n    自动格式化代码\n* ctr+shift+U\n  大小写转化--命令static常量很有用 \n* ctrl+alt+O\n    去除没有用到的import\n* command+F1\n    各种建议\n    ![优化建议](http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png)\n\n参考了这位小哥[码农往事](http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html)的文章，在此谢过！\n\n","slug":"tools/IntelliJ IDEA使用总结","published":1,"updated":"2017-06-15T18:12:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrs001p9vvutgt5w1ex","content":"<p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>  <a id=\"more\"></a><br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n<p>我原来安装的版本就是最新的。</p>\n<p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n<p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n<p>装上之后我就激动了，谁用谁知道。</p>\n<p>Eclipse有的咱就不说了，说点实用的</p>\n<h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n<li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n<li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n<li>command+f<br>  当前文件查找特定内容</li>\n<li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n<li>command+n<br>  java类上是查找，其他文件或者包上是新建菜单</li>\n<li>command+shift+n<br>  查找文件</li>\n<li>command+e<br>  最近的文件</li>\n<li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方<h2 id=\"显示\"><a href=\"#显示\" class=\"headerlink\" title=\"显示\"></a>显示</h2></li>\n<li>command+M<br>  最小化</li>\n</ul>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n<li>shift+enter<br>  另起一行</li>\n<li>command+r<br>  当前文件替换特定内容</li>\n<li>command+shift+r<br>  当前项目替换特定内容</li>\n<li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容，当然也可以重命名文件</li>\n<li>command+d<br>  复制当前行到下一行</li>\n<li>command+x<br>  剪切当前行</li>\n<li>command+c \\ command+v<br>  不讲都知道</li>\n<li>command+z<br>  撤销</li>\n<li>command+shift+z<br>  取消撤销</li>\n<li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n<li>command+alt+L<br>  自动格式化代码</li>\n<li>ctr+shift+U<br>大小写转化–命令static常量很有用 </li>\n<li>ctrl+alt+O<br>  去除没有用到的import</li>\n<li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n</ul>\n<p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>\n","site":{"data":{}},"excerpt":"<p>今天中午收到一公众号推送说Eclipse 4.7 M7里程碑版发布,Oxygen，氧气啊，作为一个遇到新版本就闲的蛋疼的二逼程序员，我果断下载安装并替换了本机的Eclipse Mars，很快下载完后安装升级原有设置，导入项目。好了，撸起袖子开始干活，哪不对啊？右键怎么没有maven菜单了？项目启动的Jetty设置呢？我要启动项目啊。也许是升级了版本，这些东西都需要重新适配吧，没事，谁让咱二逼呢，咱再来一遍就是了，嗯，咱打开熟悉的Eclipse MarkerPlace去搜索一下这两个玩意弄上不就完了。<br>  然后，没有然后了，一个小时过去了我依然没有找到应用市场，终于我在熟悉的stackoverflow上找到了这货:<br>","more":"<br>  <img src=\"http://static.xcoder.ren/public/images/eclipse-Oxygen-m7.png\" alt=\"stackoverflow-eclipse-4.7-M7\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Eclipse Oxygen is still under development and won&apos;t be finally released until June 2017. Many additions may not have been tested with Oxygen at this point. Eclipse Neon.3 is the current stable release.</div></pre></td></tr></table></figure>\n<p>我原来安装的版本就是最新的。</p>\n<p>索性就不用了，直接换最近很火的JetBrains那货的IDE吧。</p>\n<p>说多了都是泪，言归正传，学习一下IntelliJ IDEA的使用。</p>\n<p>装上之后我就激动了，谁用谁知道。</p>\n<p>Eclipse有的咱就不说了，说点实用的</p>\n<h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n<li>Alt+F12打开终端（不用切换窗口谁用谁知道）</li>\n<li>双击shift<br>  在项目的所有目录查找，就是你想看到你不想看到的和你没想过你能看到的都给你找出来</li>\n<li>command+f<br>  当前文件查找特定内容</li>\n<li>command+shift+f<br>  当前项目查找包含特定内容的文件</li>\n<li>command+n<br>  java类上是查找，其他文件或者包上是新建菜单</li>\n<li>command+shift+n<br>  查找文件</li>\n<li>command+e<br>  最近的文件</li>\n<li>alt+F7<br>  非常非常频繁使用的一个快捷键，可以帮你找到你的函数或者变量或者类的所有引用到的地方<h2 id=\"显示\"><a href=\"#显示\" class=\"headerlink\" title=\"显示\"></a>显示</h2></li>\n<li>command+M<br>  最小化</li>\n</ul>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n<li>shift+enter<br>  另起一行</li>\n<li>command+r<br>  当前文件替换特定内容</li>\n<li>command+shift+r<br>  当前项目替换特定内容</li>\n<li>shift+F6<br>  非常非常省心省力的一个快捷键，可以重命名你的类、方法、变量等等，而且这个重命名甚至可以选择替换掉注释中的内容，当然也可以重命名文件</li>\n<li>command+d<br>  复制当前行到下一行</li>\n<li>command+x<br>  剪切当前行</li>\n<li>command+c \\ command+v<br>  不讲都知道</li>\n<li>command+z<br>  撤销</li>\n<li>command+shift+z<br>  取消撤销</li>\n<li>alt+enter<br>  等同于Eclipse中用鼠标点到红色波浪线上出现的浮窗效果<br>  如果有引用的类没导入也使用此快捷键<br>  各种checkstyle</li>\n<li>command+alt+L<br>  自动格式化代码</li>\n<li>ctr+shift+U<br>大小写转化–命令static常量很有用 </li>\n<li>ctrl+alt+O<br>  去除没有用到的import</li>\n<li>command+F1<br>  各种建议<br>  <img src=\"http://static.xcoder.ren/public/images/%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE.png\" alt=\"优化建议\"></li>\n</ul>\n<p>参考了这位小哥<a href=\"http://www.blogjava.net/rockblue1988/archive/2014/10/24/418994.html\" target=\"_blank\" rel=\"external\">码农往事</a>的文章，在此谢过！</p>"},{"title":"IntelliJ IDEA 配置 PlayFramework(play1)","date":"2017-06-03T16:00:00.000Z","reward":true,"_content":"\n## 生成ipr工程文件\n\n ** IntelliJ IDEA官方说play framework 1.x只被IntelliJ IDEA11及以下版本支持，新版本的IntelliJ IDEA现在只支持最新的Play Framework 2.x。**\n通过配置发现高版本是可以支持play1的。\n\n配置好play1的具体应用后，在应用目录可以通过执行``play idea``可以为该play应用生成Intellij IDEA需要的ipr文件和iml文件\n\n```\n~        _            _ \n~  _ __ | | __ _ _  _| |\n~ | '_ \\| |/ _' | || |_|\n~ |  __/|_|\\____|\\__ (_)\n~ |_|            |__/   \n~\n~ play! 1.4.4, https://www.playframework.com\n~\n~ OK, the application is ready for Intellij Idea\n~ Use File, Open Project... to open \"playdemo.ipr\"\n~\n\n```\n\n之后在Intellij IDEA中通过菜单栏--文件>>打开>>找到之前的ipr文件打开应用\n\n如果当前应用有play modules，可以打开iml文件，看对应的module路径是否配置正确，如果配置不正确，play应用启动的时候会因为找不到相应的引用类而报错\n\n```\n<content url=\"file://$MODULE_DIR$/mymodules/module1\">\n      <sourceFolder url=\"file://$MODULE_DIR$/mymodules/module1/app\" isTestSource=\"false\" />\n    </content>\n```\n比如上面的配置就是修改后的，play idea生成的iml文件默认缺少``$MODULE_DIR$/``这一级，会导致引用的模块无法找到的错误。\n\n<!--more-->\n\n## 配置playframework框架信息\n\n* 菜单栏点设置（Settings)按钮(即macOS 产品的Preferencs，按快捷键command+,)\n* 在弹出窗口左侧搜索play configuration,会发现Play Configuration 在 Language & Frameworks菜单里面。\n* 在右侧窗口设置playframework的Home（playframework本身目录，即play命令所在的目录），项目目录（working directory），当前项目的目录\n\n## 配置项目依赖的play库文件\n\n* 在项目中通过``文件(File)``打开``Project Structure``也可以通过快捷键command+;打开\n\n* 在Modules找到项目，在右侧找到最后一个选项卡Dependencies（依赖）看是否加入了play框架对应的jar\n\n* 如果没有在左下方点+号``Jars or directories.``\n\n* 在弹出的文件选择框中选择play应用目录``framework\\lib``和play的jar``framework\\play-<version>.jar``\n\n## 运行一个play项目\n\n* 打开Intellij IDEA的Run菜单，找到Edit Configurations。``Run | Edit Configurations``\n\n* 点击+号并选择Application\n\n* 做以下配置\n```\n  Main class:play.server.Server\n  VM options:-Dapplication.path=\".\"\n  Working directory:play应用所在的目录\n```\n\n以上的配置相当于命令行执行play run或者play start\n\n## 运行项目单元测试\n\n* 在上面的``配置项目依赖的play库文件``最后一步，即设置项目的依赖项的地方增加测试的依赖jar.将``<play_dir>\\modules\\testrunner\\lib\\play-testrunner.jar``加入依赖项\n\n* ``Edit Configurations``时做如下配置\n    ```\n      Main class:play.server.Server\n      VM options:-Dapplication.path=\".\" -Dplay.id=test\n      Working directory:play应用所在的目录\n    ```\n\n以上的配置相当于执行命令play test\n\n## 调试项目\n\n和运行play项目的配置相似，只是VM options设置如下：\n```\n-Dapplication.path=\".\" -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000\n```\n","source":"_posts/tools/IntelliJ IDEA配置play1.md","raw":"\n---\ntitle: IntelliJ IDEA 配置 PlayFramework(play1)\ndate: 2017-06-04 00:00:00\nreward: true\ncategories:\n    - tools\ntags:\n    - IntelliJ Idea\n    - play1\n    - playframework\n---\n\n## 生成ipr工程文件\n\n ** IntelliJ IDEA官方说play framework 1.x只被IntelliJ IDEA11及以下版本支持，新版本的IntelliJ IDEA现在只支持最新的Play Framework 2.x。**\n通过配置发现高版本是可以支持play1的。\n\n配置好play1的具体应用后，在应用目录可以通过执行``play idea``可以为该play应用生成Intellij IDEA需要的ipr文件和iml文件\n\n```\n~        _            _ \n~  _ __ | | __ _ _  _| |\n~ | '_ \\| |/ _' | || |_|\n~ |  __/|_|\\____|\\__ (_)\n~ |_|            |__/   \n~\n~ play! 1.4.4, https://www.playframework.com\n~\n~ OK, the application is ready for Intellij Idea\n~ Use File, Open Project... to open \"playdemo.ipr\"\n~\n\n```\n\n之后在Intellij IDEA中通过菜单栏--文件>>打开>>找到之前的ipr文件打开应用\n\n如果当前应用有play modules，可以打开iml文件，看对应的module路径是否配置正确，如果配置不正确，play应用启动的时候会因为找不到相应的引用类而报错\n\n```\n<content url=\"file://$MODULE_DIR$/mymodules/module1\">\n      <sourceFolder url=\"file://$MODULE_DIR$/mymodules/module1/app\" isTestSource=\"false\" />\n    </content>\n```\n比如上面的配置就是修改后的，play idea生成的iml文件默认缺少``$MODULE_DIR$/``这一级，会导致引用的模块无法找到的错误。\n\n<!--more-->\n\n## 配置playframework框架信息\n\n* 菜单栏点设置（Settings)按钮(即macOS 产品的Preferencs，按快捷键command+,)\n* 在弹出窗口左侧搜索play configuration,会发现Play Configuration 在 Language & Frameworks菜单里面。\n* 在右侧窗口设置playframework的Home（playframework本身目录，即play命令所在的目录），项目目录（working directory），当前项目的目录\n\n## 配置项目依赖的play库文件\n\n* 在项目中通过``文件(File)``打开``Project Structure``也可以通过快捷键command+;打开\n\n* 在Modules找到项目，在右侧找到最后一个选项卡Dependencies（依赖）看是否加入了play框架对应的jar\n\n* 如果没有在左下方点+号``Jars or directories.``\n\n* 在弹出的文件选择框中选择play应用目录``framework\\lib``和play的jar``framework\\play-<version>.jar``\n\n## 运行一个play项目\n\n* 打开Intellij IDEA的Run菜单，找到Edit Configurations。``Run | Edit Configurations``\n\n* 点击+号并选择Application\n\n* 做以下配置\n```\n  Main class:play.server.Server\n  VM options:-Dapplication.path=\".\"\n  Working directory:play应用所在的目录\n```\n\n以上的配置相当于命令行执行play run或者play start\n\n## 运行项目单元测试\n\n* 在上面的``配置项目依赖的play库文件``最后一步，即设置项目的依赖项的地方增加测试的依赖jar.将``<play_dir>\\modules\\testrunner\\lib\\play-testrunner.jar``加入依赖项\n\n* ``Edit Configurations``时做如下配置\n    ```\n      Main class:play.server.Server\n      VM options:-Dapplication.path=\".\" -Dplay.id=test\n      Working directory:play应用所在的目录\n    ```\n\n以上的配置相当于执行命令play test\n\n## 调试项目\n\n和运行play项目的配置相似，只是VM options设置如下：\n```\n-Dapplication.path=\".\" -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000\n```\n","slug":"tools/IntelliJ IDEA配置play1","published":1,"updated":"2017-06-04T01:53:28.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrs001s9vvuep7g8dov","content":"<h2 id=\"生成ipr工程文件\"><a href=\"#生成ipr工程文件\" class=\"headerlink\" title=\"生成ipr工程文件\"></a>生成ipr工程文件</h2><p> <strong> IntelliJ IDEA官方说play framework 1.x只被IntelliJ IDEA11及以下版本支持，新版本的IntelliJ IDEA现在只支持最新的Play Framework 2.x。</strong><br>通过配置发现高版本是可以支持play1的。</p>\n<p>配置好play1的具体应用后，在应用目录可以通过执行<code>play idea</code>可以为该play应用生成Intellij IDEA需要的ipr文件和iml文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">~        _            _ </div><div class=\"line\">~  _ __ | | __ _ _  _| |</div><div class=\"line\">~ | &apos;_ \\| |/ _&apos; | || |_|</div><div class=\"line\">~ |  __/|_|\\____|\\__ (_)</div><div class=\"line\">~ |_|            |__/   </div><div class=\"line\">~</div><div class=\"line\">~ play! 1.4.4, https://www.playframework.com</div><div class=\"line\">~</div><div class=\"line\">~ OK, the application is ready for Intellij Idea</div><div class=\"line\">~ Use File, Open Project... to open &quot;playdemo.ipr&quot;</div><div class=\"line\">~</div></pre></td></tr></table></figure>\n<p>之后在Intellij IDEA中通过菜单栏–文件&gt;&gt;打开&gt;&gt;找到之前的ipr文件打开应用</p>\n<p>如果当前应用有play modules，可以打开iml文件，看对应的module路径是否配置正确，如果配置不正确，play应用启动的时候会因为找不到相应的引用类而报错</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;content url=&quot;file://$MODULE_DIR$/mymodules/module1&quot;&gt;</div><div class=\"line\">      &lt;sourceFolder url=&quot;file://$MODULE_DIR$/mymodules/module1/app&quot; isTestSource=&quot;false&quot; /&gt;</div><div class=\"line\">    &lt;/content&gt;</div></pre></td></tr></table></figure>\n<p>比如上面的配置就是修改后的，play idea生成的iml文件默认缺少<code>$MODULE_DIR$/</code>这一级，会导致引用的模块无法找到的错误。</p>\n<a id=\"more\"></a>\n<h2 id=\"配置playframework框架信息\"><a href=\"#配置playframework框架信息\" class=\"headerlink\" title=\"配置playframework框架信息\"></a>配置playframework框架信息</h2><ul>\n<li>菜单栏点设置（Settings)按钮(即macOS 产品的Preferencs，按快捷键command+,)</li>\n<li>在弹出窗口左侧搜索play configuration,会发现Play Configuration 在 Language &amp; Frameworks菜单里面。</li>\n<li>在右侧窗口设置playframework的Home（playframework本身目录，即play命令所在的目录），项目目录（working directory），当前项目的目录</li>\n</ul>\n<h2 id=\"配置项目依赖的play库文件\"><a href=\"#配置项目依赖的play库文件\" class=\"headerlink\" title=\"配置项目依赖的play库文件\"></a>配置项目依赖的play库文件</h2><ul>\n<li><p>在项目中通过<code>文件(File)</code>打开<code>Project Structure</code>也可以通过快捷键command+;打开</p>\n</li>\n<li><p>在Modules找到项目，在右侧找到最后一个选项卡Dependencies（依赖）看是否加入了play框架对应的jar</p>\n</li>\n<li><p>如果没有在左下方点+号<code>Jars or directories.</code></p>\n</li>\n<li><p>在弹出的文件选择框中选择play应用目录<code>framework\\lib</code>和play的jar<code>framework\\play-&lt;version&gt;.jar</code></p>\n</li>\n</ul>\n<h2 id=\"运行一个play项目\"><a href=\"#运行一个play项目\" class=\"headerlink\" title=\"运行一个play项目\"></a>运行一个play项目</h2><ul>\n<li><p>打开Intellij IDEA的Run菜单，找到Edit Configurations。<code>Run | Edit Configurations</code></p>\n</li>\n<li><p>点击+号并选择Application</p>\n</li>\n<li><p>做以下配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Main class:play.server.Server</div><div class=\"line\">VM options:-Dapplication.path=&quot;.&quot;</div><div class=\"line\">Working directory:play应用所在的目录</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>以上的配置相当于命令行执行play run或者play start</p>\n<h2 id=\"运行项目单元测试\"><a href=\"#运行项目单元测试\" class=\"headerlink\" title=\"运行项目单元测试\"></a>运行项目单元测试</h2><ul>\n<li><p>在上面的<code>配置项目依赖的play库文件</code>最后一步，即设置项目的依赖项的地方增加测试的依赖jar.将<code>&lt;play_dir&gt;\\modules\\testrunner\\lib\\play-testrunner.jar</code>加入依赖项</p>\n</li>\n<li><p><code>Edit Configurations</code>时做如下配置</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Main class:play.server.Server</div><div class=\"line\">VM options:-Dapplication.path=&quot;.&quot; -Dplay.id=test</div><div class=\"line\">Working directory:play应用所在的目录</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>以上的配置相当于执行命令play test</p>\n<h2 id=\"调试项目\"><a href=\"#调试项目\" class=\"headerlink\" title=\"调试项目\"></a>调试项目</h2><p>和运行play项目的配置相似，只是VM options设置如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Dapplication.path=&quot;.&quot; -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"生成ipr工程文件\"><a href=\"#生成ipr工程文件\" class=\"headerlink\" title=\"生成ipr工程文件\"></a>生成ipr工程文件</h2><p> <strong> IntelliJ IDEA官方说play framework 1.x只被IntelliJ IDEA11及以下版本支持，新版本的IntelliJ IDEA现在只支持最新的Play Framework 2.x。</strong><br>通过配置发现高版本是可以支持play1的。</p>\n<p>配置好play1的具体应用后，在应用目录可以通过执行<code>play idea</code>可以为该play应用生成Intellij IDEA需要的ipr文件和iml文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">~        _            _ </div><div class=\"line\">~  _ __ | | __ _ _  _| |</div><div class=\"line\">~ | &apos;_ \\| |/ _&apos; | || |_|</div><div class=\"line\">~ |  __/|_|\\____|\\__ (_)</div><div class=\"line\">~ |_|            |__/   </div><div class=\"line\">~</div><div class=\"line\">~ play! 1.4.4, https://www.playframework.com</div><div class=\"line\">~</div><div class=\"line\">~ OK, the application is ready for Intellij Idea</div><div class=\"line\">~ Use File, Open Project... to open &quot;playdemo.ipr&quot;</div><div class=\"line\">~</div></pre></td></tr></table></figure>\n<p>之后在Intellij IDEA中通过菜单栏–文件&gt;&gt;打开&gt;&gt;找到之前的ipr文件打开应用</p>\n<p>如果当前应用有play modules，可以打开iml文件，看对应的module路径是否配置正确，如果配置不正确，play应用启动的时候会因为找不到相应的引用类而报错</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;content url=&quot;file://$MODULE_DIR$/mymodules/module1&quot;&gt;</div><div class=\"line\">      &lt;sourceFolder url=&quot;file://$MODULE_DIR$/mymodules/module1/app&quot; isTestSource=&quot;false&quot; /&gt;</div><div class=\"line\">    &lt;/content&gt;</div></pre></td></tr></table></figure>\n<p>比如上面的配置就是修改后的，play idea生成的iml文件默认缺少<code>$MODULE_DIR$/</code>这一级，会导致引用的模块无法找到的错误。</p>","more":"<h2 id=\"配置playframework框架信息\"><a href=\"#配置playframework框架信息\" class=\"headerlink\" title=\"配置playframework框架信息\"></a>配置playframework框架信息</h2><ul>\n<li>菜单栏点设置（Settings)按钮(即macOS 产品的Preferencs，按快捷键command+,)</li>\n<li>在弹出窗口左侧搜索play configuration,会发现Play Configuration 在 Language &amp; Frameworks菜单里面。</li>\n<li>在右侧窗口设置playframework的Home（playframework本身目录，即play命令所在的目录），项目目录（working directory），当前项目的目录</li>\n</ul>\n<h2 id=\"配置项目依赖的play库文件\"><a href=\"#配置项目依赖的play库文件\" class=\"headerlink\" title=\"配置项目依赖的play库文件\"></a>配置项目依赖的play库文件</h2><ul>\n<li><p>在项目中通过<code>文件(File)</code>打开<code>Project Structure</code>也可以通过快捷键command+;打开</p>\n</li>\n<li><p>在Modules找到项目，在右侧找到最后一个选项卡Dependencies（依赖）看是否加入了play框架对应的jar</p>\n</li>\n<li><p>如果没有在左下方点+号<code>Jars or directories.</code></p>\n</li>\n<li><p>在弹出的文件选择框中选择play应用目录<code>framework\\lib</code>和play的jar<code>framework\\play-&lt;version&gt;.jar</code></p>\n</li>\n</ul>\n<h2 id=\"运行一个play项目\"><a href=\"#运行一个play项目\" class=\"headerlink\" title=\"运行一个play项目\"></a>运行一个play项目</h2><ul>\n<li><p>打开Intellij IDEA的Run菜单，找到Edit Configurations。<code>Run | Edit Configurations</code></p>\n</li>\n<li><p>点击+号并选择Application</p>\n</li>\n<li><p>做以下配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Main class:play.server.Server</div><div class=\"line\">VM options:-Dapplication.path=&quot;.&quot;</div><div class=\"line\">Working directory:play应用所在的目录</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>以上的配置相当于命令行执行play run或者play start</p>\n<h2 id=\"运行项目单元测试\"><a href=\"#运行项目单元测试\" class=\"headerlink\" title=\"运行项目单元测试\"></a>运行项目单元测试</h2><ul>\n<li><p>在上面的<code>配置项目依赖的play库文件</code>最后一步，即设置项目的依赖项的地方增加测试的依赖jar.将<code>&lt;play_dir&gt;\\modules\\testrunner\\lib\\play-testrunner.jar</code>加入依赖项</p>\n</li>\n<li><p><code>Edit Configurations</code>时做如下配置</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Main class:play.server.Server</div><div class=\"line\">VM options:-Dapplication.path=&quot;.&quot; -Dplay.id=test</div><div class=\"line\">Working directory:play应用所在的目录</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>以上的配置相当于执行命令play test</p>\n<h2 id=\"调试项目\"><a href=\"#调试项目\" class=\"headerlink\" title=\"调试项目\"></a>调试项目</h2><p>和运行play项目的配置相似，只是VM options设置如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Dapplication.path=&quot;.&quot; -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000</div></pre></td></tr></table></figure></p>"},{"title":"Mybatis语法总结","date":"2017-06-13T16:00:00.000Z","reward":true,"_content":"\n## 动态传入查询字段和where\n\n```markdown\n   <sql id=\"query_columns\">\n       userName,id,sex,age,phone\n    </sql>\n\n    <select id=\"queryUsers\" resultType=\"com.xx.user.User\"\n            parameterType=\"java.util.Map\">\n        select\n        <include refid=\"query_columns\"/>\n        from user\n        <where>\n            <if test=\"null!=phone\">\n            phone = #{phone}\n            </if>\n        </where>\n\n    </select>\n```\n查询条件通过sql标签动态传入\n通过where节点的处理能防止传入phone为null时出现``select userName,id,sex,age,phone from user where ``导致的尴尬异常.\n<!--more-->\n## choose\nchoose标签是按顺序判断其内部when标签中的test条件出否成立，如果有一个成立，则 choose 结束。当 choose 中所有 when 的条件都不满则时，则执行 otherwise 中的sql。类似于Java 的 switch 语句，choose 为 switch，when 为 case，otherwise 则为 default。\n因为\\<if>...\\</if>并没对应的<else>标签，所以要达到\\<if>...\\<else>...\\</else> \\</if>的效果，得借助\\<choose>、\\<when>、\\<otherwise>组合使用\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\">  \n    SELECT *  \n      FROM User u   \n    <where>  \n        <choose>  \n            <when test=\"userName !=null \">  \n                u.userName LIKE CONCAT(CONCAT('%', #{userName, jdbcType=VARCHAR}),'%')  \n            </when >  \n            <when test=\"sex != null and sex != '' \">  \n                AND u.sex = #{sex, jdbcType=INTEGER}  \n            </when >  \n            <when test=\"birthday != null \">  \n                AND u.birthday = #{birthday, jdbcType=DATE}  \n            </when >  \n            <otherwise>  \n            </otherwise>  \n        </choose>  \n    </where>    \n</select>  \n\n```\n\n## List参数生成in条件\n\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"> \nselect * from user\n<where>\n   <if test=\"null!=ids and ids.size()>0\">\n               id in \n               <foreach item=\"item\" index=\"index\" collection=\"ids\" open=\"(\"\n                        separator=\",\" close=\")\">\n                   #{item}\n               </foreach>\n           </if>\n    \n</where>\n</select>\n\n```\n\n## 使用#{}参数化防止SQL注入\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\"\n            parameterType=\"java.util.Map\">\n        select *\n        from user\n        <where>\n            <if test=\"null!=phone\">\n            phone = #{phone}\n            </if>\n        </where>\n\n    </select>\n```\n\n\n## 兼容多数据库\n```markdown\n<insert id=\"insert\">\n <selectKey keyProperty=\"id\" resultType=\"int\" order=\"BEFORE\">\n <if test=\"_databaseId == 'oracle'\">\n select seq_users.nextval from dual\n </if>\n <if test=\"_databaseId == 'db2'\">\n select nextval for seq_users from sysibm.sysdummy1\"\n </if>\n </selectKey>\n insert into users values (#{id}, #{name})\n</insert>\n```\n\n另一种\n\nmybatis.xml中配置\n```markdown\n<databaseIdProvider type=\"DB_VENDOR\">  \n  <property name=\"SQL value=\"sqlserver\"/>  \n  <property name=\"DB2\" value=\"db2\"/>          \n  <property name=\"Oracle\" value=\"oracle\" />    \n  <property name=\"Adaptive Server Enterprise\" value=\"sybase\"/>     \n  <property name=\"MySQL\" value=\"mysql\" />  \n</databaseIdProvider><!-- name是数据库厂商名，value是你自己的标识名 --> \n```\n\nmapper的xml中\n```markdown\n<select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"mysql\">  \n        <![CDATA[ \n            SELECT COUNT(*) FROM user \n        ]]>  \n    </select>  \n      \n    <select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"oracle\">  \n        <![CDATA[ \n            SELECT COUNT(*) FROM user \n        ]]>  \n    </select>      \n```\n","source":"_posts/tools/Mybatis语法总结.md","raw":"\n---\ntitle: Mybatis语法总结\ndate: 2017-06-14 00:00:00\nreward: true\ncategories:\n    - tools\ntags:\n    - Mybatis\n    - mapper\n---\n\n## 动态传入查询字段和where\n\n```markdown\n   <sql id=\"query_columns\">\n       userName,id,sex,age,phone\n    </sql>\n\n    <select id=\"queryUsers\" resultType=\"com.xx.user.User\"\n            parameterType=\"java.util.Map\">\n        select\n        <include refid=\"query_columns\"/>\n        from user\n        <where>\n            <if test=\"null!=phone\">\n            phone = #{phone}\n            </if>\n        </where>\n\n    </select>\n```\n查询条件通过sql标签动态传入\n通过where节点的处理能防止传入phone为null时出现``select userName,id,sex,age,phone from user where ``导致的尴尬异常.\n<!--more-->\n## choose\nchoose标签是按顺序判断其内部when标签中的test条件出否成立，如果有一个成立，则 choose 结束。当 choose 中所有 when 的条件都不满则时，则执行 otherwise 中的sql。类似于Java 的 switch 语句，choose 为 switch，when 为 case，otherwise 则为 default。\n因为\\<if>...\\</if>并没对应的<else>标签，所以要达到\\<if>...\\<else>...\\</else> \\</if>的效果，得借助\\<choose>、\\<when>、\\<otherwise>组合使用\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\">  \n    SELECT *  \n      FROM User u   \n    <where>  \n        <choose>  \n            <when test=\"userName !=null \">  \n                u.userName LIKE CONCAT(CONCAT('%', #{userName, jdbcType=VARCHAR}),'%')  \n            </when >  \n            <when test=\"sex != null and sex != '' \">  \n                AND u.sex = #{sex, jdbcType=INTEGER}  \n            </when >  \n            <when test=\"birthday != null \">  \n                AND u.birthday = #{birthday, jdbcType=DATE}  \n            </when >  \n            <otherwise>  \n            </otherwise>  \n        </choose>  \n    </where>    \n</select>  \n\n```\n\n## List参数生成in条件\n\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"> \nselect * from user\n<where>\n   <if test=\"null!=ids and ids.size()>0\">\n               id in \n               <foreach item=\"item\" index=\"index\" collection=\"ids\" open=\"(\"\n                        separator=\",\" close=\")\">\n                   #{item}\n               </foreach>\n           </if>\n    \n</where>\n</select>\n\n```\n\n## 使用#{}参数化防止SQL注入\n```markdown\n<select id=\"queryUsers\" resultType=\"com.xx.user.User\"\n            parameterType=\"java.util.Map\">\n        select *\n        from user\n        <where>\n            <if test=\"null!=phone\">\n            phone = #{phone}\n            </if>\n        </where>\n\n    </select>\n```\n\n\n## 兼容多数据库\n```markdown\n<insert id=\"insert\">\n <selectKey keyProperty=\"id\" resultType=\"int\" order=\"BEFORE\">\n <if test=\"_databaseId == 'oracle'\">\n select seq_users.nextval from dual\n </if>\n <if test=\"_databaseId == 'db2'\">\n select nextval for seq_users from sysibm.sysdummy1\"\n </if>\n </selectKey>\n insert into users values (#{id}, #{name})\n</insert>\n```\n\n另一种\n\nmybatis.xml中配置\n```markdown\n<databaseIdProvider type=\"DB_VENDOR\">  \n  <property name=\"SQL value=\"sqlserver\"/>  \n  <property name=\"DB2\" value=\"db2\"/>          \n  <property name=\"Oracle\" value=\"oracle\" />    \n  <property name=\"Adaptive Server Enterprise\" value=\"sybase\"/>     \n  <property name=\"MySQL\" value=\"mysql\" />  \n</databaseIdProvider><!-- name是数据库厂商名，value是你自己的标识名 --> \n```\n\nmapper的xml中\n```markdown\n<select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"mysql\">  \n        <![CDATA[ \n            SELECT COUNT(*) FROM user \n        ]]>  \n    </select>  \n      \n    <select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"oracle\">  \n        <![CDATA[ \n            SELECT COUNT(*) FROM user \n        ]]>  \n    </select>      \n```\n","slug":"tools/Mybatis语法总结","published":1,"updated":"2017-06-15T14:26:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrt001u9vvuswfdths7","content":"<h2 id=\"动态传入查询字段和where\"><a href=\"#动态传入查询字段和where\" class=\"headerlink\" title=\"动态传入查询字段和where\"></a>动态传入查询字段和where</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;sql id=\"query_columns\"&gt;</div><div class=\"line\"><span class=\"code\">    userName,id,sex,age,phone</span></div><div class=\"line\"> &lt;/sql&gt;</div><div class=\"line\"></div><div class=\"line\"> &lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\"</div><div class=\"line\">         parameterType=\"java.util.Map\"&gt;</div><div class=\"line\"><span class=\"code\">     select</span></div><div class=\"line\"><span class=\"code\">     &lt;include refid=\"query_columns\"/&gt;</span></div><div class=\"line\"><span class=\"code\">     from user</span></div><div class=\"line\"><span class=\"code\">     &lt;where&gt;</span></div><div class=\"line\"><span class=\"code\">         &lt;if test=\"null!=phone\"&gt;</span></div><div class=\"line\"><span class=\"code\">         phone = #&#123;phone&#125;</span></div><div class=\"line\"><span class=\"code\">         &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">     &lt;/where&gt;</span></div><div class=\"line\"></div><div class=\"line\"> &lt;/select&gt;</div></pre></td></tr></table></figure>\n<p>查询条件通过sql标签动态传入<br>通过where节点的处理能防止传入phone为null时出现<code>select userName,id,sex,age,phone from user where</code>导致的尴尬异常.<br><a id=\"more\"></a></p>\n<h2 id=\"choose\"><a href=\"#choose\" class=\"headerlink\" title=\"choose\"></a>choose</h2><p>choose标签是按顺序判断其内部when标签中的test条件出否成立，如果有一个成立，则 choose 结束。当 choose 中所有 when 的条件都不满则时，则执行 otherwise 中的sql。类似于Java 的 switch 语句，choose 为 switch，when 为 case，otherwise 则为 default。<br>因为\\<if>…\\</if>并没对应的<else>标签，所以要达到\\<if>…\\<else>…\\</else> \\</if>的效果，得借助\\<choose>、\\<when>、\\<otherwise>组合使用<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"&gt;  </div><div class=\"line\"><span class=\"code\">    SELECT *  </span></div><div class=\"line\"><span class=\"code\">      FROM User u   </span></div><div class=\"line\"><span class=\"code\">    &lt;where&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;choose&gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"userName !=null \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                u.userName LIKE CONCAT(CONCAT('%', #&#123;userName, jdbcType=VARCHAR&#125;),'%')  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"sex != null and sex != '' \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                AND u.sex = #&#123;sex, jdbcType=INTEGER&#125;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"birthday != null \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                AND u.birthday = #&#123;birthday, jdbcType=DATE&#125;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;otherwise&gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/otherwise&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;/choose&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/where&gt;    </span></div><div class=\"line\">&lt;/select&gt;</div></pre></td></tr></table></figure></otherwise></when></choose></else></p>\n<h2 id=\"List参数生成in条件\"><a href=\"#List参数生成in条件\" class=\"headerlink\" title=\"List参数生成in条件\"></a>List参数生成in条件</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"&gt; </div><div class=\"line\">select * from user</div><div class=\"line\">&lt;where&gt;</div><div class=\"line\">   &lt;if test=\"null!=ids and ids.size()&gt;0\"&gt;</div><div class=\"line\"><span class=\"code\">               id in </span></div><div class=\"line\"><span class=\"code\">               &lt;foreach item=\"item\" index=\"index\" collection=\"ids\" open=\"(\"</span></div><div class=\"line\"><span class=\"code\">                        separator=\",\" close=\")\"&gt;</span></div><div class=\"line\"><span class=\"code\">                   #&#123;item&#125;</span></div><div class=\"line\"><span class=\"code\">               &lt;/foreach&gt;</span></div><div class=\"line\"><span class=\"code\">           &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">    </span></div><div class=\"line\">&lt;/where&gt;</div><div class=\"line\">&lt;/select&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"使用-参数化防止SQL注入\"><a href=\"#使用-参数化防止SQL注入\" class=\"headerlink\" title=\"使用#{}参数化防止SQL注入\"></a>使用#{}参数化防止SQL注入</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\"</div><div class=\"line\">            parameterType=\"java.util.Map\"&gt;</div><div class=\"line\"><span class=\"code\">        select *</span></div><div class=\"line\"><span class=\"code\">        from user</span></div><div class=\"line\"><span class=\"code\">        &lt;where&gt;</span></div><div class=\"line\"><span class=\"code\">            &lt;if test=\"null!=phone\"&gt;</span></div><div class=\"line\"><span class=\"code\">            phone = #&#123;phone&#125;</span></div><div class=\"line\"><span class=\"code\">            &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">        &lt;/where&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"兼容多数据库\"><a href=\"#兼容多数据库\" class=\"headerlink\" title=\"兼容多数据库\"></a>兼容多数据库</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;insert id=\"insert\"&gt;</div><div class=\"line\"> &lt;selectKey keyProperty=\"id\" resultType=\"int\" order=\"BEFORE\"&gt;</div><div class=\"line\"> &lt;if test=\"_databaseId == 'oracle'\"&gt;</div><div class=\"line\"> select seq_users.nextval from dual</div><div class=\"line\"> &lt;/if&gt;</div><div class=\"line\"> &lt;if test=\"_databaseId == 'db2'\"&gt;</div><div class=\"line\"> select nextval for seq_users from sysibm.sysdummy1\"</div><div class=\"line\"> &lt;/if&gt;</div><div class=\"line\"> &lt;/selectKey&gt;</div><div class=\"line\"> insert into users values (#&#123;id&#125;, #&#123;name&#125;)</div><div class=\"line\">&lt;/insert&gt;</div></pre></td></tr></table></figure>\n<p>另一种</p>\n<p>mybatis.xml中配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;databaseIdProvider type=\"DB_VENDOR\"&gt;  </div><div class=\"line\">  &lt;property name=\"SQL value=\"sqlserver\"/&gt;  </div><div class=\"line\">  &lt;property name=\"DB2\" value=\"db2\"/&gt;          </div><div class=\"line\">  &lt;property name=\"Oracle\" value=\"oracle\" /&gt;    </div><div class=\"line\">  &lt;property name=\"Adaptive Server Enterprise\" value=\"sybase\"/&gt;     </div><div class=\"line\">  &lt;property name=\"MySQL\" value=\"mysql\" /&gt;  </div><div class=\"line\">&lt;/databaseIdProvider&gt;&lt;!-- name是数据库厂商名，value是你自己的标识名 --&gt;</div></pre></td></tr></table></figure></p>\n<p>mapper的xml中<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"mysql\"&gt;  </div><div class=\"line\"><span class=\"code\">        &lt;![CDATA[ </span></div><div class=\"line\"><span class=\"code\">            SELECT COUNT(*) FROM user </span></div><div class=\"line\"><span class=\"code\">        ]]&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;  </span></div><div class=\"line\"><span class=\"code\">      </span></div><div class=\"line\"><span class=\"code\">    &lt;select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"oracle\"&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;![CDATA[ </span></div><div class=\"line\"><span class=\"code\">            SELECT COUNT(*) FROM user </span></div><div class=\"line\"><span class=\"code\">        ]]&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;</span></div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"动态传入查询字段和where\"><a href=\"#动态传入查询字段和where\" class=\"headerlink\" title=\"动态传入查询字段和where\"></a>动态传入查询字段和where</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;sql id=\"query_columns\"&gt;</div><div class=\"line\"><span class=\"code\">    userName,id,sex,age,phone</span></div><div class=\"line\"> &lt;/sql&gt;</div><div class=\"line\"></div><div class=\"line\"> &lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\"</div><div class=\"line\">         parameterType=\"java.util.Map\"&gt;</div><div class=\"line\"><span class=\"code\">     select</span></div><div class=\"line\"><span class=\"code\">     &lt;include refid=\"query_columns\"/&gt;</span></div><div class=\"line\"><span class=\"code\">     from user</span></div><div class=\"line\"><span class=\"code\">     &lt;where&gt;</span></div><div class=\"line\"><span class=\"code\">         &lt;if test=\"null!=phone\"&gt;</span></div><div class=\"line\"><span class=\"code\">         phone = #&#123;phone&#125;</span></div><div class=\"line\"><span class=\"code\">         &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">     &lt;/where&gt;</span></div><div class=\"line\"></div><div class=\"line\"> &lt;/select&gt;</div></pre></td></tr></table></figure>\n<p>查询条件通过sql标签动态传入<br>通过where节点的处理能防止传入phone为null时出现<code>select userName,id,sex,age,phone from user where</code>导致的尴尬异常.<br>","more":"</p>\n<h2 id=\"choose\"><a href=\"#choose\" class=\"headerlink\" title=\"choose\"></a>choose</h2><p>choose标签是按顺序判断其内部when标签中的test条件出否成立，如果有一个成立，则 choose 结束。当 choose 中所有 when 的条件都不满则时，则执行 otherwise 中的sql。类似于Java 的 switch 语句，choose 为 switch，when 为 case，otherwise 则为 default。<br>因为\\<if>…\\</if>并没对应的<else>标签，所以要达到\\<if>…\\<else>…\\</else> \\</if>的效果，得借助\\<choose>、\\<when>、\\<otherwise>组合使用<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"&gt;  </div><div class=\"line\"><span class=\"code\">    SELECT *  </span></div><div class=\"line\"><span class=\"code\">      FROM User u   </span></div><div class=\"line\"><span class=\"code\">    &lt;where&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;choose&gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"userName !=null \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                u.userName LIKE CONCAT(CONCAT('%', #&#123;userName, jdbcType=VARCHAR&#125;),'%')  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"sex != null and sex != '' \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                AND u.sex = #&#123;sex, jdbcType=INTEGER&#125;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;when test=\"birthday != null \"&gt;  </span></div><div class=\"line\"><span class=\"code\">                AND u.birthday = #&#123;birthday, jdbcType=DATE&#125;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/when &gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;otherwise&gt;  </span></div><div class=\"line\"><span class=\"code\">            &lt;/otherwise&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;/choose&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/where&gt;    </span></div><div class=\"line\">&lt;/select&gt;</div></pre></td></tr></table></figure></otherwise></when></choose></else></p>\n<h2 id=\"List参数生成in条件\"><a href=\"#List参数生成in条件\" class=\"headerlink\" title=\"List参数生成in条件\"></a>List参数生成in条件</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\" parameterType=\"java.util.Map\"&gt; </div><div class=\"line\">select * from user</div><div class=\"line\">&lt;where&gt;</div><div class=\"line\">   &lt;if test=\"null!=ids and ids.size()&gt;0\"&gt;</div><div class=\"line\"><span class=\"code\">               id in </span></div><div class=\"line\"><span class=\"code\">               &lt;foreach item=\"item\" index=\"index\" collection=\"ids\" open=\"(\"</span></div><div class=\"line\"><span class=\"code\">                        separator=\",\" close=\")\"&gt;</span></div><div class=\"line\"><span class=\"code\">                   #&#123;item&#125;</span></div><div class=\"line\"><span class=\"code\">               &lt;/foreach&gt;</span></div><div class=\"line\"><span class=\"code\">           &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">    </span></div><div class=\"line\">&lt;/where&gt;</div><div class=\"line\">&lt;/select&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"使用-参数化防止SQL注入\"><a href=\"#使用-参数化防止SQL注入\" class=\"headerlink\" title=\"使用#{}参数化防止SQL注入\"></a>使用#{}参数化防止SQL注入</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"queryUsers\" resultType=\"com.xx.user.User\"</div><div class=\"line\">            parameterType=\"java.util.Map\"&gt;</div><div class=\"line\"><span class=\"code\">        select *</span></div><div class=\"line\"><span class=\"code\">        from user</span></div><div class=\"line\"><span class=\"code\">        &lt;where&gt;</span></div><div class=\"line\"><span class=\"code\">            &lt;if test=\"null!=phone\"&gt;</span></div><div class=\"line\"><span class=\"code\">            phone = #&#123;phone&#125;</span></div><div class=\"line\"><span class=\"code\">            &lt;/if&gt;</span></div><div class=\"line\"><span class=\"code\">        &lt;/where&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"兼容多数据库\"><a href=\"#兼容多数据库\" class=\"headerlink\" title=\"兼容多数据库\"></a>兼容多数据库</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;insert id=\"insert\"&gt;</div><div class=\"line\"> &lt;selectKey keyProperty=\"id\" resultType=\"int\" order=\"BEFORE\"&gt;</div><div class=\"line\"> &lt;if test=\"_databaseId == 'oracle'\"&gt;</div><div class=\"line\"> select seq_users.nextval from dual</div><div class=\"line\"> &lt;/if&gt;</div><div class=\"line\"> &lt;if test=\"_databaseId == 'db2'\"&gt;</div><div class=\"line\"> select nextval for seq_users from sysibm.sysdummy1\"</div><div class=\"line\"> &lt;/if&gt;</div><div class=\"line\"> &lt;/selectKey&gt;</div><div class=\"line\"> insert into users values (#&#123;id&#125;, #&#123;name&#125;)</div><div class=\"line\">&lt;/insert&gt;</div></pre></td></tr></table></figure>\n<p>另一种</p>\n<p>mybatis.xml中配置<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;databaseIdProvider type=\"DB_VENDOR\"&gt;  </div><div class=\"line\">  &lt;property name=\"SQL value=\"sqlserver\"/&gt;  </div><div class=\"line\">  &lt;property name=\"DB2\" value=\"db2\"/&gt;          </div><div class=\"line\">  &lt;property name=\"Oracle\" value=\"oracle\" /&gt;    </div><div class=\"line\">  &lt;property name=\"Adaptive Server Enterprise\" value=\"sybase\"/&gt;     </div><div class=\"line\">  &lt;property name=\"MySQL\" value=\"mysql\" /&gt;  </div><div class=\"line\">&lt;/databaseIdProvider&gt;&lt;!-- name是数据库厂商名，value是你自己的标识名 --&gt;</div></pre></td></tr></table></figure></p>\n<p>mapper的xml中<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"mysql\"&gt;  </div><div class=\"line\"><span class=\"code\">        &lt;![CDATA[ </span></div><div class=\"line\"><span class=\"code\">            SELECT COUNT(*) FROM user </span></div><div class=\"line\"><span class=\"code\">        ]]&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;  </span></div><div class=\"line\"><span class=\"code\">      </span></div><div class=\"line\"><span class=\"code\">    &lt;select id=\"getCountOfSql\" resultType=\"int\" useCache=\"false\" statementType=\"STATEMENT\" timeout=\"5000\" databaseId=\"oracle\"&gt;  </span></div><div class=\"line\"><span class=\"code\">        &lt;![CDATA[ </span></div><div class=\"line\"><span class=\"code\">            SELECT COUNT(*) FROM user </span></div><div class=\"line\"><span class=\"code\">        ]]&gt;  </span></div><div class=\"line\"><span class=\"code\">    &lt;/select&gt;</span></div></pre></td></tr></table></figure></p>"},{"title":"POI高效操作Excel","date":"2017-05-20T08:40:56.000Z","_content":"\nPOI是apache下一个进行office相关格式文件的读写开源工具。\nPOI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。\n\n## 事件模型\n\n基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。\n\n## 用户模型\n\n基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。\n<!--more-->\n对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。\n\n![POI操作性能对比](http://static.xcoder.ren/public/images/ss-features.png)\n\n很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。\n\n同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。\n\n\n## 读取XLSX例子\n\n[读取XLSX例子](https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html)\n\n[读取xlsx例子](https://github.com/jeevatkm/excelReader)\n\n","source":"_posts/tools/POI高效操作Excel.md","raw":"\n---\ntitle: POI高效操作Excel\ndate: 2017-05-20 16:40:56\ncategories:\n    - tools\ntags:\n    - POI\n    - Excel\n    - 高效\n---\n\nPOI是apache下一个进行office相关格式文件的读写开源工具。\nPOI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。\n\n## 事件模型\n\n基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。\n\n## 用户模型\n\n基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。\n<!--more-->\n对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。\n\n![POI操作性能对比](http://static.xcoder.ren/public/images/ss-features.png)\n\n很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。\n\n同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。\n\n\n## 读取XLSX例子\n\n[读取XLSX例子](https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html)\n\n[读取xlsx例子](https://github.com/jeevatkm/excelReader)\n\n","slug":"tools/POI高效操作Excel","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrv001z9vvuy8yzzsiu","content":"<p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n<h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n<h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br><a id=\"more\"></a><br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n<p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n<p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n<p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n<h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n<p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>\n","site":{"data":{}},"excerpt":"<p>POI是apache下一个进行office相关格式文件的读写开源工具。<br>POI提供两种读写API模型：事件模型（eventmodel）和用户模型（usermodel）。</p>\n<h2 id=\"事件模型\"><a href=\"#事件模型\" class=\"headerlink\" title=\"事件模型\"></a>事件模型</h2><p>基于流（stream）的方式实现，使用sax(simple api for XML)模型进行xml内容解析，对CPU和内存的消耗小，但使用复杂，且无法进行写操作。</p>\n<h2 id=\"用户模型\"><a href=\"#用户模型\" class=\"headerlink\" title=\"用户模型\"></a>用户模型</h2><p>基于内存树（memory tree）的方式实现，使用DOM进行excel的解析，对CPU和内存的消耗大，但能够以面向对象的方式进行操作，使用简便，可读可写。<br>","more":"<br>对于2007版excel，POI还提供了可缓存流的用户模型API，使用滑动窗口（sliding window）的方法控制缓存区的大小，实现对海量数据的读写。</p>\n<p><img src=\"http://static.xcoder.ren/public/images/ss-features.png\" alt=\"POI操作性能对比\"></p>\n<p>很明显，2007版excel在读写方面POI做的更好，2003版在海量数据写入方面支持不够，所以在设计系统的导入、导出功能时，应该优先考虑2007版。</p>\n<p>同时，导出功能需要最终写文档到Excel中，使用2007及以上版本的SXSSF对象来操作写Excel性能比HSSF高很多。</p>\n<h2 id=\"读取XLSX例子\"><a href=\"#读取XLSX例子\" class=\"headerlink\" title=\"读取XLSX例子\"></a>读取XLSX例子</h2><p><a href=\"https://myjeeva.com/read-excel-through-java-using-xssf-and-sax-apache-poi.html\" target=\"_blank\" rel=\"external\">读取XLSX例子</a></p>\n<p><a href=\"https://github.com/jeevatkm/excelReader\" target=\"_blank\" rel=\"external\">读取xlsx例子</a></p>"},{"title":"(收藏)Vim常用命令整理","date":"2017-06-16T08:00:56.000Z","_content":"\n## 打开关闭\n\n* vim xxx，vim +num xxx 命令行打开文件\n* vim + filename 启动跳到文件结尾\n* vim +143 filename 打开跳到143行 调试代码有用\n* vim +/search-term filename 跳到第一个匹配\n* vim +/search-term filename 跳到最后一个匹配\n* vim -t tag\n* vim —cmd command filename 加载文件前执行命令\n* vim -c “:50” filename 加载文件后执行命令\n* :e xxx vim中打开文件\n* :w[rite],:up[date],:w!,up!，:wall保存文件\n* :x,:q,:qa,:q!,退出文件\n* gf 普通模式下打开文件名为光标处文字的文件\n* Ctrl+W f 新窗口打开匹配的文件\n* Ctrl+W fg 新tab页打开匹配的文件\n\n## 代码相关\n\n* <,>对代码进行缩进\n* <<,>>用于调整源代码缩进格式\n* = 用户自动格式化代码缩进，gg=G 即为全文格式化\n* zf,zo,zc,za,zR,zM对代码进行折叠打开折叠\n* Ctrl+],Ctrl+T查找函数的定义和返回\n* 大写K，看光标所指标识符的man帮助\n<!--more-->\n## 移动光标\n* h,j,k,l ←↓↑→ 移动光标，相当于四个方向键\n* w,b,e,ge 以单词的方式移动，可以nw，nb，ne，nge的方式移动n个单词的距离\n* W，B，E，gE会以连续字符串的方式移动\n* 0,^,g_,移动到行首，行尾以及后面第n行的行尾\n* gg,G,nG，ngg 移动到文件头和文件尾，以及移动到文件的第n行，‘可以回到上一次的地方\n* H,M,L n%定位光标到当前屏幕的某个地方\n* {,},[[,]],(,) 段落，区块，语句导航\n* z回车，z-,zz.当前行置顶，置底，置中\n* Ctrl+G显示当前位置信息\n* Ctrl+F，Ctrl+B，Ctrl+U,Ctrl+D,Ctrl+E,Ctrl+Y,向前后滚动一屏，半屏，一行\n* Ctrl+I,Ctrl+O 光标移到下一次和上一次的地方，Ctrl+I 和Tab功能一样\n* ‘,”,[,]为跳转前的位置，最后编辑的光标位置，最后修改的开始位置，最后修改的结束位置\n* Ctrl+^ 在两个文件之间轮换\n* ‘“,’.，`.上一次光标的地方，上一次修改的地方\n\n## 编辑\n* i,a,o,I,A,O分别进入插入模式\n* o 在当前光标所在行下方插入一行，O在当前光标所在行上方插入一行\n* J 删除换行符，合并两行\n* Ctrl-R 重做\n* u，nu撤销上一次更改，撤销n次更改\n* U 撤销整行的更改\n* Ctrl+R 重做更改\n* Ctrl+L 重新加载屏幕内容\n* y,d,p 表示拷贝，删除，粘贴，配置位置描述使用 yw，dw，y0,d0,y,yfa,dfa,yy,dd,D,dG,dgg等，前面可以加数字，表示重复如，3dd,3yy等，也可以加范围，如4,8yy\n* %y+.y+,N,My+ 拷贝指定的数据\n* :[range] g[lobal[!]] /{pattern}/ [cmd]\n* :[range] v[global[!]] /{pattern}/ [cmd]\n* n,p,next,previous,Ctrl+^在编辑的文件中切换\n* :ls 查看打开的文件\n* :e #n 打开标号为ls结果中的文件\n* :changes 查看文件变化\n* ga查看ASCII,十进制，十六进制\n\n## 查找\n\n* /pattern-回车 在文件内向后查找pattern的匹配，n重复，N回退，n前面可以带数字\n* ?pattern-回车 在文件内向前查找pattern的匹配，n重复，N回退，n前面可以带数字\n* f{char}/t{char} 在行内查找下一指定字符， ;重复， ,回退\n* F{char}/T{char} 在行内查找上一指定字符， ;重复， ,回退\n* *，#高亮所有匹配光标所在单词，相当于输入了/word,如果想单独匹配单词/\\<word\\>,则需要g*,g# ，gd提留在非注释段的第一个匹配\n* \\<,\\>表示匹配单词的开头和结尾\n* .,^,$在查找的过程中作为正则策略，如果需要完全匹配需要转义\n* % 查找匹配的括号() [] {}\n\n## 替换\n\n* . 重复上次的修改（一定要是修改） 比如说上次删除一个字符，点就是删除一个字符的意思；如果上次是删除一行，点就是删除一行的意思了。\n* >G 当前行缩进一个单位（Tab）\n* :[range]s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to，替换当前行\n* :[range]%s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to,替换所有行\n* 范围可以指定为m,n的数字形式，当个的数字表示特定的行，.表示当前行，如果字符串中本身包含/,则可用+，=替换原来的/\n* :[range]s[ubstitute]/{pattern}/{string}/[flags] [count]\n\n## 外部&&内部命令\n\n* :shell 交互式shell\n* :!cmd 执行cmd并输出结果\n* :! 执行上一次的命令\n* :r[ead] !cmd当前光标写入命令结果\n* :上下方向键 查找命令\n* :[range]co[py] {address} 复制指定范围的行到指定地址，简写为t 理解为copyto\n* :[range]m[ove] {address} 移动命令\n* :@:重复VIM命令，.重复普通命令\n* Ctrl+D补全命令\n* :[range] delete [x]\n* :[range] yank [x]\n* :[range] put [x]\n* :[range] copy {address}\n* :[range] move {address}\n* :[range] normal {commands}\n* :[range] join\n* :[range] substitute/{pattern}/{string}/[flags]\n* :[range] global/{pattern}/[cmd]\n\n## 选项设置\n\n* set xxx 设置某项\n* set noxxx 取消某项设置\n* set xxx! 反置某项值\n* set xxx& 恢复默认值\n* set xxx? 查询当前状态+\n* setlocal 局部有效，set全局有效+\n* :set expandtab 将tab转换为space\n* :set tabstop=4 制表符宽度 tabstop=4或ts=4\n* :retab 按照设定值重新缩进\n* :set shiftwidth=4 行缩进时宽度\n* :set ai 自动缩进\n\n## 代码格式化\n\n* 全文格式化 gg=G，比如粘贴的内容\n* 当前行格式化缩进 ==\n* 当前光标所在行的后N行格式化 N==\n* 选中行格式化，=\n\n转载自[VIM常用操作命令梳理](https://zhuanlan.zhihu.com/p/27232184)","source":"_posts/tools/Vim常用命令整理.md","raw":"\n---\ntitle: (收藏)Vim常用命令整理\ndate: 2017-06-16 16:00:56\ncategories:\n    - tools\ntags:\n    - vim\n---\n\n## 打开关闭\n\n* vim xxx，vim +num xxx 命令行打开文件\n* vim + filename 启动跳到文件结尾\n* vim +143 filename 打开跳到143行 调试代码有用\n* vim +/search-term filename 跳到第一个匹配\n* vim +/search-term filename 跳到最后一个匹配\n* vim -t tag\n* vim —cmd command filename 加载文件前执行命令\n* vim -c “:50” filename 加载文件后执行命令\n* :e xxx vim中打开文件\n* :w[rite],:up[date],:w!,up!，:wall保存文件\n* :x,:q,:qa,:q!,退出文件\n* gf 普通模式下打开文件名为光标处文字的文件\n* Ctrl+W f 新窗口打开匹配的文件\n* Ctrl+W fg 新tab页打开匹配的文件\n\n## 代码相关\n\n* <,>对代码进行缩进\n* <<,>>用于调整源代码缩进格式\n* = 用户自动格式化代码缩进，gg=G 即为全文格式化\n* zf,zo,zc,za,zR,zM对代码进行折叠打开折叠\n* Ctrl+],Ctrl+T查找函数的定义和返回\n* 大写K，看光标所指标识符的man帮助\n<!--more-->\n## 移动光标\n* h,j,k,l ←↓↑→ 移动光标，相当于四个方向键\n* w,b,e,ge 以单词的方式移动，可以nw，nb，ne，nge的方式移动n个单词的距离\n* W，B，E，gE会以连续字符串的方式移动\n* 0,^,g_,移动到行首，行尾以及后面第n行的行尾\n* gg,G,nG，ngg 移动到文件头和文件尾，以及移动到文件的第n行，‘可以回到上一次的地方\n* H,M,L n%定位光标到当前屏幕的某个地方\n* {,},[[,]],(,) 段落，区块，语句导航\n* z回车，z-,zz.当前行置顶，置底，置中\n* Ctrl+G显示当前位置信息\n* Ctrl+F，Ctrl+B，Ctrl+U,Ctrl+D,Ctrl+E,Ctrl+Y,向前后滚动一屏，半屏，一行\n* Ctrl+I,Ctrl+O 光标移到下一次和上一次的地方，Ctrl+I 和Tab功能一样\n* ‘,”,[,]为跳转前的位置，最后编辑的光标位置，最后修改的开始位置，最后修改的结束位置\n* Ctrl+^ 在两个文件之间轮换\n* ‘“,’.，`.上一次光标的地方，上一次修改的地方\n\n## 编辑\n* i,a,o,I,A,O分别进入插入模式\n* o 在当前光标所在行下方插入一行，O在当前光标所在行上方插入一行\n* J 删除换行符，合并两行\n* Ctrl-R 重做\n* u，nu撤销上一次更改，撤销n次更改\n* U 撤销整行的更改\n* Ctrl+R 重做更改\n* Ctrl+L 重新加载屏幕内容\n* y,d,p 表示拷贝，删除，粘贴，配置位置描述使用 yw，dw，y0,d0,y,yfa,dfa,yy,dd,D,dG,dgg等，前面可以加数字，表示重复如，3dd,3yy等，也可以加范围，如4,8yy\n* %y+.y+,N,My+ 拷贝指定的数据\n* :[range] g[lobal[!]] /{pattern}/ [cmd]\n* :[range] v[global[!]] /{pattern}/ [cmd]\n* n,p,next,previous,Ctrl+^在编辑的文件中切换\n* :ls 查看打开的文件\n* :e #n 打开标号为ls结果中的文件\n* :changes 查看文件变化\n* ga查看ASCII,十进制，十六进制\n\n## 查找\n\n* /pattern-回车 在文件内向后查找pattern的匹配，n重复，N回退，n前面可以带数字\n* ?pattern-回车 在文件内向前查找pattern的匹配，n重复，N回退，n前面可以带数字\n* f{char}/t{char} 在行内查找下一指定字符， ;重复， ,回退\n* F{char}/T{char} 在行内查找上一指定字符， ;重复， ,回退\n* *，#高亮所有匹配光标所在单词，相当于输入了/word,如果想单独匹配单词/\\<word\\>,则需要g*,g# ，gd提留在非注释段的第一个匹配\n* \\<,\\>表示匹配单词的开头和结尾\n* .,^,$在查找的过程中作为正则策略，如果需要完全匹配需要转义\n* % 查找匹配的括号() [] {}\n\n## 替换\n\n* . 重复上次的修改（一定要是修改） 比如说上次删除一个字符，点就是删除一个字符的意思；如果上次是删除一行，点就是删除一行的意思了。\n* >G 当前行缩进一个单位（Tab）\n* :[range]s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to，替换当前行\n* :[range]%s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to,替换所有行\n* 范围可以指定为m,n的数字形式，当个的数字表示特定的行，.表示当前行，如果字符串中本身包含/,则可用+，=替换原来的/\n* :[range]s[ubstitute]/{pattern}/{string}/[flags] [count]\n\n## 外部&&内部命令\n\n* :shell 交互式shell\n* :!cmd 执行cmd并输出结果\n* :! 执行上一次的命令\n* :r[ead] !cmd当前光标写入命令结果\n* :上下方向键 查找命令\n* :[range]co[py] {address} 复制指定范围的行到指定地址，简写为t 理解为copyto\n* :[range]m[ove] {address} 移动命令\n* :@:重复VIM命令，.重复普通命令\n* Ctrl+D补全命令\n* :[range] delete [x]\n* :[range] yank [x]\n* :[range] put [x]\n* :[range] copy {address}\n* :[range] move {address}\n* :[range] normal {commands}\n* :[range] join\n* :[range] substitute/{pattern}/{string}/[flags]\n* :[range] global/{pattern}/[cmd]\n\n## 选项设置\n\n* set xxx 设置某项\n* set noxxx 取消某项设置\n* set xxx! 反置某项值\n* set xxx& 恢复默认值\n* set xxx? 查询当前状态+\n* setlocal 局部有效，set全局有效+\n* :set expandtab 将tab转换为space\n* :set tabstop=4 制表符宽度 tabstop=4或ts=4\n* :retab 按照设定值重新缩进\n* :set shiftwidth=4 行缩进时宽度\n* :set ai 自动缩进\n\n## 代码格式化\n\n* 全文格式化 gg=G，比如粘贴的内容\n* 当前行格式化缩进 ==\n* 当前光标所在行的后N行格式化 N==\n* 选中行格式化，=\n\n转载自[VIM常用操作命令梳理](https://zhuanlan.zhihu.com/p/27232184)","slug":"tools/Vim常用命令整理","published":1,"updated":"2017-06-16T08:02:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegrw00219vvu4q173nz6","content":"<h2 id=\"打开关闭\"><a href=\"#打开关闭\" class=\"headerlink\" title=\"打开关闭\"></a>打开关闭</h2><ul>\n<li>vim xxx，vim +num xxx 命令行打开文件</li>\n<li>vim + filename 启动跳到文件结尾</li>\n<li>vim +143 filename 打开跳到143行 调试代码有用</li>\n<li>vim +/search-term filename 跳到第一个匹配</li>\n<li>vim +/search-term filename 跳到最后一个匹配</li>\n<li>vim -t tag</li>\n<li>vim —cmd command filename 加载文件前执行命令</li>\n<li>vim -c “:50” filename 加载文件后执行命令</li>\n<li>:e xxx vim中打开文件</li>\n<li>:w[rite],:up[date],:w!,up!，:wall保存文件</li>\n<li>:x,:q,:qa,:q!,退出文件</li>\n<li>gf 普通模式下打开文件名为光标处文字的文件</li>\n<li>Ctrl+W f 新窗口打开匹配的文件</li>\n<li>Ctrl+W fg 新tab页打开匹配的文件</li>\n</ul>\n<h2 id=\"代码相关\"><a href=\"#代码相关\" class=\"headerlink\" title=\"代码相关\"></a>代码相关</h2><ul>\n<li>&lt;,&gt;对代码进行缩进</li>\n<li>&lt;&lt;,&gt;&gt;用于调整源代码缩进格式</li>\n<li>= 用户自动格式化代码缩进，gg=G 即为全文格式化</li>\n<li>zf,zo,zc,za,zR,zM对代码进行折叠打开折叠</li>\n<li>Ctrl+],Ctrl+T查找函数的定义和返回</li>\n<li>大写K，看光标所指标识符的man帮助<a id=\"more\"></a>\n<h2 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h2></li>\n<li>h,j,k,l ←↓↑→ 移动光标，相当于四个方向键</li>\n<li>w,b,e,ge 以单词的方式移动，可以nw，nb，ne，nge的方式移动n个单词的距离</li>\n<li>W，B，E，gE会以连续字符串的方式移动</li>\n<li>0,^,g_,移动到行首，行尾以及后面第n行的行尾</li>\n<li>gg,G,nG，ngg 移动到文件头和文件尾，以及移动到文件的第n行，‘可以回到上一次的地方</li>\n<li>H,M,L n%定位光标到当前屏幕的某个地方</li>\n<li>{,},[[,]],(,) 段落，区块，语句导航</li>\n<li>z回车，z-,zz.当前行置顶，置底，置中</li>\n<li>Ctrl+G显示当前位置信息</li>\n<li>Ctrl+F，Ctrl+B，Ctrl+U,Ctrl+D,Ctrl+E,Ctrl+Y,向前后滚动一屏，半屏，一行</li>\n<li>Ctrl+I,Ctrl+O 光标移到下一次和上一次的地方，Ctrl+I 和Tab功能一样</li>\n<li>‘,”,[,]为跳转前的位置，最后编辑的光标位置，最后修改的开始位置，最后修改的结束位置</li>\n<li>Ctrl+^ 在两个文件之间轮换</li>\n<li>‘“,’.，`.上一次光标的地方，上一次修改的地方</li>\n</ul>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n<li>i,a,o,I,A,O分别进入插入模式</li>\n<li>o 在当前光标所在行下方插入一行，O在当前光标所在行上方插入一行</li>\n<li>J 删除换行符，合并两行</li>\n<li>Ctrl-R 重做</li>\n<li>u，nu撤销上一次更改，撤销n次更改</li>\n<li>U 撤销整行的更改</li>\n<li>Ctrl+R 重做更改</li>\n<li>Ctrl+L 重新加载屏幕内容</li>\n<li>y,d,p 表示拷贝，删除，粘贴，配置位置描述使用 yw，dw，y0,d0,y,yfa,dfa,yy,dd,D,dG,dgg等，前面可以加数字，表示重复如，3dd,3yy等，也可以加范围，如4,8yy</li>\n<li>%y+.y+,N,My+ 拷贝指定的数据</li>\n<li>:[range] g[lobal[!]] /{pattern}/ [cmd]</li>\n<li>:[range] v[global[!]] /{pattern}/ [cmd]</li>\n<li>n,p,next,previous,Ctrl+^在编辑的文件中切换</li>\n<li>:ls 查看打开的文件</li>\n<li>:e #n 打开标号为ls结果中的文件</li>\n<li>:changes 查看文件变化</li>\n<li>ga查看ASCII,十进制，十六进制</li>\n</ul>\n<h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n<li>/pattern-回车 在文件内向后查找pattern的匹配，n重复，N回退，n前面可以带数字</li>\n<li>?pattern-回车 在文件内向前查找pattern的匹配，n重复，N回退，n前面可以带数字</li>\n<li>f{char}/t{char} 在行内查找下一指定字符， ;重复， ,回退</li>\n<li>F{char}/T{char} 在行内查找上一指定字符， ;重复， ,回退</li>\n<li><em>，#高亮所有匹配光标所在单词，相当于输入了/word,如果想单独匹配单词/\\<word\\>,则需要g</word\\></em>,g# ，gd提留在非注释段的第一个匹配</li>\n<li>\\&lt;,>表示匹配单词的开头和结尾</li>\n<li>.,^,$在查找的过程中作为正则策略，如果需要完全匹配需要转义</li>\n<li>% 查找匹配的括号() [] {}</li>\n</ul>\n<h2 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h2><ul>\n<li>. 重复上次的修改（一定要是修改） 比如说上次删除一个字符，点就是删除一个字符的意思；如果上次是删除一行，点就是删除一行的意思了。</li>\n<li><blockquote>\n<p>G 当前行缩进一个单位（Tab）</p>\n</blockquote>\n</li>\n<li>:[range]s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to，替换当前行</li>\n<li>:[range]%s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to,替换所有行</li>\n<li>范围可以指定为m,n的数字形式，当个的数字表示特定的行，.表示当前行，如果字符串中本身包含/,则可用+，=替换原来的/</li>\n<li>:[range]s[ubstitute]/{pattern}/{string}/[flags] [count]</li>\n</ul>\n<h2 id=\"外部-amp-amp-内部命令\"><a href=\"#外部-amp-amp-内部命令\" class=\"headerlink\" title=\"外部&amp;&amp;内部命令\"></a>外部&amp;&amp;内部命令</h2><ul>\n<li>:shell 交互式shell</li>\n<li>:!cmd 执行cmd并输出结果</li>\n<li>:! 执行上一次的命令</li>\n<li>:r[ead] !cmd当前光标写入命令结果</li>\n<li>:上下方向键 查找命令</li>\n<li>:[range]co[py] {address} 复制指定范围的行到指定地址，简写为t 理解为copyto</li>\n<li>:[range]m[ove] {address} 移动命令</li>\n<li>:@:重复VIM命令，.重复普通命令</li>\n<li>Ctrl+D补全命令</li>\n<li>:[range] delete [x]</li>\n<li>:[range] yank [x]</li>\n<li>:[range] put [x]</li>\n<li>:[range] copy {address}</li>\n<li>:[range] move {address}</li>\n<li>:[range] normal {commands}</li>\n<li>:[range] join</li>\n<li>:[range] substitute/{pattern}/{string}/[flags]</li>\n<li>:[range] global/{pattern}/[cmd]</li>\n</ul>\n<h2 id=\"选项设置\"><a href=\"#选项设置\" class=\"headerlink\" title=\"选项设置\"></a>选项设置</h2><ul>\n<li>set xxx 设置某项</li>\n<li>set noxxx 取消某项设置</li>\n<li>set xxx! 反置某项值</li>\n<li>set xxx&amp; 恢复默认值</li>\n<li>set xxx? 查询当前状态+</li>\n<li>setlocal 局部有效，set全局有效+</li>\n<li>:set expandtab 将tab转换为space</li>\n<li>:set tabstop=4 制表符宽度 tabstop=4或ts=4</li>\n<li>:retab 按照设定值重新缩进</li>\n<li>:set shiftwidth=4 行缩进时宽度</li>\n<li>:set ai 自动缩进</li>\n</ul>\n<h2 id=\"代码格式化\"><a href=\"#代码格式化\" class=\"headerlink\" title=\"代码格式化\"></a>代码格式化</h2><ul>\n<li>全文格式化 gg=G，比如粘贴的内容</li>\n<li>当前行格式化缩进 ==</li>\n<li>当前光标所在行的后N行格式化 N==</li>\n<li>选中行格式化，=</li>\n</ul>\n<p>转载自<a href=\"https://zhuanlan.zhihu.com/p/27232184\" target=\"_blank\" rel=\"external\">VIM常用操作命令梳理</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"打开关闭\"><a href=\"#打开关闭\" class=\"headerlink\" title=\"打开关闭\"></a>打开关闭</h2><ul>\n<li>vim xxx，vim +num xxx 命令行打开文件</li>\n<li>vim + filename 启动跳到文件结尾</li>\n<li>vim +143 filename 打开跳到143行 调试代码有用</li>\n<li>vim +/search-term filename 跳到第一个匹配</li>\n<li>vim +/search-term filename 跳到最后一个匹配</li>\n<li>vim -t tag</li>\n<li>vim —cmd command filename 加载文件前执行命令</li>\n<li>vim -c “:50” filename 加载文件后执行命令</li>\n<li>:e xxx vim中打开文件</li>\n<li>:w[rite],:up[date],:w!,up!，:wall保存文件</li>\n<li>:x,:q,:qa,:q!,退出文件</li>\n<li>gf 普通模式下打开文件名为光标处文字的文件</li>\n<li>Ctrl+W f 新窗口打开匹配的文件</li>\n<li>Ctrl+W fg 新tab页打开匹配的文件</li>\n</ul>\n<h2 id=\"代码相关\"><a href=\"#代码相关\" class=\"headerlink\" title=\"代码相关\"></a>代码相关</h2><ul>\n<li>&lt;,&gt;对代码进行缩进</li>\n<li>&lt;&lt;,&gt;&gt;用于调整源代码缩进格式</li>\n<li>= 用户自动格式化代码缩进，gg=G 即为全文格式化</li>\n<li>zf,zo,zc,za,zR,zM对代码进行折叠打开折叠</li>\n<li>Ctrl+],Ctrl+T查找函数的定义和返回</li>\n<li>大写K，看光标所指标识符的man帮助","more":"<h2 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h2></li>\n<li>h,j,k,l ←↓↑→ 移动光标，相当于四个方向键</li>\n<li>w,b,e,ge 以单词的方式移动，可以nw，nb，ne，nge的方式移动n个单词的距离</li>\n<li>W，B，E，gE会以连续字符串的方式移动</li>\n<li>0,^,g_,移动到行首，行尾以及后面第n行的行尾</li>\n<li>gg,G,nG，ngg 移动到文件头和文件尾，以及移动到文件的第n行，‘可以回到上一次的地方</li>\n<li>H,M,L n%定位光标到当前屏幕的某个地方</li>\n<li>{,},[[,]],(,) 段落，区块，语句导航</li>\n<li>z回车，z-,zz.当前行置顶，置底，置中</li>\n<li>Ctrl+G显示当前位置信息</li>\n<li>Ctrl+F，Ctrl+B，Ctrl+U,Ctrl+D,Ctrl+E,Ctrl+Y,向前后滚动一屏，半屏，一行</li>\n<li>Ctrl+I,Ctrl+O 光标移到下一次和上一次的地方，Ctrl+I 和Tab功能一样</li>\n<li>‘,”,[,]为跳转前的位置，最后编辑的光标位置，最后修改的开始位置，最后修改的结束位置</li>\n<li>Ctrl+^ 在两个文件之间轮换</li>\n<li>‘“,’.，`.上一次光标的地方，上一次修改的地方</li>\n</ul>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><ul>\n<li>i,a,o,I,A,O分别进入插入模式</li>\n<li>o 在当前光标所在行下方插入一行，O在当前光标所在行上方插入一行</li>\n<li>J 删除换行符，合并两行</li>\n<li>Ctrl-R 重做</li>\n<li>u，nu撤销上一次更改，撤销n次更改</li>\n<li>U 撤销整行的更改</li>\n<li>Ctrl+R 重做更改</li>\n<li>Ctrl+L 重新加载屏幕内容</li>\n<li>y,d,p 表示拷贝，删除，粘贴，配置位置描述使用 yw，dw，y0,d0,y,yfa,dfa,yy,dd,D,dG,dgg等，前面可以加数字，表示重复如，3dd,3yy等，也可以加范围，如4,8yy</li>\n<li>%y+.y+,N,My+ 拷贝指定的数据</li>\n<li>:[range] g[lobal[!]] /{pattern}/ [cmd]</li>\n<li>:[range] v[global[!]] /{pattern}/ [cmd]</li>\n<li>n,p,next,previous,Ctrl+^在编辑的文件中切换</li>\n<li>:ls 查看打开的文件</li>\n<li>:e #n 打开标号为ls结果中的文件</li>\n<li>:changes 查看文件变化</li>\n<li>ga查看ASCII,十进制，十六进制</li>\n</ul>\n<h2 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h2><ul>\n<li>/pattern-回车 在文件内向后查找pattern的匹配，n重复，N回退，n前面可以带数字</li>\n<li>?pattern-回车 在文件内向前查找pattern的匹配，n重复，N回退，n前面可以带数字</li>\n<li>f{char}/t{char} 在行内查找下一指定字符， ;重复， ,回退</li>\n<li>F{char}/T{char} 在行内查找上一指定字符， ;重复， ,回退</li>\n<li><em>，#高亮所有匹配光标所在单词，相当于输入了/word,如果想单独匹配单词/\\<word\\>,则需要g</word\\></em>,g# ，gd提留在非注释段的第一个匹配</li>\n<li>\\&lt;,>表示匹配单词的开头和结尾</li>\n<li>.,^,$在查找的过程中作为正则策略，如果需要完全匹配需要转义</li>\n<li>% 查找匹配的括号() [] {}</li>\n</ul>\n<h2 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h2><ul>\n<li>. 重复上次的修改（一定要是修改） 比如说上次删除一个字符，点就是删除一个字符的意思；如果上次是删除一行，点就是删除一行的意思了。</li>\n<li><blockquote>\n<p>G 当前行缩进一个单位（Tab）</p>\n</blockquote>\n</li>\n<li>:[range]s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to，替换当前行</li>\n<li>:[range]%s[ubstitute]/{pattern}/{string}/[flags] 将范围内的from 改为to,替换所有行</li>\n<li>范围可以指定为m,n的数字形式，当个的数字表示特定的行，.表示当前行，如果字符串中本身包含/,则可用+，=替换原来的/</li>\n<li>:[range]s[ubstitute]/{pattern}/{string}/[flags] [count]</li>\n</ul>\n<h2 id=\"外部-amp-amp-内部命令\"><a href=\"#外部-amp-amp-内部命令\" class=\"headerlink\" title=\"外部&amp;&amp;内部命令\"></a>外部&amp;&amp;内部命令</h2><ul>\n<li>:shell 交互式shell</li>\n<li>:!cmd 执行cmd并输出结果</li>\n<li>:! 执行上一次的命令</li>\n<li>:r[ead] !cmd当前光标写入命令结果</li>\n<li>:上下方向键 查找命令</li>\n<li>:[range]co[py] {address} 复制指定范围的行到指定地址，简写为t 理解为copyto</li>\n<li>:[range]m[ove] {address} 移动命令</li>\n<li>:@:重复VIM命令，.重复普通命令</li>\n<li>Ctrl+D补全命令</li>\n<li>:[range] delete [x]</li>\n<li>:[range] yank [x]</li>\n<li>:[range] put [x]</li>\n<li>:[range] copy {address}</li>\n<li>:[range] move {address}</li>\n<li>:[range] normal {commands}</li>\n<li>:[range] join</li>\n<li>:[range] substitute/{pattern}/{string}/[flags]</li>\n<li>:[range] global/{pattern}/[cmd]</li>\n</ul>\n<h2 id=\"选项设置\"><a href=\"#选项设置\" class=\"headerlink\" title=\"选项设置\"></a>选项设置</h2><ul>\n<li>set xxx 设置某项</li>\n<li>set noxxx 取消某项设置</li>\n<li>set xxx! 反置某项值</li>\n<li>set xxx&amp; 恢复默认值</li>\n<li>set xxx? 查询当前状态+</li>\n<li>setlocal 局部有效，set全局有效+</li>\n<li>:set expandtab 将tab转换为space</li>\n<li>:set tabstop=4 制表符宽度 tabstop=4或ts=4</li>\n<li>:retab 按照设定值重新缩进</li>\n<li>:set shiftwidth=4 行缩进时宽度</li>\n<li>:set ai 自动缩进</li>\n</ul>\n<h2 id=\"代码格式化\"><a href=\"#代码格式化\" class=\"headerlink\" title=\"代码格式化\"></a>代码格式化</h2><ul>\n<li>全文格式化 gg=G，比如粘贴的内容</li>\n<li>当前行格式化缩进 ==</li>\n<li>当前光标所在行的后N行格式化 N==</li>\n<li>选中行格式化，=</li>\n</ul>\n<p>转载自<a href=\"https://zhuanlan.zhihu.com/p/27232184\" target=\"_blank\" rel=\"external\">VIM常用操作命令梳理</a></p>"},{"title":"Spring Boot总结","date":"2017-06-05T15:10:56.000Z","_content":"\n[Spring Boot(1)-构建应用实践](http://blog.csdn.net/hguisu/article/details/50956370)\n[Spring boot(2)-配置详解](http://blog.csdn.net/hguisu/article/details/51006252)\n[Spring Boot(3)-使用mysql](http://blog.csdn.net/hguisu/article/details/50977180)\n[Spring boot(4)-应用打包部署](http://blog.csdn.net/hguisu/article/details/51072683)","source":"_posts/tools/[1]SpringBoot.md","raw":"\n---\ntitle: Spring Boot总结\ndate: 2017-06-05 23:10:56\ncategories:\n    - tools\ntags:\n    - Spring\n    - Spring Boot\n    - JAVA\n---\n\n[Spring Boot(1)-构建应用实践](http://blog.csdn.net/hguisu/article/details/50956370)\n[Spring boot(2)-配置详解](http://blog.csdn.net/hguisu/article/details/51006252)\n[Spring Boot(3)-使用mysql](http://blog.csdn.net/hguisu/article/details/50977180)\n[Spring boot(4)-应用打包部署](http://blog.csdn.net/hguisu/article/details/51072683)","slug":"tools/[1]SpringBoot","published":1,"updated":"2017-06-05T15:27:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs000269vvuxvzf5mtb","content":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/50956370\" target=\"_blank\" rel=\"external\">Spring Boot(1)-构建应用实践</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/51006252\" target=\"_blank\" rel=\"external\">Spring boot(2)-配置详解</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/50977180\" target=\"_blank\" rel=\"external\">Spring Boot(3)-使用mysql</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/51072683\" target=\"_blank\" rel=\"external\">Spring boot(4)-应用打包部署</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/50956370\" target=\"_blank\" rel=\"external\">Spring Boot(1)-构建应用实践</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/51006252\" target=\"_blank\" rel=\"external\">Spring boot(2)-配置详解</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/50977180\" target=\"_blank\" rel=\"external\">Spring Boot(3)-使用mysql</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/51072683\" target=\"_blank\" rel=\"external\">Spring boot(4)-应用打包部署</a></p>\n"},{"title":"转换HQL为原生SQL解决Cross Join问题","date":"2017-05-25T10:50:56.000Z","reward":true,"_content":"\n[Hibernate 测试用例](https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43)\n\nHibernate将HQL转换为原生sql的测试用例。\n\n<!--more-->\n\n为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义\n\n```\n{\n    String srcType = \"SaleReturn\";\n    List<Relation> relations = new ArrayList<>();\n    relations.add(new Relation(srcType, \"iLogisticWayId\", \"models.corp.CorprationLogistics\", \"id\"));\n    relations.add(new Relation(srcType, \"iSaleReturnMemoId\", \"models.voucher.VoucherMemo\", \"id\"));\n    metaMap.put(srcType, relations);\n}\n{\n    String srcType = \"SaleReturnDetail\";\n    List<Relation> relations = new ArrayList<>();\n    relations.add(new Relation(srcType, \"cDeliveryNo\", \"models.voucher.SaleReturnPrice\", \"cVoucherNo\"));\n    metaMap.put(srcType, relations);\n}\n```\n\n为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。\n\n```\n{\n\t\"fields\":[\n\t\t{\"name\":\"(num?0)*(price?(goods.price?5))\",\"alias\":\"totalmoney\"},\n\t\t{\"name\":\"belongOrder\"},\n\t\t{\"name\":\"belongOrder.code\"},\n\t\t{\"name\":\"num\",\"aggr\":\"sum\"},\n\t\t{\"name\":\"price\",\"aggr\":\"avg\"},\n\t\t{\"name\":\"1\",\"alias\":\"totalcount\",\"aggr\":\"count\"}\n\t],\n\t\"conditions\":[\n\t\t{\"op\":\"or\",\"items\":[\n\t\t\t\t{\"op\":\"and\",\"items\":[\n\t\t\t\t\t\t{\"name\":\"(num?0)*(price?(goods.price?1))/100\",\"v1\":\"50\",\"op\":\"gt\"},\n\t\t\t\t\t\t{\"name\":\"goods.name\",\"v1\":\"电器\",\"op\":\"leftlike\"},\n\t\t\t\t\t\t{\"name\":\"price\",\"v1\":\"5\",\"v2\":\"10\",\"op\":\"between\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\"op\":\"and\",\"items\":[\n\t\t\t\t\t\t{\"name\":\"belongOrder.status\",\"v1\":\"1,2\",\"op\":\"in\"},\n\t\t\t\t\t\t{\"name\":\"belongOrder.belongUser\",\"op\":\"is_not_null\"}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"groups\":[\n\t\t{\"name\":\"belongOrder\"},\n\t\t{\"name\":\"belongOrder.code\"}\n\t],\n\t\"orders\":[\n\t\t{\"name\":\"belongOrder.code\",\"order\":\"desc\"}\n\t],\n\t\"pager\":{\"pageIndex\":1,\"pageSize\":10}\n}\n```\n\n这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。\n\n所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。\n这样既不失高效，又能用上hql的面向对象。\n\n**但是据说Hibernate在5.1之后已经解决了cross join的问题**\n[Hibernate ORM](https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC)\n\n回头可以试一下。","source":"_posts/tools/转换HQL为原生SQL解决Cross Join问题.md","raw":"\n---\ntitle: 转换HQL为原生SQL解决Cross Join问题\ndate: 2017-05-25 18:50:56\nreward: true\ncategories:\n    - tools\ntags:\n    - Hibernate\n    - HQL\n    - Cross Join\n---\n\n[Hibernate 测试用例](https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43)\n\nHibernate将HQL转换为原生sql的测试用例。\n\n<!--more-->\n\n为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义\n\n```\n{\n    String srcType = \"SaleReturn\";\n    List<Relation> relations = new ArrayList<>();\n    relations.add(new Relation(srcType, \"iLogisticWayId\", \"models.corp.CorprationLogistics\", \"id\"));\n    relations.add(new Relation(srcType, \"iSaleReturnMemoId\", \"models.voucher.VoucherMemo\", \"id\"));\n    metaMap.put(srcType, relations);\n}\n{\n    String srcType = \"SaleReturnDetail\";\n    List<Relation> relations = new ArrayList<>();\n    relations.add(new Relation(srcType, \"cDeliveryNo\", \"models.voucher.SaleReturnPrice\", \"cVoucherNo\"));\n    metaMap.put(srcType, relations);\n}\n```\n\n为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。\n\n```\n{\n\t\"fields\":[\n\t\t{\"name\":\"(num?0)*(price?(goods.price?5))\",\"alias\":\"totalmoney\"},\n\t\t{\"name\":\"belongOrder\"},\n\t\t{\"name\":\"belongOrder.code\"},\n\t\t{\"name\":\"num\",\"aggr\":\"sum\"},\n\t\t{\"name\":\"price\",\"aggr\":\"avg\"},\n\t\t{\"name\":\"1\",\"alias\":\"totalcount\",\"aggr\":\"count\"}\n\t],\n\t\"conditions\":[\n\t\t{\"op\":\"or\",\"items\":[\n\t\t\t\t{\"op\":\"and\",\"items\":[\n\t\t\t\t\t\t{\"name\":\"(num?0)*(price?(goods.price?1))/100\",\"v1\":\"50\",\"op\":\"gt\"},\n\t\t\t\t\t\t{\"name\":\"goods.name\",\"v1\":\"电器\",\"op\":\"leftlike\"},\n\t\t\t\t\t\t{\"name\":\"price\",\"v1\":\"5\",\"v2\":\"10\",\"op\":\"between\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\"op\":\"and\",\"items\":[\n\t\t\t\t\t\t{\"name\":\"belongOrder.status\",\"v1\":\"1,2\",\"op\":\"in\"},\n\t\t\t\t\t\t{\"name\":\"belongOrder.belongUser\",\"op\":\"is_not_null\"}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"groups\":[\n\t\t{\"name\":\"belongOrder\"},\n\t\t{\"name\":\"belongOrder.code\"}\n\t],\n\t\"orders\":[\n\t\t{\"name\":\"belongOrder.code\",\"order\":\"desc\"}\n\t],\n\t\"pager\":{\"pageIndex\":1,\"pageSize\":10}\n}\n```\n\n这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。\n\n所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。\n这样既不失高效，又能用上hql的面向对象。\n\n**但是据说Hibernate在5.1之后已经解决了cross join的问题**\n[Hibernate ORM](https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC)\n\n回头可以试一下。","slug":"tools/转换HQL为原生SQL解决Cross Join问题","published":1,"updated":"2017-06-03T16:14:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs100279vvuz325mfm9","content":"<p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n<p>Hibernate将HQL转换为原生sql的测试用例。</p>\n<a id=\"more\"></a>\n<p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n<p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n<p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n<p>回头可以试一下。</p>\n","site":{"data":{}},"excerpt":"<p><a href=\"https://github.com/hibernate/hibernate-orm/blob/0a2a5c622e3eb30724e80bc8661c0ac55ebfb2be/hibernate-core/src/test/java/org/hibernate/test/locale/LocaleTest.java#L43\" target=\"_blank\" rel=\"external\">Hibernate 测试用例</a></p>\n<p>Hibernate将HQL转换为原生sql的测试用例。</p>","more":"<p>为了能够让Gson直接解析实体类时不会出现栈溢出和死循环，我们去掉了实体类通过@OneToOne,@OneToMany,@ManyToMany注解的方式来描述元数据。而是通过元数据描述的形式来定义</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturn&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iLogisticWayId&quot;, &quot;models.corp.CorprationLogistics&quot;, &quot;id&quot;));</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;iSaleReturnMemoId&quot;, &quot;models.voucher.VoucherMemo&quot;, &quot;id&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div><div class=\"line\">&#123;</div><div class=\"line\">    String srcType = &quot;SaleReturnDetail&quot;;</div><div class=\"line\">    List&lt;Relation&gt; relations = new ArrayList&lt;&gt;();</div><div class=\"line\">    relations.add(new Relation(srcType, &quot;cDeliveryNo&quot;, &quot;models.voucher.SaleReturnPrice&quot;, &quot;cVoucherNo&quot;));</div><div class=\"line\">    metaMap.put(srcType, relations);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>为了最终能够更通用的处理业务关系，我们选择通过元数据构造查询方案的方式来处理复杂业务数据查询。前端通过构造强大可自由定制的元数据查询方案来统一处理集合数据查询。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">\t&quot;fields&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?5))&quot;,&quot;alias&quot;:&quot;totalmoney&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;num&quot;,&quot;aggr&quot;:&quot;sum&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;aggr&quot;:&quot;avg&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;1&quot;,&quot;alias&quot;:&quot;totalcount&quot;,&quot;aggr&quot;:&quot;count&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;conditions&quot;:[</div><div class=\"line\">\t\t&#123;&quot;op&quot;:&quot;or&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;(num?0)*(price?(goods.price?1))/100&quot;,&quot;v1&quot;:&quot;50&quot;,&quot;op&quot;:&quot;gt&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;goods.name&quot;,&quot;v1&quot;:&quot;电器&quot;,&quot;op&quot;:&quot;leftlike&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;price&quot;,&quot;v1&quot;:&quot;5&quot;,&quot;v2&quot;:&quot;10&quot;,&quot;op&quot;:&quot;between&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;,</div><div class=\"line\">\t\t\t\t&#123;&quot;op&quot;:&quot;and&quot;,&quot;items&quot;:[</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.status&quot;,&quot;v1&quot;:&quot;1,2&quot;,&quot;op&quot;:&quot;in&quot;&#125;,</div><div class=\"line\">\t\t\t\t\t\t&#123;&quot;name&quot;:&quot;belongOrder.belongUser&quot;,&quot;op&quot;:&quot;is_not_null&quot;&#125;</div><div class=\"line\">\t\t\t\t\t]</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;groups&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder&quot;&#125;,</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;orders&quot;:[</div><div class=\"line\">\t\t&#123;&quot;name&quot;:&quot;belongOrder.code&quot;,&quot;order&quot;:&quot;desc&quot;&#125;</div><div class=\"line\">\t],</div><div class=\"line\">\t&quot;pager&quot;:&#123;&quot;pageIndex&quot;:1,&quot;pageSize&quot;:10&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>这样的数据经过后台处理后，为了能结合实体对象处理，最终会生成hql，但是因为没有通过Hibernate的方式定义实体对象的数据关系，最终生成的hql在生成最终的原生sql时会变成通过cross join的方式处理数据关联。但是其实因为这些数据只是没有通过hql的方式定义，他们之间的关系完全是left join或者inner join的。</p>\n<p>所以我们的方案是通过查询方案生成hql后，通过类似Hibernate测试用例中所用的方式来将hql处理成原生sql后再将原生sql中的cross join替换成left join。最终再以原生sql的方式来处理。当然这是基于我们数据处理的方式和关系决定的。<br>这样既不失高效，又能用上hql的面向对象。</p>\n<p><strong>但是据说Hibernate在5.1之后已经解决了cross join的问题</strong><br><a href=\"https://hibernate.atlassian.net/projects/HHH/issues/HHH-16?filter=allissues&amp;orderby=votes+DESC%2C+priority+DESC%2C+updated+DESC\" target=\"_blank\" rel=\"external\">Hibernate ORM</a></p>\n<p>回头可以试一下。</p>"},{"title":"Mysql优化总结","date":"2017-06-05T14:40:56.000Z","_content":"[SQL优化大全](http://blog.csdn.net/hguisu/article/details/5731629)\n[MySQL优化大全](http://blog.csdn.net/hguisu/article/details/5713180)","source":"_posts/tuning/[1]Mysql优化总结.md","raw":"\n---\ntitle: Mysql优化总结\ndate: 2017-06-05 22:40:56\ncategories:\n    - tuning\ntags:\n    - mysql\n    - 性能优化\n---\n[SQL优化大全](http://blog.csdn.net/hguisu/article/details/5731629)\n[MySQL优化大全](http://blog.csdn.net/hguisu/article/details/5713180)","slug":"tuning/[1]Mysql优化总结","published":1,"updated":"2017-06-06T01:37:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs2002a9vvu19l2kih6","content":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/5731629\" target=\"_blank\" rel=\"external\">SQL优化大全</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/5713180\" target=\"_blank\" rel=\"external\">MySQL优化大全</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/5731629\" target=\"_blank\" rel=\"external\">SQL优化大全</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/5713180\" target=\"_blank\" rel=\"external\">MySQL优化大全</a></p>\n"},{"title":"TCP命令及故障排查","date":"2017-06-05T13:40:46.000Z","reward":true,"_content":"\n## linux查看tcp的状态命令\n\n### netstat用法\n* netstat -nat  查看TCP各个状态的数量\n```markdown\nusage: netstat [-vWeenNcCF] [<Af>] -r         netstat {-V|--version|-h|--help}\n       netstat [-vWnNcaeol] [<Socket> ...]\n       netstat { [-vWeenNac] -I[<Iface>] | [-veenNac] -i | [-cnNe] -M | -s [-6tuw] } [delay]\n\n        -r, --route              display routing table\n        -I, --interfaces=<Iface> display interface table for <Iface>\n        -i, --interfaces         display interface table\n        -g, --groups             display multicast group memberships\n        -s, --statistics         display networking statistics (like SNMP)\n        -M, --masquerade         display masqueraded connections\n\n        -v, --verbose            be verbose\n        -W, --wide               don't truncate IP addresses\n        -n, --numeric            don't resolve names\n        --numeric-hosts          don't resolve host names\n        --numeric-ports          don't resolve port names\n        --numeric-users          don't resolve user names\n        -N, --symbolic           resolve hardware names\n        -e, --extend             display other/more information\n        -p, --programs           display PID/Program name for sockets\n        -o, --timers             display timers\n        -c, --continuous         continuous listing\n\n        -l, --listening          display listening server sockets\n        -a, --all                display all sockets (default: connected)\n        -F, --fib                display Forwarding Information Base (default)\n        -C, --cache              display routing cache instead of FIB\n        -Z, --context            display SELinux security context for sockets\n\n  <Socket>={-t|--tcp} {-u|--udp} {-U|--udplite} {-w|--raw} {-x|--unix}\n           --ax25 --ipx --netrom\n  <AF>=Use '-6|-4' or '-A <af>' or '--<af>'; default: inet\n  List of possible address families (which support routing):\n    inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25)\n    netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP)\n    x25 (CCITT X.25)\n```\n其中\n* -a (all)显示所有选项，默认不显示LISTEN相关\n* -t (tcp)仅显示tcp相关选项\n* -u (udp)仅显示udp相关选项\n* -n 拒绝显示别名，能显示数字的全部转化成数字\n* -l 仅列出有在 Listen (监听) 的服務状态\n* -p 显示建立相关链接的程序名\n* -r 显示路由信息，路由表\n* -e 显示扩展信息，例如uid等\n* -s 按各个协议进行统计\n* -c 每隔一个固定时间，执行该netstat命令。\n提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到\n\n### lsof用法\n* lsof  -i:port  可以检测到打开套接字的状况\n```markdown\n-?|-h list help          -a AND selections (OR)     -b avoid kernel blocks\n  -c c  cmd c ^c /c/[bix]  +c w  COMMAND width (9)    +d s  dir s files\n  -d s  select by FD set   +D D  dir D tree *SLOW?*   -i select IPv[46] files\n  -l list UID numbers      -n no host names           -N select NFS files\n  -o list file offset      -O no overhead *RISKY*     -P no port names\n  -R list paRent PID       -s list file size          -t terse listing\n  -T disable TCP/TPI info  -U select Unix socket      -v list version info\n  -V verbose search        +|-w  Warnings (+)         -- end option scan\n  +f|-f  +filesystem or -file names     +|-f[cgG] Ct flaGs \n  -F [f] select fields; -F? for help  \n  +|-L [l] list (+) suppress (-) link counts < l (0 = all; default = 0)\n  +|-M   portMap registration (-)       -o o   o 0t offset digits (8)\n  -p s   exclude(^)|select PIDs         -S [t] t second stat timeout (15)\n  -T fqs TCP/TPI Fl,Q,St (s) info\n  -g [s] exclude(^)|select and print process group IDs\n  -i i   select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]\n  +|-r [t[m<fmt>]] repeat every t seconds (15);  + until no files, - forever.\n       An optional suffix to t is m<fmt>; m must separate t from <fmt> and\n      <fmt> is an strftime(3) format for the marker line.\n  -s p:s  exclude(^)|select protocol (p = TCP|UDP) states by name(s).\n  -u s   exclude(^)|select login|UID set s\n  -x [fl] cross over +d|+D File systems or symbolic Links\n  names  select named files or files on named file systems\n\n```\n\n### sar用法\n* sar -n SOCK 查看tcp创建的连接数\n```markdown\nUsage: sar [ options ] [ <interval> [ <count> ] ]\nMain options and reports:\n\t-b\tI/O and transfer rate statistics\n\t-B\tPaging statistics\n\t-d\tBlock device statistics\n\t-H\tHugepages utilization statistics\n\t-I { <int> | SUM | ALL | XALL }\n\t\tInterrupts statistics\n\t-m { <keyword> [,...] | ALL }\n\t\tPower management statistics\n\t\tKeywords are:\n\t\tCPU\tCPU instantaneous clock frequency\n\t\tFAN\tFans speed\n\t\tFREQ\tCPU average clock frequency\n\t\tIN\tVoltage inputs\n\t\tTEMP\tDevices temperature\n\t\tUSB\tUSB devices plugged into the system\n\t-n { <keyword> [,...] | ALL }\n\t\tNetwork statistics\n\t\tKeywords are:\n\t\tDEV\tNetwork interfaces\n\t\tEDEV\tNetwork interfaces (errors)\n\t\tNFS\tNFS client\n\t\tNFSD\tNFS server\n\t\tSOCK\tSockets\t(v4)\n\t\tIP\tIP traffic\t(v4)\n\t\tEIP\tIP traffic\t(v4) (errors)\n\t\tICMP\tICMP traffic\t(v4)\n\t\tEICMP\tICMP traffic\t(v4) (errors)\n\t\tTCP\tTCP traffic\t(v4)\n\t\tETCP\tTCP traffic\t(v4) (errors)\n\t\tUDP\tUDP traffic\t(v4)\n\t\tSOCK6\tSockets\t(v6)\n\t\tIP6\tIP traffic\t(v6)\n\t\tEIP6\tIP traffic\t(v6) (errors)\n\t\tICMP6\tICMP traffic\t(v6)\n\t\tEICMP6\tICMP traffic\t(v6) (errors)\n\t\tUDP6\tUDP traffic\t(v6)\n\t-q\tQueue length and load average statistics\n\t-r\tMemory utilization statistics\n\t-R\tMemory statistics\n\t-S\tSwap space utilization statistics\n\t-u [ ALL ]\n\t\tCPU utilization statistics\n\t-v\tKernel table statistics\n\t-w\tTask creation and system switching statistics\n\t-W\tSwapping statistics\n\t-y\tTTY device statistics\n```\n\n### tcpdump用法\n* tcpdump -iany tcp port 9000 对tcp端口为9000的进行抓包\n```markdown\n-A  以ASCII码方式显示每一个数据包(不会显示数据包中链路层头部信息). 在抓取包含网页数据的数据包时, 可方便查看数据(nt: 即Handy for capturing web pages).\n\n-c  count\n    tcpdump将在接受到count个数据包后退出.\n\n-C  file-size (nt: 此选项用于配合-w file 选项使用)\n    该选项使得tcpdump 在把原始数据包直接保存到文件中之前, 检查此文件大小是否超过file-size. 如果超过了, 将关闭此文件,另创一个文件继续用于原始数据包的记录. 新创建的文件名与-w 选项指定的文件名一致, 但文件名后多了一个数字.该数字会从1开始随着新创建文件的增多而增加. file-size的单位是百万字节(nt: 这里指1,000,000个字节,并非1,048,576个字节, 后者是以1024字节为1k, 1024k字节为1M计算所得, 即1M=1024 ＊ 1024 ＝ 1,048,576)\n\n-d  以容易阅读的形式,在标准输出上打印出编排过的包匹配码, 随后tcpdump停止.(nt | rt: human readable, 容易阅读的,通常是指以ascii码来打印一些信息. compiled, 编排过的. packet-matching code, 包匹配码,含义未知, 需补充)\n\n-dd 以C语言的形式打印出包匹配码.\n\n-ddd 以十进制数的形式打印出包匹配码(会在包匹配码之前有一个附加的'count'前缀).\n\n-D  打印系统中所有tcpdump可以在其上进行抓包的网络接口. 每一个接口会打印出数字编号, 相应的接口名字, 以及可能的一个网络接口描述. 其中网络接口名字和数字编号可以用在tcpdump 的-i flag 选项(nt: 把名字或数字代替flag), 来指定要在其上抓包的网络接口.\n\n    此选项在不支持接口列表命令的系统上很有用(nt: 比如, Windows 系统, 或缺乏 ifconfig -a 的UNIX系统); 接口的数字编号在windows 2000 或其后的系统中很有用, 因为这些系统上的接口名字比较复杂, 而不易使用.\n\n    如果tcpdump编译时所依赖的libpcap库太老,-D 选项不会被支持, 因为其中缺乏 pcap_findalldevs()函数.\n\n-e  每行的打印输出中将包括数据包的数据链路层头部信息\n\n-E  spi@ipaddr algo:secret,...\n\n    可通过spi@ipaddr algo:secret 来解密IPsec ESP包(nt | rt:IPsec Encapsulating Security Payload,IPsec 封装安全负载, IPsec可理解为, 一整套对ip数据包的加密协议, ESP 为整个IP 数据包或其中上层协议部分被加密后的数据,前者的工作模式称为隧道模式; 后者的工作模式称为传输模式 . 工作原理, 另需补充).\n\n    需要注意的是, 在终端启动tcpdump 时, 可以为IPv4 ESP packets 设置密钥(secret）.\n\n    可用于加密的算法包括des-cbc, 3des-cbc, blowfish-cbc, rc3-cbc, cast128-cbc, 或者没有(none).默认的是des-cbc(nt: des, Data Encryption Standard, 数据加密标准, 加密算法未知, 另需补充).secret 为用于ESP 的密钥, 使用ASCII 字符串方式表达. 如果以 0x 开头, 该密钥将以16进制方式读入.\n\n    该选项中ESP 的定义遵循RFC2406, 而不是 RFC1827. 并且, 此选项只是用来调试的, 不推荐以真实密钥(secret)来使用该选项, 因为这样不安全: 在命令行中输入的secret 可以被其他人通过ps 等命令查看到.\n\n    除了以上的语法格式(nt: 指spi@ipaddr algo:secret), 还可以在后面添加一个语法输入文件名字供tcpdump 使用(nt：即把spi@ipaddr algo:secret,... 中...换成一个语法文件名). 此文件在接受到第一个ESP　包时会打开此文件, 所以最好此时把赋予tcpdump 的一些特权取消(nt: 可理解为, 这样防范之后, 当该文件为恶意编写时,不至于造成过大损害).\n\n-f  显示外部的IPv4 地址时(nt: foreign IPv4 addresses, 可理解为, 非本机ip地址), 采用数字方式而不是名字.(此选项是用来对付Sun公司的NIS服务器的缺陷(nt: NIS, 网络信息服务, tcpdump 显示外部地址的名字时会用到她提供的名称服务): 此NIS服务器在查询非本地地址名字时,常常会陷入无尽的查询循环).\n\n    由于对外部(foreign)IPv4地址的测试需要用到本地网络接口(nt: tcpdump 抓包时用到的接口)及其IPv4 地址和网络掩码. 如果此地址或网络掩码不可用, 或者此接口根本就没有设置相应网络地址和网络掩码(nt: linux 下的 'any' 网络接口就不需要设置地址和掩码, 不过此'any'接口可以收到系统中所有接口的数据包), 该选项不能正常工作.\n\n-F  file\n    使用file 文件作为过滤条件表达式的输入, 此时命令行上的输入将被忽略.\n\n-i  interface\n\n    指定tcpdump 需要监听的接口.  如果没有指定, tcpdump 会从系统接口列表中搜寻编号最小的已配置好的接口(不包括 loopback 接口).一但找到第一个符合条件的接口, 搜寻马上结束.\n\n    在采用2.2版本或之后版本内核的Linux 操作系统上, 'any' 这个虚拟网络接口可被用来接收所有网络接口上的数据包(nt: 这会包括目的是该网络接口的, 也包括目的不是该网络接口的). 需要注意的是如果真实网络接口不能工作在'混杂'模式(promiscuous)下,则无法在'any'这个虚拟的网络接口上抓取其数据包.\n\n    如果 -D 标志被指定, tcpdump会打印系统中的接口编号，而该编号就可用于此处的interface 参数.\n\n-l  对标准输出进行行缓冲(nt: 使标准输出设备遇到一个换行符就马上把这行的内容打印出来).在需要同时观察抓包打印以及保存抓包记录的时候很有用. 比如, 可通过以下命令组合来达到此目的:\n    ``tcpdump  -l  |  tee dat'' 或者 ``tcpdump  -l   > dat  &  tail  -f  dat''.(nt: 前者使用tee来把tcpdump 的输出同时放到文件dat和标准输出中, 而后者通过重定向操作'>', 把tcpdump的输出放到dat 文件中, 同时通过tail把dat文件中的内容放到标准输出中)\n\n-L  列出指定网络接口所支持的数据链路层的类型后退出.(nt: 指定接口通过-i 来指定)\n\n-m  module\n    通过module 指定的file 装载SMI MIB 模块(nt: SMI，Structure of Management Information, 管理信息结构MIB, Management Information Base, 管理信息库. 可理解为, 这两者用于SNMP(Simple Network Management Protoco)协议数据包的抓取. 具体SNMP 的工作原理未知, 另需补充).\n\n    此选项可多次使用, 从而为tcpdump 装载不同的MIB 模块.\n\n-M  secret  如果TCP 数据包(TCP segments)有TCP-MD5选项(在RFC 2385有相关描述), 则为其摘要的验证指定一个公共的密钥secret.\n\n-n  不对地址(比如, 主机地址, 端口号)进行数字表示到名字表示的转换.\n\n-N  不打印出host 的域名部分. 比如, 如果设置了此选现, tcpdump 将会打印'nic' 而不是 'nic.ddn.mil'.\n\n-O  不启用进行包匹配时所用的优化代码. 当怀疑某些bug是由优化代码引起的, 此选项将很有用.\n\n-p  一般情况下, 把网络接口设置为非'混杂'模式. 但必须注意 , 在特殊情况下此网络接口还是会以'混杂'模式来工作； 从而, '-p' 的设与不设, 不能当做以下选现的代名词:'ether host {local-hw-add}' 或  'ether broadcast'(nt: 前者表示只匹配以太网地址为host 的包, 后者表示匹配以太网地址为广播地址的数据包).\n\n-q  快速(也许用'安静'更好?)打印输出. 即打印很少的协议相关信息, 从而输出行都比较简短.\n\n-R  设定tcpdump 对 ESP/AH 数据包的解析按照 RFC1825而不是RFC1829(nt: AH, 认证头, ESP， 安全负载封装, 这两者会用在IP包的安全传输机制中). 如果此选项被设置, tcpdump 将不会打印出'禁止中继'域(nt: relay prevention field). 另外,由于ESP/AH规范中没有规定ESP/AH数据包必须拥有协议版本号域,所以tcpdump不能从收到的ESP/AH数据包中推导出协议版本号.\n\n-r  file\n    从文件file 中读取包数据. 如果file 字段为 '-' 符号, 则tcpdump 会从标准输入中读取包数据.\n\n-S  打印TCP 数据包的顺序号时, 使用绝对的顺序号, 而不是相对的顺序号.(nt: 相对顺序号可理解为, 相对第一个TCP 包顺序号的差距,比如, 接受方收到第一个数据包的绝对顺序号为232323, 对于后来接收到的第2个,第3个数据包, tcpdump会打印其序列号为1, 2分别表示与第一个数据包的差距为1 和 2. 而如果此时-S 选项被设置, 对于后来接收到的第2个, 第3个数据包会打印出其绝对顺序号:232324, 232325).\n\n-s  snaplen\n    设置tcpdump的数据包抓取长度为snaplen, 如果不设置默认将会是68字节(而支持网络接口分接头(nt: NIT, 上文已有描述,可搜索'网络接口分接头'关键字找到那里)的SunOS系列操作系统中默认的也是最小值是96).68字节对于IP, ICMP(nt: Internet Control Message Protocol,因特网控制报文协议), TCP 以及 UDP 协议的报文已足够, 但对于名称服务(nt: 可理解为dns, nis等服务), NFS服务相关的数据包会产生包截短. 如果产生包截短这种情况, tcpdump的相应打印输出行中会出现''[|proto]''的标志（proto 实际会显示为被截短的数据包的相关协议层次). 需要注意的是, 采用长的抓取长度(nt: snaplen比较大), 会增加包的处理时间, 并且会减少tcpdump 可缓存的数据包的数量， 从而会导致数据包的丢失. 所以, 在能抓取我们想要的包的前提下, 抓取长度越小越好.把snaplen 设置为0 意味着让tcpdump自动选择合适的长度来抓取数据包.\n\n-T  type\n    强制tcpdump按type指定的协议所描述的包结构来分析收到的数据包.  目前已知的type 可取的协议为:\n    aodv (Ad-hoc On-demand Distance Vector protocol, 按需距离向量路由协议, 在Ad hoc(点对点模式)网络中使用),\n    cnfp (Cisco  NetFlow  protocol),  rpc(Remote Procedure Call), rtp (Real-Time Applications protocol),\n    rtcp (Real-Time Applications con-trol protocol), snmp (Simple Network Management Protocol),\n    tftp (Trivial File Transfer Protocol, 碎文件协议), vat (Visual Audio Tool, 可用于在internet 上进行电\n    视电话会议的应用层协议), 以及wb (distributed White Board, 可用于网络会议的应用层协议).\n\n-t     在每行输出中不打印时间戳\n\n-tt    不对每行输出的时间进行格式处理(nt: 这种格式一眼可能看不出其含义, 如时间戳打印成1261798315)\n\n-ttt   tcpdump 输出时, 每两行打印之间会延迟一个段时间(以毫秒为单位)\n\n-tttt  在每行打印的时间戳之前添加日期的打印\n\n-u     打印出未加密的NFS 句柄(nt: handle可理解为NFS 中使用的文件句柄, 这将包括文件夹和文件夹中的文件)\n\n-U    使得当tcpdump在使用-w 选项时, 其文件写入与包的保存同步.(nt: 即, 当每个数据包被保存时, 它将及时被写入文件中,而不是等文件的输出缓冲已满时才真正写入此文件)\n\n      -U 标志在老版本的libcap库(nt: tcpdump 所依赖的报文捕获库)上不起作用, 因为其中缺乏pcap_cump_flush()函数.\n\n-v    当分析和打印的时候, 产生详细的输出. 比如, 包的生存时间, 标识, 总长度以及IP包的一些选项. 这也会打开一些附加的包完整性检测, 比如对IP或ICMP包头部的校验和.\n\n-vv   产生比-v更详细的输出. 比如, NFS回应包中的附加域将会被打印, SMB数据包也会被完全解码.\n\n-vvv  产生比-vv更详细的输出. 比如, telent 时所使用的SB, SE 选项将会被打印, 如果telnet同时使用的是图形界面,\n      其相应的图形选项将会以16进制的方式打印出来(nt: telnet 的SB,SE选项含义未知, 另需补充).\n\n-w    把包数据直接写入文件而不进行分析和打印输出. 这些包数据可在随后通过-r 选项来重新读入并进行分析和打印.\n\n-W    filecount\n      此选项与-C 选项配合使用, 这将限制可打开的文件数目, 并且当文件数据超过这里设置的限制时, 依次循环替代之前的文件, 这相当于一个拥有filecount 个文件的文件缓冲池. 同时, 该选项会使得每个文件名的开头会出现足够多并用来占位的0, 这可以方便这些文件被正确的排序.\n\n-x    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据(但不包括连接层的头部).总共打印的数据大小不会超过整个数据包的大小与snaplen 中的最小值. 必须要注意的是, 如果高层协议数据没有snaplen 这么长,并且数据链路层(比如, Ethernet层)有填充数据, 则这些填充数据也会被打印.(nt: so for link  layers  that pad, 未能衔接理解和翻译, 需补充 )\n\n-xx   tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据, 其中包括数据链路层的头部.\n\n-X    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据(但不包括连接层的头部).这对于分析一些新协议的数据包很方便.\n\n-XX   当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据, 其中包括数据链路层的头部.这对于分析一些新协议的数据包很方便.\n\n-y    datalinktype\n      设置tcpdump 只捕获数据链路层协议类型是datalinktype的数据包\n\n-Z    user\n      使tcpdump 放弃自己的超级权限(如果以root用户启动tcpdump, tcpdump将会有超级用户权限), 并把当前tcpdump的用户ID设置为user, 组ID设置为user首要所属组的ID(nt: tcpdump 此处可理解为tcpdump 运行之后对应的进程)\n\n```\n[Linux tcpdump命令详解](http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html)\n<!--more-->\n## 网络测试常用命令\n### ping\n检测网络连接的正常与否,主要是测试延时、抖动、丢包率。\n但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。\nping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。\nTTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。\nTTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。\n### traceroute\n跟踪数据包到达网络主机所经过的路由工具\ntraceroute hostname\n### pathping\n是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能\npathping www.baidu.com\n### nslookup\n用于解析域名，一般用来检测本机的DNS设置是否配置正确。\n### mtr\n可以结合ping nslookup tracert 来判断网络的相关特性\n\n## 系统大量TIME_WAIT状态连接的处理\n发现系统存在大量TIME_WAIT状态的连接，可以通过调整内核参数解决：``vi /etc/sysctl.conf`` 加入以下内容：\n```\nnet.ipv4.tcp_syncookies = 1\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.tcp_fin_timeout = 30\n```\n然后执行 ``/sbin/sysctl -p`` 让参数生效。\n```\nnet.ipv4.tcp_syncookies = 1 表示开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；\nnet.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；\nnet.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。\nnet.ipv4.tcp_fin_timeout 修改系統默认的 TIMEOUT 时间\n```\n## 以下相关内容值得学习\n\n[TCP连接的状态详解以及故障排查](http://blog.csdn.net/hguisu/article/details/38700899)\n[TIME_WAIT引起Cannot assign requested address报错](http://blog.csdn.net/hguisu/article/details/10241519)\n\n\n\n","source":"_posts/tuning/TCP连接及故障排查.md","raw":"\n---\ntitle: TCP命令及故障排查\ndate: 2017-06-05 21:40:46\nreward: true\ncategories:\n    - tuning\ntags: \n    - TCP\n---\n\n## linux查看tcp的状态命令\n\n### netstat用法\n* netstat -nat  查看TCP各个状态的数量\n```markdown\nusage: netstat [-vWeenNcCF] [<Af>] -r         netstat {-V|--version|-h|--help}\n       netstat [-vWnNcaeol] [<Socket> ...]\n       netstat { [-vWeenNac] -I[<Iface>] | [-veenNac] -i | [-cnNe] -M | -s [-6tuw] } [delay]\n\n        -r, --route              display routing table\n        -I, --interfaces=<Iface> display interface table for <Iface>\n        -i, --interfaces         display interface table\n        -g, --groups             display multicast group memberships\n        -s, --statistics         display networking statistics (like SNMP)\n        -M, --masquerade         display masqueraded connections\n\n        -v, --verbose            be verbose\n        -W, --wide               don't truncate IP addresses\n        -n, --numeric            don't resolve names\n        --numeric-hosts          don't resolve host names\n        --numeric-ports          don't resolve port names\n        --numeric-users          don't resolve user names\n        -N, --symbolic           resolve hardware names\n        -e, --extend             display other/more information\n        -p, --programs           display PID/Program name for sockets\n        -o, --timers             display timers\n        -c, --continuous         continuous listing\n\n        -l, --listening          display listening server sockets\n        -a, --all                display all sockets (default: connected)\n        -F, --fib                display Forwarding Information Base (default)\n        -C, --cache              display routing cache instead of FIB\n        -Z, --context            display SELinux security context for sockets\n\n  <Socket>={-t|--tcp} {-u|--udp} {-U|--udplite} {-w|--raw} {-x|--unix}\n           --ax25 --ipx --netrom\n  <AF>=Use '-6|-4' or '-A <af>' or '--<af>'; default: inet\n  List of possible address families (which support routing):\n    inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25)\n    netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP)\n    x25 (CCITT X.25)\n```\n其中\n* -a (all)显示所有选项，默认不显示LISTEN相关\n* -t (tcp)仅显示tcp相关选项\n* -u (udp)仅显示udp相关选项\n* -n 拒绝显示别名，能显示数字的全部转化成数字\n* -l 仅列出有在 Listen (监听) 的服務状态\n* -p 显示建立相关链接的程序名\n* -r 显示路由信息，路由表\n* -e 显示扩展信息，例如uid等\n* -s 按各个协议进行统计\n* -c 每隔一个固定时间，执行该netstat命令。\n提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到\n\n### lsof用法\n* lsof  -i:port  可以检测到打开套接字的状况\n```markdown\n-?|-h list help          -a AND selections (OR)     -b avoid kernel blocks\n  -c c  cmd c ^c /c/[bix]  +c w  COMMAND width (9)    +d s  dir s files\n  -d s  select by FD set   +D D  dir D tree *SLOW?*   -i select IPv[46] files\n  -l list UID numbers      -n no host names           -N select NFS files\n  -o list file offset      -O no overhead *RISKY*     -P no port names\n  -R list paRent PID       -s list file size          -t terse listing\n  -T disable TCP/TPI info  -U select Unix socket      -v list version info\n  -V verbose search        +|-w  Warnings (+)         -- end option scan\n  +f|-f  +filesystem or -file names     +|-f[cgG] Ct flaGs \n  -F [f] select fields; -F? for help  \n  +|-L [l] list (+) suppress (-) link counts < l (0 = all; default = 0)\n  +|-M   portMap registration (-)       -o o   o 0t offset digits (8)\n  -p s   exclude(^)|select PIDs         -S [t] t second stat timeout (15)\n  -T fqs TCP/TPI Fl,Q,St (s) info\n  -g [s] exclude(^)|select and print process group IDs\n  -i i   select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]\n  +|-r [t[m<fmt>]] repeat every t seconds (15);  + until no files, - forever.\n       An optional suffix to t is m<fmt>; m must separate t from <fmt> and\n      <fmt> is an strftime(3) format for the marker line.\n  -s p:s  exclude(^)|select protocol (p = TCP|UDP) states by name(s).\n  -u s   exclude(^)|select login|UID set s\n  -x [fl] cross over +d|+D File systems or symbolic Links\n  names  select named files or files on named file systems\n\n```\n\n### sar用法\n* sar -n SOCK 查看tcp创建的连接数\n```markdown\nUsage: sar [ options ] [ <interval> [ <count> ] ]\nMain options and reports:\n\t-b\tI/O and transfer rate statistics\n\t-B\tPaging statistics\n\t-d\tBlock device statistics\n\t-H\tHugepages utilization statistics\n\t-I { <int> | SUM | ALL | XALL }\n\t\tInterrupts statistics\n\t-m { <keyword> [,...] | ALL }\n\t\tPower management statistics\n\t\tKeywords are:\n\t\tCPU\tCPU instantaneous clock frequency\n\t\tFAN\tFans speed\n\t\tFREQ\tCPU average clock frequency\n\t\tIN\tVoltage inputs\n\t\tTEMP\tDevices temperature\n\t\tUSB\tUSB devices plugged into the system\n\t-n { <keyword> [,...] | ALL }\n\t\tNetwork statistics\n\t\tKeywords are:\n\t\tDEV\tNetwork interfaces\n\t\tEDEV\tNetwork interfaces (errors)\n\t\tNFS\tNFS client\n\t\tNFSD\tNFS server\n\t\tSOCK\tSockets\t(v4)\n\t\tIP\tIP traffic\t(v4)\n\t\tEIP\tIP traffic\t(v4) (errors)\n\t\tICMP\tICMP traffic\t(v4)\n\t\tEICMP\tICMP traffic\t(v4) (errors)\n\t\tTCP\tTCP traffic\t(v4)\n\t\tETCP\tTCP traffic\t(v4) (errors)\n\t\tUDP\tUDP traffic\t(v4)\n\t\tSOCK6\tSockets\t(v6)\n\t\tIP6\tIP traffic\t(v6)\n\t\tEIP6\tIP traffic\t(v6) (errors)\n\t\tICMP6\tICMP traffic\t(v6)\n\t\tEICMP6\tICMP traffic\t(v6) (errors)\n\t\tUDP6\tUDP traffic\t(v6)\n\t-q\tQueue length and load average statistics\n\t-r\tMemory utilization statistics\n\t-R\tMemory statistics\n\t-S\tSwap space utilization statistics\n\t-u [ ALL ]\n\t\tCPU utilization statistics\n\t-v\tKernel table statistics\n\t-w\tTask creation and system switching statistics\n\t-W\tSwapping statistics\n\t-y\tTTY device statistics\n```\n\n### tcpdump用法\n* tcpdump -iany tcp port 9000 对tcp端口为9000的进行抓包\n```markdown\n-A  以ASCII码方式显示每一个数据包(不会显示数据包中链路层头部信息). 在抓取包含网页数据的数据包时, 可方便查看数据(nt: 即Handy for capturing web pages).\n\n-c  count\n    tcpdump将在接受到count个数据包后退出.\n\n-C  file-size (nt: 此选项用于配合-w file 选项使用)\n    该选项使得tcpdump 在把原始数据包直接保存到文件中之前, 检查此文件大小是否超过file-size. 如果超过了, 将关闭此文件,另创一个文件继续用于原始数据包的记录. 新创建的文件名与-w 选项指定的文件名一致, 但文件名后多了一个数字.该数字会从1开始随着新创建文件的增多而增加. file-size的单位是百万字节(nt: 这里指1,000,000个字节,并非1,048,576个字节, 后者是以1024字节为1k, 1024k字节为1M计算所得, 即1M=1024 ＊ 1024 ＝ 1,048,576)\n\n-d  以容易阅读的形式,在标准输出上打印出编排过的包匹配码, 随后tcpdump停止.(nt | rt: human readable, 容易阅读的,通常是指以ascii码来打印一些信息. compiled, 编排过的. packet-matching code, 包匹配码,含义未知, 需补充)\n\n-dd 以C语言的形式打印出包匹配码.\n\n-ddd 以十进制数的形式打印出包匹配码(会在包匹配码之前有一个附加的'count'前缀).\n\n-D  打印系统中所有tcpdump可以在其上进行抓包的网络接口. 每一个接口会打印出数字编号, 相应的接口名字, 以及可能的一个网络接口描述. 其中网络接口名字和数字编号可以用在tcpdump 的-i flag 选项(nt: 把名字或数字代替flag), 来指定要在其上抓包的网络接口.\n\n    此选项在不支持接口列表命令的系统上很有用(nt: 比如, Windows 系统, 或缺乏 ifconfig -a 的UNIX系统); 接口的数字编号在windows 2000 或其后的系统中很有用, 因为这些系统上的接口名字比较复杂, 而不易使用.\n\n    如果tcpdump编译时所依赖的libpcap库太老,-D 选项不会被支持, 因为其中缺乏 pcap_findalldevs()函数.\n\n-e  每行的打印输出中将包括数据包的数据链路层头部信息\n\n-E  spi@ipaddr algo:secret,...\n\n    可通过spi@ipaddr algo:secret 来解密IPsec ESP包(nt | rt:IPsec Encapsulating Security Payload,IPsec 封装安全负载, IPsec可理解为, 一整套对ip数据包的加密协议, ESP 为整个IP 数据包或其中上层协议部分被加密后的数据,前者的工作模式称为隧道模式; 后者的工作模式称为传输模式 . 工作原理, 另需补充).\n\n    需要注意的是, 在终端启动tcpdump 时, 可以为IPv4 ESP packets 设置密钥(secret）.\n\n    可用于加密的算法包括des-cbc, 3des-cbc, blowfish-cbc, rc3-cbc, cast128-cbc, 或者没有(none).默认的是des-cbc(nt: des, Data Encryption Standard, 数据加密标准, 加密算法未知, 另需补充).secret 为用于ESP 的密钥, 使用ASCII 字符串方式表达. 如果以 0x 开头, 该密钥将以16进制方式读入.\n\n    该选项中ESP 的定义遵循RFC2406, 而不是 RFC1827. 并且, 此选项只是用来调试的, 不推荐以真实密钥(secret)来使用该选项, 因为这样不安全: 在命令行中输入的secret 可以被其他人通过ps 等命令查看到.\n\n    除了以上的语法格式(nt: 指spi@ipaddr algo:secret), 还可以在后面添加一个语法输入文件名字供tcpdump 使用(nt：即把spi@ipaddr algo:secret,... 中...换成一个语法文件名). 此文件在接受到第一个ESP　包时会打开此文件, 所以最好此时把赋予tcpdump 的一些特权取消(nt: 可理解为, 这样防范之后, 当该文件为恶意编写时,不至于造成过大损害).\n\n-f  显示外部的IPv4 地址时(nt: foreign IPv4 addresses, 可理解为, 非本机ip地址), 采用数字方式而不是名字.(此选项是用来对付Sun公司的NIS服务器的缺陷(nt: NIS, 网络信息服务, tcpdump 显示外部地址的名字时会用到她提供的名称服务): 此NIS服务器在查询非本地地址名字时,常常会陷入无尽的查询循环).\n\n    由于对外部(foreign)IPv4地址的测试需要用到本地网络接口(nt: tcpdump 抓包时用到的接口)及其IPv4 地址和网络掩码. 如果此地址或网络掩码不可用, 或者此接口根本就没有设置相应网络地址和网络掩码(nt: linux 下的 'any' 网络接口就不需要设置地址和掩码, 不过此'any'接口可以收到系统中所有接口的数据包), 该选项不能正常工作.\n\n-F  file\n    使用file 文件作为过滤条件表达式的输入, 此时命令行上的输入将被忽略.\n\n-i  interface\n\n    指定tcpdump 需要监听的接口.  如果没有指定, tcpdump 会从系统接口列表中搜寻编号最小的已配置好的接口(不包括 loopback 接口).一但找到第一个符合条件的接口, 搜寻马上结束.\n\n    在采用2.2版本或之后版本内核的Linux 操作系统上, 'any' 这个虚拟网络接口可被用来接收所有网络接口上的数据包(nt: 这会包括目的是该网络接口的, 也包括目的不是该网络接口的). 需要注意的是如果真实网络接口不能工作在'混杂'模式(promiscuous)下,则无法在'any'这个虚拟的网络接口上抓取其数据包.\n\n    如果 -D 标志被指定, tcpdump会打印系统中的接口编号，而该编号就可用于此处的interface 参数.\n\n-l  对标准输出进行行缓冲(nt: 使标准输出设备遇到一个换行符就马上把这行的内容打印出来).在需要同时观察抓包打印以及保存抓包记录的时候很有用. 比如, 可通过以下命令组合来达到此目的:\n    ``tcpdump  -l  |  tee dat'' 或者 ``tcpdump  -l   > dat  &  tail  -f  dat''.(nt: 前者使用tee来把tcpdump 的输出同时放到文件dat和标准输出中, 而后者通过重定向操作'>', 把tcpdump的输出放到dat 文件中, 同时通过tail把dat文件中的内容放到标准输出中)\n\n-L  列出指定网络接口所支持的数据链路层的类型后退出.(nt: 指定接口通过-i 来指定)\n\n-m  module\n    通过module 指定的file 装载SMI MIB 模块(nt: SMI，Structure of Management Information, 管理信息结构MIB, Management Information Base, 管理信息库. 可理解为, 这两者用于SNMP(Simple Network Management Protoco)协议数据包的抓取. 具体SNMP 的工作原理未知, 另需补充).\n\n    此选项可多次使用, 从而为tcpdump 装载不同的MIB 模块.\n\n-M  secret  如果TCP 数据包(TCP segments)有TCP-MD5选项(在RFC 2385有相关描述), 则为其摘要的验证指定一个公共的密钥secret.\n\n-n  不对地址(比如, 主机地址, 端口号)进行数字表示到名字表示的转换.\n\n-N  不打印出host 的域名部分. 比如, 如果设置了此选现, tcpdump 将会打印'nic' 而不是 'nic.ddn.mil'.\n\n-O  不启用进行包匹配时所用的优化代码. 当怀疑某些bug是由优化代码引起的, 此选项将很有用.\n\n-p  一般情况下, 把网络接口设置为非'混杂'模式. 但必须注意 , 在特殊情况下此网络接口还是会以'混杂'模式来工作； 从而, '-p' 的设与不设, 不能当做以下选现的代名词:'ether host {local-hw-add}' 或  'ether broadcast'(nt: 前者表示只匹配以太网地址为host 的包, 后者表示匹配以太网地址为广播地址的数据包).\n\n-q  快速(也许用'安静'更好?)打印输出. 即打印很少的协议相关信息, 从而输出行都比较简短.\n\n-R  设定tcpdump 对 ESP/AH 数据包的解析按照 RFC1825而不是RFC1829(nt: AH, 认证头, ESP， 安全负载封装, 这两者会用在IP包的安全传输机制中). 如果此选项被设置, tcpdump 将不会打印出'禁止中继'域(nt: relay prevention field). 另外,由于ESP/AH规范中没有规定ESP/AH数据包必须拥有协议版本号域,所以tcpdump不能从收到的ESP/AH数据包中推导出协议版本号.\n\n-r  file\n    从文件file 中读取包数据. 如果file 字段为 '-' 符号, 则tcpdump 会从标准输入中读取包数据.\n\n-S  打印TCP 数据包的顺序号时, 使用绝对的顺序号, 而不是相对的顺序号.(nt: 相对顺序号可理解为, 相对第一个TCP 包顺序号的差距,比如, 接受方收到第一个数据包的绝对顺序号为232323, 对于后来接收到的第2个,第3个数据包, tcpdump会打印其序列号为1, 2分别表示与第一个数据包的差距为1 和 2. 而如果此时-S 选项被设置, 对于后来接收到的第2个, 第3个数据包会打印出其绝对顺序号:232324, 232325).\n\n-s  snaplen\n    设置tcpdump的数据包抓取长度为snaplen, 如果不设置默认将会是68字节(而支持网络接口分接头(nt: NIT, 上文已有描述,可搜索'网络接口分接头'关键字找到那里)的SunOS系列操作系统中默认的也是最小值是96).68字节对于IP, ICMP(nt: Internet Control Message Protocol,因特网控制报文协议), TCP 以及 UDP 协议的报文已足够, 但对于名称服务(nt: 可理解为dns, nis等服务), NFS服务相关的数据包会产生包截短. 如果产生包截短这种情况, tcpdump的相应打印输出行中会出现''[|proto]''的标志（proto 实际会显示为被截短的数据包的相关协议层次). 需要注意的是, 采用长的抓取长度(nt: snaplen比较大), 会增加包的处理时间, 并且会减少tcpdump 可缓存的数据包的数量， 从而会导致数据包的丢失. 所以, 在能抓取我们想要的包的前提下, 抓取长度越小越好.把snaplen 设置为0 意味着让tcpdump自动选择合适的长度来抓取数据包.\n\n-T  type\n    强制tcpdump按type指定的协议所描述的包结构来分析收到的数据包.  目前已知的type 可取的协议为:\n    aodv (Ad-hoc On-demand Distance Vector protocol, 按需距离向量路由协议, 在Ad hoc(点对点模式)网络中使用),\n    cnfp (Cisco  NetFlow  protocol),  rpc(Remote Procedure Call), rtp (Real-Time Applications protocol),\n    rtcp (Real-Time Applications con-trol protocol), snmp (Simple Network Management Protocol),\n    tftp (Trivial File Transfer Protocol, 碎文件协议), vat (Visual Audio Tool, 可用于在internet 上进行电\n    视电话会议的应用层协议), 以及wb (distributed White Board, 可用于网络会议的应用层协议).\n\n-t     在每行输出中不打印时间戳\n\n-tt    不对每行输出的时间进行格式处理(nt: 这种格式一眼可能看不出其含义, 如时间戳打印成1261798315)\n\n-ttt   tcpdump 输出时, 每两行打印之间会延迟一个段时间(以毫秒为单位)\n\n-tttt  在每行打印的时间戳之前添加日期的打印\n\n-u     打印出未加密的NFS 句柄(nt: handle可理解为NFS 中使用的文件句柄, 这将包括文件夹和文件夹中的文件)\n\n-U    使得当tcpdump在使用-w 选项时, 其文件写入与包的保存同步.(nt: 即, 当每个数据包被保存时, 它将及时被写入文件中,而不是等文件的输出缓冲已满时才真正写入此文件)\n\n      -U 标志在老版本的libcap库(nt: tcpdump 所依赖的报文捕获库)上不起作用, 因为其中缺乏pcap_cump_flush()函数.\n\n-v    当分析和打印的时候, 产生详细的输出. 比如, 包的生存时间, 标识, 总长度以及IP包的一些选项. 这也会打开一些附加的包完整性检测, 比如对IP或ICMP包头部的校验和.\n\n-vv   产生比-v更详细的输出. 比如, NFS回应包中的附加域将会被打印, SMB数据包也会被完全解码.\n\n-vvv  产生比-vv更详细的输出. 比如, telent 时所使用的SB, SE 选项将会被打印, 如果telnet同时使用的是图形界面,\n      其相应的图形选项将会以16进制的方式打印出来(nt: telnet 的SB,SE选项含义未知, 另需补充).\n\n-w    把包数据直接写入文件而不进行分析和打印输出. 这些包数据可在随后通过-r 选项来重新读入并进行分析和打印.\n\n-W    filecount\n      此选项与-C 选项配合使用, 这将限制可打开的文件数目, 并且当文件数据超过这里设置的限制时, 依次循环替代之前的文件, 这相当于一个拥有filecount 个文件的文件缓冲池. 同时, 该选项会使得每个文件名的开头会出现足够多并用来占位的0, 这可以方便这些文件被正确的排序.\n\n-x    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据(但不包括连接层的头部).总共打印的数据大小不会超过整个数据包的大小与snaplen 中的最小值. 必须要注意的是, 如果高层协议数据没有snaplen 这么长,并且数据链路层(比如, Ethernet层)有填充数据, 则这些填充数据也会被打印.(nt: so for link  layers  that pad, 未能衔接理解和翻译, 需补充 )\n\n-xx   tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据, 其中包括数据链路层的头部.\n\n-X    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据(但不包括连接层的头部).这对于分析一些新协议的数据包很方便.\n\n-XX   当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据, 其中包括数据链路层的头部.这对于分析一些新协议的数据包很方便.\n\n-y    datalinktype\n      设置tcpdump 只捕获数据链路层协议类型是datalinktype的数据包\n\n-Z    user\n      使tcpdump 放弃自己的超级权限(如果以root用户启动tcpdump, tcpdump将会有超级用户权限), 并把当前tcpdump的用户ID设置为user, 组ID设置为user首要所属组的ID(nt: tcpdump 此处可理解为tcpdump 运行之后对应的进程)\n\n```\n[Linux tcpdump命令详解](http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html)\n<!--more-->\n## 网络测试常用命令\n### ping\n检测网络连接的正常与否,主要是测试延时、抖动、丢包率。\n但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。\nping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。\nTTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。\nTTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。\n### traceroute\n跟踪数据包到达网络主机所经过的路由工具\ntraceroute hostname\n### pathping\n是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能\npathping www.baidu.com\n### nslookup\n用于解析域名，一般用来检测本机的DNS设置是否配置正确。\n### mtr\n可以结合ping nslookup tracert 来判断网络的相关特性\n\n## 系统大量TIME_WAIT状态连接的处理\n发现系统存在大量TIME_WAIT状态的连接，可以通过调整内核参数解决：``vi /etc/sysctl.conf`` 加入以下内容：\n```\nnet.ipv4.tcp_syncookies = 1\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.tcp_fin_timeout = 30\n```\n然后执行 ``/sbin/sysctl -p`` 让参数生效。\n```\nnet.ipv4.tcp_syncookies = 1 表示开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；\nnet.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；\nnet.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。\nnet.ipv4.tcp_fin_timeout 修改系統默认的 TIMEOUT 时间\n```\n## 以下相关内容值得学习\n\n[TCP连接的状态详解以及故障排查](http://blog.csdn.net/hguisu/article/details/38700899)\n[TIME_WAIT引起Cannot assign requested address报错](http://blog.csdn.net/hguisu/article/details/10241519)\n\n\n\n","slug":"tuning/TCP连接及故障排查","published":1,"updated":"2017-06-13T12:18:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs4002d9vvu5vl2s2nt","content":"<h2 id=\"linux查看tcp的状态命令\"><a href=\"#linux查看tcp的状态命令\" class=\"headerlink\" title=\"linux查看tcp的状态命令\"></a>linux查看tcp的状态命令</h2><h3 id=\"netstat用法\"><a href=\"#netstat用法\" class=\"headerlink\" title=\"netstat用法\"></a>netstat用法</h3><ul>\n<li>netstat -nat  查看TCP各个状态的数量<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">usage: netstat [-vWeenNcCF] [&lt;Af&gt;] -r         netstat &#123;-V|--version|-h|--help&#125;</div><div class=\"line\"><span class=\"code\">       netstat [-vWnNcaeol] [&lt;Socket&gt; ...]</span></div><div class=\"line\"><span class=\"code\">       netstat &#123; [-vWeenNac] -I[&lt;Iface&gt;] | [-veenNac] -i | [-cnNe] -M | -s [-6tuw] &#125; [delay]</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -r, --route              display routing table</span></div><div class=\"line\"><span class=\"code\">        -I, --interfaces=&lt;Iface&gt; display interface table for &lt;Iface&gt;</span></div><div class=\"line\"><span class=\"code\">        -i, --interfaces         display interface table</span></div><div class=\"line\"><span class=\"code\">        -g, --groups             display multicast group memberships</span></div><div class=\"line\"><span class=\"code\">        -s, --statistics         display networking statistics (like SNMP)</span></div><div class=\"line\"><span class=\"code\">        -M, --masquerade         display masqueraded connections</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -v, --verbose            be verbose</span></div><div class=\"line\"><span class=\"code\">        -W, --wide               don't truncate IP addresses</span></div><div class=\"line\"><span class=\"code\">        -n, --numeric            don't resolve names</span></div><div class=\"line\"><span class=\"code\">        --numeric-hosts          don't resolve host names</span></div><div class=\"line\"><span class=\"code\">        --numeric-ports          don't resolve port names</span></div><div class=\"line\"><span class=\"code\">        --numeric-users          don't resolve user names</span></div><div class=\"line\"><span class=\"code\">        -N, --symbolic           resolve hardware names</span></div><div class=\"line\"><span class=\"code\">        -e, --extend             display other/more information</span></div><div class=\"line\"><span class=\"code\">        -p, --programs           display PID/Program name for sockets</span></div><div class=\"line\"><span class=\"code\">        -o, --timers             display timers</span></div><div class=\"line\"><span class=\"code\">        -c, --continuous         continuous listing</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -l, --listening          display listening server sockets</span></div><div class=\"line\"><span class=\"code\">        -a, --all                display all sockets (default: connected)</span></div><div class=\"line\"><span class=\"code\">        -F, --fib                display Forwarding Information Base (default)</span></div><div class=\"line\"><span class=\"code\">        -C, --cache              display routing cache instead of FIB</span></div><div class=\"line\"><span class=\"code\">        -Z, --context            display SELinux security context for sockets</span></div><div class=\"line\"></div><div class=\"line\">  &lt;Socket&gt;=&#123;-t|--tcp&#125; &#123;-u|--udp&#125; &#123;-U|--udplite&#125; &#123;-w|--raw&#125; &#123;-x|--unix&#125;</div><div class=\"line\"><span class=\"code\">           --ax25 --ipx --netrom</span></div><div class=\"line\">  &lt;AF&gt;=Use '-6|-4' or '-A &lt;af&gt;' or '--&lt;af&gt;'; default: inet</div><div class=\"line\">  List of possible address families (which support routing):</div><div class=\"line\"><span class=\"code\">    inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25)</span></div><div class=\"line\"><span class=\"code\">    netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP)</span></div><div class=\"line\"><span class=\"code\">    x25 (CCITT X.25)</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>其中</p>\n<ul>\n<li>-a (all)显示所有选项，默认不显示LISTEN相关</li>\n<li>-t (tcp)仅显示tcp相关选项</li>\n<li>-u (udp)仅显示udp相关选项</li>\n<li>-n 拒绝显示别名，能显示数字的全部转化成数字</li>\n<li>-l 仅列出有在 Listen (监听) 的服務状态</li>\n<li>-p 显示建立相关链接的程序名</li>\n<li>-r 显示路由信息，路由表</li>\n<li>-e 显示扩展信息，例如uid等</li>\n<li>-s 按各个协议进行统计</li>\n<li>-c 每隔一个固定时间，执行该netstat命令。<br>提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</li>\n</ul>\n<h3 id=\"lsof用法\"><a href=\"#lsof用法\" class=\"headerlink\" title=\"lsof用法\"></a>lsof用法</h3><ul>\n<li>lsof  -i:port  可以检测到打开套接字的状况<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">-?|-h list help          -a AND selections (OR)     -b avoid kernel blocks</div><div class=\"line\">  -c c  cmd c ^c /c/[bix]  +c w  COMMAND width (9)    +d s  dir s files</div><div class=\"line\">  -d s  select by FD set   +D D  dir D tree <span class=\"emphasis\">*SLOW?*</span>   -i select IPv[46] files</div><div class=\"line\">  -l list UID numbers      -n no host names           -N select NFS files</div><div class=\"line\">  -o list file offset      -O no overhead <span class=\"emphasis\">*RISKY*</span>     -P no port names</div><div class=\"line\">  -R list paRent PID       -s list file size          -t terse listing</div><div class=\"line\">  -T disable TCP/TPI info  -U select Unix socket      -v list version info</div><div class=\"line\">  -V verbose search        +|-w  Warnings (+)         -- end option scan</div><div class=\"line\">  +f|-f  +filesystem or -file names     +|-f[cgG] Ct flaGs </div><div class=\"line\">  -F [f] select fields; -F? for help  </div><div class=\"line\">  +|-L [l] list (+) suppress (-) link counts &lt; l (0 = all; default = 0)</div><div class=\"line\">  +|-M   portMap registration (-)       -o o   o 0t offset digits (8)</div><div class=\"line\">  -p s   exclude(^)|select PIDs         -S [t] t second stat timeout (15)</div><div class=\"line\">  -T fqs TCP/TPI Fl,Q,St (s) info</div><div class=\"line\">  -g [s] exclude(^)|select and print process group IDs</div><div class=\"line\">  -i i   select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]</div><div class=\"line\">  +|-r [t[m&lt;fmt&gt;]] repeat every t seconds (15);  + until no files, - forever.</div><div class=\"line\"><span class=\"code\">       An optional suffix to t is m&lt;fmt&gt;; m must separate t from &lt;fmt&gt; and</span></div><div class=\"line\"><span class=\"code\">      &lt;fmt&gt; is an strftime(3) format for the marker line.</span></div><div class=\"line\">  -s p:s  exclude(^)|select protocol (p = TCP|UDP) states by name(s).</div><div class=\"line\">  -u s   exclude(^)|select login|UID set s</div><div class=\"line\">  -x [fl] cross over +d|+D File systems or symbolic Links</div><div class=\"line\">  names  select named files or files on named file systems</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"sar用法\"><a href=\"#sar用法\" class=\"headerlink\" title=\"sar用法\"></a>sar用法</h3><ul>\n<li>sar -n SOCK 查看tcp创建的连接数<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\">Usage: sar [ options ] [ &lt;interval&gt; [ &lt;count&gt; ] ]</div><div class=\"line\">Main options and reports:</div><div class=\"line\"><span class=\"code\">\t-b\tI/O and transfer rate statistics</span></div><div class=\"line\"><span class=\"code\">\t-B\tPaging statistics</span></div><div class=\"line\"><span class=\"code\">\t-d\tBlock device statistics</span></div><div class=\"line\"><span class=\"code\">\t-H\tHugepages utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-I &#123; &lt;int&gt; | SUM | ALL | XALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tInterrupts statistics</span></div><div class=\"line\"><span class=\"code\">\t-m &#123; &lt;keyword&gt; [,...] | ALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tPower management statistics</span></div><div class=\"line\"><span class=\"code\">\t\tKeywords are:</span></div><div class=\"line\"><span class=\"code\">\t\tCPU\tCPU instantaneous clock frequency</span></div><div class=\"line\"><span class=\"code\">\t\tFAN\tFans speed</span></div><div class=\"line\"><span class=\"code\">\t\tFREQ\tCPU average clock frequency</span></div><div class=\"line\"><span class=\"code\">\t\tIN\tVoltage inputs</span></div><div class=\"line\"><span class=\"code\">\t\tTEMP\tDevices temperature</span></div><div class=\"line\"><span class=\"code\">\t\tUSB\tUSB devices plugged into the system</span></div><div class=\"line\"><span class=\"code\">\t-n &#123; &lt;keyword&gt; [,...] | ALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tNetwork statistics</span></div><div class=\"line\"><span class=\"code\">\t\tKeywords are:</span></div><div class=\"line\"><span class=\"code\">\t\tDEV\tNetwork interfaces</span></div><div class=\"line\"><span class=\"code\">\t\tEDEV\tNetwork interfaces (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tNFS\tNFS client</span></div><div class=\"line\"><span class=\"code\">\t\tNFSD\tNFS server</span></div><div class=\"line\"><span class=\"code\">\t\tSOCK\tSockets\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tIP\tIP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tEIP\tIP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tICMP\tICMP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tEICMP\tICMP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tTCP\tTCP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tETCP\tTCP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tUDP\tUDP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tSOCK6\tSockets\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tIP6\tIP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tEIP6\tIP traffic\t(v6) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tICMP6\tICMP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tEICMP6\tICMP traffic\t(v6) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tUDP6\tUDP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t-q\tQueue length and load average statistics</span></div><div class=\"line\"><span class=\"code\">\t-r\tMemory utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-R\tMemory statistics</span></div><div class=\"line\"><span class=\"code\">\t-S\tSwap space utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-u [ ALL ]</span></div><div class=\"line\"><span class=\"code\">\t\tCPU utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-v\tKernel table statistics</span></div><div class=\"line\"><span class=\"code\">\t-w\tTask creation and system switching statistics</span></div><div class=\"line\"><span class=\"code\">\t-W\tSwapping statistics</span></div><div class=\"line\"><span class=\"code\">\t-y\tTTY device statistics</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"tcpdump用法\"><a href=\"#tcpdump用法\" class=\"headerlink\" title=\"tcpdump用法\"></a>tcpdump用法</h3><ul>\n<li>tcpdump -iany tcp port 9000 对tcp端口为9000的进行抓包<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div></pre></td><td class=\"code\"><pre><div class=\"line\">-A  以ASCII码方式显示每一个数据包(不会显示数据包中链路层头部信息). 在抓取包含网页数据的数据包时, 可方便查看数据(nt: 即Handy for capturing web pages).</div><div class=\"line\"></div><div class=\"line\">-c  count</div><div class=\"line\"><span class=\"code\">    tcpdump将在接受到count个数据包后退出.</span></div><div class=\"line\"></div><div class=\"line\">-C  file-size (nt: 此选项用于配合-w file 选项使用)</div><div class=\"line\"><span class=\"code\">    该选项使得tcpdump 在把原始数据包直接保存到文件中之前, 检查此文件大小是否超过file-size. 如果超过了, 将关闭此文件,另创一个文件继续用于原始数据包的记录. 新创建的文件名与-w 选项指定的文件名一致, 但文件名后多了一个数字.该数字会从1开始随着新创建文件的增多而增加. file-size的单位是百万字节(nt: 这里指1,000,000个字节,并非1,048,576个字节, 后者是以1024字节为1k, 1024k字节为1M计算所得, 即1M=1024 ＊ 1024 ＝ 1,048,576)</span></div><div class=\"line\"></div><div class=\"line\">-d  以容易阅读的形式,在标准输出上打印出编排过的包匹配码, 随后tcpdump停止.(nt | rt: human readable, 容易阅读的,通常是指以ascii码来打印一些信息. compiled, 编排过的. packet-matching code, 包匹配码,含义未知, 需补充)</div><div class=\"line\"></div><div class=\"line\">-dd 以C语言的形式打印出包匹配码.</div><div class=\"line\"></div><div class=\"line\">-ddd 以十进制数的形式打印出包匹配码(会在包匹配码之前有一个附加的'count'前缀).</div><div class=\"line\"></div><div class=\"line\">-D  打印系统中所有tcpdump可以在其上进行抓包的网络接口. 每一个接口会打印出数字编号, 相应的接口名字, 以及可能的一个网络接口描述. 其中网络接口名字和数字编号可以用在tcpdump 的-i flag 选项(nt: 把名字或数字代替flag), 来指定要在其上抓包的网络接口.</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    此选项在不支持接口列表命令的系统上很有用(nt: 比如, Windows 系统, 或缺乏 ifconfig -a 的UNIX系统); 接口的数字编号在windows 2000 或其后的系统中很有用, 因为这些系统上的接口名字比较复杂, 而不易使用.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    如果tcpdump编译时所依赖的libpcap库太老,-D 选项不会被支持, 因为其中缺乏 pcap_findalldevs()函数.</span></div><div class=\"line\"></div><div class=\"line\">-e  每行的打印输出中将包括数据包的数据链路层头部信息</div><div class=\"line\"></div><div class=\"line\">-E  spi@ipaddr algo:secret,...</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    可通过spi@ipaddr algo:secret 来解密IPsec ESP包(nt | rt:IPsec Encapsulating Security Payload,IPsec 封装安全负载, IPsec可理解为, 一整套对ip数据包的加密协议, ESP 为整个IP 数据包或其中上层协议部分被加密后的数据,前者的工作模式称为隧道模式; 后者的工作模式称为传输模式 . 工作原理, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    需要注意的是, 在终端启动tcpdump 时, 可以为IPv4 ESP packets 设置密钥(secret）.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    可用于加密的算法包括des-cbc, 3des-cbc, blowfish-cbc, rc3-cbc, cast128-cbc, 或者没有(none).默认的是des-cbc(nt: des, Data Encryption Standard, 数据加密标准, 加密算法未知, 另需补充).secret 为用于ESP 的密钥, 使用ASCII 字符串方式表达. 如果以 0x 开头, 该密钥将以16进制方式读入.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    该选项中ESP 的定义遵循RFC2406, 而不是 RFC1827. 并且, 此选项只是用来调试的, 不推荐以真实密钥(secret)来使用该选项, 因为这样不安全: 在命令行中输入的secret 可以被其他人通过ps 等命令查看到.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    除了以上的语法格式(nt: 指spi@ipaddr algo:secret), 还可以在后面添加一个语法输入文件名字供tcpdump 使用(nt：即把spi@ipaddr algo:secret,... 中...换成一个语法文件名). 此文件在接受到第一个ESP　包时会打开此文件, 所以最好此时把赋予tcpdump 的一些特权取消(nt: 可理解为, 这样防范之后, 当该文件为恶意编写时,不至于造成过大损害).</span></div><div class=\"line\"></div><div class=\"line\">-f  显示外部的IPv4 地址时(nt: foreign IPv4 addresses, 可理解为, 非本机ip地址), 采用数字方式而不是名字.(此选项是用来对付Sun公司的NIS服务器的缺陷(nt: NIS, 网络信息服务, tcpdump 显示外部地址的名字时会用到她提供的名称服务): 此NIS服务器在查询非本地地址名字时,常常会陷入无尽的查询循环).</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    由于对外部(foreign)IPv4地址的测试需要用到本地网络接口(nt: tcpdump 抓包时用到的接口)及其IPv4 地址和网络掩码. 如果此地址或网络掩码不可用, 或者此接口根本就没有设置相应网络地址和网络掩码(nt: linux 下的 'any' 网络接口就不需要设置地址和掩码, 不过此'any'接口可以收到系统中所有接口的数据包), 该选项不能正常工作.</span></div><div class=\"line\"></div><div class=\"line\">-F  file</div><div class=\"line\"><span class=\"code\">    使用file 文件作为过滤条件表达式的输入, 此时命令行上的输入将被忽略.</span></div><div class=\"line\"></div><div class=\"line\">-i  interface</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    指定tcpdump 需要监听的接口.  如果没有指定, tcpdump 会从系统接口列表中搜寻编号最小的已配置好的接口(不包括 loopback 接口).一但找到第一个符合条件的接口, 搜寻马上结束.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    在采用2.2版本或之后版本内核的Linux 操作系统上, 'any' 这个虚拟网络接口可被用来接收所有网络接口上的数据包(nt: 这会包括目的是该网络接口的, 也包括目的不是该网络接口的). 需要注意的是如果真实网络接口不能工作在'混杂'模式(promiscuous)下,则无法在'any'这个虚拟的网络接口上抓取其数据包.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    如果 -D 标志被指定, tcpdump会打印系统中的接口编号，而该编号就可用于此处的interface 参数.</span></div><div class=\"line\"></div><div class=\"line\">-l  对标准输出进行行缓冲(nt: 使标准输出设备遇到一个换行符就马上把这行的内容打印出来).在需要同时观察抓包打印以及保存抓包记录的时候很有用. 比如, 可通过以下命令组合来达到此目的:</div><div class=\"line\"><span class=\"code\">    ``tcpdump  -l  |  tee dat'' 或者 ``tcpdump  -l   &gt; dat  &amp;  tail  -f  dat''.(nt: 前者使用tee来把tcpdump 的输出同时放到文件dat和标准输出中, 而后者通过重定向操作'&gt;', 把tcpdump的输出放到dat 文件中, 同时通过tail把dat文件中的内容放到标准输出中)</span></div><div class=\"line\"></div><div class=\"line\">-L  列出指定网络接口所支持的数据链路层的类型后退出.(nt: 指定接口通过-i 来指定)</div><div class=\"line\"></div><div class=\"line\">-m  module</div><div class=\"line\"><span class=\"code\">    通过module 指定的file 装载SMI MIB 模块(nt: SMI，Structure of Management Information, 管理信息结构MIB, Management Information Base, 管理信息库. 可理解为, 这两者用于SNMP(Simple Network Management Protoco)协议数据包的抓取. 具体SNMP 的工作原理未知, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    此选项可多次使用, 从而为tcpdump 装载不同的MIB 模块.</span></div><div class=\"line\"></div><div class=\"line\">-M  secret  如果TCP 数据包(TCP segments)有TCP-MD5选项(在RFC 2385有相关描述), 则为其摘要的验证指定一个公共的密钥secret.</div><div class=\"line\"></div><div class=\"line\">-n  不对地址(比如, 主机地址, 端口号)进行数字表示到名字表示的转换.</div><div class=\"line\"></div><div class=\"line\">-N  不打印出host 的域名部分. 比如, 如果设置了此选现, tcpdump 将会打印'nic' 而不是 'nic.ddn.mil'.</div><div class=\"line\"></div><div class=\"line\">-O  不启用进行包匹配时所用的优化代码. 当怀疑某些bug是由优化代码引起的, 此选项将很有用.</div><div class=\"line\"></div><div class=\"line\">-p  一般情况下, 把网络接口设置为非'混杂'模式. 但必须注意 , 在特殊情况下此网络接口还是会以'混杂'模式来工作； 从而, '-p' 的设与不设, 不能当做以下选现的代名词:'ether host &#123;local-hw-add&#125;' 或  'ether broadcast'(nt: 前者表示只匹配以太网地址为host 的包, 后者表示匹配以太网地址为广播地址的数据包).</div><div class=\"line\"></div><div class=\"line\">-q  快速(也许用'安静'更好?)打印输出. 即打印很少的协议相关信息, 从而输出行都比较简短.</div><div class=\"line\"></div><div class=\"line\">-R  设定tcpdump 对 ESP/AH 数据包的解析按照 RFC1825而不是RFC1829(nt: AH, 认证头, ESP， 安全负载封装, 这两者会用在IP包的安全传输机制中). 如果此选项被设置, tcpdump 将不会打印出'禁止中继'域(nt: relay prevention field). 另外,由于ESP/AH规范中没有规定ESP/AH数据包必须拥有协议版本号域,所以tcpdump不能从收到的ESP/AH数据包中推导出协议版本号.</div><div class=\"line\"></div><div class=\"line\">-r  file</div><div class=\"line\"><span class=\"code\">    从文件file 中读取包数据. 如果file 字段为 '-' 符号, 则tcpdump 会从标准输入中读取包数据.</span></div><div class=\"line\"></div><div class=\"line\">-S  打印TCP 数据包的顺序号时, 使用绝对的顺序号, 而不是相对的顺序号.(nt: 相对顺序号可理解为, 相对第一个TCP 包顺序号的差距,比如, 接受方收到第一个数据包的绝对顺序号为232323, 对于后来接收到的第2个,第3个数据包, tcpdump会打印其序列号为1, 2分别表示与第一个数据包的差距为1 和 2. 而如果此时-S 选项被设置, 对于后来接收到的第2个, 第3个数据包会打印出其绝对顺序号:232324, 232325).</div><div class=\"line\"></div><div class=\"line\">-s  snaplen</div><div class=\"line\"><span class=\"code\">    设置tcpdump的数据包抓取长度为snaplen, 如果不设置默认将会是68字节(而支持网络接口分接头(nt: NIT, 上文已有描述,可搜索'网络接口分接头'关键字找到那里)的SunOS系列操作系统中默认的也是最小值是96).68字节对于IP, ICMP(nt: Internet Control Message Protocol,因特网控制报文协议), TCP 以及 UDP 协议的报文已足够, 但对于名称服务(nt: 可理解为dns, nis等服务), NFS服务相关的数据包会产生包截短. 如果产生包截短这种情况, tcpdump的相应打印输出行中会出现''[|proto]''的标志（proto 实际会显示为被截短的数据包的相关协议层次). 需要注意的是, 采用长的抓取长度(nt: snaplen比较大), 会增加包的处理时间, 并且会减少tcpdump 可缓存的数据包的数量， 从而会导致数据包的丢失. 所以, 在能抓取我们想要的包的前提下, 抓取长度越小越好.把snaplen 设置为0 意味着让tcpdump自动选择合适的长度来抓取数据包.</span></div><div class=\"line\"></div><div class=\"line\">-T  type</div><div class=\"line\"><span class=\"code\">    强制tcpdump按type指定的协议所描述的包结构来分析收到的数据包.  目前已知的type 可取的协议为:</span></div><div class=\"line\"><span class=\"code\">    aodv (Ad-hoc On-demand Distance Vector protocol, 按需距离向量路由协议, 在Ad hoc(点对点模式)网络中使用),</span></div><div class=\"line\"><span class=\"code\">    cnfp (Cisco  NetFlow  protocol),  rpc(Remote Procedure Call), rtp (Real-Time Applications protocol),</span></div><div class=\"line\"><span class=\"code\">    rtcp (Real-Time Applications con-trol protocol), snmp (Simple Network Management Protocol),</span></div><div class=\"line\"><span class=\"code\">    tftp (Trivial File Transfer Protocol, 碎文件协议), vat (Visual Audio Tool, 可用于在internet 上进行电</span></div><div class=\"line\"><span class=\"code\">    视电话会议的应用层协议), 以及wb (distributed White Board, 可用于网络会议的应用层协议).</span></div><div class=\"line\"></div><div class=\"line\">-t     在每行输出中不打印时间戳</div><div class=\"line\"></div><div class=\"line\">-tt    不对每行输出的时间进行格式处理(nt: 这种格式一眼可能看不出其含义, 如时间戳打印成1261798315)</div><div class=\"line\"></div><div class=\"line\">-ttt   tcpdump 输出时, 每两行打印之间会延迟一个段时间(以毫秒为单位)</div><div class=\"line\"></div><div class=\"line\">-tttt  在每行打印的时间戳之前添加日期的打印</div><div class=\"line\"></div><div class=\"line\">-u     打印出未加密的NFS 句柄(nt: handle可理解为NFS 中使用的文件句柄, 这将包括文件夹和文件夹中的文件)</div><div class=\"line\"></div><div class=\"line\">-U    使得当tcpdump在使用-w 选项时, 其文件写入与包的保存同步.(nt: 即, 当每个数据包被保存时, 它将及时被写入文件中,而不是等文件的输出缓冲已满时才真正写入此文件)</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">      -U 标志在老版本的libcap库(nt: tcpdump 所依赖的报文捕获库)上不起作用, 因为其中缺乏pcap_cump_flush()函数.</span></div><div class=\"line\"></div><div class=\"line\">-v    当分析和打印的时候, 产生详细的输出. 比如, 包的生存时间, 标识, 总长度以及IP包的一些选项. 这也会打开一些附加的包完整性检测, 比如对IP或ICMP包头部的校验和.</div><div class=\"line\"></div><div class=\"line\">-vv   产生比-v更详细的输出. 比如, NFS回应包中的附加域将会被打印, SMB数据包也会被完全解码.</div><div class=\"line\"></div><div class=\"line\">-vvv  产生比-vv更详细的输出. 比如, telent 时所使用的SB, SE 选项将会被打印, 如果telnet同时使用的是图形界面,</div><div class=\"line\"><span class=\"code\">      其相应的图形选项将会以16进制的方式打印出来(nt: telnet 的SB,SE选项含义未知, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\">-w    把包数据直接写入文件而不进行分析和打印输出. 这些包数据可在随后通过-r 选项来重新读入并进行分析和打印.</div><div class=\"line\"></div><div class=\"line\">-W    filecount</div><div class=\"line\"><span class=\"code\">      此选项与-C 选项配合使用, 这将限制可打开的文件数目, 并且当文件数据超过这里设置的限制时, 依次循环替代之前的文件, 这相当于一个拥有filecount 个文件的文件缓冲池. 同时, 该选项会使得每个文件名的开头会出现足够多并用来占位的0, 这可以方便这些文件被正确的排序.</span></div><div class=\"line\"></div><div class=\"line\">-x    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据(但不包括连接层的头部).总共打印的数据大小不会超过整个数据包的大小与snaplen 中的最小值. 必须要注意的是, 如果高层协议数据没有snaplen 这么长,并且数据链路层(比如, Ethernet层)有填充数据, 则这些填充数据也会被打印.(nt: so for link  layers  that pad, 未能衔接理解和翻译, 需补充 )</div><div class=\"line\"></div><div class=\"line\">-xx   tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据, 其中包括数据链路层的头部.</div><div class=\"line\"></div><div class=\"line\">-X    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据(但不包括连接层的头部).这对于分析一些新协议的数据包很方便.</div><div class=\"line\"></div><div class=\"line\">-XX   当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据, 其中包括数据链路层的头部.这对于分析一些新协议的数据包很方便.</div><div class=\"line\"></div><div class=\"line\">-y    datalinktype</div><div class=\"line\"><span class=\"code\">      设置tcpdump 只捕获数据链路层协议类型是datalinktype的数据包</span></div><div class=\"line\"></div><div class=\"line\">-Z    user</div><div class=\"line\"><span class=\"code\">      使tcpdump 放弃自己的超级权限(如果以root用户启动tcpdump, tcpdump将会有超级用户权限), 并把当前tcpdump的用户ID设置为user, 组ID设置为user首要所属组的ID(nt: tcpdump 此处可理解为tcpdump 运行之后对应的进程)</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a href=\"http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html\" target=\"_blank\" rel=\"external\">Linux tcpdump命令详解</a><br><a id=\"more\"></a></p>\n<h2 id=\"网络测试常用命令\"><a href=\"#网络测试常用命令\" class=\"headerlink\" title=\"网络测试常用命令\"></a>网络测试常用命令</h2><h3 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h3><p>检测网络连接的正常与否,主要是测试延时、抖动、丢包率。<br>但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。<br>ping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。<br>TTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。<br>TTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。</p>\n<h3 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h3><p>跟踪数据包到达网络主机所经过的路由工具<br>traceroute hostname</p>\n<h3 id=\"pathping\"><a href=\"#pathping\" class=\"headerlink\" title=\"pathping\"></a>pathping</h3><p>是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能<br>pathping www.baidu.com</p>\n<h3 id=\"nslookup\"><a href=\"#nslookup\" class=\"headerlink\" title=\"nslookup\"></a>nslookup</h3><p>用于解析域名，一般用来检测本机的DNS设置是否配置正确。</p>\n<h3 id=\"mtr\"><a href=\"#mtr\" class=\"headerlink\" title=\"mtr\"></a>mtr</h3><p>可以结合ping nslookup tracert 来判断网络的相关特性</p>\n<h2 id=\"系统大量TIME-WAIT状态连接的处理\"><a href=\"#系统大量TIME-WAIT状态连接的处理\" class=\"headerlink\" title=\"系统大量TIME_WAIT状态连接的处理\"></a>系统大量TIME_WAIT状态连接的处理</h2><p>发现系统存在大量TIME_WAIT状态的连接，可以通过调整内核参数解决：<code>vi /etc/sysctl.conf</code> 加入以下内容：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.ipv4.tcp_syncookies = 1</div><div class=\"line\">net.ipv4.tcp_tw_reuse = 1</div><div class=\"line\">net.ipv4.tcp_tw_recycle = 1</div><div class=\"line\">net.ipv4.tcp_fin_timeout = 30</div></pre></td></tr></table></figure></p>\n<p>然后执行 <code>/sbin/sysctl -p</code> 让参数生效。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.ipv4.tcp_syncookies = 1 表示开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；</div><div class=\"line\">net.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；</div><div class=\"line\">net.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。</div><div class=\"line\">net.ipv4.tcp_fin_timeout 修改系統默认的 TIMEOUT 时间</div></pre></td></tr></table></figure></p>\n<h2 id=\"以下相关内容值得学习\"><a href=\"#以下相关内容值得学习\" class=\"headerlink\" title=\"以下相关内容值得学习\"></a>以下相关内容值得学习</h2><p><a href=\"http://blog.csdn.net/hguisu/article/details/38700899\" target=\"_blank\" rel=\"external\">TCP连接的状态详解以及故障排查</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/10241519\" target=\"_blank\" rel=\"external\">TIME_WAIT引起Cannot assign requested address报错</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"linux查看tcp的状态命令\"><a href=\"#linux查看tcp的状态命令\" class=\"headerlink\" title=\"linux查看tcp的状态命令\"></a>linux查看tcp的状态命令</h2><h3 id=\"netstat用法\"><a href=\"#netstat用法\" class=\"headerlink\" title=\"netstat用法\"></a>netstat用法</h3><ul>\n<li>netstat -nat  查看TCP各个状态的数量<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">usage: netstat [-vWeenNcCF] [&lt;Af&gt;] -r         netstat &#123;-V|--version|-h|--help&#125;</div><div class=\"line\"><span class=\"code\">       netstat [-vWnNcaeol] [&lt;Socket&gt; ...]</span></div><div class=\"line\"><span class=\"code\">       netstat &#123; [-vWeenNac] -I[&lt;Iface&gt;] | [-veenNac] -i | [-cnNe] -M | -s [-6tuw] &#125; [delay]</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -r, --route              display routing table</span></div><div class=\"line\"><span class=\"code\">        -I, --interfaces=&lt;Iface&gt; display interface table for &lt;Iface&gt;</span></div><div class=\"line\"><span class=\"code\">        -i, --interfaces         display interface table</span></div><div class=\"line\"><span class=\"code\">        -g, --groups             display multicast group memberships</span></div><div class=\"line\"><span class=\"code\">        -s, --statistics         display networking statistics (like SNMP)</span></div><div class=\"line\"><span class=\"code\">        -M, --masquerade         display masqueraded connections</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -v, --verbose            be verbose</span></div><div class=\"line\"><span class=\"code\">        -W, --wide               don't truncate IP addresses</span></div><div class=\"line\"><span class=\"code\">        -n, --numeric            don't resolve names</span></div><div class=\"line\"><span class=\"code\">        --numeric-hosts          don't resolve host names</span></div><div class=\"line\"><span class=\"code\">        --numeric-ports          don't resolve port names</span></div><div class=\"line\"><span class=\"code\">        --numeric-users          don't resolve user names</span></div><div class=\"line\"><span class=\"code\">        -N, --symbolic           resolve hardware names</span></div><div class=\"line\"><span class=\"code\">        -e, --extend             display other/more information</span></div><div class=\"line\"><span class=\"code\">        -p, --programs           display PID/Program name for sockets</span></div><div class=\"line\"><span class=\"code\">        -o, --timers             display timers</span></div><div class=\"line\"><span class=\"code\">        -c, --continuous         continuous listing</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">        -l, --listening          display listening server sockets</span></div><div class=\"line\"><span class=\"code\">        -a, --all                display all sockets (default: connected)</span></div><div class=\"line\"><span class=\"code\">        -F, --fib                display Forwarding Information Base (default)</span></div><div class=\"line\"><span class=\"code\">        -C, --cache              display routing cache instead of FIB</span></div><div class=\"line\"><span class=\"code\">        -Z, --context            display SELinux security context for sockets</span></div><div class=\"line\"></div><div class=\"line\">  &lt;Socket&gt;=&#123;-t|--tcp&#125; &#123;-u|--udp&#125; &#123;-U|--udplite&#125; &#123;-w|--raw&#125; &#123;-x|--unix&#125;</div><div class=\"line\"><span class=\"code\">           --ax25 --ipx --netrom</span></div><div class=\"line\">  &lt;AF&gt;=Use '-6|-4' or '-A &lt;af&gt;' or '--&lt;af&gt;'; default: inet</div><div class=\"line\">  List of possible address families (which support routing):</div><div class=\"line\"><span class=\"code\">    inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25)</span></div><div class=\"line\"><span class=\"code\">    netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP)</span></div><div class=\"line\"><span class=\"code\">    x25 (CCITT X.25)</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>其中</p>\n<ul>\n<li>-a (all)显示所有选项，默认不显示LISTEN相关</li>\n<li>-t (tcp)仅显示tcp相关选项</li>\n<li>-u (udp)仅显示udp相关选项</li>\n<li>-n 拒绝显示别名，能显示数字的全部转化成数字</li>\n<li>-l 仅列出有在 Listen (监听) 的服務状态</li>\n<li>-p 显示建立相关链接的程序名</li>\n<li>-r 显示路由信息，路由表</li>\n<li>-e 显示扩展信息，例如uid等</li>\n<li>-s 按各个协议进行统计</li>\n<li>-c 每隔一个固定时间，执行该netstat命令。<br>提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</li>\n</ul>\n<h3 id=\"lsof用法\"><a href=\"#lsof用法\" class=\"headerlink\" title=\"lsof用法\"></a>lsof用法</h3><ul>\n<li>lsof  -i:port  可以检测到打开套接字的状况<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">-?|-h list help          -a AND selections (OR)     -b avoid kernel blocks</div><div class=\"line\">  -c c  cmd c ^c /c/[bix]  +c w  COMMAND width (9)    +d s  dir s files</div><div class=\"line\">  -d s  select by FD set   +D D  dir D tree <span class=\"emphasis\">*SLOW?*</span>   -i select IPv[46] files</div><div class=\"line\">  -l list UID numbers      -n no host names           -N select NFS files</div><div class=\"line\">  -o list file offset      -O no overhead <span class=\"emphasis\">*RISKY*</span>     -P no port names</div><div class=\"line\">  -R list paRent PID       -s list file size          -t terse listing</div><div class=\"line\">  -T disable TCP/TPI info  -U select Unix socket      -v list version info</div><div class=\"line\">  -V verbose search        +|-w  Warnings (+)         -- end option scan</div><div class=\"line\">  +f|-f  +filesystem or -file names     +|-f[cgG] Ct flaGs </div><div class=\"line\">  -F [f] select fields; -F? for help  </div><div class=\"line\">  +|-L [l] list (+) suppress (-) link counts &lt; l (0 = all; default = 0)</div><div class=\"line\">  +|-M   portMap registration (-)       -o o   o 0t offset digits (8)</div><div class=\"line\">  -p s   exclude(^)|select PIDs         -S [t] t second stat timeout (15)</div><div class=\"line\">  -T fqs TCP/TPI Fl,Q,St (s) info</div><div class=\"line\">  -g [s] exclude(^)|select and print process group IDs</div><div class=\"line\">  -i i   select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]</div><div class=\"line\">  +|-r [t[m&lt;fmt&gt;]] repeat every t seconds (15);  + until no files, - forever.</div><div class=\"line\"><span class=\"code\">       An optional suffix to t is m&lt;fmt&gt;; m must separate t from &lt;fmt&gt; and</span></div><div class=\"line\"><span class=\"code\">      &lt;fmt&gt; is an strftime(3) format for the marker line.</span></div><div class=\"line\">  -s p:s  exclude(^)|select protocol (p = TCP|UDP) states by name(s).</div><div class=\"line\">  -u s   exclude(^)|select login|UID set s</div><div class=\"line\">  -x [fl] cross over +d|+D File systems or symbolic Links</div><div class=\"line\">  names  select named files or files on named file systems</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"sar用法\"><a href=\"#sar用法\" class=\"headerlink\" title=\"sar用法\"></a>sar用法</h3><ul>\n<li>sar -n SOCK 查看tcp创建的连接数<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\">Usage: sar [ options ] [ &lt;interval&gt; [ &lt;count&gt; ] ]</div><div class=\"line\">Main options and reports:</div><div class=\"line\"><span class=\"code\">\t-b\tI/O and transfer rate statistics</span></div><div class=\"line\"><span class=\"code\">\t-B\tPaging statistics</span></div><div class=\"line\"><span class=\"code\">\t-d\tBlock device statistics</span></div><div class=\"line\"><span class=\"code\">\t-H\tHugepages utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-I &#123; &lt;int&gt; | SUM | ALL | XALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tInterrupts statistics</span></div><div class=\"line\"><span class=\"code\">\t-m &#123; &lt;keyword&gt; [,...] | ALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tPower management statistics</span></div><div class=\"line\"><span class=\"code\">\t\tKeywords are:</span></div><div class=\"line\"><span class=\"code\">\t\tCPU\tCPU instantaneous clock frequency</span></div><div class=\"line\"><span class=\"code\">\t\tFAN\tFans speed</span></div><div class=\"line\"><span class=\"code\">\t\tFREQ\tCPU average clock frequency</span></div><div class=\"line\"><span class=\"code\">\t\tIN\tVoltage inputs</span></div><div class=\"line\"><span class=\"code\">\t\tTEMP\tDevices temperature</span></div><div class=\"line\"><span class=\"code\">\t\tUSB\tUSB devices plugged into the system</span></div><div class=\"line\"><span class=\"code\">\t-n &#123; &lt;keyword&gt; [,...] | ALL &#125;</span></div><div class=\"line\"><span class=\"code\">\t\tNetwork statistics</span></div><div class=\"line\"><span class=\"code\">\t\tKeywords are:</span></div><div class=\"line\"><span class=\"code\">\t\tDEV\tNetwork interfaces</span></div><div class=\"line\"><span class=\"code\">\t\tEDEV\tNetwork interfaces (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tNFS\tNFS client</span></div><div class=\"line\"><span class=\"code\">\t\tNFSD\tNFS server</span></div><div class=\"line\"><span class=\"code\">\t\tSOCK\tSockets\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tIP\tIP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tEIP\tIP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tICMP\tICMP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tEICMP\tICMP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tTCP\tTCP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tETCP\tTCP traffic\t(v4) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tUDP\tUDP traffic\t(v4)</span></div><div class=\"line\"><span class=\"code\">\t\tSOCK6\tSockets\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tIP6\tIP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tEIP6\tIP traffic\t(v6) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tICMP6\tICMP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t\tEICMP6\tICMP traffic\t(v6) (errors)</span></div><div class=\"line\"><span class=\"code\">\t\tUDP6\tUDP traffic\t(v6)</span></div><div class=\"line\"><span class=\"code\">\t-q\tQueue length and load average statistics</span></div><div class=\"line\"><span class=\"code\">\t-r\tMemory utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-R\tMemory statistics</span></div><div class=\"line\"><span class=\"code\">\t-S\tSwap space utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-u [ ALL ]</span></div><div class=\"line\"><span class=\"code\">\t\tCPU utilization statistics</span></div><div class=\"line\"><span class=\"code\">\t-v\tKernel table statistics</span></div><div class=\"line\"><span class=\"code\">\t-w\tTask creation and system switching statistics</span></div><div class=\"line\"><span class=\"code\">\t-W\tSwapping statistics</span></div><div class=\"line\"><span class=\"code\">\t-y\tTTY device statistics</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"tcpdump用法\"><a href=\"#tcpdump用法\" class=\"headerlink\" title=\"tcpdump用法\"></a>tcpdump用法</h3><ul>\n<li>tcpdump -iany tcp port 9000 对tcp端口为9000的进行抓包<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div></pre></td><td class=\"code\"><pre><div class=\"line\">-A  以ASCII码方式显示每一个数据包(不会显示数据包中链路层头部信息). 在抓取包含网页数据的数据包时, 可方便查看数据(nt: 即Handy for capturing web pages).</div><div class=\"line\"></div><div class=\"line\">-c  count</div><div class=\"line\"><span class=\"code\">    tcpdump将在接受到count个数据包后退出.</span></div><div class=\"line\"></div><div class=\"line\">-C  file-size (nt: 此选项用于配合-w file 选项使用)</div><div class=\"line\"><span class=\"code\">    该选项使得tcpdump 在把原始数据包直接保存到文件中之前, 检查此文件大小是否超过file-size. 如果超过了, 将关闭此文件,另创一个文件继续用于原始数据包的记录. 新创建的文件名与-w 选项指定的文件名一致, 但文件名后多了一个数字.该数字会从1开始随着新创建文件的增多而增加. file-size的单位是百万字节(nt: 这里指1,000,000个字节,并非1,048,576个字节, 后者是以1024字节为1k, 1024k字节为1M计算所得, 即1M=1024 ＊ 1024 ＝ 1,048,576)</span></div><div class=\"line\"></div><div class=\"line\">-d  以容易阅读的形式,在标准输出上打印出编排过的包匹配码, 随后tcpdump停止.(nt | rt: human readable, 容易阅读的,通常是指以ascii码来打印一些信息. compiled, 编排过的. packet-matching code, 包匹配码,含义未知, 需补充)</div><div class=\"line\"></div><div class=\"line\">-dd 以C语言的形式打印出包匹配码.</div><div class=\"line\"></div><div class=\"line\">-ddd 以十进制数的形式打印出包匹配码(会在包匹配码之前有一个附加的'count'前缀).</div><div class=\"line\"></div><div class=\"line\">-D  打印系统中所有tcpdump可以在其上进行抓包的网络接口. 每一个接口会打印出数字编号, 相应的接口名字, 以及可能的一个网络接口描述. 其中网络接口名字和数字编号可以用在tcpdump 的-i flag 选项(nt: 把名字或数字代替flag), 来指定要在其上抓包的网络接口.</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    此选项在不支持接口列表命令的系统上很有用(nt: 比如, Windows 系统, 或缺乏 ifconfig -a 的UNIX系统); 接口的数字编号在windows 2000 或其后的系统中很有用, 因为这些系统上的接口名字比较复杂, 而不易使用.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    如果tcpdump编译时所依赖的libpcap库太老,-D 选项不会被支持, 因为其中缺乏 pcap_findalldevs()函数.</span></div><div class=\"line\"></div><div class=\"line\">-e  每行的打印输出中将包括数据包的数据链路层头部信息</div><div class=\"line\"></div><div class=\"line\">-E  spi@ipaddr algo:secret,...</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    可通过spi@ipaddr algo:secret 来解密IPsec ESP包(nt | rt:IPsec Encapsulating Security Payload,IPsec 封装安全负载, IPsec可理解为, 一整套对ip数据包的加密协议, ESP 为整个IP 数据包或其中上层协议部分被加密后的数据,前者的工作模式称为隧道模式; 后者的工作模式称为传输模式 . 工作原理, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    需要注意的是, 在终端启动tcpdump 时, 可以为IPv4 ESP packets 设置密钥(secret）.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    可用于加密的算法包括des-cbc, 3des-cbc, blowfish-cbc, rc3-cbc, cast128-cbc, 或者没有(none).默认的是des-cbc(nt: des, Data Encryption Standard, 数据加密标准, 加密算法未知, 另需补充).secret 为用于ESP 的密钥, 使用ASCII 字符串方式表达. 如果以 0x 开头, 该密钥将以16进制方式读入.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    该选项中ESP 的定义遵循RFC2406, 而不是 RFC1827. 并且, 此选项只是用来调试的, 不推荐以真实密钥(secret)来使用该选项, 因为这样不安全: 在命令行中输入的secret 可以被其他人通过ps 等命令查看到.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    除了以上的语法格式(nt: 指spi@ipaddr algo:secret), 还可以在后面添加一个语法输入文件名字供tcpdump 使用(nt：即把spi@ipaddr algo:secret,... 中...换成一个语法文件名). 此文件在接受到第一个ESP　包时会打开此文件, 所以最好此时把赋予tcpdump 的一些特权取消(nt: 可理解为, 这样防范之后, 当该文件为恶意编写时,不至于造成过大损害).</span></div><div class=\"line\"></div><div class=\"line\">-f  显示外部的IPv4 地址时(nt: foreign IPv4 addresses, 可理解为, 非本机ip地址), 采用数字方式而不是名字.(此选项是用来对付Sun公司的NIS服务器的缺陷(nt: NIS, 网络信息服务, tcpdump 显示外部地址的名字时会用到她提供的名称服务): 此NIS服务器在查询非本地地址名字时,常常会陷入无尽的查询循环).</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    由于对外部(foreign)IPv4地址的测试需要用到本地网络接口(nt: tcpdump 抓包时用到的接口)及其IPv4 地址和网络掩码. 如果此地址或网络掩码不可用, 或者此接口根本就没有设置相应网络地址和网络掩码(nt: linux 下的 'any' 网络接口就不需要设置地址和掩码, 不过此'any'接口可以收到系统中所有接口的数据包), 该选项不能正常工作.</span></div><div class=\"line\"></div><div class=\"line\">-F  file</div><div class=\"line\"><span class=\"code\">    使用file 文件作为过滤条件表达式的输入, 此时命令行上的输入将被忽略.</span></div><div class=\"line\"></div><div class=\"line\">-i  interface</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    指定tcpdump 需要监听的接口.  如果没有指定, tcpdump 会从系统接口列表中搜寻编号最小的已配置好的接口(不包括 loopback 接口).一但找到第一个符合条件的接口, 搜寻马上结束.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    在采用2.2版本或之后版本内核的Linux 操作系统上, 'any' 这个虚拟网络接口可被用来接收所有网络接口上的数据包(nt: 这会包括目的是该网络接口的, 也包括目的不是该网络接口的). 需要注意的是如果真实网络接口不能工作在'混杂'模式(promiscuous)下,则无法在'any'这个虚拟的网络接口上抓取其数据包.</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    如果 -D 标志被指定, tcpdump会打印系统中的接口编号，而该编号就可用于此处的interface 参数.</span></div><div class=\"line\"></div><div class=\"line\">-l  对标准输出进行行缓冲(nt: 使标准输出设备遇到一个换行符就马上把这行的内容打印出来).在需要同时观察抓包打印以及保存抓包记录的时候很有用. 比如, 可通过以下命令组合来达到此目的:</div><div class=\"line\"><span class=\"code\">    ``tcpdump  -l  |  tee dat'' 或者 ``tcpdump  -l   &gt; dat  &amp;  tail  -f  dat''.(nt: 前者使用tee来把tcpdump 的输出同时放到文件dat和标准输出中, 而后者通过重定向操作'&gt;', 把tcpdump的输出放到dat 文件中, 同时通过tail把dat文件中的内容放到标准输出中)</span></div><div class=\"line\"></div><div class=\"line\">-L  列出指定网络接口所支持的数据链路层的类型后退出.(nt: 指定接口通过-i 来指定)</div><div class=\"line\"></div><div class=\"line\">-m  module</div><div class=\"line\"><span class=\"code\">    通过module 指定的file 装载SMI MIB 模块(nt: SMI，Structure of Management Information, 管理信息结构MIB, Management Information Base, 管理信息库. 可理解为, 这两者用于SNMP(Simple Network Management Protoco)协议数据包的抓取. 具体SNMP 的工作原理未知, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">    此选项可多次使用, 从而为tcpdump 装载不同的MIB 模块.</span></div><div class=\"line\"></div><div class=\"line\">-M  secret  如果TCP 数据包(TCP segments)有TCP-MD5选项(在RFC 2385有相关描述), 则为其摘要的验证指定一个公共的密钥secret.</div><div class=\"line\"></div><div class=\"line\">-n  不对地址(比如, 主机地址, 端口号)进行数字表示到名字表示的转换.</div><div class=\"line\"></div><div class=\"line\">-N  不打印出host 的域名部分. 比如, 如果设置了此选现, tcpdump 将会打印'nic' 而不是 'nic.ddn.mil'.</div><div class=\"line\"></div><div class=\"line\">-O  不启用进行包匹配时所用的优化代码. 当怀疑某些bug是由优化代码引起的, 此选项将很有用.</div><div class=\"line\"></div><div class=\"line\">-p  一般情况下, 把网络接口设置为非'混杂'模式. 但必须注意 , 在特殊情况下此网络接口还是会以'混杂'模式来工作； 从而, '-p' 的设与不设, 不能当做以下选现的代名词:'ether host &#123;local-hw-add&#125;' 或  'ether broadcast'(nt: 前者表示只匹配以太网地址为host 的包, 后者表示匹配以太网地址为广播地址的数据包).</div><div class=\"line\"></div><div class=\"line\">-q  快速(也许用'安静'更好?)打印输出. 即打印很少的协议相关信息, 从而输出行都比较简短.</div><div class=\"line\"></div><div class=\"line\">-R  设定tcpdump 对 ESP/AH 数据包的解析按照 RFC1825而不是RFC1829(nt: AH, 认证头, ESP， 安全负载封装, 这两者会用在IP包的安全传输机制中). 如果此选项被设置, tcpdump 将不会打印出'禁止中继'域(nt: relay prevention field). 另外,由于ESP/AH规范中没有规定ESP/AH数据包必须拥有协议版本号域,所以tcpdump不能从收到的ESP/AH数据包中推导出协议版本号.</div><div class=\"line\"></div><div class=\"line\">-r  file</div><div class=\"line\"><span class=\"code\">    从文件file 中读取包数据. 如果file 字段为 '-' 符号, 则tcpdump 会从标准输入中读取包数据.</span></div><div class=\"line\"></div><div class=\"line\">-S  打印TCP 数据包的顺序号时, 使用绝对的顺序号, 而不是相对的顺序号.(nt: 相对顺序号可理解为, 相对第一个TCP 包顺序号的差距,比如, 接受方收到第一个数据包的绝对顺序号为232323, 对于后来接收到的第2个,第3个数据包, tcpdump会打印其序列号为1, 2分别表示与第一个数据包的差距为1 和 2. 而如果此时-S 选项被设置, 对于后来接收到的第2个, 第3个数据包会打印出其绝对顺序号:232324, 232325).</div><div class=\"line\"></div><div class=\"line\">-s  snaplen</div><div class=\"line\"><span class=\"code\">    设置tcpdump的数据包抓取长度为snaplen, 如果不设置默认将会是68字节(而支持网络接口分接头(nt: NIT, 上文已有描述,可搜索'网络接口分接头'关键字找到那里)的SunOS系列操作系统中默认的也是最小值是96).68字节对于IP, ICMP(nt: Internet Control Message Protocol,因特网控制报文协议), TCP 以及 UDP 协议的报文已足够, 但对于名称服务(nt: 可理解为dns, nis等服务), NFS服务相关的数据包会产生包截短. 如果产生包截短这种情况, tcpdump的相应打印输出行中会出现''[|proto]''的标志（proto 实际会显示为被截短的数据包的相关协议层次). 需要注意的是, 采用长的抓取长度(nt: snaplen比较大), 会增加包的处理时间, 并且会减少tcpdump 可缓存的数据包的数量， 从而会导致数据包的丢失. 所以, 在能抓取我们想要的包的前提下, 抓取长度越小越好.把snaplen 设置为0 意味着让tcpdump自动选择合适的长度来抓取数据包.</span></div><div class=\"line\"></div><div class=\"line\">-T  type</div><div class=\"line\"><span class=\"code\">    强制tcpdump按type指定的协议所描述的包结构来分析收到的数据包.  目前已知的type 可取的协议为:</span></div><div class=\"line\"><span class=\"code\">    aodv (Ad-hoc On-demand Distance Vector protocol, 按需距离向量路由协议, 在Ad hoc(点对点模式)网络中使用),</span></div><div class=\"line\"><span class=\"code\">    cnfp (Cisco  NetFlow  protocol),  rpc(Remote Procedure Call), rtp (Real-Time Applications protocol),</span></div><div class=\"line\"><span class=\"code\">    rtcp (Real-Time Applications con-trol protocol), snmp (Simple Network Management Protocol),</span></div><div class=\"line\"><span class=\"code\">    tftp (Trivial File Transfer Protocol, 碎文件协议), vat (Visual Audio Tool, 可用于在internet 上进行电</span></div><div class=\"line\"><span class=\"code\">    视电话会议的应用层协议), 以及wb (distributed White Board, 可用于网络会议的应用层协议).</span></div><div class=\"line\"></div><div class=\"line\">-t     在每行输出中不打印时间戳</div><div class=\"line\"></div><div class=\"line\">-tt    不对每行输出的时间进行格式处理(nt: 这种格式一眼可能看不出其含义, 如时间戳打印成1261798315)</div><div class=\"line\"></div><div class=\"line\">-ttt   tcpdump 输出时, 每两行打印之间会延迟一个段时间(以毫秒为单位)</div><div class=\"line\"></div><div class=\"line\">-tttt  在每行打印的时间戳之前添加日期的打印</div><div class=\"line\"></div><div class=\"line\">-u     打印出未加密的NFS 句柄(nt: handle可理解为NFS 中使用的文件句柄, 这将包括文件夹和文件夹中的文件)</div><div class=\"line\"></div><div class=\"line\">-U    使得当tcpdump在使用-w 选项时, 其文件写入与包的保存同步.(nt: 即, 当每个数据包被保存时, 它将及时被写入文件中,而不是等文件的输出缓冲已满时才真正写入此文件)</div><div class=\"line\"></div><div class=\"line\"><span class=\"code\">      -U 标志在老版本的libcap库(nt: tcpdump 所依赖的报文捕获库)上不起作用, 因为其中缺乏pcap_cump_flush()函数.</span></div><div class=\"line\"></div><div class=\"line\">-v    当分析和打印的时候, 产生详细的输出. 比如, 包的生存时间, 标识, 总长度以及IP包的一些选项. 这也会打开一些附加的包完整性检测, 比如对IP或ICMP包头部的校验和.</div><div class=\"line\"></div><div class=\"line\">-vv   产生比-v更详细的输出. 比如, NFS回应包中的附加域将会被打印, SMB数据包也会被完全解码.</div><div class=\"line\"></div><div class=\"line\">-vvv  产生比-vv更详细的输出. 比如, telent 时所使用的SB, SE 选项将会被打印, 如果telnet同时使用的是图形界面,</div><div class=\"line\"><span class=\"code\">      其相应的图形选项将会以16进制的方式打印出来(nt: telnet 的SB,SE选项含义未知, 另需补充).</span></div><div class=\"line\"></div><div class=\"line\">-w    把包数据直接写入文件而不进行分析和打印输出. 这些包数据可在随后通过-r 选项来重新读入并进行分析和打印.</div><div class=\"line\"></div><div class=\"line\">-W    filecount</div><div class=\"line\"><span class=\"code\">      此选项与-C 选项配合使用, 这将限制可打开的文件数目, 并且当文件数据超过这里设置的限制时, 依次循环替代之前的文件, 这相当于一个拥有filecount 个文件的文件缓冲池. 同时, 该选项会使得每个文件名的开头会出现足够多并用来占位的0, 这可以方便这些文件被正确的排序.</span></div><div class=\"line\"></div><div class=\"line\">-x    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据(但不包括连接层的头部).总共打印的数据大小不会超过整个数据包的大小与snaplen 中的最小值. 必须要注意的是, 如果高层协议数据没有snaplen 这么长,并且数据链路层(比如, Ethernet层)有填充数据, 则这些填充数据也会被打印.(nt: so for link  layers  that pad, 未能衔接理解和翻译, 需补充 )</div><div class=\"line\"></div><div class=\"line\">-xx   tcpdump 会打印每个包的头部数据, 同时会以16进制打印出每个包的数据, 其中包括数据链路层的头部.</div><div class=\"line\"></div><div class=\"line\">-X    当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据(但不包括连接层的头部).这对于分析一些新协议的数据包很方便.</div><div class=\"line\"></div><div class=\"line\">-XX   当分析和打印时, tcpdump 会打印每个包的头部数据, 同时会以16进制和ASCII码形式打印出每个包的数据, 其中包括数据链路层的头部.这对于分析一些新协议的数据包很方便.</div><div class=\"line\"></div><div class=\"line\">-y    datalinktype</div><div class=\"line\"><span class=\"code\">      设置tcpdump 只捕获数据链路层协议类型是datalinktype的数据包</span></div><div class=\"line\"></div><div class=\"line\">-Z    user</div><div class=\"line\"><span class=\"code\">      使tcpdump 放弃自己的超级权限(如果以root用户启动tcpdump, tcpdump将会有超级用户权限), 并把当前tcpdump的用户ID设置为user, 组ID设置为user首要所属组的ID(nt: tcpdump 此处可理解为tcpdump 运行之后对应的进程)</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><a href=\"http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html\" target=\"_blank\" rel=\"external\">Linux tcpdump命令详解</a><br>","more":"</p>\n<h2 id=\"网络测试常用命令\"><a href=\"#网络测试常用命令\" class=\"headerlink\" title=\"网络测试常用命令\"></a>网络测试常用命令</h2><h3 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h3><p>检测网络连接的正常与否,主要是测试延时、抖动、丢包率。<br>但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。<br>ping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。<br>TTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。<br>TTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。</p>\n<h3 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h3><p>跟踪数据包到达网络主机所经过的路由工具<br>traceroute hostname</p>\n<h3 id=\"pathping\"><a href=\"#pathping\" class=\"headerlink\" title=\"pathping\"></a>pathping</h3><p>是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能<br>pathping www.baidu.com</p>\n<h3 id=\"nslookup\"><a href=\"#nslookup\" class=\"headerlink\" title=\"nslookup\"></a>nslookup</h3><p>用于解析域名，一般用来检测本机的DNS设置是否配置正确。</p>\n<h3 id=\"mtr\"><a href=\"#mtr\" class=\"headerlink\" title=\"mtr\"></a>mtr</h3><p>可以结合ping nslookup tracert 来判断网络的相关特性</p>\n<h2 id=\"系统大量TIME-WAIT状态连接的处理\"><a href=\"#系统大量TIME-WAIT状态连接的处理\" class=\"headerlink\" title=\"系统大量TIME_WAIT状态连接的处理\"></a>系统大量TIME_WAIT状态连接的处理</h2><p>发现系统存在大量TIME_WAIT状态的连接，可以通过调整内核参数解决：<code>vi /etc/sysctl.conf</code> 加入以下内容：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.ipv4.tcp_syncookies = 1</div><div class=\"line\">net.ipv4.tcp_tw_reuse = 1</div><div class=\"line\">net.ipv4.tcp_tw_recycle = 1</div><div class=\"line\">net.ipv4.tcp_fin_timeout = 30</div></pre></td></tr></table></figure></p>\n<p>然后执行 <code>/sbin/sysctl -p</code> 让参数生效。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.ipv4.tcp_syncookies = 1 表示开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；</div><div class=\"line\">net.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；</div><div class=\"line\">net.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。</div><div class=\"line\">net.ipv4.tcp_fin_timeout 修改系統默认的 TIMEOUT 时间</div></pre></td></tr></table></figure></p>\n<h2 id=\"以下相关内容值得学习\"><a href=\"#以下相关内容值得学习\" class=\"headerlink\" title=\"以下相关内容值得学习\"></a>以下相关内容值得学习</h2><p><a href=\"http://blog.csdn.net/hguisu/article/details/38700899\" target=\"_blank\" rel=\"external\">TCP连接的状态详解以及故障排查</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/10241519\" target=\"_blank\" rel=\"external\">TIME_WAIT引起Cannot assign requested address报错</a></p>"},{"title":"JVM调优","date":"2017-06-14T01:20:46.000Z","_content":"\n由于Java字节码是运行在JVM虚拟机上的，同样的字节码使用不同的JVM虚拟机参数运行，其性能表现可能各不相同。为了能使系统性能最优，就需要对JVM参数进行调整以达到应用程序运行的最佳效果。\n![JVM结构](http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-4217e4e9a77a4ed6808c89a303261dc9.jpg)\n\n## 常用命令\n* jps 虚拟机进程状况工具(Java Virtual Machine Process Status Tool)\n```markdown\n-q 不输出类名、Jar名和传入main方法的参数\n-m 输出传入main方法的参数\n-l 输出main类或Jar的全限名\n-v 输出传入JVM的参数\n```\n* jstack 查看某个Java进程内的线程堆栈信息\n```markdown\n-F  to force a thread dump. Use when jstack <pid> does not respond (process is hung)\n-m  不仅会输出Java堆栈信息，还会输出C/C++堆栈信息（比如Native方法）\n-l  会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况\n-h or -help to print this help message\n```\n* jmap 查看堆内存使用状况\n```markdown\n打印进程的类加载器和类加载器加载的持久代对象信息，输出：类加载器名称、对象是否存活（不可靠）、对象地址、父类加载器、已加载的类大小等信息\n\n使用jmap -heap pid查看进程堆内存使用情况，包括使用的GC算法、堆配置参数和各代中堆内存使用情况\n\njmap -heap 7481\njmap -histo:live 1432 | more;//查看堆内存中的对象数目、大小统计直方图，如果带上live则只统计活对象\njmap -permstat 7481;//如果操作系统是64位\n使用jmap生成dump文件\njmap -dump:format=b,file=/tmp/dump.dat 14949;//14949进程号\n```\n* jstat\n```markdown\njstat -gcutil pid 500 20;//每500毫秒查询进程pid垃圾收集情况 一共查询20次\njstat -gcold pid;//查看老年代gc存储量\njstat -gcnew pid;//查看年轻代gc存储量\n\n-gcutil:监视堆内存情况，包括eden区，s1，s2,老年代和永久代的内存容量\n-gcnew:监视新生代GC情况\n-gcold:监视老年代GC情况\n\nS0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）\nEC、EU：Eden区容量和使用量\nOC、OU：年老代容量和使用量\nPC、PU：永久代容量和使用量\nYGC、YGT：年轻代GC次数和GC耗时\nFGC、FGCT：Full GC次数和Full GC耗时\nGCT：GC总耗时\n```\n* jinfo\n用于查询当前运行这的JVM属性和参数的值。\n```markdown\n   -flag:显示未被显示指定的参数的系统默认值\n   -flag [+|-]name或-flag name=value: 修改部分参数\n   -sysprops:打印虚拟机进程的System.getProperties()\n 命令格式:jinfo [option] pid \n```\n**java -XX:+PrintFlagsFinal -version|grep manageable**命令可查看支持通过jinfo动态设置的参数\n```\njinfo -flags pid;  //打印进程pid的jvm参数设置\n用它来动态设置参数\njinfo -flag -PrintGC 8359\njinfo -flag -PrintGCDDetails 8359\n上面的命令代表关闭Java应用进程为8359的的PrintGC参数和PrintGCDetails参数。\n\njinfo -flag +PrintGC 8359\njinfo -flag +PrintGCDDetails 8359\n\n```\n\n## 评估堆大小和内存占用\n### JVM内存模型\n![JVM内存模型](http://static.xcoder.ren/public/resource/jvm-gc-memory.jpg)\n\nHotSpot VM有3个主要的空间：young代、old代以及permanent代\n当Java应用分配Java对象时，这些对象被分配到young代。在经历过几次minor GC之后，如果对象还是存活的，就会被转移到old代空间。permanent代空间存储了VM和Java类的元数据比如内置的字符串和类的静态变量。\n\n### 常用内存参数\n参数说明:\n![JVM主要参数](http://static.xcoder.ren/public/resource/3948988f79c560be-d390ef13d3ebc1ed-98f2ce20f8dd5f395a695bf41bb92fc7.jpg)\nJava应用程序运行时，首先会分配-Xms指定的内存大小，并尽可能尝试在这个空间段运行。最大不会超过-Xmx指定的内存大小，它是Java应用程序的堆上限，超过就会内存溢出（OutofMemoryError）。\n如果-Xms的数值太小，JVM为了保证系统尽可能的运行在指定内存范围内，就会更加频繁的GC以便释放内存空间。频繁的MinorGC和FullGC次数，对系统会有性能损耗。\n所以一般情况下会保持-Xms -Xmx一致，以减少系统运行初期的GC次数和耗时。\nJava虚拟机中还有一种常见的异常：栈溢出（StackOverflowError），如果线程在计算过程中，请求的栈深度大于可用的最大栈深度，则会出现StackOverflowError。-Xss是用来设置栈大小的。比如-Xss1M代表每个线程拥有1MB的栈空间，当增大此参数，比如-Xss20M时每个线程可用的栈空间为20M，由于系统的内存是有限度的，势必会造成应用程序可创建的线程数的减少，而且系统所能支持的线程数量，还与堆的大小有关。\n\n#### JVM堆大小\n```markdown\n-Xmx<n>[g|m|k]  \n-Xms<n>[g|m|k]  \n```\n-Xmx和-Xms这个两个命令行选项分别指定yound代加上old代空间的总和的初始最大值和最小值，也就是Java堆的大小。当-Xms的值小于-Xmx的值的时候，Java堆的大小可以在最大值和最小值之前浮动。当Java应用强调吞吐量和延迟的时候，倾向于把-Xms和-Xmx设置成相同的值，由于调整young代或者old代的大小都需要进行Full GC，Full GC降低吞吐量以及加强延迟。\n#### 年轻代\n```markdown\n-XX:NewSize=<n>[g|m|k]  \n-XX:MaxNewSize=<n>[g|m|k]  \n```\n这两个参数可以指定young代的初始值和最大值，但是我们一般会用下面这个参数来直接固定young代的大小\n```\n-Xmn<n>[g|m|k]  \n```\n这个参数可以直接指定young代的初始值、最小值以及最大值。也就是说，young区的大小被固定成这个值了。这个值用来锁定young代的大小很方便。\n有一点需要注意的是，如果-Xms和-Xmx没有被设定成相同的值，而且-Xmn被使用了，当调整Java堆的大小的时候，不会调整young代的空间大小，young代的空间大小会保持恒定。因此，**-Xmn应该在-Xms和-Xmx设定成相同的时候才指定**。\n#### 年老代\nold代的空间大小可以基于young代的大小进行计算，old代的初始值的大小是-Xms的值减去-XX:NewSize，最大值是-Xmx减去-XX:MaxNewSize，如果-Xmx和-Xms设置成了相同的值，而且使用-Xmn选项或者-XX:NewSize和-XX:MaxNewSize设置成了相同的值，那么old代的大小就是-Xmx减去-Xmn。\n\n#### 永久代\nJDK1.8之前\n```markdown\n-XX:PermSize=<n>[g|m|k]  \n-XX:MaxPermSize=<n>[g|m|k]  \n```\n表示永久代的初始值和最大值\nJDK1.8\n```markdown\n-XX:MetaspaceSize=<n>[g|m|k] \n-XX:MaxMetaspaceSize=<n>[g|m|k] \n```\n![JDK8新增参数](http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-2d0b9dc6f2913667ad01fe76add46404.jpg)\n\nJava应用应该指定这两个值成为同一个值，由于这个值的调整会导致Full GC。\n\n如果上面提到的Java堆大小、young代、permanent代的大小都没有指定，那么JVM会根据应用的情况自行计算。\n\n在young代、old代以及permanent代中任何一个空间里面无法分配对象的时候就会触发垃圾回收，理解这点，对后面的优化非常重要。\n当young代没有足够空间分配Java对象的时候，触发minor GC。**minor GC相对于Full GC来说会更短暂。**\n一个对象在经历过一定次数的Minor GC之后，如果还存活，那么会被转移到old代。\n**当old代没有足够空间放置对象的时候，HotSpot VM触发full GC。**\n**实际上在进行Minor GC的时候发现没有old代足够的空间来进行对象的转移，就会触发FullGC，相对于在MinorGC的过程中发现对象的移动失败了然后触发FullGC，这样的策略会有更小的花费。**\n**当permanent代的空间不够用的时候的，也会触发FullGC。**\n\n**如果FullGC是由于old代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使permanent代的空间还没有满。**\n**同理，如果FullGC是由于permanent代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使old代的空间还没有满。**\n**另外，young代同样会被垃圾回收，除非-XX:+ScavengeBeforeFullGC选项被指定了，-XX:+ScavengeBeforeFullGC关闭FullGC的时候young代的垃圾回收。**\n\nMinor GC 是清理年轻代（包括 Eden 和 Survivor 区域）\nMajor GC 是清理永久代\nFull GC 是清理整个堆空间—包括年轻代和永久代\n\n### 评估\n#### OutOfMemoryError\n```markdown\n[Full GC[PSYoungGen: 279700K->267300K(358400K)]  \n[ParOldGen: 685165K->685165K(685170K)]  \n964865K->964865K(1043570K)  \n[PSPermGen: 32390K->32390K(65536K)],0.2499342 secs]  \n[Times: user=0.08 sys=0.00, real=0.05 secs]  \njava.lang.OutOfMemoryError: Java heap space  \n```\n年老代(ParOldGen)在执行回收后所占用的空间685165K(->685165K)和年老带分配的空间685170K((685170K))相差无几,所以系统堆内存溢出了。\n这时增加-Xms -Xmx以保证-Xmx和-Xmn的差值能扩大，以扩大年老代(ParOldGen)的空间\n```markdown\n[Full GC[PSYoungGen: 0K->0K(141632K)]  \n  [ParOldGen: 132538K->132538K(350208K)]  \n  32538K->32538K(491840K)  \n  [PSPermGen: 65536K->65536K(65536K)],  \n  0.2430136 secs]  \n  [Times: user=0.37 sys=0.00, real=0.24 secs]  \njava.lang.OutOfMemoryError: PermGen space  \n```\n永久代(PSPermGen)在执行回收后所占用的空间65536K(->65536K)和永久代分配的空间65536K((65536K))一致,所以系统永久代内存溢出了。\n```markdown\n-XX:PermSize=<n>[g|m|k]  \n-XX:MaxPermSize=<n>[g|m|k]  \n```\n表示永久代的初始值和最大值\nJDK1.8\n```markdown\n-XX:MetaspaceSize=<n>[g|m|k] \n-XX:MaxMetaspaceSize=<n>[g|m|k] \n```\n这时候增大永久代的空间即可。\n\nJava堆能够使用的容量受限于硬件以及是否使用64位的JVM。在扩大了Java堆的大小之后，再检查垃圾回收日志，直到没有OutOfMemoryError为止\n\n做完这些，能让系统在一定程度上稳定运行，就可以通过分析GC来调整优化JVM参数了。\n\n#### 根据活动对象评估\n应用处于稳定运行状态下，在Java堆里面长期存活的对象。换一句话说，就是应用在稳定运行的状态下，Full GC之后，Java堆的所占的空间。\n活动对象的大小可以通过垃圾回收日志查看，它提供了一些优化信息：\n* 应用处于稳定运行状态下，old代的Java堆空间占用数量。\n* 应用处于稳定运行状态下，permanent代的Java堆空间占用数量。\n```markdown\n[Full GC (Ergonomics) [PSYoungGen: 9600K->0K(1215488K)] [ParOldGen: 917745K->158112K(921600K)] 927345K->158112K(2137088K), [Metaspace: 78193K->78015K(1122304K)], 0.4451209 secs] [Times: user=1.25 sys=0.08, real=0.45 secs]\n[Full GC (Ergonomics) [PSYoungGen: 9152K->0K(1217536K)] [ParOldGen: 917321K->168419K(921600K)] 926473K->168419K(2139136K), [Metaspace: 88598K->88574K(1132544K)], 0.4217154 secs] [Times: user=1.33 sys=0.00, real=0.42 secs]\n```\n方括号里面：该区域已使用的容量->GC后该内存区域已使用的容量(该内存区总容量)\n方括号外面：GC前Java堆已使用的容量->GC后Java堆已使用的容量(Java堆总容量)\n如果应用没有发生FullGC或者发生FullGC的次数很少，在性能测试环境，可以通过Java监控工具来触发FullGC，比如使用VisualVM和JConsole，这些工具在最新的JDK的bin目录下可以找到，VisualVM集成了JConsole，VisualVM或者JConsole上面有一个触发GC的按钮。\n也可以通过jmap命令来强制执行垃圾回收\n```markdown\njmap -histo:live pid  \n```\n上述日志说明年老代(ParOldGen)稳定在168419K(大约165M),永久代(MetaSpace/PSPermGen)稳定在88574K(大约86M)，还可以看出PSYoungGen占用1215488K，ParOldGen占用921600K，堆占用2137088K，MetaSpace/PermSize占用1132544K\n\n通过活动对象大小的信息，可以做出关于Java堆的大小有根据的决定，以及可以估计出最坏情况下会导致的延迟。\n\n**以下是经验值**\n\n**Java堆大小的初始化值和最大值（通过-Xms和-Xmx选项来指定）应该是old代活动对象的大小的3到4倍。**\n\n**permanent的初始值和最大值（-XX:PermSize和-XX:MaxPermSize）应该permanent代活动对象大小的1.2到1.5倍。**\n\n**young代空间应该是old代活动对象大小的1到1.5倍。**\n\n\n结合这个经验和前面的Full GC可以得到如下的**经验值**\n```markdown\n-Xms660M -Xmx660M -Xmn130M -XX:MetaspaceSize=130M -XX:MaxMetaspaceSize=130M\n```\n\n## 参数调优\n\n### 优化young代大小\n\n### 优化old代大小\n\n\n\n\n\n[一步步优化JVM四：决定Java堆的大小以及内存占用](http://blog.csdn.net/zhoutao198712/article/details/7783070)\n[JVM 常见参数设置和分析](http://blog.csdn.net/wwh578867817/article/details/51883476)\n[JVM打印gc的内容及日志解释](http://blog.csdn.net/stevendbaguo/article/details/42460707)\n[在运行时开启GC日志](http://www.importnew.com/15722.html)\n[http://ifeve.com/useful-jvm-flags-part-8-gc-logging/](http://ifeve.com/useful-jvm-flags-part-8-gc-logging/)\n[关于施用full gc频繁的分析及解决](https://my.oschina.net/goldwave/blog/168516)\n[线上FullGC频繁的排查](http://blog.csdn.net/wilsonpeng3/article/details/70064336)\n[JVM调优参数设置](https://mp.weixin.qq.com/s?__biz=MzI3NDY5MTUwOA==&mid=2247483658&idx=1&sn=0019f202c768a0fab69a63a29dc9d08b&chksm=eb1165d1dc66ecc77e644c51a808ca1d7b4b9baae5a504ee4811a1e726e357401931994bbc2b&scene=0&key=a3337ab81c300e24d1a1e818f9287e35b8b800b98fc0a1441381354c46223bc39dc59c9dd9f0b1904f6e0048a98f52292aca7a56b29d82f527714818b49c0b685e2127c2816a645400a9c57cb2305876&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=Z72Xyt2jJ8zUIk8MaDvMNEaLa1OO7s%2BxAaUhsC0RSUmzjdrO9rI5zpD6RW2wdUd9)","source":"_posts/tuning/[1]jvm参数优化及性能调优.md","raw":"\n---\ntitle: JVM调优\ndate: 2017-06-14 09:20:46\ncategories:\n    - tuning\ntags: \n    - JVM\n    - 性能优化\n    - JAVA\n---\n\n由于Java字节码是运行在JVM虚拟机上的，同样的字节码使用不同的JVM虚拟机参数运行，其性能表现可能各不相同。为了能使系统性能最优，就需要对JVM参数进行调整以达到应用程序运行的最佳效果。\n![JVM结构](http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-4217e4e9a77a4ed6808c89a303261dc9.jpg)\n\n## 常用命令\n* jps 虚拟机进程状况工具(Java Virtual Machine Process Status Tool)\n```markdown\n-q 不输出类名、Jar名和传入main方法的参数\n-m 输出传入main方法的参数\n-l 输出main类或Jar的全限名\n-v 输出传入JVM的参数\n```\n* jstack 查看某个Java进程内的线程堆栈信息\n```markdown\n-F  to force a thread dump. Use when jstack <pid> does not respond (process is hung)\n-m  不仅会输出Java堆栈信息，还会输出C/C++堆栈信息（比如Native方法）\n-l  会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况\n-h or -help to print this help message\n```\n* jmap 查看堆内存使用状况\n```markdown\n打印进程的类加载器和类加载器加载的持久代对象信息，输出：类加载器名称、对象是否存活（不可靠）、对象地址、父类加载器、已加载的类大小等信息\n\n使用jmap -heap pid查看进程堆内存使用情况，包括使用的GC算法、堆配置参数和各代中堆内存使用情况\n\njmap -heap 7481\njmap -histo:live 1432 | more;//查看堆内存中的对象数目、大小统计直方图，如果带上live则只统计活对象\njmap -permstat 7481;//如果操作系统是64位\n使用jmap生成dump文件\njmap -dump:format=b,file=/tmp/dump.dat 14949;//14949进程号\n```\n* jstat\n```markdown\njstat -gcutil pid 500 20;//每500毫秒查询进程pid垃圾收集情况 一共查询20次\njstat -gcold pid;//查看老年代gc存储量\njstat -gcnew pid;//查看年轻代gc存储量\n\n-gcutil:监视堆内存情况，包括eden区，s1，s2,老年代和永久代的内存容量\n-gcnew:监视新生代GC情况\n-gcold:监视老年代GC情况\n\nS0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）\nEC、EU：Eden区容量和使用量\nOC、OU：年老代容量和使用量\nPC、PU：永久代容量和使用量\nYGC、YGT：年轻代GC次数和GC耗时\nFGC、FGCT：Full GC次数和Full GC耗时\nGCT：GC总耗时\n```\n* jinfo\n用于查询当前运行这的JVM属性和参数的值。\n```markdown\n   -flag:显示未被显示指定的参数的系统默认值\n   -flag [+|-]name或-flag name=value: 修改部分参数\n   -sysprops:打印虚拟机进程的System.getProperties()\n 命令格式:jinfo [option] pid \n```\n**java -XX:+PrintFlagsFinal -version|grep manageable**命令可查看支持通过jinfo动态设置的参数\n```\njinfo -flags pid;  //打印进程pid的jvm参数设置\n用它来动态设置参数\njinfo -flag -PrintGC 8359\njinfo -flag -PrintGCDDetails 8359\n上面的命令代表关闭Java应用进程为8359的的PrintGC参数和PrintGCDetails参数。\n\njinfo -flag +PrintGC 8359\njinfo -flag +PrintGCDDetails 8359\n\n```\n\n## 评估堆大小和内存占用\n### JVM内存模型\n![JVM内存模型](http://static.xcoder.ren/public/resource/jvm-gc-memory.jpg)\n\nHotSpot VM有3个主要的空间：young代、old代以及permanent代\n当Java应用分配Java对象时，这些对象被分配到young代。在经历过几次minor GC之后，如果对象还是存活的，就会被转移到old代空间。permanent代空间存储了VM和Java类的元数据比如内置的字符串和类的静态变量。\n\n### 常用内存参数\n参数说明:\n![JVM主要参数](http://static.xcoder.ren/public/resource/3948988f79c560be-d390ef13d3ebc1ed-98f2ce20f8dd5f395a695bf41bb92fc7.jpg)\nJava应用程序运行时，首先会分配-Xms指定的内存大小，并尽可能尝试在这个空间段运行。最大不会超过-Xmx指定的内存大小，它是Java应用程序的堆上限，超过就会内存溢出（OutofMemoryError）。\n如果-Xms的数值太小，JVM为了保证系统尽可能的运行在指定内存范围内，就会更加频繁的GC以便释放内存空间。频繁的MinorGC和FullGC次数，对系统会有性能损耗。\n所以一般情况下会保持-Xms -Xmx一致，以减少系统运行初期的GC次数和耗时。\nJava虚拟机中还有一种常见的异常：栈溢出（StackOverflowError），如果线程在计算过程中，请求的栈深度大于可用的最大栈深度，则会出现StackOverflowError。-Xss是用来设置栈大小的。比如-Xss1M代表每个线程拥有1MB的栈空间，当增大此参数，比如-Xss20M时每个线程可用的栈空间为20M，由于系统的内存是有限度的，势必会造成应用程序可创建的线程数的减少，而且系统所能支持的线程数量，还与堆的大小有关。\n\n#### JVM堆大小\n```markdown\n-Xmx<n>[g|m|k]  \n-Xms<n>[g|m|k]  \n```\n-Xmx和-Xms这个两个命令行选项分别指定yound代加上old代空间的总和的初始最大值和最小值，也就是Java堆的大小。当-Xms的值小于-Xmx的值的时候，Java堆的大小可以在最大值和最小值之前浮动。当Java应用强调吞吐量和延迟的时候，倾向于把-Xms和-Xmx设置成相同的值，由于调整young代或者old代的大小都需要进行Full GC，Full GC降低吞吐量以及加强延迟。\n#### 年轻代\n```markdown\n-XX:NewSize=<n>[g|m|k]  \n-XX:MaxNewSize=<n>[g|m|k]  \n```\n这两个参数可以指定young代的初始值和最大值，但是我们一般会用下面这个参数来直接固定young代的大小\n```\n-Xmn<n>[g|m|k]  \n```\n这个参数可以直接指定young代的初始值、最小值以及最大值。也就是说，young区的大小被固定成这个值了。这个值用来锁定young代的大小很方便。\n有一点需要注意的是，如果-Xms和-Xmx没有被设定成相同的值，而且-Xmn被使用了，当调整Java堆的大小的时候，不会调整young代的空间大小，young代的空间大小会保持恒定。因此，**-Xmn应该在-Xms和-Xmx设定成相同的时候才指定**。\n#### 年老代\nold代的空间大小可以基于young代的大小进行计算，old代的初始值的大小是-Xms的值减去-XX:NewSize，最大值是-Xmx减去-XX:MaxNewSize，如果-Xmx和-Xms设置成了相同的值，而且使用-Xmn选项或者-XX:NewSize和-XX:MaxNewSize设置成了相同的值，那么old代的大小就是-Xmx减去-Xmn。\n\n#### 永久代\nJDK1.8之前\n```markdown\n-XX:PermSize=<n>[g|m|k]  \n-XX:MaxPermSize=<n>[g|m|k]  \n```\n表示永久代的初始值和最大值\nJDK1.8\n```markdown\n-XX:MetaspaceSize=<n>[g|m|k] \n-XX:MaxMetaspaceSize=<n>[g|m|k] \n```\n![JDK8新增参数](http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-2d0b9dc6f2913667ad01fe76add46404.jpg)\n\nJava应用应该指定这两个值成为同一个值，由于这个值的调整会导致Full GC。\n\n如果上面提到的Java堆大小、young代、permanent代的大小都没有指定，那么JVM会根据应用的情况自行计算。\n\n在young代、old代以及permanent代中任何一个空间里面无法分配对象的时候就会触发垃圾回收，理解这点，对后面的优化非常重要。\n当young代没有足够空间分配Java对象的时候，触发minor GC。**minor GC相对于Full GC来说会更短暂。**\n一个对象在经历过一定次数的Minor GC之后，如果还存活，那么会被转移到old代。\n**当old代没有足够空间放置对象的时候，HotSpot VM触发full GC。**\n**实际上在进行Minor GC的时候发现没有old代足够的空间来进行对象的转移，就会触发FullGC，相对于在MinorGC的过程中发现对象的移动失败了然后触发FullGC，这样的策略会有更小的花费。**\n**当permanent代的空间不够用的时候的，也会触发FullGC。**\n\n**如果FullGC是由于old代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使permanent代的空间还没有满。**\n**同理，如果FullGC是由于permanent代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使old代的空间还没有满。**\n**另外，young代同样会被垃圾回收，除非-XX:+ScavengeBeforeFullGC选项被指定了，-XX:+ScavengeBeforeFullGC关闭FullGC的时候young代的垃圾回收。**\n\nMinor GC 是清理年轻代（包括 Eden 和 Survivor 区域）\nMajor GC 是清理永久代\nFull GC 是清理整个堆空间—包括年轻代和永久代\n\n### 评估\n#### OutOfMemoryError\n```markdown\n[Full GC[PSYoungGen: 279700K->267300K(358400K)]  \n[ParOldGen: 685165K->685165K(685170K)]  \n964865K->964865K(1043570K)  \n[PSPermGen: 32390K->32390K(65536K)],0.2499342 secs]  \n[Times: user=0.08 sys=0.00, real=0.05 secs]  \njava.lang.OutOfMemoryError: Java heap space  \n```\n年老代(ParOldGen)在执行回收后所占用的空间685165K(->685165K)和年老带分配的空间685170K((685170K))相差无几,所以系统堆内存溢出了。\n这时增加-Xms -Xmx以保证-Xmx和-Xmn的差值能扩大，以扩大年老代(ParOldGen)的空间\n```markdown\n[Full GC[PSYoungGen: 0K->0K(141632K)]  \n  [ParOldGen: 132538K->132538K(350208K)]  \n  32538K->32538K(491840K)  \n  [PSPermGen: 65536K->65536K(65536K)],  \n  0.2430136 secs]  \n  [Times: user=0.37 sys=0.00, real=0.24 secs]  \njava.lang.OutOfMemoryError: PermGen space  \n```\n永久代(PSPermGen)在执行回收后所占用的空间65536K(->65536K)和永久代分配的空间65536K((65536K))一致,所以系统永久代内存溢出了。\n```markdown\n-XX:PermSize=<n>[g|m|k]  \n-XX:MaxPermSize=<n>[g|m|k]  \n```\n表示永久代的初始值和最大值\nJDK1.8\n```markdown\n-XX:MetaspaceSize=<n>[g|m|k] \n-XX:MaxMetaspaceSize=<n>[g|m|k] \n```\n这时候增大永久代的空间即可。\n\nJava堆能够使用的容量受限于硬件以及是否使用64位的JVM。在扩大了Java堆的大小之后，再检查垃圾回收日志，直到没有OutOfMemoryError为止\n\n做完这些，能让系统在一定程度上稳定运行，就可以通过分析GC来调整优化JVM参数了。\n\n#### 根据活动对象评估\n应用处于稳定运行状态下，在Java堆里面长期存活的对象。换一句话说，就是应用在稳定运行的状态下，Full GC之后，Java堆的所占的空间。\n活动对象的大小可以通过垃圾回收日志查看，它提供了一些优化信息：\n* 应用处于稳定运行状态下，old代的Java堆空间占用数量。\n* 应用处于稳定运行状态下，permanent代的Java堆空间占用数量。\n```markdown\n[Full GC (Ergonomics) [PSYoungGen: 9600K->0K(1215488K)] [ParOldGen: 917745K->158112K(921600K)] 927345K->158112K(2137088K), [Metaspace: 78193K->78015K(1122304K)], 0.4451209 secs] [Times: user=1.25 sys=0.08, real=0.45 secs]\n[Full GC (Ergonomics) [PSYoungGen: 9152K->0K(1217536K)] [ParOldGen: 917321K->168419K(921600K)] 926473K->168419K(2139136K), [Metaspace: 88598K->88574K(1132544K)], 0.4217154 secs] [Times: user=1.33 sys=0.00, real=0.42 secs]\n```\n方括号里面：该区域已使用的容量->GC后该内存区域已使用的容量(该内存区总容量)\n方括号外面：GC前Java堆已使用的容量->GC后Java堆已使用的容量(Java堆总容量)\n如果应用没有发生FullGC或者发生FullGC的次数很少，在性能测试环境，可以通过Java监控工具来触发FullGC，比如使用VisualVM和JConsole，这些工具在最新的JDK的bin目录下可以找到，VisualVM集成了JConsole，VisualVM或者JConsole上面有一个触发GC的按钮。\n也可以通过jmap命令来强制执行垃圾回收\n```markdown\njmap -histo:live pid  \n```\n上述日志说明年老代(ParOldGen)稳定在168419K(大约165M),永久代(MetaSpace/PSPermGen)稳定在88574K(大约86M)，还可以看出PSYoungGen占用1215488K，ParOldGen占用921600K，堆占用2137088K，MetaSpace/PermSize占用1132544K\n\n通过活动对象大小的信息，可以做出关于Java堆的大小有根据的决定，以及可以估计出最坏情况下会导致的延迟。\n\n**以下是经验值**\n\n**Java堆大小的初始化值和最大值（通过-Xms和-Xmx选项来指定）应该是old代活动对象的大小的3到4倍。**\n\n**permanent的初始值和最大值（-XX:PermSize和-XX:MaxPermSize）应该permanent代活动对象大小的1.2到1.5倍。**\n\n**young代空间应该是old代活动对象大小的1到1.5倍。**\n\n\n结合这个经验和前面的Full GC可以得到如下的**经验值**\n```markdown\n-Xms660M -Xmx660M -Xmn130M -XX:MetaspaceSize=130M -XX:MaxMetaspaceSize=130M\n```\n\n## 参数调优\n\n### 优化young代大小\n\n### 优化old代大小\n\n\n\n\n\n[一步步优化JVM四：决定Java堆的大小以及内存占用](http://blog.csdn.net/zhoutao198712/article/details/7783070)\n[JVM 常见参数设置和分析](http://blog.csdn.net/wwh578867817/article/details/51883476)\n[JVM打印gc的内容及日志解释](http://blog.csdn.net/stevendbaguo/article/details/42460707)\n[在运行时开启GC日志](http://www.importnew.com/15722.html)\n[http://ifeve.com/useful-jvm-flags-part-8-gc-logging/](http://ifeve.com/useful-jvm-flags-part-8-gc-logging/)\n[关于施用full gc频繁的分析及解决](https://my.oschina.net/goldwave/blog/168516)\n[线上FullGC频繁的排查](http://blog.csdn.net/wilsonpeng3/article/details/70064336)\n[JVM调优参数设置](https://mp.weixin.qq.com/s?__biz=MzI3NDY5MTUwOA==&mid=2247483658&idx=1&sn=0019f202c768a0fab69a63a29dc9d08b&chksm=eb1165d1dc66ecc77e644c51a808ca1d7b4b9baae5a504ee4811a1e726e357401931994bbc2b&scene=0&key=a3337ab81c300e24d1a1e818f9287e35b8b800b98fc0a1441381354c46223bc39dc59c9dd9f0b1904f6e0048a98f52292aca7a56b29d82f527714818b49c0b685e2127c2816a645400a9c57cb2305876&ascene=0&uin=MjgzMDU1MzQ0MA%3D%3D&devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=Z72Xyt2jJ8zUIk8MaDvMNEaLa1OO7s%2BxAaUhsC0RSUmzjdrO9rI5zpD6RW2wdUd9)","slug":"tuning/[1]jvm参数优化及性能调优","published":1,"updated":"2017-06-16T08:44:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs5002h9vvumbcnpb2b","content":"<p>由于Java字节码是运行在JVM虚拟机上的，同样的字节码使用不同的JVM虚拟机参数运行，其性能表现可能各不相同。为了能使系统性能最优，就需要对JVM参数进行调整以达到应用程序运行的最佳效果。<br><img src=\"http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-4217e4e9a77a4ed6808c89a303261dc9.jpg\" alt=\"JVM结构\"></p>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><ul>\n<li><p>jps 虚拟机进程状况工具(Java Virtual Machine Process Status Tool)</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">-q 不输出类名、Jar名和传入main方法的参数</div><div class=\"line\">-m 输出传入main方法的参数</div><div class=\"line\">-l 输出main类或Jar的全限名</div><div class=\"line\">-v 输出传入JVM的参数</div></pre></td></tr></table></figure>\n</li>\n<li><p>jstack 查看某个Java进程内的线程堆栈信息</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">-F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)</div><div class=\"line\">-m  不仅会输出Java堆栈信息，还会输出C/C++堆栈信息（比如Native方法）</div><div class=\"line\">-l  会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况</div><div class=\"line\">-h or -help to print this help message</div></pre></td></tr></table></figure>\n</li>\n<li><p>jmap 查看堆内存使用状况</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">打印进程的类加载器和类加载器加载的持久代对象信息，输出：类加载器名称、对象是否存活（不可靠）、对象地址、父类加载器、已加载的类大小等信息</div><div class=\"line\"></div><div class=\"line\">使用jmap -heap pid查看进程堆内存使用情况，包括使用的GC算法、堆配置参数和各代中堆内存使用情况</div><div class=\"line\"></div><div class=\"line\">jmap -heap 7481</div><div class=\"line\">jmap -histo:live 1432 | more;//查看堆内存中的对象数目、大小统计直方图，如果带上live则只统计活对象</div><div class=\"line\">jmap -permstat 7481;//如果操作系统是64位</div><div class=\"line\">使用jmap生成dump文件</div><div class=\"line\">jmap -dump:format=b,file=/tmp/dump.dat 14949;//14949进程号</div></pre></td></tr></table></figure>\n</li>\n<li><p>jstat</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">jstat -gcutil pid 500 20;//每500毫秒查询进程pid垃圾收集情况 一共查询20次</div><div class=\"line\">jstat -gcold pid;//查看老年代gc存储量</div><div class=\"line\">jstat -gcnew pid;//查看年轻代gc存储量</div><div class=\"line\"></div><div class=\"line\">-gcutil:监视堆内存情况，包括eden区，s1，s2,老年代和永久代的内存容量</div><div class=\"line\">-gcnew:监视新生代GC情况</div><div class=\"line\">-gcold:监视老年代GC情况</div><div class=\"line\"></div><div class=\"line\">S0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）</div><div class=\"line\">EC、EU：Eden区容量和使用量</div><div class=\"line\">OC、OU：年老代容量和使用量</div><div class=\"line\">PC、PU：永久代容量和使用量</div><div class=\"line\">YGC、YGT：年轻代GC次数和GC耗时</div><div class=\"line\">FGC、FGCT：Full GC次数和Full GC耗时</div><div class=\"line\">GCT：GC总耗时</div></pre></td></tr></table></figure>\n</li>\n<li><p>jinfo<br>用于查询当前运行这的JVM属性和参数的值。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">  -flag:显示未被显示指定的参数的系统默认值</div><div class=\"line\">  -flag [+|-]name或-flag name=value: 修改部分参数</div><div class=\"line\">  -sysprops:打印虚拟机进程的System.getProperties()</div><div class=\"line\">命令格式:jinfo [option] pid</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>java -XX:+PrintFlagsFinal -version|grep manageable</strong>命令可查看支持通过jinfo动态设置的参数<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">jinfo -flags pid;  //打印进程pid的jvm参数设置</div><div class=\"line\">用它来动态设置参数</div><div class=\"line\">jinfo -flag -PrintGC 8359</div><div class=\"line\">jinfo -flag -PrintGCDDetails 8359</div><div class=\"line\">上面的命令代表关闭Java应用进程为8359的的PrintGC参数和PrintGCDetails参数。</div><div class=\"line\"></div><div class=\"line\">jinfo -flag +PrintGC 8359</div><div class=\"line\">jinfo -flag +PrintGCDDetails 8359</div></pre></td></tr></table></figure></p>\n<h2 id=\"评估堆大小和内存占用\"><a href=\"#评估堆大小和内存占用\" class=\"headerlink\" title=\"评估堆大小和内存占用\"></a>评估堆大小和内存占用</h2><h3 id=\"JVM内存模型\"><a href=\"#JVM内存模型\" class=\"headerlink\" title=\"JVM内存模型\"></a>JVM内存模型</h3><p><img src=\"http://static.xcoder.ren/public/resource/jvm-gc-memory.jpg\" alt=\"JVM内存模型\"></p>\n<p>HotSpot VM有3个主要的空间：young代、old代以及permanent代<br>当Java应用分配Java对象时，这些对象被分配到young代。在经历过几次minor GC之后，如果对象还是存活的，就会被转移到old代空间。permanent代空间存储了VM和Java类的元数据比如内置的字符串和类的静态变量。</p>\n<h3 id=\"常用内存参数\"><a href=\"#常用内存参数\" class=\"headerlink\" title=\"常用内存参数\"></a>常用内存参数</h3><p>参数说明:<br><img src=\"http://static.xcoder.ren/public/resource/3948988f79c560be-d390ef13d3ebc1ed-98f2ce20f8dd5f395a695bf41bb92fc7.jpg\" alt=\"JVM主要参数\"><br>Java应用程序运行时，首先会分配-Xms指定的内存大小，并尽可能尝试在这个空间段运行。最大不会超过-Xmx指定的内存大小，它是Java应用程序的堆上限，超过就会内存溢出（OutofMemoryError）。<br>如果-Xms的数值太小，JVM为了保证系统尽可能的运行在指定内存范围内，就会更加频繁的GC以便释放内存空间。频繁的MinorGC和FullGC次数，对系统会有性能损耗。<br>所以一般情况下会保持-Xms -Xmx一致，以减少系统运行初期的GC次数和耗时。<br>Java虚拟机中还有一种常见的异常：栈溢出（StackOverflowError），如果线程在计算过程中，请求的栈深度大于可用的最大栈深度，则会出现StackOverflowError。-Xss是用来设置栈大小的。比如-Xss1M代表每个线程拥有1MB的栈空间，当增大此参数，比如-Xss20M时每个线程可用的栈空间为20M，由于系统的内存是有限度的，势必会造成应用程序可创建的线程数的减少，而且系统所能支持的线程数量，还与堆的大小有关。</p>\n<h4 id=\"JVM堆大小\"><a href=\"#JVM堆大小\" class=\"headerlink\" title=\"JVM堆大小\"></a>JVM堆大小</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xmx&lt;n&gt;[g|m|k]  </div><div class=\"line\">-Xms&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure>\n<p>-Xmx和-Xms这个两个命令行选项分别指定yound代加上old代空间的总和的初始最大值和最小值，也就是Java堆的大小。当-Xms的值小于-Xmx的值的时候，Java堆的大小可以在最大值和最小值之前浮动。当Java应用强调吞吐量和延迟的时候，倾向于把-Xms和-Xmx设置成相同的值，由于调整young代或者old代的大小都需要进行Full GC，Full GC降低吞吐量以及加强延迟。</p>\n<h4 id=\"年轻代\"><a href=\"#年轻代\" class=\"headerlink\" title=\"年轻代\"></a>年轻代</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:NewSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxNewSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure>\n<p>这两个参数可以指定young代的初始值和最大值，但是我们一般会用下面这个参数来直接固定young代的大小<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xmn&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>这个参数可以直接指定young代的初始值、最小值以及最大值。也就是说，young区的大小被固定成这个值了。这个值用来锁定young代的大小很方便。<br>有一点需要注意的是，如果-Xms和-Xmx没有被设定成相同的值，而且-Xmn被使用了，当调整Java堆的大小的时候，不会调整young代的空间大小，young代的空间大小会保持恒定。因此，<strong>-Xmn应该在-Xms和-Xmx设定成相同的时候才指定</strong>。</p>\n<h4 id=\"年老代\"><a href=\"#年老代\" class=\"headerlink\" title=\"年老代\"></a>年老代</h4><p>old代的空间大小可以基于young代的大小进行计算，old代的初始值的大小是-Xms的值减去-XX:NewSize，最大值是-Xmx减去-XX:MaxNewSize，如果-Xmx和-Xms设置成了相同的值，而且使用-Xmn选项或者-XX:NewSize和-XX:MaxNewSize设置成了相同的值，那么old代的大小就是-Xmx减去-Xmn。</p>\n<h4 id=\"永久代\"><a href=\"#永久代\" class=\"headerlink\" title=\"永久代\"></a>永久代</h4><p>JDK1.8之前<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:PermSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxPermSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>表示永久代的初始值和最大值<br>JDK1.8<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:MetaspaceSize=&lt;n&gt;[g|m|k] </div><div class=\"line\">-XX:MaxMetaspaceSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-2d0b9dc6f2913667ad01fe76add46404.jpg\" alt=\"JDK8新增参数\"></p>\n<p>Java应用应该指定这两个值成为同一个值，由于这个值的调整会导致Full GC。</p>\n<p>如果上面提到的Java堆大小、young代、permanent代的大小都没有指定，那么JVM会根据应用的情况自行计算。</p>\n<p>在young代、old代以及permanent代中任何一个空间里面无法分配对象的时候就会触发垃圾回收，理解这点，对后面的优化非常重要。<br>当young代没有足够空间分配Java对象的时候，触发minor GC。<strong>minor GC相对于Full GC来说会更短暂。</strong><br>一个对象在经历过一定次数的Minor GC之后，如果还存活，那么会被转移到old代。<br><strong>当old代没有足够空间放置对象的时候，HotSpot VM触发full GC。</strong><br><strong>实际上在进行Minor GC的时候发现没有old代足够的空间来进行对象的转移，就会触发FullGC，相对于在MinorGC的过程中发现对象的移动失败了然后触发FullGC，这样的策略会有更小的花费。</strong><br><strong>当permanent代的空间不够用的时候的，也会触发FullGC。</strong></p>\n<p><strong>如果FullGC是由于old代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使permanent代的空间还没有满。</strong><br><strong>同理，如果FullGC是由于permanent代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使old代的空间还没有满。</strong><br><strong>另外，young代同样会被垃圾回收，除非-XX:+ScavengeBeforeFullGC选项被指定了，-XX:+ScavengeBeforeFullGC关闭FullGC的时候young代的垃圾回收。</strong></p>\n<p>Minor GC 是清理年轻代（包括 Eden 和 Survivor 区域）<br>Major GC 是清理永久代<br>Full GC 是清理整个堆空间—包括年轻代和永久代</p>\n<h3 id=\"评估\"><a href=\"#评估\" class=\"headerlink\" title=\"评估\"></a>评估</h3><h4 id=\"OutOfMemoryError\"><a href=\"#OutOfMemoryError\" class=\"headerlink\" title=\"OutOfMemoryError\"></a>OutOfMemoryError</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC[PSYoungGen: 279700K-&gt;267300K(358400K)]  </div><div class=\"line\">[ParOldGen: 685165K-&gt;685165K(685170K)]  </div><div class=\"line\">964865K-&gt;964865K(1043570K)  </div><div class=\"line\">[PSPermGen: 32390K-&gt;32390K(65536K)],0.2499342 secs]  </div><div class=\"line\">[Times: user=0.08 sys=0.00, real=0.05 secs]  </div><div class=\"line\">java.lang.OutOfMemoryError: Java heap space</div></pre></td></tr></table></figure>\n<p>年老代(ParOldGen)在执行回收后所占用的空间685165K(-&gt;685165K)和年老带分配的空间685170K((685170K))相差无几,所以系统堆内存溢出了。<br>这时增加-Xms -Xmx以保证-Xmx和-Xmn的差值能扩大，以扩大年老代(ParOldGen)的空间<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC[PSYoungGen: 0K-&gt;0K(141632K)]  </div><div class=\"line\">  [ParOldGen: 132538K-&gt;132538K(350208K)]  </div><div class=\"line\">  32538K-&gt;32538K(491840K)  </div><div class=\"line\">  [PSPermGen: 65536K-&gt;65536K(65536K)],  </div><div class=\"line\">  0.2430136 secs]  </div><div class=\"line\">  [Times: user=0.37 sys=0.00, real=0.24 secs]  </div><div class=\"line\">java.lang.OutOfMemoryError: PermGen space</div></pre></td></tr></table></figure></p>\n<p>永久代(PSPermGen)在执行回收后所占用的空间65536K(-&gt;65536K)和永久代分配的空间65536K((65536K))一致,所以系统永久代内存溢出了。<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:PermSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxPermSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>表示永久代的初始值和最大值<br>JDK1.8<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:MetaspaceSize=&lt;n&gt;[g|m|k] </div><div class=\"line\">-XX:MaxMetaspaceSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>这时候增大永久代的空间即可。</p>\n<p>Java堆能够使用的容量受限于硬件以及是否使用64位的JVM。在扩大了Java堆的大小之后，再检查垃圾回收日志，直到没有OutOfMemoryError为止</p>\n<p>做完这些，能让系统在一定程度上稳定运行，就可以通过分析GC来调整优化JVM参数了。</p>\n<h4 id=\"根据活动对象评估\"><a href=\"#根据活动对象评估\" class=\"headerlink\" title=\"根据活动对象评估\"></a>根据活动对象评估</h4><p>应用处于稳定运行状态下，在Java堆里面长期存活的对象。换一句话说，就是应用在稳定运行的状态下，Full GC之后，Java堆的所占的空间。<br>活动对象的大小可以通过垃圾回收日志查看，它提供了一些优化信息：</p>\n<ul>\n<li>应用处于稳定运行状态下，old代的Java堆空间占用数量。</li>\n<li>应用处于稳定运行状态下，permanent代的Java堆空间占用数量。<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC (Ergonomics) [PSYoungGen: 9600K-&gt;0K(1215488K)] [ParOldGen: 917745K-&gt;158112K(921600K)] 927345K-&gt;158112K(2137088K), [Metaspace: 78193K-&gt;78015K(1122304K)], 0.4451209 secs] [Times: user=1.25 sys=0.08, real=0.45 secs]</div><div class=\"line\">[Full GC (Ergonomics) [PSYoungGen: 9152K-&gt;0K(1217536K)] [ParOldGen: 917321K-&gt;168419K(921600K)] 926473K-&gt;168419K(2139136K), [Metaspace: 88598K-&gt;88574K(1132544K)], 0.4217154 secs] [Times: user=1.33 sys=0.00, real=0.42 secs]</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>方括号里面：该区域已使用的容量-&gt;GC后该内存区域已使用的容量(该内存区总容量)<br>方括号外面：GC前Java堆已使用的容量-&gt;GC后Java堆已使用的容量(Java堆总容量)<br>如果应用没有发生FullGC或者发生FullGC的次数很少，在性能测试环境，可以通过Java监控工具来触发FullGC，比如使用VisualVM和JConsole，这些工具在最新的JDK的bin目录下可以找到，VisualVM集成了JConsole，VisualVM或者JConsole上面有一个触发GC的按钮。<br>也可以通过jmap命令来强制执行垃圾回收<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">jmap -histo:live pid</div></pre></td></tr></table></figure></p>\n<p>上述日志说明年老代(ParOldGen)稳定在168419K(大约165M),永久代(MetaSpace/PSPermGen)稳定在88574K(大约86M)，还可以看出PSYoungGen占用1215488K，ParOldGen占用921600K，堆占用2137088K，MetaSpace/PermSize占用1132544K</p>\n<p>通过活动对象大小的信息，可以做出关于Java堆的大小有根据的决定，以及可以估计出最坏情况下会导致的延迟。</p>\n<p><strong>以下是经验值</strong></p>\n<p><strong>Java堆大小的初始化值和最大值（通过-Xms和-Xmx选项来指定）应该是old代活动对象的大小的3到4倍。</strong></p>\n<p><strong>permanent的初始值和最大值（-XX:PermSize和-XX:MaxPermSize）应该permanent代活动对象大小的1.2到1.5倍。</strong></p>\n<p><strong>young代空间应该是old代活动对象大小的1到1.5倍。</strong></p>\n<p>结合这个经验和前面的Full GC可以得到如下的<strong>经验值</strong><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xms660M -Xmx660M -Xmn130M -XX:MetaspaceSize=130M -XX:MaxMetaspaceSize=130M</div></pre></td></tr></table></figure></p>\n<h2 id=\"参数调优\"><a href=\"#参数调优\" class=\"headerlink\" title=\"参数调优\"></a>参数调优</h2><h3 id=\"优化young代大小\"><a href=\"#优化young代大小\" class=\"headerlink\" title=\"优化young代大小\"></a>优化young代大小</h3><h3 id=\"优化old代大小\"><a href=\"#优化old代大小\" class=\"headerlink\" title=\"优化old代大小\"></a>优化old代大小</h3><p><a href=\"http://blog.csdn.net/zhoutao198712/article/details/7783070\" target=\"_blank\" rel=\"external\">一步步优化JVM四：决定Java堆的大小以及内存占用</a><br><a href=\"http://blog.csdn.net/wwh578867817/article/details/51883476\" target=\"_blank\" rel=\"external\">JVM 常见参数设置和分析</a><br><a href=\"http://blog.csdn.net/stevendbaguo/article/details/42460707\" target=\"_blank\" rel=\"external\">JVM打印gc的内容及日志解释</a><br><a href=\"http://www.importnew.com/15722.html\" target=\"_blank\" rel=\"external\">在运行时开启GC日志</a><br><a href=\"http://ifeve.com/useful-jvm-flags-part-8-gc-logging/\" target=\"_blank\" rel=\"external\">http://ifeve.com/useful-jvm-flags-part-8-gc-logging/</a><br><a href=\"https://my.oschina.net/goldwave/blog/168516\" target=\"_blank\" rel=\"external\">关于施用full gc频繁的分析及解决</a><br><a href=\"http://blog.csdn.net/wilsonpeng3/article/details/70064336\" target=\"_blank\" rel=\"external\">线上FullGC频繁的排查</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzI3NDY5MTUwOA==&amp;mid=2247483658&amp;idx=1&amp;sn=0019f202c768a0fab69a63a29dc9d08b&amp;chksm=eb1165d1dc66ecc77e644c51a808ca1d7b4b9baae5a504ee4811a1e726e357401931994bbc2b&amp;scene=0&amp;key=a3337ab81c300e24d1a1e818f9287e35b8b800b98fc0a1441381354c46223bc39dc59c9dd9f0b1904f6e0048a98f52292aca7a56b29d82f527714818b49c0b685e2127c2816a645400a9c57cb2305876&amp;ascene=0&amp;uin=MjgzMDU1MzQ0MA%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73\" target=\"_blank\" rel=\"external\">JVM调优参数设置</a>&amp;version=12020810&amp;nettype=WIFI&amp;fontScale=100&amp;pass_ticket=Z72Xyt2jJ8zUIk8MaDvMNEaLa1OO7s%2BxAaUhsC0RSUmzjdrO9rI5zpD6RW2wdUd9)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>由于Java字节码是运行在JVM虚拟机上的，同样的字节码使用不同的JVM虚拟机参数运行，其性能表现可能各不相同。为了能使系统性能最优，就需要对JVM参数进行调整以达到应用程序运行的最佳效果。<br><img src=\"http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-4217e4e9a77a4ed6808c89a303261dc9.jpg\" alt=\"JVM结构\"></p>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><ul>\n<li><p>jps 虚拟机进程状况工具(Java Virtual Machine Process Status Tool)</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">-q 不输出类名、Jar名和传入main方法的参数</div><div class=\"line\">-m 输出传入main方法的参数</div><div class=\"line\">-l 输出main类或Jar的全限名</div><div class=\"line\">-v 输出传入JVM的参数</div></pre></td></tr></table></figure>\n</li>\n<li><p>jstack 查看某个Java进程内的线程堆栈信息</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">-F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)</div><div class=\"line\">-m  不仅会输出Java堆栈信息，还会输出C/C++堆栈信息（比如Native方法）</div><div class=\"line\">-l  会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况</div><div class=\"line\">-h or -help to print this help message</div></pre></td></tr></table></figure>\n</li>\n<li><p>jmap 查看堆内存使用状况</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">打印进程的类加载器和类加载器加载的持久代对象信息，输出：类加载器名称、对象是否存活（不可靠）、对象地址、父类加载器、已加载的类大小等信息</div><div class=\"line\"></div><div class=\"line\">使用jmap -heap pid查看进程堆内存使用情况，包括使用的GC算法、堆配置参数和各代中堆内存使用情况</div><div class=\"line\"></div><div class=\"line\">jmap -heap 7481</div><div class=\"line\">jmap -histo:live 1432 | more;//查看堆内存中的对象数目、大小统计直方图，如果带上live则只统计活对象</div><div class=\"line\">jmap -permstat 7481;//如果操作系统是64位</div><div class=\"line\">使用jmap生成dump文件</div><div class=\"line\">jmap -dump:format=b,file=/tmp/dump.dat 14949;//14949进程号</div></pre></td></tr></table></figure>\n</li>\n<li><p>jstat</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">jstat -gcutil pid 500 20;//每500毫秒查询进程pid垃圾收集情况 一共查询20次</div><div class=\"line\">jstat -gcold pid;//查看老年代gc存储量</div><div class=\"line\">jstat -gcnew pid;//查看年轻代gc存储量</div><div class=\"line\"></div><div class=\"line\">-gcutil:监视堆内存情况，包括eden区，s1，s2,老年代和永久代的内存容量</div><div class=\"line\">-gcnew:监视新生代GC情况</div><div class=\"line\">-gcold:监视老年代GC情况</div><div class=\"line\"></div><div class=\"line\">S0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）</div><div class=\"line\">EC、EU：Eden区容量和使用量</div><div class=\"line\">OC、OU：年老代容量和使用量</div><div class=\"line\">PC、PU：永久代容量和使用量</div><div class=\"line\">YGC、YGT：年轻代GC次数和GC耗时</div><div class=\"line\">FGC、FGCT：Full GC次数和Full GC耗时</div><div class=\"line\">GCT：GC总耗时</div></pre></td></tr></table></figure>\n</li>\n<li><p>jinfo<br>用于查询当前运行这的JVM属性和参数的值。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">  -flag:显示未被显示指定的参数的系统默认值</div><div class=\"line\">  -flag [+|-]name或-flag name=value: 修改部分参数</div><div class=\"line\">  -sysprops:打印虚拟机进程的System.getProperties()</div><div class=\"line\">命令格式:jinfo [option] pid</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>java -XX:+PrintFlagsFinal -version|grep manageable</strong>命令可查看支持通过jinfo动态设置的参数<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">jinfo -flags pid;  //打印进程pid的jvm参数设置</div><div class=\"line\">用它来动态设置参数</div><div class=\"line\">jinfo -flag -PrintGC 8359</div><div class=\"line\">jinfo -flag -PrintGCDDetails 8359</div><div class=\"line\">上面的命令代表关闭Java应用进程为8359的的PrintGC参数和PrintGCDetails参数。</div><div class=\"line\"></div><div class=\"line\">jinfo -flag +PrintGC 8359</div><div class=\"line\">jinfo -flag +PrintGCDDetails 8359</div></pre></td></tr></table></figure></p>\n<h2 id=\"评估堆大小和内存占用\"><a href=\"#评估堆大小和内存占用\" class=\"headerlink\" title=\"评估堆大小和内存占用\"></a>评估堆大小和内存占用</h2><h3 id=\"JVM内存模型\"><a href=\"#JVM内存模型\" class=\"headerlink\" title=\"JVM内存模型\"></a>JVM内存模型</h3><p><img src=\"http://static.xcoder.ren/public/resource/jvm-gc-memory.jpg\" alt=\"JVM内存模型\"></p>\n<p>HotSpot VM有3个主要的空间：young代、old代以及permanent代<br>当Java应用分配Java对象时，这些对象被分配到young代。在经历过几次minor GC之后，如果对象还是存活的，就会被转移到old代空间。permanent代空间存储了VM和Java类的元数据比如内置的字符串和类的静态变量。</p>\n<h3 id=\"常用内存参数\"><a href=\"#常用内存参数\" class=\"headerlink\" title=\"常用内存参数\"></a>常用内存参数</h3><p>参数说明:<br><img src=\"http://static.xcoder.ren/public/resource/3948988f79c560be-d390ef13d3ebc1ed-98f2ce20f8dd5f395a695bf41bb92fc7.jpg\" alt=\"JVM主要参数\"><br>Java应用程序运行时，首先会分配-Xms指定的内存大小，并尽可能尝试在这个空间段运行。最大不会超过-Xmx指定的内存大小，它是Java应用程序的堆上限，超过就会内存溢出（OutofMemoryError）。<br>如果-Xms的数值太小，JVM为了保证系统尽可能的运行在指定内存范围内，就会更加频繁的GC以便释放内存空间。频繁的MinorGC和FullGC次数，对系统会有性能损耗。<br>所以一般情况下会保持-Xms -Xmx一致，以减少系统运行初期的GC次数和耗时。<br>Java虚拟机中还有一种常见的异常：栈溢出（StackOverflowError），如果线程在计算过程中，请求的栈深度大于可用的最大栈深度，则会出现StackOverflowError。-Xss是用来设置栈大小的。比如-Xss1M代表每个线程拥有1MB的栈空间，当增大此参数，比如-Xss20M时每个线程可用的栈空间为20M，由于系统的内存是有限度的，势必会造成应用程序可创建的线程数的减少，而且系统所能支持的线程数量，还与堆的大小有关。</p>\n<h4 id=\"JVM堆大小\"><a href=\"#JVM堆大小\" class=\"headerlink\" title=\"JVM堆大小\"></a>JVM堆大小</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xmx&lt;n&gt;[g|m|k]  </div><div class=\"line\">-Xms&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure>\n<p>-Xmx和-Xms这个两个命令行选项分别指定yound代加上old代空间的总和的初始最大值和最小值，也就是Java堆的大小。当-Xms的值小于-Xmx的值的时候，Java堆的大小可以在最大值和最小值之前浮动。当Java应用强调吞吐量和延迟的时候，倾向于把-Xms和-Xmx设置成相同的值，由于调整young代或者old代的大小都需要进行Full GC，Full GC降低吞吐量以及加强延迟。</p>\n<h4 id=\"年轻代\"><a href=\"#年轻代\" class=\"headerlink\" title=\"年轻代\"></a>年轻代</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:NewSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxNewSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure>\n<p>这两个参数可以指定young代的初始值和最大值，但是我们一般会用下面这个参数来直接固定young代的大小<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xmn&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>这个参数可以直接指定young代的初始值、最小值以及最大值。也就是说，young区的大小被固定成这个值了。这个值用来锁定young代的大小很方便。<br>有一点需要注意的是，如果-Xms和-Xmx没有被设定成相同的值，而且-Xmn被使用了，当调整Java堆的大小的时候，不会调整young代的空间大小，young代的空间大小会保持恒定。因此，<strong>-Xmn应该在-Xms和-Xmx设定成相同的时候才指定</strong>。</p>\n<h4 id=\"年老代\"><a href=\"#年老代\" class=\"headerlink\" title=\"年老代\"></a>年老代</h4><p>old代的空间大小可以基于young代的大小进行计算，old代的初始值的大小是-Xms的值减去-XX:NewSize，最大值是-Xmx减去-XX:MaxNewSize，如果-Xmx和-Xms设置成了相同的值，而且使用-Xmn选项或者-XX:NewSize和-XX:MaxNewSize设置成了相同的值，那么old代的大小就是-Xmx减去-Xmn。</p>\n<h4 id=\"永久代\"><a href=\"#永久代\" class=\"headerlink\" title=\"永久代\"></a>永久代</h4><p>JDK1.8之前<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:PermSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxPermSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>表示永久代的初始值和最大值<br>JDK1.8<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:MetaspaceSize=&lt;n&gt;[g|m|k] </div><div class=\"line\">-XX:MaxMetaspaceSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://static.xcoder.ren/public/resource/5e937446bd287857-af65270862aa1d4b-2d0b9dc6f2913667ad01fe76add46404.jpg\" alt=\"JDK8新增参数\"></p>\n<p>Java应用应该指定这两个值成为同一个值，由于这个值的调整会导致Full GC。</p>\n<p>如果上面提到的Java堆大小、young代、permanent代的大小都没有指定，那么JVM会根据应用的情况自行计算。</p>\n<p>在young代、old代以及permanent代中任何一个空间里面无法分配对象的时候就会触发垃圾回收，理解这点，对后面的优化非常重要。<br>当young代没有足够空间分配Java对象的时候，触发minor GC。<strong>minor GC相对于Full GC来说会更短暂。</strong><br>一个对象在经历过一定次数的Minor GC之后，如果还存活，那么会被转移到old代。<br><strong>当old代没有足够空间放置对象的时候，HotSpot VM触发full GC。</strong><br><strong>实际上在进行Minor GC的时候发现没有old代足够的空间来进行对象的转移，就会触发FullGC，相对于在MinorGC的过程中发现对象的移动失败了然后触发FullGC，这样的策略会有更小的花费。</strong><br><strong>当permanent代的空间不够用的时候的，也会触发FullGC。</strong></p>\n<p><strong>如果FullGC是由于old代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使permanent代的空间还没有满。</strong><br><strong>同理，如果FullGC是由于permanent代满了而触发的，old代和permanent代的空间都会被垃圾回收，即使old代的空间还没有满。</strong><br><strong>另外，young代同样会被垃圾回收，除非-XX:+ScavengeBeforeFullGC选项被指定了，-XX:+ScavengeBeforeFullGC关闭FullGC的时候young代的垃圾回收。</strong></p>\n<p>Minor GC 是清理年轻代（包括 Eden 和 Survivor 区域）<br>Major GC 是清理永久代<br>Full GC 是清理整个堆空间—包括年轻代和永久代</p>\n<h3 id=\"评估\"><a href=\"#评估\" class=\"headerlink\" title=\"评估\"></a>评估</h3><h4 id=\"OutOfMemoryError\"><a href=\"#OutOfMemoryError\" class=\"headerlink\" title=\"OutOfMemoryError\"></a>OutOfMemoryError</h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC[PSYoungGen: 279700K-&gt;267300K(358400K)]  </div><div class=\"line\">[ParOldGen: 685165K-&gt;685165K(685170K)]  </div><div class=\"line\">964865K-&gt;964865K(1043570K)  </div><div class=\"line\">[PSPermGen: 32390K-&gt;32390K(65536K)],0.2499342 secs]  </div><div class=\"line\">[Times: user=0.08 sys=0.00, real=0.05 secs]  </div><div class=\"line\">java.lang.OutOfMemoryError: Java heap space</div></pre></td></tr></table></figure>\n<p>年老代(ParOldGen)在执行回收后所占用的空间685165K(-&gt;685165K)和年老带分配的空间685170K((685170K))相差无几,所以系统堆内存溢出了。<br>这时增加-Xms -Xmx以保证-Xmx和-Xmn的差值能扩大，以扩大年老代(ParOldGen)的空间<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC[PSYoungGen: 0K-&gt;0K(141632K)]  </div><div class=\"line\">  [ParOldGen: 132538K-&gt;132538K(350208K)]  </div><div class=\"line\">  32538K-&gt;32538K(491840K)  </div><div class=\"line\">  [PSPermGen: 65536K-&gt;65536K(65536K)],  </div><div class=\"line\">  0.2430136 secs]  </div><div class=\"line\">  [Times: user=0.37 sys=0.00, real=0.24 secs]  </div><div class=\"line\">java.lang.OutOfMemoryError: PermGen space</div></pre></td></tr></table></figure></p>\n<p>永久代(PSPermGen)在执行回收后所占用的空间65536K(-&gt;65536K)和永久代分配的空间65536K((65536K))一致,所以系统永久代内存溢出了。<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:PermSize=&lt;n&gt;[g|m|k]  </div><div class=\"line\">-XX:MaxPermSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>表示永久代的初始值和最大值<br>JDK1.8<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">-XX:MetaspaceSize=&lt;n&gt;[g|m|k] </div><div class=\"line\">-XX:MaxMetaspaceSize=&lt;n&gt;[g|m|k]</div></pre></td></tr></table></figure></p>\n<p>这时候增大永久代的空间即可。</p>\n<p>Java堆能够使用的容量受限于硬件以及是否使用64位的JVM。在扩大了Java堆的大小之后，再检查垃圾回收日志，直到没有OutOfMemoryError为止</p>\n<p>做完这些，能让系统在一定程度上稳定运行，就可以通过分析GC来调整优化JVM参数了。</p>\n<h4 id=\"根据活动对象评估\"><a href=\"#根据活动对象评估\" class=\"headerlink\" title=\"根据活动对象评估\"></a>根据活动对象评估</h4><p>应用处于稳定运行状态下，在Java堆里面长期存活的对象。换一句话说，就是应用在稳定运行的状态下，Full GC之后，Java堆的所占的空间。<br>活动对象的大小可以通过垃圾回收日志查看，它提供了一些优化信息：</p>\n<ul>\n<li>应用处于稳定运行状态下，old代的Java堆空间占用数量。</li>\n<li>应用处于稳定运行状态下，permanent代的Java堆空间占用数量。<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Full GC (Ergonomics) [PSYoungGen: 9600K-&gt;0K(1215488K)] [ParOldGen: 917745K-&gt;158112K(921600K)] 927345K-&gt;158112K(2137088K), [Metaspace: 78193K-&gt;78015K(1122304K)], 0.4451209 secs] [Times: user=1.25 sys=0.08, real=0.45 secs]</div><div class=\"line\">[Full GC (Ergonomics) [PSYoungGen: 9152K-&gt;0K(1217536K)] [ParOldGen: 917321K-&gt;168419K(921600K)] 926473K-&gt;168419K(2139136K), [Metaspace: 88598K-&gt;88574K(1132544K)], 0.4217154 secs] [Times: user=1.33 sys=0.00, real=0.42 secs]</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>方括号里面：该区域已使用的容量-&gt;GC后该内存区域已使用的容量(该内存区总容量)<br>方括号外面：GC前Java堆已使用的容量-&gt;GC后Java堆已使用的容量(Java堆总容量)<br>如果应用没有发生FullGC或者发生FullGC的次数很少，在性能测试环境，可以通过Java监控工具来触发FullGC，比如使用VisualVM和JConsole，这些工具在最新的JDK的bin目录下可以找到，VisualVM集成了JConsole，VisualVM或者JConsole上面有一个触发GC的按钮。<br>也可以通过jmap命令来强制执行垃圾回收<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">jmap -histo:live pid</div></pre></td></tr></table></figure></p>\n<p>上述日志说明年老代(ParOldGen)稳定在168419K(大约165M),永久代(MetaSpace/PSPermGen)稳定在88574K(大约86M)，还可以看出PSYoungGen占用1215488K，ParOldGen占用921600K，堆占用2137088K，MetaSpace/PermSize占用1132544K</p>\n<p>通过活动对象大小的信息，可以做出关于Java堆的大小有根据的决定，以及可以估计出最坏情况下会导致的延迟。</p>\n<p><strong>以下是经验值</strong></p>\n<p><strong>Java堆大小的初始化值和最大值（通过-Xms和-Xmx选项来指定）应该是old代活动对象的大小的3到4倍。</strong></p>\n<p><strong>permanent的初始值和最大值（-XX:PermSize和-XX:MaxPermSize）应该permanent代活动对象大小的1.2到1.5倍。</strong></p>\n<p><strong>young代空间应该是old代活动对象大小的1到1.5倍。</strong></p>\n<p>结合这个经验和前面的Full GC可以得到如下的<strong>经验值</strong><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-Xms660M -Xmx660M -Xmn130M -XX:MetaspaceSize=130M -XX:MaxMetaspaceSize=130M</div></pre></td></tr></table></figure></p>\n<h2 id=\"参数调优\"><a href=\"#参数调优\" class=\"headerlink\" title=\"参数调优\"></a>参数调优</h2><h3 id=\"优化young代大小\"><a href=\"#优化young代大小\" class=\"headerlink\" title=\"优化young代大小\"></a>优化young代大小</h3><h3 id=\"优化old代大小\"><a href=\"#优化old代大小\" class=\"headerlink\" title=\"优化old代大小\"></a>优化old代大小</h3><p><a href=\"http://blog.csdn.net/zhoutao198712/article/details/7783070\" target=\"_blank\" rel=\"external\">一步步优化JVM四：决定Java堆的大小以及内存占用</a><br><a href=\"http://blog.csdn.net/wwh578867817/article/details/51883476\" target=\"_blank\" rel=\"external\">JVM 常见参数设置和分析</a><br><a href=\"http://blog.csdn.net/stevendbaguo/article/details/42460707\" target=\"_blank\" rel=\"external\">JVM打印gc的内容及日志解释</a><br><a href=\"http://www.importnew.com/15722.html\" target=\"_blank\" rel=\"external\">在运行时开启GC日志</a><br><a href=\"http://ifeve.com/useful-jvm-flags-part-8-gc-logging/\" target=\"_blank\" rel=\"external\">http://ifeve.com/useful-jvm-flags-part-8-gc-logging/</a><br><a href=\"https://my.oschina.net/goldwave/blog/168516\" target=\"_blank\" rel=\"external\">关于施用full gc频繁的分析及解决</a><br><a href=\"http://blog.csdn.net/wilsonpeng3/article/details/70064336\" target=\"_blank\" rel=\"external\">线上FullGC频繁的排查</a><br><a href=\"https://mp.weixin.qq.com/s?__biz=MzI3NDY5MTUwOA==&amp;mid=2247483658&amp;idx=1&amp;sn=0019f202c768a0fab69a63a29dc9d08b&amp;chksm=eb1165d1dc66ecc77e644c51a808ca1d7b4b9baae5a504ee4811a1e726e357401931994bbc2b&amp;scene=0&amp;key=a3337ab81c300e24d1a1e818f9287e35b8b800b98fc0a1441381354c46223bc39dc59c9dd9f0b1904f6e0048a98f52292aca7a56b29d82f527714818b49c0b685e2127c2816a645400a9c57cb2305876&amp;ascene=0&amp;uin=MjgzMDU1MzQ0MA%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.12.5+build(16F73\" target=\"_blank\" rel=\"external\">JVM调优参数设置</a>&amp;version=12020810&amp;nettype=WIFI&amp;fontScale=100&amp;pass_ticket=Z72Xyt2jJ8zUIk8MaDvMNEaLa1OO7s%2BxAaUhsC0RSUmzjdrO9rI5zpD6RW2wdUd9)</p>\n"},{"title":"Linux服务器性能评估与优化","date":"2017-06-05T15:20:46.000Z","_content":"\n[Linux服务器性能评估与优化(一)](http://blog.csdn.net/hguisu/article/details/39373311)\n[Linux服务器性能评估与优化（二)](http://blog.csdn.net/hguisu/article/details/39249775)\n\n## 常用命令\n\n### vmstat 虚拟内存统计\n\n```markdown\nUsage:\n vmstat [options] [delay [count]]\n\nOptions:\n -a, --active           active/inactive memory\n -f, --forks            number of forks since boot\n -m, --slabs            slabinfo\n -n, --one-header       do not redisplay header\n -s, --stats            event counter statistics\n -d, --disk             disk statistics\n -D, --disk-sum         summarize disk statistics\n -p, --partition <dev>  partition specific statistics\n -S, --unit <char>      define display unit\n -w, --wide             wide output\n -t, --timestamp        show timestamp\n\n -h, --help     display this help and exit\n -V, --version  output version information and exit\n```\n服务器上使用vmstat命令可以看到如下的效果\n![vmstat-use](http://static.xcoder.ren/public/resource/vmstat-use.png)\n```markdown\n其中\n* r : 运行和等待 CPU 时间片的进程数。若该值大于系统 CPU 个数，则说明 CPU 不足\n* b : 表示等待资源的进程数\n* swpd : 切换到内存交换区的内存大小（单位 KB）\n* free： 空闲的物理内存的大小，我的机器内存总共2G，剩余92M。\n* buff： Linux/Unix系统是用来存储，目录里面有什么内容，权限等的缓存\n* cache：直接用来记忆我们打开的文件,给文件做缓冲，把空闲的物理内存的一部分拿来做文件和目录的缓存，是为了提高 程序执行的性能，当程序使用内存时，buffer/cached会很快地被使用\n* si：每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。\n* so：每秒虚拟内存写入磁盘的大小，如果这个值大于0，同上。\n* bi：块设备每秒接收的块数量（读磁盘）（kb/s）\n* bo：块设备每秒发送的块数量（写磁盘）（kb/s）\n* in：每秒CPU的中断次数，包括时间中断\n* cs：每秒上下文切换次数。\n* us：用户进程消耗 CPU 时间百分比\n* sy：内核进程消耗 CPU 时间百分比，sy 的值较高时，则说明内核消耗的 CPU 资源很多\n* id：空闲 CPU 时间百分比\n* wt：IO 等待 CPU 时间百分比\n```\n\n### uptime\n统计当前系统的运行情况\n``23:32:10 up 200 days,  3:40,  1 user,  load average: 0.19, 0.26, 0.31``\n目前的时间，运行了200天又3小时40分，当前有一个用户登录系统\nload average: 系统 1分钟，5分钟，15分钟的平均负荷\nload average数据是每隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了。\n\n### top\n```markdown\ntop - 23:35:10 up 200 days,  3:43,  1 user,  load average: 0.08, 0.21, 0.29\nTasks: 126 total,   1 running, 125 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  4.1 us,  0.8 sy,  0.0 ni, 95.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem :  8010848 total,   174372 free,  6457476 used,  1379000 buff/cache\nKiB Swap:        0 total,        0 free,        0 used.  1082080 avail Mem \n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    \n20153 root      20   0 6402660 3.002g   9772 S  10.6 39.3 328:58.18 java       \n11615 root      20   0 6033728 2.793g   7852 S   7.0 36.6 725:20.15 java       \n   13 root      20   0       0      0      0 S   0.3  0.0   1545:02 rcu_sched  \n10254 root      20   0  121508  11484   6860 S   0.3  0.1   5:12.94 AliYunDun  \n18145 squid     20   0   99152  12700   2044 S   0.3  0.2  15:36.16 squid      \n28430 root      20   0 5457384  99640      0 S   0.3  1.2   1628:24 logstash-f+\n    1 root      20   0  207080  21000   1328 S   0.0  0.3   4:38.77 systemd    \n    2 root      20   0       0      0      0 S   0.0  0.0   0:02.81 kthreadd   \n    3 root      20   0       0      0      0 S   0.0  0.0  22:46.50 ksoftirqd/0\n    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+\n    7 root      rt   0       0      0      0 S   0.0  0.0   2:23.37 migration/0\n    8 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcu_bh     \n    9 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/0    \n   10 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/1    \n   11 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/2    \n   12 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/3    \n   14 root      20   0       0      0      0 S   0.0  0.0   1039:11 rcuos/0    \n```\n其中\n* 第一行:同uptime命令\n* 第二行:Tasks 任务（进程）\n系统现在共有126个进程，其中处于运行中的有1个，125个在休眠（sleep），stoped状态的有0个，zombie状态（僵尸）的有0个。\n* 第三行:cpu状态\nus 用户空间占用CPU的百分比\nsy 内核空间占用CPU的百分比\nni 改变过优先级的进程占用CPU的百分比\nid 空闲CPU百分比\nwa IO等待占用CPU的百分比\nhi 硬中断（Hardware IRQ）占用CPU的百分比\nsi 软中断（Software Interrupts）占用CPU的百分比\n* 第四行：内存状态\ntotal 物理内存总量\nfree 空闲内存总量\nused 使用中的内存总量\nbuff/cache 缓存的内存量\n* 第五行：swap交换分区\ntotal 交换区总量\nfree 空闲交换区总量\nused 使用的交换区总量\navail Mem 缓冲的交换区总量\n* 第六行：各进程（任务）的状态监控\nPID 进程id\nUSER 进程所有者\nPR 进程优先级\nNI nice值。负值表示高优先级，正值表示低优先级\nVIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES\nRES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA\nSHR 共享内存大小，单位kb\nS 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程\n%CPU 上次更新到现在的CPU时间占用百分比\n%MEM 进程使用的物理内存百分比\nTIME+ 进程使用的CPU时间总计，单位1/100秒\nCOMMAND 进程名称（命令名/命令行）","source":"_posts/tuning/[1]Linux服务器性能评估与优化.md","raw":"\n---\ntitle: Linux服务器性能评估与优化\ndate: 2017-06-05 23:20:46\ncategories:\n    - tuning\ntags: \n    - Linux\n    - 性能优化\n---\n\n[Linux服务器性能评估与优化(一)](http://blog.csdn.net/hguisu/article/details/39373311)\n[Linux服务器性能评估与优化（二)](http://blog.csdn.net/hguisu/article/details/39249775)\n\n## 常用命令\n\n### vmstat 虚拟内存统计\n\n```markdown\nUsage:\n vmstat [options] [delay [count]]\n\nOptions:\n -a, --active           active/inactive memory\n -f, --forks            number of forks since boot\n -m, --slabs            slabinfo\n -n, --one-header       do not redisplay header\n -s, --stats            event counter statistics\n -d, --disk             disk statistics\n -D, --disk-sum         summarize disk statistics\n -p, --partition <dev>  partition specific statistics\n -S, --unit <char>      define display unit\n -w, --wide             wide output\n -t, --timestamp        show timestamp\n\n -h, --help     display this help and exit\n -V, --version  output version information and exit\n```\n服务器上使用vmstat命令可以看到如下的效果\n![vmstat-use](http://static.xcoder.ren/public/resource/vmstat-use.png)\n```markdown\n其中\n* r : 运行和等待 CPU 时间片的进程数。若该值大于系统 CPU 个数，则说明 CPU 不足\n* b : 表示等待资源的进程数\n* swpd : 切换到内存交换区的内存大小（单位 KB）\n* free： 空闲的物理内存的大小，我的机器内存总共2G，剩余92M。\n* buff： Linux/Unix系统是用来存储，目录里面有什么内容，权限等的缓存\n* cache：直接用来记忆我们打开的文件,给文件做缓冲，把空闲的物理内存的一部分拿来做文件和目录的缓存，是为了提高 程序执行的性能，当程序使用内存时，buffer/cached会很快地被使用\n* si：每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。\n* so：每秒虚拟内存写入磁盘的大小，如果这个值大于0，同上。\n* bi：块设备每秒接收的块数量（读磁盘）（kb/s）\n* bo：块设备每秒发送的块数量（写磁盘）（kb/s）\n* in：每秒CPU的中断次数，包括时间中断\n* cs：每秒上下文切换次数。\n* us：用户进程消耗 CPU 时间百分比\n* sy：内核进程消耗 CPU 时间百分比，sy 的值较高时，则说明内核消耗的 CPU 资源很多\n* id：空闲 CPU 时间百分比\n* wt：IO 等待 CPU 时间百分比\n```\n\n### uptime\n统计当前系统的运行情况\n``23:32:10 up 200 days,  3:40,  1 user,  load average: 0.19, 0.26, 0.31``\n目前的时间，运行了200天又3小时40分，当前有一个用户登录系统\nload average: 系统 1分钟，5分钟，15分钟的平均负荷\nload average数据是每隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了。\n\n### top\n```markdown\ntop - 23:35:10 up 200 days,  3:43,  1 user,  load average: 0.08, 0.21, 0.29\nTasks: 126 total,   1 running, 125 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  4.1 us,  0.8 sy,  0.0 ni, 95.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem :  8010848 total,   174372 free,  6457476 used,  1379000 buff/cache\nKiB Swap:        0 total,        0 free,        0 used.  1082080 avail Mem \n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    \n20153 root      20   0 6402660 3.002g   9772 S  10.6 39.3 328:58.18 java       \n11615 root      20   0 6033728 2.793g   7852 S   7.0 36.6 725:20.15 java       \n   13 root      20   0       0      0      0 S   0.3  0.0   1545:02 rcu_sched  \n10254 root      20   0  121508  11484   6860 S   0.3  0.1   5:12.94 AliYunDun  \n18145 squid     20   0   99152  12700   2044 S   0.3  0.2  15:36.16 squid      \n28430 root      20   0 5457384  99640      0 S   0.3  1.2   1628:24 logstash-f+\n    1 root      20   0  207080  21000   1328 S   0.0  0.3   4:38.77 systemd    \n    2 root      20   0       0      0      0 S   0.0  0.0   0:02.81 kthreadd   \n    3 root      20   0       0      0      0 S   0.0  0.0  22:46.50 ksoftirqd/0\n    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+\n    7 root      rt   0       0      0      0 S   0.0  0.0   2:23.37 migration/0\n    8 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcu_bh     \n    9 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/0    \n   10 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/1    \n   11 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/2    \n   12 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/3    \n   14 root      20   0       0      0      0 S   0.0  0.0   1039:11 rcuos/0    \n```\n其中\n* 第一行:同uptime命令\n* 第二行:Tasks 任务（进程）\n系统现在共有126个进程，其中处于运行中的有1个，125个在休眠（sleep），stoped状态的有0个，zombie状态（僵尸）的有0个。\n* 第三行:cpu状态\nus 用户空间占用CPU的百分比\nsy 内核空间占用CPU的百分比\nni 改变过优先级的进程占用CPU的百分比\nid 空闲CPU百分比\nwa IO等待占用CPU的百分比\nhi 硬中断（Hardware IRQ）占用CPU的百分比\nsi 软中断（Software Interrupts）占用CPU的百分比\n* 第四行：内存状态\ntotal 物理内存总量\nfree 空闲内存总量\nused 使用中的内存总量\nbuff/cache 缓存的内存量\n* 第五行：swap交换分区\ntotal 交换区总量\nfree 空闲交换区总量\nused 使用的交换区总量\navail Mem 缓冲的交换区总量\n* 第六行：各进程（任务）的状态监控\nPID 进程id\nUSER 进程所有者\nPR 进程优先级\nNI nice值。负值表示高优先级，正值表示低优先级\nVIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES\nRES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA\nSHR 共享内存大小，单位kb\nS 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程\n%CPU 上次更新到现在的CPU时间占用百分比\n%MEM 进程使用的物理内存百分比\nTIME+ 进程使用的CPU时间总计，单位1/100秒\nCOMMAND 进程名称（命令名/命令行）","slug":"tuning/[1]Linux服务器性能评估与优化","published":1,"updated":"2017-06-13T16:11:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs6002j9vvuo7ou10hb","content":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/39373311\" target=\"_blank\" rel=\"external\">Linux服务器性能评估与优化(一)</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/39249775\" target=\"_blank\" rel=\"external\">Linux服务器性能评估与优化（二)</a></p>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><h3 id=\"vmstat-虚拟内存统计\"><a href=\"#vmstat-虚拟内存统计\" class=\"headerlink\" title=\"vmstat 虚拟内存统计\"></a>vmstat 虚拟内存统计</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">Usage:</div><div class=\"line\"> vmstat [options] [delay [count]]</div><div class=\"line\"></div><div class=\"line\">Options:</div><div class=\"line\"> -a, --active           active/inactive memory</div><div class=\"line\"> -f, --forks            number of forks since boot</div><div class=\"line\"> -m, --slabs            slabinfo</div><div class=\"line\"> -n, --one-header       do not redisplay header</div><div class=\"line\"> -s, --stats            event counter statistics</div><div class=\"line\"> -d, --disk             disk statistics</div><div class=\"line\"> -D, --disk-sum         summarize disk statistics</div><div class=\"line\"> -p, --partition &lt;dev&gt;  partition specific statistics</div><div class=\"line\"> -S, --unit &lt;char&gt;      define display unit</div><div class=\"line\"> -w, --wide             wide output</div><div class=\"line\"> -t, --timestamp        show timestamp</div><div class=\"line\"></div><div class=\"line\"> -h, --help     display this help and exit</div><div class=\"line\"> -V, --version  output version information and exit</div></pre></td></tr></table></figure>\n<p>服务器上使用vmstat命令可以看到如下的效果<br><img src=\"http://static.xcoder.ren/public/resource/vmstat-use.png\" alt=\"vmstat-use\"><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">其中</div><div class=\"line\"><span class=\"bullet\">* </span>r : 运行和等待 CPU 时间片的进程数。若该值大于系统 CPU 个数，则说明 CPU 不足</div><div class=\"line\"><span class=\"bullet\">* </span>b : 表示等待资源的进程数</div><div class=\"line\"><span class=\"bullet\">* </span>swpd : 切换到内存交换区的内存大小（单位 KB）</div><div class=\"line\"><span class=\"bullet\">* </span>free： 空闲的物理内存的大小，我的机器内存总共2G，剩余92M。</div><div class=\"line\"><span class=\"bullet\">* </span>buff： Linux/Unix系统是用来存储，目录里面有什么内容，权限等的缓存</div><div class=\"line\"><span class=\"bullet\">* </span>cache：直接用来记忆我们打开的文件,给文件做缓冲，把空闲的物理内存的一部分拿来做文件和目录的缓存，是为了提高 程序执行的性能，当程序使用内存时，buffer/cached会很快地被使用</div><div class=\"line\"><span class=\"bullet\">* </span>si：每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。</div><div class=\"line\"><span class=\"bullet\">* </span>so：每秒虚拟内存写入磁盘的大小，如果这个值大于0，同上。</div><div class=\"line\"><span class=\"bullet\">* </span>bi：块设备每秒接收的块数量（读磁盘）（kb/s）</div><div class=\"line\"><span class=\"bullet\">* </span>bo：块设备每秒发送的块数量（写磁盘）（kb/s）</div><div class=\"line\"><span class=\"bullet\">* </span>in：每秒CPU的中断次数，包括时间中断</div><div class=\"line\"><span class=\"bullet\">* </span>cs：每秒上下文切换次数。</div><div class=\"line\"><span class=\"bullet\">* </span>us：用户进程消耗 CPU 时间百分比</div><div class=\"line\"><span class=\"bullet\">* </span>sy：内核进程消耗 CPU 时间百分比，sy 的值较高时，则说明内核消耗的 CPU 资源很多</div><div class=\"line\"><span class=\"bullet\">* </span>id：空闲 CPU 时间百分比</div><div class=\"line\"><span class=\"bullet\">* </span>wt：IO 等待 CPU 时间百分比</div></pre></td></tr></table></figure></p>\n<h3 id=\"uptime\"><a href=\"#uptime\" class=\"headerlink\" title=\"uptime\"></a>uptime</h3><p>统计当前系统的运行情况<br><code>23:32:10 up 200 days,  3:40,  1 user,  load average: 0.19, 0.26, 0.31</code><br>目前的时间，运行了200天又3小时40分，当前有一个用户登录系统<br>load average: 系统 1分钟，5分钟，15分钟的平均负荷<br>load average数据是每隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了。</p>\n<h3 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">top - 23:35:10 up 200 days,  3:43,  1 user,  load average: 0.08, 0.21, 0.29</div><div class=\"line\">Tasks: 126 total,   1 running, 125 sleeping,   0 stopped,   0 zombie</div><div class=\"line\">%Cpu(s):  4.1 us,  0.8 sy,  0.0 ni, 95.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</div><div class=\"line\">KiB Mem :  8010848 total,   174372 free,  6457476 used,  1379000 buff/cache</div><div class=\"line\">KiB Swap:        0 total,        0 free,        0 used.  1082080 avail Mem </div><div class=\"line\"></div><div class=\"line\">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    </div><div class=\"line\">20153 root      20   0 6402660 3.002g   9772 S  10.6 39.3 328:58.18 java       </div><div class=\"line\">11615 root      20   0 6033728 2.793g   7852 S   7.0 36.6 725:20.15 java       </div><div class=\"line\">   13 root      20   0       0      0      0 S   0.3  0.0   1545:02 rcu_sched  </div><div class=\"line\">10254 root      20   0  121508  11484   6860 S   0.3  0.1   5:12.94 AliYunDun  </div><div class=\"line\">18145 squid     20   0   99152  12700   2044 S   0.3  0.2  15:36.16 squid      </div><div class=\"line\">28430 root      20   0 5457384  99640      0 S   0.3  1.2   1628:24 logstash-f+</div><div class=\"line\"><span class=\"code\">    1 root      20   0  207080  21000   1328 S   0.0  0.3   4:38.77 systemd    </span></div><div class=\"line\"><span class=\"code\">    2 root      20   0       0      0      0 S   0.0  0.0   0:02.81 kthreadd   </span></div><div class=\"line\"><span class=\"code\">    3 root      20   0       0      0      0 S   0.0  0.0  22:46.50 ksoftirqd/0</span></div><div class=\"line\"><span class=\"code\">    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+</span></div><div class=\"line\"><span class=\"code\">    7 root      rt   0       0      0      0 S   0.0  0.0   2:23.37 migration/0</span></div><div class=\"line\"><span class=\"code\">    8 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcu_bh     </span></div><div class=\"line\"><span class=\"code\">    9 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/0    </span></div><div class=\"line\">   10 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/1    </div><div class=\"line\">   11 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/2    </div><div class=\"line\">   12 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/3    </div><div class=\"line\">   14 root      20   0       0      0      0 S   0.0  0.0   1039:11 rcuos/0</div></pre></td></tr></table></figure>\n<p>其中</p>\n<ul>\n<li>第一行:同uptime命令</li>\n<li>第二行:Tasks 任务（进程）<br>系统现在共有126个进程，其中处于运行中的有1个，125个在休眠（sleep），stoped状态的有0个，zombie状态（僵尸）的有0个。</li>\n<li>第三行:cpu状态<br>us 用户空间占用CPU的百分比<br>sy 内核空间占用CPU的百分比<br>ni 改变过优先级的进程占用CPU的百分比<br>id 空闲CPU百分比<br>wa IO等待占用CPU的百分比<br>hi 硬中断（Hardware IRQ）占用CPU的百分比<br>si 软中断（Software Interrupts）占用CPU的百分比</li>\n<li>第四行：内存状态<br>total 物理内存总量<br>free 空闲内存总量<br>used 使用中的内存总量<br>buff/cache 缓存的内存量</li>\n<li>第五行：swap交换分区<br>total 交换区总量<br>free 空闲交换区总量<br>used 使用的交换区总量<br>avail Mem 缓冲的交换区总量</li>\n<li>第六行：各进程（任务）的状态监控<br>PID 进程id<br>USER 进程所有者<br>PR 进程优先级<br>NI nice值。负值表示高优先级，正值表示低优先级<br>VIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br>RES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br>SHR 共享内存大小，单位kb<br>S 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程<br>%CPU 上次更新到现在的CPU时间占用百分比<br>%MEM 进程使用的物理内存百分比<br>TIME+ 进程使用的CPU时间总计，单位1/100秒<br>COMMAND 进程名称（命令名/命令行）</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://blog.csdn.net/hguisu/article/details/39373311\" target=\"_blank\" rel=\"external\">Linux服务器性能评估与优化(一)</a><br><a href=\"http://blog.csdn.net/hguisu/article/details/39249775\" target=\"_blank\" rel=\"external\">Linux服务器性能评估与优化（二)</a></p>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><h3 id=\"vmstat-虚拟内存统计\"><a href=\"#vmstat-虚拟内存统计\" class=\"headerlink\" title=\"vmstat 虚拟内存统计\"></a>vmstat 虚拟内存统计</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">Usage:</div><div class=\"line\"> vmstat [options] [delay [count]]</div><div class=\"line\"></div><div class=\"line\">Options:</div><div class=\"line\"> -a, --active           active/inactive memory</div><div class=\"line\"> -f, --forks            number of forks since boot</div><div class=\"line\"> -m, --slabs            slabinfo</div><div class=\"line\"> -n, --one-header       do not redisplay header</div><div class=\"line\"> -s, --stats            event counter statistics</div><div class=\"line\"> -d, --disk             disk statistics</div><div class=\"line\"> -D, --disk-sum         summarize disk statistics</div><div class=\"line\"> -p, --partition &lt;dev&gt;  partition specific statistics</div><div class=\"line\"> -S, --unit &lt;char&gt;      define display unit</div><div class=\"line\"> -w, --wide             wide output</div><div class=\"line\"> -t, --timestamp        show timestamp</div><div class=\"line\"></div><div class=\"line\"> -h, --help     display this help and exit</div><div class=\"line\"> -V, --version  output version information and exit</div></pre></td></tr></table></figure>\n<p>服务器上使用vmstat命令可以看到如下的效果<br><img src=\"http://static.xcoder.ren/public/resource/vmstat-use.png\" alt=\"vmstat-use\"><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">其中</div><div class=\"line\"><span class=\"bullet\">* </span>r : 运行和等待 CPU 时间片的进程数。若该值大于系统 CPU 个数，则说明 CPU 不足</div><div class=\"line\"><span class=\"bullet\">* </span>b : 表示等待资源的进程数</div><div class=\"line\"><span class=\"bullet\">* </span>swpd : 切换到内存交换区的内存大小（单位 KB）</div><div class=\"line\"><span class=\"bullet\">* </span>free： 空闲的物理内存的大小，我的机器内存总共2G，剩余92M。</div><div class=\"line\"><span class=\"bullet\">* </span>buff： Linux/Unix系统是用来存储，目录里面有什么内容，权限等的缓存</div><div class=\"line\"><span class=\"bullet\">* </span>cache：直接用来记忆我们打开的文件,给文件做缓冲，把空闲的物理内存的一部分拿来做文件和目录的缓存，是为了提高 程序执行的性能，当程序使用内存时，buffer/cached会很快地被使用</div><div class=\"line\"><span class=\"bullet\">* </span>si：每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。</div><div class=\"line\"><span class=\"bullet\">* </span>so：每秒虚拟内存写入磁盘的大小，如果这个值大于0，同上。</div><div class=\"line\"><span class=\"bullet\">* </span>bi：块设备每秒接收的块数量（读磁盘）（kb/s）</div><div class=\"line\"><span class=\"bullet\">* </span>bo：块设备每秒发送的块数量（写磁盘）（kb/s）</div><div class=\"line\"><span class=\"bullet\">* </span>in：每秒CPU的中断次数，包括时间中断</div><div class=\"line\"><span class=\"bullet\">* </span>cs：每秒上下文切换次数。</div><div class=\"line\"><span class=\"bullet\">* </span>us：用户进程消耗 CPU 时间百分比</div><div class=\"line\"><span class=\"bullet\">* </span>sy：内核进程消耗 CPU 时间百分比，sy 的值较高时，则说明内核消耗的 CPU 资源很多</div><div class=\"line\"><span class=\"bullet\">* </span>id：空闲 CPU 时间百分比</div><div class=\"line\"><span class=\"bullet\">* </span>wt：IO 等待 CPU 时间百分比</div></pre></td></tr></table></figure></p>\n<h3 id=\"uptime\"><a href=\"#uptime\" class=\"headerlink\" title=\"uptime\"></a>uptime</h3><p>统计当前系统的运行情况<br><code>23:32:10 up 200 days,  3:40,  1 user,  load average: 0.19, 0.26, 0.31</code><br>目前的时间，运行了200天又3小时40分，当前有一个用户登录系统<br>load average: 系统 1分钟，5分钟，15分钟的平均负荷<br>load average数据是每隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了。</p>\n<h3 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">top - 23:35:10 up 200 days,  3:43,  1 user,  load average: 0.08, 0.21, 0.29</div><div class=\"line\">Tasks: 126 total,   1 running, 125 sleeping,   0 stopped,   0 zombie</div><div class=\"line\">%Cpu(s):  4.1 us,  0.8 sy,  0.0 ni, 95.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</div><div class=\"line\">KiB Mem :  8010848 total,   174372 free,  6457476 used,  1379000 buff/cache</div><div class=\"line\">KiB Swap:        0 total,        0 free,        0 used.  1082080 avail Mem </div><div class=\"line\"></div><div class=\"line\">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    </div><div class=\"line\">20153 root      20   0 6402660 3.002g   9772 S  10.6 39.3 328:58.18 java       </div><div class=\"line\">11615 root      20   0 6033728 2.793g   7852 S   7.0 36.6 725:20.15 java       </div><div class=\"line\">   13 root      20   0       0      0      0 S   0.3  0.0   1545:02 rcu_sched  </div><div class=\"line\">10254 root      20   0  121508  11484   6860 S   0.3  0.1   5:12.94 AliYunDun  </div><div class=\"line\">18145 squid     20   0   99152  12700   2044 S   0.3  0.2  15:36.16 squid      </div><div class=\"line\">28430 root      20   0 5457384  99640      0 S   0.3  1.2   1628:24 logstash-f+</div><div class=\"line\"><span class=\"code\">    1 root      20   0  207080  21000   1328 S   0.0  0.3   4:38.77 systemd    </span></div><div class=\"line\"><span class=\"code\">    2 root      20   0       0      0      0 S   0.0  0.0   0:02.81 kthreadd   </span></div><div class=\"line\"><span class=\"code\">    3 root      20   0       0      0      0 S   0.0  0.0  22:46.50 ksoftirqd/0</span></div><div class=\"line\"><span class=\"code\">    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+</span></div><div class=\"line\"><span class=\"code\">    7 root      rt   0       0      0      0 S   0.0  0.0   2:23.37 migration/0</span></div><div class=\"line\"><span class=\"code\">    8 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcu_bh     </span></div><div class=\"line\"><span class=\"code\">    9 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/0    </span></div><div class=\"line\">   10 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/1    </div><div class=\"line\">   11 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/2    </div><div class=\"line\">   12 root      20   0       0      0      0 S   0.0  0.0   0:00.00 rcuob/3    </div><div class=\"line\">   14 root      20   0       0      0      0 S   0.0  0.0   1039:11 rcuos/0</div></pre></td></tr></table></figure>\n<p>其中</p>\n<ul>\n<li>第一行:同uptime命令</li>\n<li>第二行:Tasks 任务（进程）<br>系统现在共有126个进程，其中处于运行中的有1个，125个在休眠（sleep），stoped状态的有0个，zombie状态（僵尸）的有0个。</li>\n<li>第三行:cpu状态<br>us 用户空间占用CPU的百分比<br>sy 内核空间占用CPU的百分比<br>ni 改变过优先级的进程占用CPU的百分比<br>id 空闲CPU百分比<br>wa IO等待占用CPU的百分比<br>hi 硬中断（Hardware IRQ）占用CPU的百分比<br>si 软中断（Software Interrupts）占用CPU的百分比</li>\n<li>第四行：内存状态<br>total 物理内存总量<br>free 空闲内存总量<br>used 使用中的内存总量<br>buff/cache 缓存的内存量</li>\n<li>第五行：swap交换分区<br>total 交换区总量<br>free 空闲交换区总量<br>used 使用的交换区总量<br>avail Mem 缓冲的交换区总量</li>\n<li>第六行：各进程（任务）的状态监控<br>PID 进程id<br>USER 进程所有者<br>PR 进程优先级<br>NI nice值。负值表示高优先级，正值表示低优先级<br>VIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br>RES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br>SHR 共享内存大小，单位kb<br>S 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程<br>%CPU 上次更新到现在的CPU时间占用百分比<br>%MEM 进程使用的物理内存百分比<br>TIME+ 进程使用的CPU时间总计，单位1/100秒<br>COMMAND 进程名称（命令名/命令行）</li>\n</ul>\n"},{"title":"快速查找JVM中占用CPU线程排行","date":"2017-05-22T12:40:46.000Z","reward":true,"_content":"\n通过Github上的开源项目[awesome-scripts](https://github.com/superhj1987/awesome-scripts)\n\n这个项目是从https://github.com/oldratlee/useful-scripts fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。\n\n其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.\n\n```\n curl -sLk 'https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads' | bash\n ```\n<!--more-->\n\n直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.\n\n用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。\n\n适用于Linux，不适用于macOS\n\n![img](http://static.xcoder.ren/public/images/JVM-CPU-Threads.png)","source":"_posts/tuning/快速查找JVM中占用CPU线程排行.md","raw":"\n---\ntitle: 快速查找JVM中占用CPU线程排行\ndate: 2017-05-22 20:40:46\nreward: true\ncategories:\n    - tuning\ntags: \n    - JVM\n    - CPU\n    - Thread\n---\n\n通过Github上的开源项目[awesome-scripts](https://github.com/superhj1987/awesome-scripts)\n\n这个项目是从https://github.com/oldratlee/useful-scripts fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。\n\n其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.\n\n```\n curl -sLk 'https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads' | bash\n ```\n<!--more-->\n\n直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.\n\n用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。\n\n适用于Linux，不适用于macOS\n\n![img](http://static.xcoder.ren/public/images/JVM-CPU-Threads.png)","slug":"tuning/快速查找JVM中占用CPU线程排行","published":1,"updated":"2017-06-10T13:45:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwegs8002l9vvuuqj3kdsh","content":"<p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n<p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n<p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n<p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n<p>适用于Linux，不适用于macOS</p>\n<p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"<p>通过Github上的开源项目<a href=\"https://github.com/superhj1987/awesome-scripts\" target=\"_blank\" rel=\"external\">awesome-scripts</a></p>\n<p>这个项目是从<a href=\"https://github.com/oldratlee/useful-scripts\" target=\"_blank\" rel=\"external\">https://github.com/oldratlee/useful-scripts</a> fork来的，貌似是阿里运维人员的工具总结，只是awesome-scripts维护的更频繁。</p>\n<p>其中查询耗CPU的线程排行对于分析JVM程序调优很有用并且很方便.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -sLk &apos;https://raw.githubusercontent.com/superhj1987/awesome-scripts/master/java/bin/show-busy-java-threads&apos; | bash</div></pre></td></tr></table></figure>","more":"<p>直接执行以上命令可以显示当前Linux环境消耗CPU的线程排行top5.</p>\n<p>用于快速排查Java的CPU性能问题(top us值过高)，自动查出运行的Java进程中消耗CPU多的线程，并打印出其线程栈，从而确定导致性能问题的方法调用。</p>\n<p>适用于Linux，不适用于macOS</p>\n<p><img src=\"http://static.xcoder.ren/public/images/JVM-CPU-Threads.png\" alt=\"img\"></p>"},{"_content":"```markdown\nINFO  [Algolia] Testing HEXO_ALGOLIA_INDEXING_KEY permissions.\nINFO  Start processing\nINFO  [Algolia] Identified 32 posts to index.\nINFO  [Algolia] Start indexing...\nFATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html\nError\n    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)\n    at process._tickCallback (internal/process/next_tick.js:103:7)\nFATAL Not enough rights to update an object near line:1 column:32148\nError\n    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)\n    at process._tickCallback (internal/process/next_tick.js:103:7)\n```","source":"_posts/build/Hexo将内容添加到algolia中以供搜索.md","raw":"```markdown\nINFO  [Algolia] Testing HEXO_ALGOLIA_INDEXING_KEY permissions.\nINFO  Start processing\nINFO  [Algolia] Identified 32 posts to index.\nINFO  [Algolia] Start indexing...\nFATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html\nError\n    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)\n    at process._tickCallback (internal/process/next_tick.js:103:7)\nFATAL Not enough rights to update an object near line:1 column:32148\nError\n    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)\n    at process._tickCallback (internal/process/next_tick.js:103:7)\n```","slug":"build/Hexo将内容添加到algolia中以供搜索","published":1,"date":"2017-06-16T13:45:27.000Z","updated":"2017-06-16T13:45:27.000Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3zwptr40000kxvuqdvhvczk","content":"<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">INFO  [Algolia] Testing HEXO<span class=\"emphasis\">_ALGOLIA_</span>INDEXING_KEY permissions.</div><div class=\"line\">INFO  Start processing</div><div class=\"line\">INFO  [Algolia] Identified 32 posts to index.</div><div class=\"line\">INFO  [Algolia] Start indexing...</div><div class=\"line\">FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</div><div class=\"line\">Error</div><div class=\"line\"><span class=\"code\">    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)</span></div><div class=\"line\"><span class=\"code\">    at process._tickCallback (internal/process/next_tick.js:103:7)</span></div><div class=\"line\">FATAL Not enough rights to update an object near line:1 column:32148</div><div class=\"line\">Error</div><div class=\"line\"><span class=\"code\">    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)</span></div><div class=\"line\"><span class=\"code\">    at process._tickCallback (internal/process/next_tick.js:103:7)</span></div></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">INFO  [Algolia] Testing HEXO<span class=\"emphasis\">_ALGOLIA_</span>INDEXING_KEY permissions.</div><div class=\"line\">INFO  Start processing</div><div class=\"line\">INFO  [Algolia] Identified 32 posts to index.</div><div class=\"line\">INFO  [Algolia] Start indexing...</div><div class=\"line\">FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</div><div class=\"line\">Error</div><div class=\"line\"><span class=\"code\">    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)</span></div><div class=\"line\"><span class=\"code\">    at process._tickCallback (internal/process/next_tick.js:103:7)</span></div><div class=\"line\">FATAL Not enough rights to update an object near line:1 column:32148</div><div class=\"line\">Error</div><div class=\"line\"><span class=\"code\">    at success (/Users/UOrder/zhaoyin.github.io/node_modules/algoliasearch/src/AlgoliaSearchCore.js:335:32)</span></div><div class=\"line\"><span class=\"code\">    at process._tickCallback (internal/process/next_tick.js:103:7)</span></div></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj3zwegqs00049vvu09s4yp94","category_id":"cj3zwegqy00069vvutjoe76ro","_id":"cj3zwegr6000e9vvu9marrv8t"},{"post_id":"cj3zwegqw00059vvuznb8fh8p","category_id":"cj3zwegr4000b9vvut7631ol4","_id":"cj3zwegr9000k9vvuxlfq6ec1"},{"post_id":"cj3zwegr8000i9vvuety8dv2c","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrc000p9vvum1gus0mp"},{"post_id":"cj3zwegqz00089vvuc8jbiefa","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrd000t9vvun7mvkl08"},{"post_id":"cj3zwegr9000j9vvu3crcs1gk","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrf000x9vvufm72h0xh"},{"post_id":"cj3zwegrb000n9vvujuw39a2c","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrg00109vvuw1efkk43"},{"post_id":"cj3zwegr200099vvu0xs9y8x9","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrh00139vvuon9he95t"},{"post_id":"cj3zwegrc000q9vvu05cm2o0a","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrj00169vvu962jm2lv"},{"post_id":"cj3zwegre000v9vvuuh4n6f7t","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrk00199vvutzowo3pp"},{"post_id":"cj3zwegr3000a9vvulp5ee4m9","category_id":"cj3zwegr4000b9vvut7631ol4","_id":"cj3zwegrn001d9vvujp718e0t"},{"post_id":"cj3zwegrf000y9vvu2hhp0qog","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegro001h9vvu17upuqxg"},{"post_id":"cj3zwegr5000d9vvu2055smwh","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrp001k9vvuq0c77cir"},{"post_id":"cj3zwegr6000f9vvubvtgyfg8","category_id":"cj3zwegr7000g9vvu451kifq2","_id":"cj3zwegrs001n9vvux0ri5dcs"},{"post_id":"cj3zwegrn001e9vvu7vc1kvm8","category_id":"cj3zwegrm001c9vvulgobuvtk","_id":"cj3zwegrs001q9vvurav42lhv"},{"post_id":"cj3zwegrh00119vvuan704k5l","category_id":"cj3zwegrm001c9vvulgobuvtk","_id":"cj3zwegrt001t9vvueso0qc29"},{"post_id":"cj3zwegrh00149vvu5844024p","category_id":"cj3zwegrm001c9vvulgobuvtk","_id":"cj3zwegru001w9vvumbbrq2ty"},{"post_id":"cj3zwegrj00179vvu73b9063v","category_id":"cj3zwegrm001c9vvulgobuvtk","_id":"cj3zwegrz00239vvuks6nl2ix"},{"post_id":"cj3zwegrk001a9vvutzpj1md2","category_id":"cj3zwegrm001c9vvulgobuvtk","_id":"cj3zwegs200289vvufb2lo11y"},{"post_id":"cj3zwegro001i9vvuhj11mms2","category_id":"cj3zwegrz00249vvugjf4k8l0","_id":"cj3zwegs5002g9vvu51f9yo4y"},{"post_id":"cj3zwegrq001m9vvuvfr1edau","category_id":"cj3zwegs4002b9vvupwj7xgdi","_id":"cj3zwegs8002m9vvujerh16z5"},{"post_id":"cj3zwegrs001p9vvutgt5w1ex","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsa002p9vvudt9sug6h"},{"post_id":"cj3zwegrs001s9vvuep7g8dov","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsb002u9vvun8vtl1c3"},{"post_id":"cj3zwegrt001u9vvuswfdths7","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsb002x9vvulzlmabr0"},{"post_id":"cj3zwegrv001z9vvuy8yzzsiu","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsc00309vvu9uoaffne"},{"post_id":"cj3zwegrw00219vvu4q173nz6","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsc00349vvuj517ul03"},{"post_id":"cj3zwegs000269vvuxvzf5mtb","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegsd00399vvuyv6q4bwr"},{"post_id":"cj3zwegs100279vvuz325mfm9","category_id":"cj3zwegs6002i9vvuj45p826i","_id":"cj3zwegse003c9vvuyrdkrzfl"},{"post_id":"cj3zwegs2002a9vvu19l2kih6","category_id":"cj3zwegsd003a9vvuihnwt6xg","_id":"cj3zwegsf003g9vvub2mfngje"},{"post_id":"cj3zwegs4002d9vvu5vl2s2nt","category_id":"cj3zwegsd003a9vvuihnwt6xg","_id":"cj3zwegsg003l9vvun2hzvs4w"},{"post_id":"cj3zwegs5002h9vvumbcnpb2b","category_id":"cj3zwegsd003a9vvuihnwt6xg","_id":"cj3zwegsi003o9vvuf7jub8d2"},{"post_id":"cj3zwegs6002j9vvuo7ou10hb","category_id":"cj3zwegsd003a9vvuihnwt6xg","_id":"cj3zwegsj003r9vvudx5uhvvl"},{"post_id":"cj3zwegs8002l9vvuuqj3kdsh","category_id":"cj3zwegsd003a9vvuihnwt6xg","_id":"cj3zwegsj003v9vvuf3ja0fev"}],"PostTag":[{"post_id":"cj3zwegqs00049vvu09s4yp94","tag_id":"cj3zwegqz00079vvu7dfdn4i7","_id":"cj3zwegrc000o9vvuktkumd59"},{"post_id":"cj3zwegqs00049vvu09s4yp94","tag_id":"cj3zwegr4000c9vvu8ivm2qk1","_id":"cj3zwegrd000r9vvu69elkd3z"},{"post_id":"cj3zwegqs00049vvu09s4yp94","tag_id":"cj3zwegr7000h9vvuo6qbfhoh","_id":"cj3zwegre000w9vvuvyd2l0sz"},{"post_id":"cj3zwegqw00059vvuznb8fh8p","tag_id":"cj3zwegr9000m9vvu1ac6xens","_id":"cj3zwegrl001b9vvu29vgyu8x"},{"post_id":"cj3zwegqw00059vvuznb8fh8p","tag_id":"cj3zwegre000u9vvu73quuumz","_id":"cj3zwegrn001f9vvugv0apd3v"},{"post_id":"cj3zwegqw00059vvuznb8fh8p","tag_id":"cj3zwegrh00129vvudum6q74e","_id":"cj3zwegrp001j9vvu888lm7mt"},{"post_id":"cj3zwegqz00089vvuc8jbiefa","tag_id":"cj3zwegrk00189vvu3a4k6hbn","_id":"cj3zwegru001y9vvurnon1nf8"},{"post_id":"cj3zwegqz00089vvuc8jbiefa","tag_id":"cj3zwegro001g9vvu4ee79w2v","_id":"cj3zwegrw00209vvu4ckovoi6"},{"post_id":"cj3zwegqz00089vvuc8jbiefa","tag_id":"cj3zwegrs001o9vvu6tb7uxz6","_id":"cj3zwegs000259vvurvykx6rv"},{"post_id":"cj3zwegr200099vvu0xs9y8x9","tag_id":"cj3zwegru001v9vvu63upq8kr","_id":"cj3zwegs4002c9vvu80eyetl6"},{"post_id":"cj3zwegr200099vvu0xs9y8x9","tag_id":"cj3zwegry00229vvumjgz4gpm","_id":"cj3zwegs5002e9vvu6bfllw2r"},{"post_id":"cj3zwegr3000a9vvulp5ee4m9","tag_id":"cj3zwegr9000m9vvu1ac6xens","_id":"cj3zwegsa002r9vvufieal7vm"},{"post_id":"cj3zwegr3000a9vvulp5ee4m9","tag_id":"cj3zwegre000u9vvu73quuumz","_id":"cj3zwegsa002s9vvufvqgy28u"},{"post_id":"cj3zwegr3000a9vvulp5ee4m9","tag_id":"cj3zwegs8002k9vvunsw8ynmw","_id":"cj3zwegsb002w9vvu38cyjdka"},{"post_id":"cj3zwegr5000d9vvu2055smwh","tag_id":"cj3zwegs9002o9vvuozc38j9p","_id":"cj3zwegsc00339vvuq5zvuvii"},{"post_id":"cj3zwegr5000d9vvu2055smwh","tag_id":"cj3zwegsa002t9vvupc7rx7zx","_id":"cj3zwegsc00359vvuft5arq1y"},{"post_id":"cj3zwegr5000d9vvu2055smwh","tag_id":"cj3zwegsb002y9vvuj5vpmrgu","_id":"cj3zwegsd00389vvuuv8ntjj6"},{"post_id":"cj3zwegr6000f9vvubvtgyfg8","tag_id":"cj3zwegrk00189vvu3a4k6hbn","_id":"cj3zwegsf003f9vvuqbp6agpl"},{"post_id":"cj3zwegr6000f9vvubvtgyfg8","tag_id":"cj3zwegsd00379vvu1h7fk4jk","_id":"cj3zwegsf003i9vvu9vm0zvfc"},{"post_id":"cj3zwegr6000f9vvubvtgyfg8","tag_id":"cj3zwegsd003b9vvu4u9o651o","_id":"cj3zwegsg003k9vvuz0ucdtb9"},{"post_id":"cj3zwegr8000i9vvuety8dv2c","tag_id":"cj3zwegse003e9vvu020dazgy","_id":"cj3zwegsj003s9vvu73fpryl7"},{"post_id":"cj3zwegr8000i9vvuety8dv2c","tag_id":"cj3zwegsg003j9vvuiyrqhaxd","_id":"cj3zwegsj003t9vvuh4yzjuq3"},{"post_id":"cj3zwegr8000i9vvuety8dv2c","tag_id":"cj3zwegsh003n9vvuj7b2sgu8","_id":"cj3zwegsj003w9vvuz9xa5lt4"},{"post_id":"cj3zwegr9000j9vvu3crcs1gk","tag_id":"cj3zwegsi003q9vvudxq1zhl1","_id":"cj3zwegsj003y9vvuavuv8hjh"},{"post_id":"cj3zwegr9000j9vvu3crcs1gk","tag_id":"cj3zwegsj003u9vvuqvqd1rz0","_id":"cj3zwegsj003z9vvu6minc7is"},{"post_id":"cj3zwegrb000n9vvujuw39a2c","tag_id":"cj3zwegsj003x9vvu5f55xjdv","_id":"cj3zwegsk00439vvuo77r3nxh"},{"post_id":"cj3zwegrb000n9vvujuw39a2c","tag_id":"cj3zwegsk00409vvu0cxl1z2i","_id":"cj3zwegsl00449vvuksmbzsp3"},{"post_id":"cj3zwegrb000n9vvujuw39a2c","tag_id":"cj3zwegsk00419vvu4yewnlyt","_id":"cj3zwegsl00469vvu14hdiy6l"},{"post_id":"cj3zwegrc000q9vvu05cm2o0a","tag_id":"cj3zwegs9002o9vvuozc38j9p","_id":"cj3zwegsm00489vvuycnm182u"},{"post_id":"cj3zwegrc000q9vvu05cm2o0a","tag_id":"cj3zwegsl00459vvu0490u2y6","_id":"cj3zwegsm00499vvumkwftf6l"},{"post_id":"cj3zwegre000v9vvuuh4n6f7t","tag_id":"cj3zwegsi003q9vvudxq1zhl1","_id":"cj3zwegsn004c9vvuaytb1tgz"},{"post_id":"cj3zwegre000v9vvuuh4n6f7t","tag_id":"cj3zwegsm004a9vvuvhczkb05","_id":"cj3zwegsn004d9vvuly81jdk0"},{"post_id":"cj3zwegrf000y9vvu2hhp0qog","tag_id":"cj3zwegsn004b9vvuwnexwaw6","_id":"cj3zwegsn004g9vvuh975ydlg"},{"post_id":"cj3zwegrf000y9vvu2hhp0qog","tag_id":"cj3zwegsn004e9vvuv016i9ok","_id":"cj3zwegsn004h9vvurwm5bxls"},{"post_id":"cj3zwegrh00119vvuan704k5l","tag_id":"cj3zwegru001v9vvu63upq8kr","_id":"cj3zwegso004k9vvucyz0f3fp"},{"post_id":"cj3zwegrh00119vvuan704k5l","tag_id":"cj3zwegso004i9vvuf94kcrwr","_id":"cj3zwegso004l9vvu13km1hpz"},{"post_id":"cj3zwegrh00149vvu5844024p","tag_id":"cj3zwegru001v9vvu63upq8kr","_id":"cj3zwegsp004o9vvu48kym8wb"},{"post_id":"cj3zwegrh00149vvu5844024p","tag_id":"cj3zwegso004m9vvug2455fun","_id":"cj3zwegsp004p9vvu0903u06b"},{"post_id":"cj3zwegrj00179vvu73b9063v","tag_id":"cj3zwegso004n9vvuwacju4v9","_id":"cj3zwegsp004s9vvuuwya2l20"},{"post_id":"cj3zwegrj00179vvu73b9063v","tag_id":"cj3zwegsp004q9vvuih1ciavm","_id":"cj3zwegsp004t9vvu3fhdyx9t"},{"post_id":"cj3zwegrk001a9vvutzpj1md2","tag_id":"cj3zwegsp004r9vvu42nyphjc","_id":"cj3zwegsp004w9vvuq1i8crv2"},{"post_id":"cj3zwegrk001a9vvutzpj1md2","tag_id":"cj3zwegsp004u9vvuhmben3hh","_id":"cj3zwegsp004x9vvu92o28g32"},{"post_id":"cj3zwegrn001e9vvu7vc1kvm8","tag_id":"cj3zwegsp004v9vvu618bjjcv","_id":"cj3zwegsq00519vvu62ssnyet"},{"post_id":"cj3zwegrn001e9vvu7vc1kvm8","tag_id":"cj3zwegsp004y9vvumei6yds7","_id":"cj3zwegsq00529vvuqlaxkpw5"},{"post_id":"cj3zwegrn001e9vvu7vc1kvm8","tag_id":"cj3zwegsq004z9vvuwa63zeye","_id":"cj3zwegsr00549vvuseywk26l"},{"post_id":"cj3zwegro001i9vvuhj11mms2","tag_id":"cj3zwegsq00509vvutrae9gqd","_id":"cj3zwegsr00569vvui5h89cva"},{"post_id":"cj3zwegro001i9vvuhj11mms2","tag_id":"cj3zwegsq00539vvukv5djace","_id":"cj3zwegsr00579vvuocfgkmyd"},{"post_id":"cj3zwegrq001m9vvuvfr1edau","tag_id":"cj3zwegsr00559vvuh3lterwv","_id":"cj3zwegss005a9vvuoo6lstch"},{"post_id":"cj3zwegrq001m9vvuvfr1edau","tag_id":"cj3zwegsr00589vvuogi505t7","_id":"cj3zwegss005b9vvuf0dilii9"},{"post_id":"cj3zwegrs001p9vvutgt5w1ex","tag_id":"cj3zwegss00599vvuz26jrgkt","_id":"cj3zwegst005f9vvuj4gudzjp"},{"post_id":"cj3zwegrs001p9vvutgt5w1ex","tag_id":"cj3zwegss005c9vvuuphubaor","_id":"cj3zwegst005g9vvuqw94spov"},{"post_id":"cj3zwegrs001p9vvutgt5w1ex","tag_id":"cj3zwegss005d9vvujbgyu6fs","_id":"cj3zwegst005i9vvusvj76ray"},{"post_id":"cj3zwegrs001s9vvuep7g8dov","tag_id":"cj3zwegss005c9vvuuphubaor","_id":"cj3zwegsu005l9vvujg0zj37q"},{"post_id":"cj3zwegrs001s9vvuep7g8dov","tag_id":"cj3zwegst005h9vvuakrlezo1","_id":"cj3zwegsu005m9vvul6w2hdy2"},{"post_id":"cj3zwegrs001s9vvuep7g8dov","tag_id":"cj3zwegst005j9vvu2zj9zvoc","_id":"cj3zwegsu005o9vvuswznid55"},{"post_id":"cj3zwegrt001u9vvuswfdths7","tag_id":"cj3zwegsu005k9vvujiro9fmx","_id":"cj3zwegsv005q9vvu3kjn4sii"},{"post_id":"cj3zwegrt001u9vvuswfdths7","tag_id":"cj3zwegsu005n9vvuarlppyah","_id":"cj3zwegsv005r9vvukd9kg0d5"},{"post_id":"cj3zwegrv001z9vvuy8yzzsiu","tag_id":"cj3zwegsv005p9vvun4z711qu","_id":"cj3zwegsw005v9vvuuyl1rzok"},{"post_id":"cj3zwegrv001z9vvuy8yzzsiu","tag_id":"cj3zwegsv005s9vvu1lz57ard","_id":"cj3zwegsw005w9vvufawufcbb"},{"post_id":"cj3zwegrv001z9vvuy8yzzsiu","tag_id":"cj3zwegsw005t9vvum3q88423","_id":"cj3zwegsw005y9vvuaq7f7iy3"},{"post_id":"cj3zwegrw00219vvu4q173nz6","tag_id":"cj3zwegsw005u9vvuuxo70nhj","_id":"cj3zwegsw005z9vvuifqss0rs"},{"post_id":"cj3zwegs000269vvuxvzf5mtb","tag_id":"cj3zwegsw005x9vvuge54z3y6","_id":"cj3zwegsx00629vvujcrlpwlz"},{"post_id":"cj3zwegs000269vvuxvzf5mtb","tag_id":"cj3zwegsw00609vvukkf8z6wz","_id":"cj3zwegsx00639vvuz20vl6u1"},{"post_id":"cj3zwegs000269vvuxvzf5mtb","tag_id":"cj3zwegru001v9vvu63upq8kr","_id":"cj3zwegsx00659vvuwyixdfaw"},{"post_id":"cj3zwegs100279vvuz325mfm9","tag_id":"cj3zwegsx00619vvujqb1uwta","_id":"cj3zwegsy00689vvuoc63fpp7"},{"post_id":"cj3zwegs100279vvuz325mfm9","tag_id":"cj3zwegsx00649vvuehbvaaaw","_id":"cj3zwegsy00699vvutb0is73v"},{"post_id":"cj3zwegs100279vvuz325mfm9","tag_id":"cj3zwegsx00669vvu45ohvj11","_id":"cj3zwegsy006b9vvu8oatz9il"},{"post_id":"cj3zwegs2002a9vvu19l2kih6","tag_id":"cj3zwegsp004v9vvu618bjjcv","_id":"cj3zwegsy006d9vvucnp25wzq"},{"post_id":"cj3zwegs2002a9vvu19l2kih6","tag_id":"cj3zwegsy006a9vvu37pce6ru","_id":"cj3zwegsy006e9vvum3ucc4s4"},{"post_id":"cj3zwegs4002d9vvu5vl2s2nt","tag_id":"cj3zwegsy006c9vvu0sgra3qj","_id":"cj3zwegsz006g9vvudrisnltd"},{"post_id":"cj3zwegs5002h9vvumbcnpb2b","tag_id":"cj3zwegsz006f9vvucczzhrs6","_id":"cj3zwegt0006j9vvu50clx6za"},{"post_id":"cj3zwegs5002h9vvumbcnpb2b","tag_id":"cj3zwegsy006a9vvu37pce6ru","_id":"cj3zwegt0006k9vvurtbv2l1f"},{"post_id":"cj3zwegs5002h9vvumbcnpb2b","tag_id":"cj3zwegru001v9vvu63upq8kr","_id":"cj3zwegt0006m9vvudly8ajwh"},{"post_id":"cj3zwegs6002j9vvuo7ou10hb","tag_id":"cj3zwegsz006i9vvubpdylkj6","_id":"cj3zwegt1006o9vvuvc0xwgyz"},{"post_id":"cj3zwegs6002j9vvuo7ou10hb","tag_id":"cj3zwegsy006a9vvu37pce6ru","_id":"cj3zwegt1006p9vvugwtoq40d"},{"post_id":"cj3zwegs8002l9vvuuqj3kdsh","tag_id":"cj3zwegsz006f9vvucczzhrs6","_id":"cj3zwegt1006s9vvuowg1b8mb"},{"post_id":"cj3zwegs8002l9vvuuqj3kdsh","tag_id":"cj3zwegt1006q9vvuconoul6w","_id":"cj3zwegt2006t9vvuc6z6ptyt"},{"post_id":"cj3zwegs8002l9vvuuqj3kdsh","tag_id":"cj3zwegt1006r9vvuh6rnwqhy","_id":"cj3zwegt2006u9vvurrodzi4w"}],"Tag":[{"name":"Scrapy","_id":"cj3zwegqz00079vvu7dfdn4i7"},{"name":"Spider","_id":"cj3zwegr4000c9vvu8ivm2qk1"},{"name":"python","_id":"cj3zwegr7000h9vvuo6qbfhoh"},{"name":"架构设计","_id":"cj3zwegr9000m9vvu1ac6xens"},{"name":"SAAS","_id":"cj3zwegre000u9vvu73quuumz"},{"name":"微服务","_id":"cj3zwegrh00129vvudum6q74e"},{"name":"centos7","_id":"cj3zwegrk00189vvu3a4k6hbn"},{"name":"git","_id":"cj3zwegro001g9vvu4ee79w2v"},{"name":"yum","_id":"cj3zwegrs001o9vvu6tb7uxz6"},{"name":"JAVA","_id":"cj3zwegru001v9vvu63upq8kr"},{"name":"证书","_id":"cj3zwegry00229vvumjgz4gpm"},{"name":"互联网应用架构","_id":"cj3zwegs8002k9vvunsw8ynmw"},{"name":"Hexo","_id":"cj3zwegs9002o9vvuozc38j9p"},{"name":"travis CI","_id":"cj3zwegsa002t9vvupc7rx7zx"},{"name":"GitHub","_id":"cj3zwegsb002y9vvuj5vpmrgu"},{"name":"firewalld","_id":"cj3zwegsd00379vvu1h7fk4jk"},{"name":"防火墙","_id":"cj3zwegsd003b9vvu4u9o651o"},{"name":"jackson","_id":"cj3zwegse003e9vvu020dazgy"},{"name":"反序列化","_id":"cj3zwegsg003j9vvuiyrqhaxd"},{"name":"JsonMappingException","_id":"cj3zwegsh003n9vvuj7b2sgu8"},{"name":"运维","_id":"cj3zwegsi003q9vvudxq1zhl1"},{"name":"logstash-forwarder","_id":"cj3zwegsj003u9vvuqvqd1rz0"},{"name":"jetty","_id":"cj3zwegsj003x9vvu5f55xjdv"},{"name":"maven","_id":"cj3zwegsk00409vvu0cxl1z2i"},{"name":"config","_id":"cj3zwegsk00419vvu4yewnlyt"},{"name":"NexT","_id":"cj3zwegsl00459vvu0490u2y6"},{"name":"HTTPS","_id":"cj3zwegsm004a9vvuvhczkb05"},{"name":"Node.js","_id":"cj3zwegsn004b9vvuwnexwaw6"},{"name":"pm2","_id":"cj3zwegsn004e9vvuv016i9ok"},{"name":"Stream","_id":"cj3zwegso004i9vvuf94kcrwr"},{"name":"keytool","_id":"cj3zwegso004m9vvug2455fun"},{"name":"memcached","_id":"cj3zwegso004n9vvuwacju4v9"},{"name":"缓存","_id":"cj3zwegsp004q9vvuih1ciavm"},{"name":"YAML","_id":"cj3zwegsp004r9vvu42nyphjc"},{"name":"yml","_id":"cj3zwegsp004u9vvuhmben3hh"},{"name":"mysql","_id":"cj3zwegsp004v9vvu618bjjcv"},{"name":"死锁","_id":"cj3zwegsp004y9vvumei6yds7"},{"name":"事务","_id":"cj3zwegsq004z9vvuwa63zeye"},{"name":"2B","_id":"cj3zwegsq00509vvutrae9gqd"},{"name":"2C","_id":"cj3zwegsq00539vvukv5djace"},{"name":"领域元数据","_id":"cj3zwegsr00559vvuh3lterwv"},{"name":"建模","_id":"cj3zwegsr00589vvuogi505t7"},{"name":"JetBrains","_id":"cj3zwegss00599vvuz26jrgkt"},{"name":"IntelliJ Idea","_id":"cj3zwegss005c9vvuuphubaor"},{"name":"IDE","_id":"cj3zwegss005d9vvujbgyu6fs"},{"name":"play1","_id":"cj3zwegst005h9vvuakrlezo1"},{"name":"playframework","_id":"cj3zwegst005j9vvu2zj9zvoc"},{"name":"Mybatis","_id":"cj3zwegsu005k9vvujiro9fmx"},{"name":"mapper","_id":"cj3zwegsu005n9vvuarlppyah"},{"name":"POI","_id":"cj3zwegsv005p9vvun4z711qu"},{"name":"Excel","_id":"cj3zwegsv005s9vvu1lz57ard"},{"name":"高效","_id":"cj3zwegsw005t9vvum3q88423"},{"name":"vim","_id":"cj3zwegsw005u9vvuuxo70nhj"},{"name":"Spring","_id":"cj3zwegsw005x9vvuge54z3y6"},{"name":"Spring Boot","_id":"cj3zwegsw00609vvukkf8z6wz"},{"name":"Hibernate","_id":"cj3zwegsx00619vvujqb1uwta"},{"name":"HQL","_id":"cj3zwegsx00649vvuehbvaaaw"},{"name":"Cross Join","_id":"cj3zwegsx00669vvu45ohvj11"},{"name":"性能优化","_id":"cj3zwegsy006a9vvu37pce6ru"},{"name":"TCP","_id":"cj3zwegsy006c9vvu0sgra3qj"},{"name":"JVM","_id":"cj3zwegsz006f9vvucczzhrs6"},{"name":"Linux","_id":"cj3zwegsz006i9vvubpdylkj6"},{"name":"CPU","_id":"cj3zwegt1006q9vvuconoul6w"},{"name":"Thread","_id":"cj3zwegt1006r9vvuh6rnwqhy"}]}}